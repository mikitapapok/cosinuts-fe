"use strict";(self.webpackChunka=self.webpackChunka||[]).push([[179],{2011:(ae,Z,R)=>{R.d(Z,{Dh:()=>ee,GT:()=>re,cc:()=>Te,hO:()=>we,on:()=>B,pX:()=>q,xv:()=>K});var h=R(4650),z=R(9260),F=R(263);ae=R.hmd(ae);const ne=["ngOnDestroy"],q=(he,Ze,Ye,Me={})=>new Proxy(he,{get:(De,Pe)=>Ye.runOutsideAngular(()=>{var We;if(he[Pe])return!(null===(We=Me?.spy)||void 0===We)&&We.get&&Me.spy.get(Pe,he[Pe]),he[Pe];if(ne.indexOf(Pe)>-1)return()=>{};const nt=Ze.toPromise().then(Q=>{const Oe=Q&&Q[Pe];return"function"==typeof Oe?Oe.bind(Q):Oe&&Oe.then?Oe.then(se=>Ye.run(()=>se)):Ye.run(()=>Oe)});return new Proxy(()=>{},{get:(Q,Oe)=>nt[Oe],apply:(Q,Oe,se)=>nt.then(de=>{var ve;const ye=de&&de(...se);return!(null===(ve=Me?.spy)||void 0===ve)&&ve.apply&&Me.spy.apply(Pe,se,ye),ye})})})}),re=(he,Ze)=>{Ze.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Me=>{Object.defineProperty(he.prototype,Me,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Me))})})};class X{constructor(Ze){return Ze}}const ee=new h.OlP("angularfire2.app.options"),K=new h.OlP("angularfire2.app.name");function B(he,Ze,Ye){const De="object"==typeof Ye&&Ye||{};De.name=De.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const We=z.Z.apps.filter(nt=>nt&&nt.name===De.name)[0]||Ze.runOutsideAngular(()=>z.Z.initializeApp(he,De));try{JSON.stringify(he)!==JSON.stringify(We.options)&&j("error",`${We.name} Firebase App already initialized with different options${ae.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new X(We)}const j=(he,...Ze)=>{(0,h.X6Q)()&&typeof console<"u"&&console[he](...Ze)},G={provide:X,useFactory:B,deps:[ee,h.R0b,[new h.FiY,K]]};let we=(()=>{class he{constructor(Ye){z.Z.registerVersion("angularfire",F.q4.full,"core"),z.Z.registerVersion("angularfire",F.q4.full,"app-compat"),z.Z.registerVersion("angular",h.q4F.full,Ye.toString())}static initializeApp(Ye,Me){return{ngModule:he,providers:[{provide:ee,useValue:Ye},{provide:K,useValue:Me}]}}}return he.\u0275fac=function(Ye){return new(Ye||he)(h.LFG(h.Lbi))},he.\u0275mod=h.oAB({type:he}),he.\u0275inj=h.cJS({providers:[G]}),he})();function Te(he,Ze,Ye,Me,De){const[,Pe,We]=globalThis.\u0275AngularfireInstanceCache.find(nt=>nt[0]===he)||[];if(Pe)return function Ee(he,Ze){try{return he.toString()===Ze.toString()}catch{return he===Ze}}(De,We)||(Ie("error",`${Ze} was already initialized on the ${Ye} Firebase App with different settings.${Qe?" You may need to reload as Firebase is not HMR aware.":""}`),Ie("warn",{is:De,was:We})),Pe;{const nt=Me();return globalThis.\u0275AngularfireInstanceCache.push([he,nt,De]),nt}}const Qe=!!ae.hot,Ie=(he,...Ze)=>{(0,h.X6Q)()&&typeof console<"u"&&console[he](...Ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},263:(ae,Z,R)=>{R.d(Z,{q4:()=>rn,iC:()=>Mu,fc:()=>Lc,HU:()=>Js,vb:()=>ka,JM:()=>ap});var h=R(4650),z=R(259),F=R(5861),ne=R(9681),q=R(2090),re=R(4859),X=R(1877),ee=R(8766);const K="@firebase/installations",B="0.6.0",G=`w:${B}`,we="FIS_v2",Ze=new q.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(T){return T instanceof q.ZR&&T.code.includes("request-failed")}function Me({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function De(T){return{token:T.token,requestStatus:2,expiresIn:de(T.expiresIn),creationTime:Date.now()}}function Pe(T,A){return We.apply(this,arguments)}function We(){return(We=(0,F.Z)(function*(T,A){const $=(yield A.json()).error;return Ze.create("request-failed",{requestName:T,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function nt({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Q(T,{refreshToken:A}){const k=nt(T);return k.append("Authorization",function ve(T){return`${we} ${T}`}(A)),k}function Oe(T){return se.apply(this,arguments)}function se(){return(se=(0,F.Z)(function*(T){const A=yield T();return A.status>=500&&A.status<600?T():A})).apply(this,arguments)}function de(T){return Number(T.replace("s","000"))}function ye(T,A){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:A},{fid:k}){const $=Me(T),ue=nt(T),me=A.getImmediate({optional:!0});if(me){const Mt=yield me.getHeartbeatsHeader();Mt&&ue.append("x-firebase-client",Mt)}const ot={method:"POST",headers:ue,body:JSON.stringify({fid:k,authVersion:we,appId:T.appId,sdkVersion:G})},Tt=yield Oe(()=>fetch($,ot));if(Tt.ok){const Mt=yield Tt.json();return{fid:Mt.fid||k,registrationStatus:2,refreshToken:Mt.refreshToken,authToken:De(Mt.authToken)}}throw yield Pe("Create Installation",Tt)})).apply(this,arguments)}function ze(T){return new Promise(A=>{setTimeout(A,T)})}const on=/^[cdef][\w-]{21}$/;function dt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const k=function wn(T){return function St(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return on.test(k)?k:""}catch{return""}}function xn(T){return`${T.appName}!${T.appId}`}const an=new Map;function tn(T,A){const k=xn(T);bn(k,A),function li(T,A){const k=function Tr(){return!Vr&&"BroadcastChannel"in self&&(Vr=new BroadcastChannel("[Firebase] FID Change"),Vr.onmessage=T=>{bn(T.data.key,T.data.fid)}),Vr}();k&&k.postMessage({key:T,fid:A}),function Ur(){0===an.size&&Vr&&(Vr.close(),Vr=null)}()}(k,A)}function bn(T,A){const k=an.get(T);if(k)for(const $ of k)$(A)}let Vr=null;const Br="firebase-installations-store";let di=null;function po(){return di||(di=(0,ee.X3)("firebase-installations-database",1,{upgrade:(T,A)=>{0===A&&T.createObjectStore(Br)}})),di}function ht(T,A){return vr.apply(this,arguments)}function vr(){return(vr=(0,F.Z)(function*(T,A){const k=xn(T),ue=(yield po()).transaction(Br,"readwrite"),me=ue.objectStore(Br),je=yield me.get(k);return yield me.put(A,k),yield ue.done,(!je||je.fid!==A.fid)&&tn(T,A.fid),A})).apply(this,arguments)}function us(T){return qn.apply(this,arguments)}function qn(){return(qn=(0,F.Z)(function*(T){const A=xn(T),$=(yield po()).transaction(Br,"readwrite");yield $.objectStore(Br).delete(A),yield $.done})).apply(this,arguments)}function Ci(T,A){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,F.Z)(function*(T,A){const k=xn(T),ue=(yield po()).transaction(Br,"readwrite"),me=ue.objectStore(Br),je=yield me.get(k),ot=A(je);return void 0===ot?yield me.delete(k):yield me.put(ot,k),yield ue.done,ot&&(!je||je.fid!==ot.fid)&&tn(T,ot.fid),ot})).apply(this,arguments)}function zn(T){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,F.Z)(function*(T){let A;const k=yield Ci(T.appConfig,$=>{const ue=Rn($),me=Rt(T,ue);return A=me.registrationPromise,me.installationEntry});return""===k.fid?{installationEntry:yield A}:{installationEntry:k,registrationPromise:A}})).apply(this,arguments)}function Rn(T){return Lt(T||{fid:dt(),registrationStatus:0})}function Rt(T,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(Ze.create("app-offline"))};const k={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},$=function Ct(T,A){return un.apply(this,arguments)}(T,k);return{installationEntry:k,registrationPromise:$}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:Er(T)}:{installationEntry:A}}function un(){return(un=(0,F.Z)(function*(T,A){try{const k=yield ye(T,A);return ht(T.appConfig,k)}catch(k){throw Ye(k)&&409===k.customData.serverCode?yield us(T.appConfig):yield ht(T.appConfig,{fid:A.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Er(T){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,F.Z)(function*(T){let A=yield jr(T.appConfig);for(;1===A.registrationStatus;)yield ze(100),A=yield jr(T.appConfig);if(0===A.registrationStatus){const{installationEntry:k,registrationPromise:$}=yield zn(T);return $||k}return A})).apply(this,arguments)}function jr(T){return Ci(T,A=>{if(!A)throw Ze.create("installation-not-found");return Lt(A)})}function Lt(T){return function zi(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function ln(T,A){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:A},k){const $=vn(T,k),ue=Q(T,k),me=A.getImmediate({optional:!0});if(me){const Mt=yield me.getHeartbeatsHeader();Mt&&ue.append("x-firebase-client",Mt)}const ot={method:"POST",headers:ue,body:JSON.stringify({installation:{sdkVersion:G,appId:T.appId}})},Tt=yield Oe(()=>fetch($,ot));if(Tt.ok)return De(yield Tt.json());throw yield Pe("Generate Auth Token",Tt)})).apply(this,arguments)}function vn(T,{fid:A}){return`${Me(T)}/${A}/authTokens:generate`}function lr(T){return $r.apply(this,arguments)}function $r(){return($r=(0,F.Z)(function*(T,A=!1){let k;const $=yield Ci(T.appConfig,me=>{if(!zt(me))throw Ze.create("not-registered");const je=me.authToken;if(!A&&J(je))return me;if(1===je.requestStatus)return k=bt(T,A),me;{if(!navigator.onLine)throw Ze.create("app-offline");const ot=oe(me);return k=Ut(T,ot),ot}});return k?yield k:$.authToken})).apply(this,arguments)}function bt(T,A){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,F.Z)(function*(T,A){let k=yield _t(T.appConfig);for(;1===k.authToken.requestStatus;)yield ze(100),k=yield _t(T.appConfig);const $=k.authToken;return 0===$.requestStatus?lr(T,A):$})).apply(this,arguments)}function _t(T){return Ci(T,A=>{if(!zt(A))throw Ze.create("not-registered");return function ke(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Ut(T,A){return jt.apply(this,arguments)}function jt(){return(jt=(0,F.Z)(function*(T,A){try{const k=yield ln(T,A),$=Object.assign(Object.assign({},A),{authToken:k});return yield ht(T.appConfig,$),k}catch(k){if(!Ye(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const $=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield ht(T.appConfig,$)}else yield us(T.appConfig);throw k}})).apply(this,arguments)}function zt(T){return void 0!==T&&2===T.registrationStatus}function J(T){return 2===T.requestStatus&&!function W(T){const A=Date.now();return A<T.creationTime||T.creationTime+T.expiresIn<A+36e5}(T)}function oe(T){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:A})}function at(){return(at=(0,F.Z)(function*(T){const A=T,{installationEntry:k,registrationPromise:$}=yield zn(A);return $?$.catch(console.error):lr(A).catch(console.error),k.fid})).apply(this,arguments)}function dn(){return(dn=(0,F.Z)(function*(T,A=!1){const k=T;return yield On(k),(yield lr(k,A)).token})).apply(this,arguments)}function On(T){return cn.apply(this,arguments)}function cn(){return(cn=(0,F.Z)(function*(T){const{registrationPromise:A}=yield zn(T);A&&(yield A)})).apply(this,arguments)}function bs(T){return Ze.create("missing-app-config-values",{valueName:T})}const go="installations",Un=T=>{const A=T.getProvider("app").getImmediate(),k=function Fn(T){if(!T||!T.options)throw bs("App Configuration");if(!T.name)throw bs("App Name");const A=["projectId","apiKey","appId"];for(const k of A)if(!T.options[k])throw bs(k);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(A);return{app:A,appConfig:k,heartbeatServiceProvider:(0,ne._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},ls=T=>{const A=T.getProvider("app").getImmediate(),k=(0,ne._getProvider)(A,go).getImmediate();return{getId:()=>function ce(T){return at.apply(this,arguments)}(k),getToken:ue=>function Dt(T){return dn.apply(this,arguments)}(k,ue)}};(function Vo(){(0,ne._registerComponent)(new re.wA(go,Un,"PUBLIC")),(0,ne._registerComponent)(new re.wA("installations-internal",ls,"PRIVATE"))})(),(0,ne.registerVersion)(K,B),(0,ne.registerVersion)(K,B,"esm2017");const Ki="@firebase/remote-config",tr=new q.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class le{constructor(A,k,$,ue){this.client=A,this.storage=k,this.storageCache=$,this.logger=ue}isCachedDataFresh(A,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-k,ue=$<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${ue}.`),ue}fetch(A){var k=this;return(0,F.Z)(function*(){const[$,ue]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(ue&&k.isCachedDataFresh(A.cacheMaxAgeMillis,$))return ue;A.eTag=ue&&ue.eTag;const me=yield k.client.fetch(A),je=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===me.status&&je.push(k.storage.setLastSuccessfulFetchResponse(me)),yield Promise.all(je),me})()}}function Ae(T=navigator){return T.languages&&T.languages[0]||T.language}class ut{constructor(A,k,$,ue,me,je){this.firebaseInstallations=A,this.sdkVersion=k,this.namespace=$,this.projectId=ue,this.apiKey=me,this.appId=je}fetch(A){var k=this;return(0,F.Z)(function*(){const[$,ue]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),je=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,ot={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Tt={sdk_version:k.sdkVersion,app_instance_id:$,app_instance_id_token:ue,app_id:k.appId,language_code:Ae()},Mt={method:"POST",headers:ot,body:JSON.stringify(Tt)},Wt=fetch(je,Mt),ft=new Promise((xr,fs)=>{A.signal.addEventListener(()=>{const ts=new Error("The operation was aborted.");ts.name="AbortError",fs(ts)})});let or;try{yield Promise.race([Wt,ft]),or=yield Wt}catch(xr){let fs="fetch-client-network";throw"AbortError"===xr?.name&&(fs="fetch-timeout"),tr.create(fs,{originalErrorMessage:xr?.message})}let $n=or.status;const Ln=or.headers.get("ETag")||void 0;let mr,Ms;if(200===or.status){let xr;try{xr=yield or.json()}catch(fs){throw tr.create("fetch-client-parse",{originalErrorMessage:fs?.message})}mr=xr.entries,Ms=xr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ms?$n=500:"NO_CHANGE"===Ms?$n=304:("NO_TEMPLATE"===Ms||"EMPTY_CONFIG"===Ms)&&(mr={}),304!==$n&&200!==$n)throw tr.create("fetch-status",{httpStatus:$n});return{status:$n,eTag:Ln,config:mr}})()}}class pr{constructor(A,k){this.client=A,this.storage=k}fetch(A){var k=this;return(0,F.Z)(function*(){const $=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(A,$)})()}attemptFetch(A,{throttleEndTimeMillis:k,backoffCount:$}){var ue=this;return(0,F.Z)(function*(){yield function qe(T,A){return new Promise((k,$)=>{const ue=Math.max(A-Date.now(),0),me=setTimeout(k,ue);T.addEventListener(()=>{clearTimeout(me),$(tr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,k);try{const me=yield ue.client.fetch(A);return yield ue.storage.deleteThrottleMetadata(),me}catch(me){if(!function hn(T){if(!(T instanceof q.ZR&&T.customData))return!1;const A=Number(T.customData.httpStatus);return 429===A||500===A||503===A||504===A}(me))throw me;const je={throttleEndTimeMillis:Date.now()+(0,q.$s)($),backoffCount:$+1};return yield ue.storage.setThrottleMetadata(je),ue.attemptFetch(A,je)}})()}}class fn{constructor(A,k,$,ue,me){this.app=A,this._client=k,this._storageCache=$,this._storage=ue,this._logger=me,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function fi(T,A){const k=T.target.error||void 0;return tr.create(A,{originalErrorMessage:k&&k?.message})}const Ts="app_namespace_store";class gm{constructor(A,k,$,ue=function pm(){return new Promise((T,A)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=$=>{A(fi($,"storage-open"))},k.onsuccess=$=>{T($.target.result)},k.onupgradeneeded=$=>{0===$.oldVersion&&$.target.result.createObjectStore(Ts,{keyPath:"compositeKey"})}}catch(k){A(tr.create("storage-open",{originalErrorMessage:k?.message}))}})}()){this.appId=A,this.appName=k,this.namespace=$,this.openDbPromise=ue}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var k=this;return(0,F.Z)(function*(){const $=yield k.openDbPromise;return new Promise((ue,me)=>{const ot=$.transaction([Ts],"readonly").objectStore(Ts),Tt=k.createCompositeKey(A);try{const Mt=ot.get(Tt);Mt.onerror=Wt=>{me(fi(Wt,"storage-get"))},Mt.onsuccess=Wt=>{const ft=Wt.target.result;ue(ft?ft.value:void 0)}}catch(Mt){me(tr.create("storage-get",{originalErrorMessage:Mt?.message}))}})})()}set(A,k){var $=this;return(0,F.Z)(function*(){const ue=yield $.openDbPromise;return new Promise((me,je)=>{const Tt=ue.transaction([Ts],"readwrite").objectStore(Ts),Mt=$.createCompositeKey(A);try{const Wt=Tt.put({compositeKey:Mt,value:k});Wt.onerror=ft=>{je(fi(ft,"storage-set"))},Wt.onsuccess=()=>{me()}}catch(Wt){je(tr.create("storage-set",{originalErrorMessage:Wt?.message}))}})})()}delete(A){var k=this;return(0,F.Z)(function*(){const $=yield k.openDbPromise;return new Promise((ue,me)=>{const ot=$.transaction([Ts],"readwrite").objectStore(Ts),Tt=k.createCompositeKey(A);try{const Mt=ot.delete(Tt);Mt.onerror=Wt=>{me(fi(Wt,"storage-delete"))},Mt.onsuccess=()=>{ue()}}catch(Mt){me(tr.create("storage-delete",{originalErrorMessage:Mt?.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class qd{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,F.Z)(function*(){const k=A.storage.getLastFetchStatus(),$=A.storage.getLastSuccessfulFetchTimestampMillis(),ue=A.storage.getActiveConfig(),me=yield k;me&&(A.lastFetchStatus=me);const je=yield $;je&&(A.lastSuccessfulFetchTimestampMillis=je);const ot=yield ue;ot&&(A.activeConfig=ot)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function rc(){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,F.Z)(function*(){if(!(0,q.hl)())return!1;try{return yield(0,q.eu)()}catch{return!1}})).apply(this,arguments)}!function _o(){(0,ne._registerComponent)(new re.wA("remote-config",function T(A,{instanceIdentifier:k}){const $=A.getProvider("app").getImmediate(),ue=A.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw tr.create("registration-window");if(!(0,q.hl)())throw tr.create("indexed-db-unavailable");const{projectId:me,apiKey:je,appId:ot}=$.options;if(!me)throw tr.create("registration-project-id");if(!je)throw tr.create("registration-api-key");if(!ot)throw tr.create("registration-app-id");const Tt=new gm(ot,$.name,k=k||"firebase"),Mt=new qd(Tt),Wt=new X.Yd(Ki);Wt.logLevel=X.in.ERROR;const ft=new ut(ue,ne.SDK_VERSION,k,me,je,ot),or=new pr(ft,Tt),$n=new le(or,Tt,Mt,Wt),Ln=new fn($,$n,Mt,Tt,Wt);return function Qn(T){const A=(0,q.m9)(T);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Ln),Ln},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(Ki,"0.4.0"),(0,ne.registerVersion)(Ki,"0.4.0","esm2017")}();const Ss="/firebase-messaging-sw.js",Hs="/firebase-cloud-messaging-push-scope",Gs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pu="google.c.a.c_id",ic="google.c.a.c_l",_l="google.c.a.ts",Jf="google.c.a.e";var qs=(()=>{return(T=qs||(qs={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",qs;var T})();function Yi(T){const A=new Uint8Array(T);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fi(T){const k=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(k),ue=new Uint8Array($.length);for(let me=0;me<$.length;++me)ue[me]=$.charCodeAt(me);return ue}const Ia="fcm_token_details_db",ei="fcm_token_object_Store";function Xf(T){return ep.apply(this,arguments)}function ep(){return ep=(0,F.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(me=>me.name).includes(Ia))return null;let A=null;return(yield(0,ee.X3)(Ia,5,{upgrade:($=(0,F.Z)(function*(ue,me,je,ot){var Tt;if(me<2||!ue.objectStoreNames.contains(ei))return;const Mt=ot.objectStore(ei),Wt=yield Mt.index("fcmSenderId").get(T);if(yield Mt.clear(),Wt)if(2===me){const ft=Wt;if(!ft.auth||!ft.p256dh||!ft.endpoint)return;A={token:ft.fcmToken,createTime:null!==(Tt=ft.createTime)&&void 0!==Tt?Tt:Date.now(),subscriptionOptions:{auth:ft.auth,p256dh:ft.p256dh,endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:"string"==typeof ft.vapidKey?ft.vapidKey:Yi(ft.vapidKey)}}}else if(3===me){const ft=Wt;A={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Yi(ft.auth),p256dh:Yi(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Yi(ft.vapidKey)}}}else if(4===me){const ft=Wt;A={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Yi(ft.auth),p256dh:Yi(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Yi(ft.vapidKey)}}}}),function(me,je,ot,Tt){return $.apply(this,arguments)})})).close(),yield(0,ee.Lj)(Ia),yield(0,ee.Lj)("fcm_vapid_details_db"),yield(0,ee.Lj)("undefined"),nr(A)?A:null;var $}),ep.apply(this,arguments)}function nr(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:A}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Ji="firebase-messaging-store";let pi=null;function oc(){return pi||(pi=(0,ee.X3)("firebase-messaging-database",1,{upgrade:(T,A)=>{0===A&&T.createObjectStore(Ji)}})),pi}function Go(T){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,F.Z)(function*(T){const A=ds(T),$=yield(yield oc()).transaction(Ji).objectStore(Ji).get(A);if($)return $;{const ue=yield Xf(T.appConfig.senderId);if(ue)return yield mn(T,ue),ue}})).apply(this,arguments)}function mn(T,A){return ac.apply(this,arguments)}function ac(){return(ac=(0,F.Z)(function*(T,A){const k=ds(T),ue=(yield oc()).transaction(Ji,"readwrite");return yield ue.objectStore(Ji).put(A,k),yield ue.done,A})).apply(this,arguments)}function qo(T){return uc.apply(this,arguments)}function uc(){return(uc=(0,F.Z)(function*(T){const A=ds(T),$=(yield oc()).transaction(Ji,"readwrite");yield $.objectStore(Ji).delete(A),yield $.done})).apply(this,arguments)}function ds({appConfig:T}){return T.appId}const Jn=new q.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ht(T,A){return lc.apply(this,arguments)}function lc(){return(lc=(0,F.Z)(function*(T,A){const k=yield El(T),$=Ue(A),ue={method:"POST",headers:k,body:JSON.stringify($)};let me;try{me=yield(yield fetch(zs(T.appConfig),ue)).json()}catch(je){throw Jn.create("token-subscribe-failed",{errorInfo:je?.toString()})}if(me.error)throw Jn.create("token-subscribe-failed",{errorInfo:me.error.message});if(!me.token)throw Jn.create("token-subscribe-no-token");return me.token})).apply(this,arguments)}function np(T,A){return dc.apply(this,arguments)}function dc(){return(dc=(0,F.Z)(function*(T,A){const k=yield El(T),$=Ue(A.subscriptionOptions),ue={method:"PATCH",headers:k,body:JSON.stringify($)};let me;try{me=yield(yield fetch(`${zs(T.appConfig)}/${A.token}`,ue)).json()}catch(je){throw Jn.create("token-update-failed",{errorInfo:je?.toString()})}if(me.error)throw Jn.create("token-update-failed",{errorInfo:me.error.message});if(!me.token)throw Jn.create("token-update-no-token");return me.token})).apply(this,arguments)}function hc(T,A){return vl.apply(this,arguments)}function vl(){return(vl=(0,F.Z)(function*(T,A){const $={method:"DELETE",headers:yield El(T)};try{const me=yield(yield fetch(`${zs(T.appConfig)}/${A}`,$)).json();if(me.error)throw Jn.create("token-unsubscribe-failed",{errorInfo:me.error.message})}catch(ue){throw Jn.create("token-unsubscribe-failed",{errorInfo:ue?.toString()})}})).apply(this,arguments)}function zs({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function El(T){return gu.apply(this,arguments)}function gu(){return(gu=(0,F.Z)(function*({appConfig:T,installations:A}){const k=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Ue({p256dh:T,auth:A,endpoint:k,vapidKey:$}){const ue={web:{endpoint:k,auth:A,p256dh:T}};return $!==Gs&&(ue.web.applicationPubKey=$),ue}const nn=6048e5;function fc(T){return pc.apply(this,arguments)}function pc(){return(pc=(0,F.Z)(function*(T){const A=yield wl(T.swRegistration,T.vapidKey),k={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:A.endpoint,auth:Yi(A.getKey("auth")),p256dh:Yi(A.getKey("p256dh"))},$=yield Go(T.firebaseDependencies);if($){if(Zd($.subscriptionOptions,k))return Date.now()>=$.createTime+nn?Ca(T,{token:$.token,createTime:Date.now(),subscriptionOptions:k}):$.token;try{yield hc(T.firebaseDependencies,$.token)}catch(ue){console.warn(ue)}return mu(T.firebaseDependencies,k)}return mu(T.firebaseDependencies,k)})).apply(this,arguments)}function rr(T){return gc.apply(this,arguments)}function gc(){return(gc=(0,F.Z)(function*(T){const A=yield Go(T.firebaseDependencies);A&&(yield hc(T.firebaseDependencies,A.token),yield qo(T.firebaseDependencies));const k=yield T.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Ca(T,A){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,F.Z)(function*(T,A){try{const k=yield np(T.firebaseDependencies,A),$=Object.assign(Object.assign({},A),{token:k,createTime:Date.now()});return yield mn(T.firebaseDependencies,$),k}catch(k){throw yield rr(T),k}})).apply(this,arguments)}function mu(T,A){return yu.apply(this,arguments)}function yu(){return(yu=(0,F.Z)(function*(T,A){const $={token:yield Ht(T,A),createTime:Date.now(),subscriptionOptions:A};return yield mn(T,$),$.token})).apply(this,arguments)}function wl(T,A){return bl.apply(this,arguments)}function bl(){return(bl=(0,F.Z)(function*(T,A){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fi(A)})})).apply(this,arguments)}function Zd(T,A){return A.vapidKey===T.vapidKey&&A.endpoint===T.endpoint&&A.auth===T.auth&&A.p256dh===T.p256dh}function _u(T){const A={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function ir(T,A){if(!A.notification)return;T.notification={};const k=A.notification.title;k&&(T.notification.title=k);const $=A.notification.body;$&&(T.notification.body=$);const ue=A.notification.image;ue&&(T.notification.image=ue);const me=A.notification.icon;me&&(T.notification.icon=me)}(A,T),function As(T,A){!A.data||(T.data=A.data)}(A,T),function Il(T,A){var k,$,ue,me,je;if(!(A.fcmOptions||null!==(k=A.notification)&&void 0!==k&&k.click_action))return;T.fcmOptions={};const ot=null!==(ue=null===($=A.fcmOptions)||void 0===$?void 0:$.link)&&void 0!==ue?ue:null===(me=A.notification)||void 0===me?void 0:me.click_action;ot&&(T.fcmOptions.link=ot);const Tt=null===(je=A.fcmOptions)||void 0===je?void 0:je.analytics_label;Tt&&(T.fcmOptions.analyticsLabel=Tt)}(A,T),A}function Wo(T){return"object"==typeof T&&!!T&&pu in T}function Ks(T,A){const k=[];for(let $=0;$<T.length;$++)k.push(T.charAt($)),$<A.length&&k.push(A.charAt($));return k.join("")}function vu(T){return Jn.create("missing-app-config-values",{valueName:T})}Ks("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ks("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ym{constructor(A,k,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ue=function mm(T){if(!T||!T.options)throw vu("App Configuration Object");if(!T.name)throw vu("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:k}=T;for(const $ of A)if(!k[$])throw vu($);return{appName:T.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:ue,installations:k,analyticsProvider:$}}_delete(){return Promise.resolve()}}function Cl(T){return mc.apply(this,arguments)}function mc(){return(mc=(0,F.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Ss,{scope:Hs}),T.swRegistration.update().catch(()=>{})}catch(A){throw Jn.create("failed-service-worker-registration",{browserErrorMessage:A?.message})}})).apply(this,arguments)}function Eu(T,A){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,F.Z)(function*(T,A){if(!A&&!T.swRegistration&&(yield Cl(T)),A||!T.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Jn.create("invalid-sw-registration");T.swRegistration=A}})).apply(this,arguments)}function wu(T,A){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,F.Z)(function*(T,A){A?T.vapidKey=A:T.vapidKey||(T.vapidKey=Gs)})).apply(this,arguments)}function _c(){return(_c=(0,F.Z)(function*(T,A){if(!navigator)throw Jn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Jn.create("permission-blocked");return yield wu(T,A?.vapidKey),yield Eu(T,A?.serviceWorkerRegistration),fc(T)})).apply(this,arguments)}function Sl(T,A,k){return Al.apply(this,arguments)}function Al(){return(Al=(0,F.Z)(function*(T,A,k){const $=xl(A);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:k[pu],message_name:k[ic],message_time:k[_l],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xl(T){switch(T){case qs.NOTIFICATION_CLICKED:return"notification_open";case qs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zo(){return(zo=(0,F.Z)(function*(T,A){const k=A.data;if(!k.isFirebaseMessaging)return;T.onMessageHandler&&k.messageType===qs.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(_u(k)):T.onMessageHandler.next(_u(k)));const $=k.data;Wo($)&&"1"===$[Jf]&&(yield Sl(T,k.messageType,$))})).apply(this,arguments)}const Ko="@firebase/messaging",Ar=T=>{const A=new ym(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Qd(T,A){return zo.apply(this,arguments)}(A,k)),A},Li=T=>{const A=T.getProvider("messaging").getImmediate();return{getToken:$=>function yc(T,A){return _c.apply(this,arguments)}(A,$)}};function Rl(){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,F.Z)(function*(){try{yield(0,q.eu)()}catch{return!1}return typeof window<"u"&&(0,q.hl)()&&(0,q.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bn(){(0,ne._registerComponent)(new re.wA("messaging",Ar,"PUBLIC")),(0,ne._registerComponent)(new re.wA("messaging-internal",Li,"PRIVATE")),(0,ne.registerVersion)(Ko,"0.12.0"),(0,ne.registerVersion)(Ko,"0.12.0","esm2017")}();const Ta="analytics",eh="firebase_id",Qo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bc="https://www.googletagmanager.com/gtag/js",sr=new X.Yd("@firebase/analytics");function Ic(T){return Promise.all(T.map(A=>A.catch(k=>k)))}function Cc(T,A){const k=document.createElement("script");k.src=`${bc}?l=${T}&id=${A}`,k.async=!0,document.head.appendChild(k)}function rp(T,A,k,$,ue,me){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,F.Z)(function*(T,A,k,$,ue,me){const je=$[ue];try{if(je)yield A[je];else{const Tt=(yield Ic(k)).find(Mt=>Mt.measurementId===ue);Tt&&(yield A[Tt.appId])}}catch(ot){sr.error(ot)}T("config",ue,me)})).apply(this,arguments)}function Aa(T,A,k,$,ue){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,F.Z)(function*(T,A,k,$,ue){try{let me=[];if(ue&&ue.send_to){let je=ue.send_to;Array.isArray(je)||(je=[je]);const ot=yield Ic(k);for(const Tt of je){const Mt=ot.find(ft=>ft.measurementId===Tt),Wt=Mt&&A[Mt.appId];if(!Wt){me=[];break}me.push(Wt)}}0===me.length&&(me=Object.values(A)),yield Promise.all(me),T("event",$,ue||{})}catch(me){sr.error(me)}})).apply(this,arguments)}function nh(T){const A=window.document.getElementsByTagName("script");for(const k of Object.values(A))if(k.src&&k.src.includes(bc)&&k.src.includes(T))return k;return null}const Gr=new q.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Du=new class xs{constructor(A={},k=1e3){this.throttleMetadata=A,this.intervalMillis=k}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,k){this.throttleMetadata[A]=k}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function ih(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Tu(T){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,F.Z)(function*(T){var A;const{appId:k,apiKey:$}=T,ue={method:"GET",headers:ih($)},me=Qo.replace("{app-id}",k),je=yield fetch(me,ue);if(200!==je.status&&304!==je.status){let ot="";try{const Tt=yield je.json();null!==(A=Tt.error)&&void 0!==A&&A.message&&(ot=Tt.error.message)}catch{}throw Gr.create("config-fetch-failed",{httpStatus:je.status,responseMessage:ot})}return je.json()})).apply(this,arguments)}function gr(T){return hs.apply(this,arguments)}function hs(){return(hs=(0,F.Z)(function*(T,A=Du,k){const{appId:$,apiKey:ue,measurementId:me}=T.options;if(!$)throw Gr.create("no-app-id");if(!ue){if(me)return{measurementId:me,appId:$};throw Gr.create("no-api-key")}const je=A.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ot=new Ac;return setTimeout((0,F.Z)(function*(){ot.abort()}),void 0!==k?k:6e4),Tc({appId:$,apiKey:ue,measurementId:me},je,ot,A)})).apply(this,arguments)}function Tc(T,A,k){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,F.Z)(function*(T,{throttleEndTimeMillis:A,backoffCount:k},$,ue=Du){var me;const{appId:je,measurementId:ot}=T;try{yield Su($,A)}catch(Tt){if(ot)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${Tt?.message}]`),{appId:je,measurementId:ot};throw Tt}try{const Tt=yield Tu(T);return ue.deleteThrottleMetadata(je),Tt}catch(Tt){const Mt=Tt;if(!Sc(Mt)){if(ue.deleteThrottleMetadata(je),ot)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${Mt?.message}]`),{appId:je,measurementId:ot};throw Tt}const Wt=503===Number(null===(me=Mt?.customData)||void 0===me?void 0:me.httpStatus)?(0,q.$s)(k,ue.intervalMillis,30):(0,q.$s)(k,ue.intervalMillis),ft={throttleEndTimeMillis:Date.now()+Wt,backoffCount:k+1};return ue.setThrottleMetadata(je,ft),sr.debug(`Calling attemptFetch again in ${Wt} millis`),Tc(T,ft,$,ue)}})).apply(this,arguments)}function Su(T,A){return new Promise((k,$)=>{const ue=Math.max(A-Date.now(),0),me=setTimeout(k,ue);T.addEventListener(()=>{clearTimeout(me),$(Gr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Sc(T){if(!(T instanceof q.ZR&&T.customData))return!1;const A=Number(T.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Ac{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let wo,xu;function bo(){return(bo=(0,F.Z)(function*(T,A,k,$,ue){if(ue&&ue.global)T("event",k,$);else{const me=yield A;T("event",k,Object.assign(Object.assign({},$),{send_to:me}))}})).apply(this,arguments)}function ea(T){xu=T}function Fl(T){wo=T}function Qs(){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,F.Z)(function*(){if(!(0,q.hl)())return sr.warn(Gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,q.eu)()}catch(T){return sr.warn(Gr.create("indexeddb-unavailable",{errorInfo:T?.toString()}).message),!1}return!0})).apply(this,arguments)}function Oa(){return(Oa=(0,F.Z)(function*(T,A,k,$,ue,me,je){var ot;const Tt=gr(T);Tt.then($n=>{k[$n.measurementId]=$n.appId,T.options.measurementId&&$n.measurementId!==T.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${$n.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($n=>sr.error($n)),A.push(Tt);const Mt=Qs().then($n=>{if($n)return $.getId()}),[Wt,ft]=yield Promise.all([Tt,Mt]);nh(me)||Cc(me,Wt.measurementId),xu&&(ue("consent","default",xu),ea(void 0)),ue("js",new Date);const or=null!==(ot=je?.config)&&void 0!==ot?ot:{};return or.origin="firebase",or.update=!0,null!=ft&&(or[eh]=ft),ue("config",Wt.measurementId,or),wo&&(ue("set",wo),Fl(void 0)),Wt.measurementId})).apply(this,arguments)}class Oc{constructor(A){this.app=A}_delete(){return delete Vi[this.app.options.appId],Promise.resolve()}}let Vi={},Io=[];const Ma={};let Na,ta,Pa="dataLayer",Ru=!1;function hv(T,A,k){!function _m(){const T=[];if((0,q.ru)()&&T.push("This is a browser extension environment."),(0,q.zI)()||T.push("Cookies are not available."),T.length>0){const A=T.map(($,ue)=>`(${ue+1}) ${$}`).join(" "),k=Gr.create("invalid-analytics-context",{errorInfo:A});sr.warn(k.message)}}();const $=T.options.appId;if(!$)throw Gr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Gr.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vi[$])throw Gr.create("already-exists",{id:$});if(!Ru){!function th(T){let A=[];Array.isArray(window[T])?A=window[T]:window[T]=A}(Pa);const{wrappedGtag:me,gtagCore:je}=function bu(T,A,k,$,ue){let me=function(...je){window[$].push(arguments)};return window[ue]&&"function"==typeof window[ue]&&(me=window[ue]),window[ue]=function Dc(T,A,k,$){function me(){return(me=(0,F.Z)(function*(je,ot,Tt){try{"event"===je?yield Aa(T,A,k,ot,Tt):"config"===je?yield rp(T,A,k,$,ot,Tt):"consent"===je?T("consent","update",Tt):T("set",ot)}catch(Mt){sr.error(Mt)}})).apply(this,arguments)}return function ue(je,ot,Tt){return me.apply(this,arguments)}}(me,T,A,k),{gtagCore:me,wrappedGtag:window[ue]}}(Vi,Io,Ma,Pa,"gtag");ta=me,Na=je,Ru=!0}return Vi[$]=function Ra(T,A,k,$,ue,me,je){return Oa.apply(this,arguments)}(T,Io,Ma,A,Na,Pa,k),new Oc(T)}function pv(){return ip.apply(this,arguments)}function ip(){return(ip=(0,F.Z)(function*(){if((0,q.ru)()||!(0,q.zI)()||!(0,q.hl)())return!1;try{return yield(0,q.eu)()}catch{return!1}})).apply(this,arguments)}const es="@firebase/analytics";!function tt(){(0,ne._registerComponent)(new re.wA(Ta,(A,{options:k})=>hv(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ne._registerComponent)(new re.wA("analytics-internal",function T(A){try{const k=A.getProvider(Ta).getImmediate();return{logEvent:($,ue,me)=>function Vl(T,A,k,$){T=(0,q.m9)(T),function sh(T,A,k,$,ue){return bo.apply(this,arguments)}(ta,Vi[T.app.options.appId],A,k,$).catch(ue=>sr.error(ue))}(k,$,ue,me)}}catch(k){throw Gr.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ne.registerVersion)(es,"0.9.0"),(0,ne.registerVersion)(es,"0.9.0","esm2017")}();var st=R(233),Nc=R(4986),na=R(8505),Os=R(5363),kc=R(9468);const rn=new h.GfV("7.5.0"),gt="__angularfire_symbol__analyticsIsSupportedValue",ti="__angularfire_symbol__analyticsIsSupported",Co="__angularfire_symbol__remoteConfigIsSupportedValue",Ys="__angularfire_symbol__remoteConfigIsSupported",pn="__angularfire_symbol__messagingIsSupportedValue",Ou="__angularfire_symbol__messagingIsSupported";function ap(T,A,k){if(A){if(1===A.length)return A[0];const me=A.filter(je=>je.app===k);if(1===me.length)return me[0]}return k.container.getProvider(T).getImmediate({optional:!0})}globalThis[ti]||(globalThis[ti]=pv().then(T=>globalThis[gt]=T).catch(()=>globalThis[gt]=!1)),globalThis[Ou]||(globalThis[Ou]=Rl().then(T=>globalThis[pn]=T).catch(()=>globalThis[pn]=!1)),globalThis[Ys]||(globalThis[Ys]=rc().then(T=>globalThis[Co]=T).catch(()=>globalThis[Co]=!1));const ka=(T,A)=>{const k=A?[A]:(0,z.C6)(),$=[];return k.forEach(ue=>{ue.container.getProvider(T).instances.forEach(je=>{$.includes(je)||$.push(je)})}),$};function Fa(){}class Fc{constructor(A,k=st.N){this.zone=A,this.delegate=k}now(){return this.delegate.now()}schedule(A,k,$){const ue=this.zone;return this.delegate.schedule(function(je){ue.runGuarded(()=>{A.apply(this,[je])})},k,$)}}class uh{constructor(A){this.zone=A,this.task=null}call(A,k){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fa,{},Fa,Fa)),k.pipe((0,na.b)({next:$,complete:$,error:$})).subscribe(A).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Js=(()=>{class T{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Fc(Zone.current)),this.insideAngular=k.run(()=>new Fc(Zone.current,Nc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(k){return new(k||T)(h.LFG(h.R0b))},T.\u0275prov=h.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Ui(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Lc(T){return T.pipe((0,Os.Q)(Ui().outsideAngular))}function Mu(T){return Ui(),function ra(T){return function(k){return(k=k.lift(new uh(T.ngZone))).pipe((0,kc.R)(T.outsideAngular),(0,Os.Q)(T.insideAngular))}}(Ui())(T)}},2090:(ae,Z,R)=>{R.d(Z,{$s:()=>_t,BH:()=>Kt,DV:()=>Br,Dv:()=>Er,G6:()=>Pe,GJ:()=>Wi,L:()=>ee,LL:()=>an,Pz:()=>on,Sg:()=>dt,UG:()=>Ee,UI:()=>po,US:()=>re,Wj:()=>Lt,Wl:()=>bn,Yr:()=>De,ZB:()=>j,ZR:()=>xn,aH:()=>St,b$:()=>he,cI:()=>Gt,dS:()=>ln,eu:()=>nt,g5:()=>F,gK:()=>Zn,gQ:()=>zn,h$:()=>X,hl:()=>We,hu:()=>z,jU:()=>Qe,lb:()=>zi,m9:()=>zt,ne:()=>Kn,p$:()=>B,pd:()=>Xr,r3:()=>Pi,ru:()=>Ie,tV:()=>K,uI:()=>Te,ug:()=>Ni,vZ:()=>ht,w1:()=>Ye,w9:()=>Ur,xO:()=>qn,xb:()=>di,z$:()=>we,zI:()=>Q,zd:()=>Ci});const z=function(J,W){if(!J)throw F(W)},F=function(J){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+J)},ne=function(J){const W=[];let oe=0;for(let ke=0;ke<J.length;ke++){let ce=J.charCodeAt(ke);ce<128?W[oe++]=ce:ce<2048?(W[oe++]=ce>>6|192,W[oe++]=63&ce|128):55296==(64512&ce)&&ke+1<J.length&&56320==(64512&J.charCodeAt(ke+1))?(ce=65536+((1023&ce)<<10)+(1023&J.charCodeAt(++ke)),W[oe++]=ce>>18|240,W[oe++]=ce>>12&63|128,W[oe++]=ce>>6&63|128,W[oe++]=63&ce|128):(W[oe++]=ce>>12|224,W[oe++]=ce>>6&63|128,W[oe++]=63&ce|128)}return W},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(J,W){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const oe=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,ke=[];for(let ce=0;ce<J.length;ce+=3){const at=J[ce],Dt=ce+1<J.length,dn=Dt?J[ce+1]:0,On=ce+2<J.length,cn=On?J[ce+2]:0;let Zt=(15&dn)<<2|cn>>6,wr=63&cn;On||(wr=64,Dt||(Zt=64)),ke.push(oe[at>>2],oe[(3&at)<<4|dn>>4],oe[Zt],oe[wr])}return ke.join("")},encodeString(J,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(J):this.encodeByteArray(ne(J),W)},decodeString(J,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(J):function(J){const W=[];let oe=0,ke=0;for(;oe<J.length;){const ce=J[oe++];if(ce<128)W[ke++]=String.fromCharCode(ce);else if(ce>191&&ce<224){const at=J[oe++];W[ke++]=String.fromCharCode((31&ce)<<6|63&at)}else if(ce>239&&ce<365){const On=((7&ce)<<18|(63&J[oe++])<<12|(63&J[oe++])<<6|63&J[oe++])-65536;W[ke++]=String.fromCharCode(55296+(On>>10)),W[ke++]=String.fromCharCode(56320+(1023&On))}else{const at=J[oe++],Dt=J[oe++];W[ke++]=String.fromCharCode((15&ce)<<12|(63&at)<<6|63&Dt)}}return W.join("")}(this.decodeStringToByteArray(J,W))},decodeStringToByteArray(J,W){this.init_();const oe=W?this.charToByteMapWebSafe_:this.charToByteMap_,ke=[];for(let ce=0;ce<J.length;){const at=oe[J.charAt(ce++)],dn=ce<J.length?oe[J.charAt(ce)]:0;++ce;const cn=ce<J.length?oe[J.charAt(ce)]:64;++ce;const ct=ce<J.length?oe[J.charAt(ce)]:64;if(++ce,null==at||null==dn||null==cn||null==ct)throw Error();ke.push(at<<2|dn>>4),64!==cn&&(ke.push(dn<<4&240|cn>>2),64!==ct&&ke.push(cn<<6&192|ct))}return ke},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}},X=function(J){const W=ne(J);return re.encodeByteArray(W,!0)},ee=function(J){return X(J).replace(/\./g,"")},K=function(J){try{return re.decodeString(J,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function B(J){return j(void 0,J)}function j(J,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===J&&(J={});break;case Array:J=[];break;default:return W}for(const oe in W)!W.hasOwnProperty(oe)||!G(oe)||(J[oe]=j(J[oe],W[oe]));return J}function G(J){return"__proto__"!==J}function we(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Qe(){return"object"==typeof self&&self.self===self}function Ie(){const J="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof J&&void 0!==J.id}function he(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ye(){const J=we();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function De(){return!1}function Pe(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function We(){try{return"object"==typeof indexedDB}catch{return!1}}function nt(){return new Promise((J,W)=>{try{let oe=!0;const ke="validate-browser-context-for-indexeddb-analytics-module",ce=self.indexedDB.open(ke);ce.onsuccess=()=>{ce.result.close(),oe||self.indexedDB.deleteDatabase(ke),J(!0)},ce.onupgradeneeded=()=>{oe=!1},ce.onerror=()=>{var at;W((null===(at=ce.error)||void 0===at?void 0:at.message)||"")}}catch(oe){W(oe)}})}function Q(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ye=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const J=process.env.__FIREBASE_DEFAULTS__;return J?JSON.parse(J):void 0})()||(()=>{if(typeof document>"u")return;let J;try{J=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=J&&K(J[1]);return W&&JSON.parse(W)})()}catch(J){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${J}`)}},St=()=>{var J;return null===(J=ye())||void 0===J?void 0:J.config},on=J=>{var W;return null===(W=ye())||void 0===W?void 0:W[`_${J}`]};class Kt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,oe)=>{this.resolve=W,this.reject=oe})}wrapCallback(W){return(oe,ke)=>{oe?this.reject(oe):this.resolve(ke),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(oe):W(oe,ke))}}}function dt(J,W){if(J.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ke=W||"demo-project",ce=J.iat||0,at=J.sub||J.user_id;if(!at)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Dt=Object.assign({iss:`https://securetoken.google.com/${ke}`,aud:ke,iat:ce,exp:ce+3600,auth_time:ce,sub:at,user_id:at,firebase:{sign_in_provider:"custom",identities:{}}},J);return[ee(JSON.stringify({alg:"none",type:"JWT"})),ee(JSON.stringify(Dt)),""].join(".")}class xn extends Error{constructor(W,oe,ke){super(oe),this.code=W,this.customData=ke,this.name="FirebaseError",Object.setPrototypeOf(this,xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,an.prototype.create)}}class an{constructor(W,oe,ke){this.service=W,this.serviceName=oe,this.errors=ke}create(W,...oe){const ke=oe[0]||{},ce=`${this.service}/${W}`,at=this.errors[W],Dt=at?function tn(J,W){return J.replace(Lr,(oe,ke)=>{const ce=W[ke];return null!=ce?String(ce):`<${ke}?>`})}(at,ke):"Error";return new xn(ce,`${this.serviceName}: ${Dt} (${ce}).`,ke)}}const Lr=/\{\$([^}]+)}/g;function Gt(J){return JSON.parse(J)}function bn(J){return JSON.stringify(J)}const li=function(J){let W={},oe={},ke={},ce="";try{const at=J.split(".");W=Gt(K(at[0])||""),oe=Gt(K(at[1])||""),ce=at[2],ke=oe.d||{},delete oe.d}catch{}return{header:W,claims:oe,data:ke,signature:ce}},Ur=function(J){const oe=li(J).claims;return!!oe&&"object"==typeof oe&&oe.hasOwnProperty("iat")},Wi=function(J){const W=li(J).claims;return"object"==typeof W&&!0===W.admin};function Pi(J,W){return Object.prototype.hasOwnProperty.call(J,W)}function Br(J,W){if(Object.prototype.hasOwnProperty.call(J,W))return J[W]}function di(J){for(const W in J)if(Object.prototype.hasOwnProperty.call(J,W))return!1;return!0}function po(J,W,oe){const ke={};for(const ce in J)Object.prototype.hasOwnProperty.call(J,ce)&&(ke[ce]=W.call(oe,J[ce],ce,J));return ke}function ht(J,W){if(J===W)return!0;const oe=Object.keys(J),ke=Object.keys(W);for(const ce of oe){if(!ke.includes(ce))return!1;const at=J[ce],Dt=W[ce];if(vr(at)&&vr(Dt)){if(!ht(at,Dt))return!1}else if(at!==Dt)return!1}for(const ce of ke)if(!oe.includes(ce))return!1;return!0}function vr(J){return null!==J&&"object"==typeof J}function qn(J){const W=[];for(const[oe,ke]of Object.entries(J))Array.isArray(ke)?ke.forEach(ce=>{W.push(encodeURIComponent(oe)+"="+encodeURIComponent(ce))}):W.push(encodeURIComponent(oe)+"="+encodeURIComponent(ke));return W.length?"&"+W.join("&"):""}function Ci(J){const W={};return J.replace(/^\?/,"").split("&").forEach(ke=>{if(ke){const[ce,at]=ke.split("=");W[decodeURIComponent(ce)]=decodeURIComponent(at)}}),W}function Xr(J){const W=J.indexOf("?");if(!W)return"";const oe=J.indexOf("#",W);return J.substring(W,oe>0?oe:void 0)}class zn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,oe){oe||(oe=0);const ke=this.W_;if("string"==typeof W)for(let ct=0;ct<16;ct++)ke[ct]=W.charCodeAt(oe)<<24|W.charCodeAt(oe+1)<<16|W.charCodeAt(oe+2)<<8|W.charCodeAt(oe+3),oe+=4;else for(let ct=0;ct<16;ct++)ke[ct]=W[oe]<<24|W[oe+1]<<16|W[oe+2]<<8|W[oe+3],oe+=4;for(let ct=16;ct<80;ct++){const Zt=ke[ct-3]^ke[ct-8]^ke[ct-14]^ke[ct-16];ke[ct]=4294967295&(Zt<<1|Zt>>>31)}let cn,et,ce=this.chain_[0],at=this.chain_[1],Dt=this.chain_[2],dn=this.chain_[3],On=this.chain_[4];for(let ct=0;ct<80;ct++){ct<40?ct<20?(cn=dn^at&(Dt^dn),et=1518500249):(cn=at^Dt^dn,et=1859775393):ct<60?(cn=at&Dt|dn&(at|Dt),et=2400959708):(cn=at^Dt^dn,et=3395469782);const Zt=(ce<<5|ce>>>27)+cn+On+et+ke[ct]&4294967295;On=dn,dn=Dt,Dt=4294967295&(at<<30|at>>>2),at=ce,ce=Zt}this.chain_[0]=this.chain_[0]+ce&4294967295,this.chain_[1]=this.chain_[1]+at&4294967295,this.chain_[2]=this.chain_[2]+Dt&4294967295,this.chain_[3]=this.chain_[3]+dn&4294967295,this.chain_[4]=this.chain_[4]+On&4294967295}update(W,oe){if(null==W)return;void 0===oe&&(oe=W.length);const ke=oe-this.blockSize;let ce=0;const at=this.buf_;let Dt=this.inbuf_;for(;ce<oe;){if(0===Dt)for(;ce<=ke;)this.compress_(W,ce),ce+=this.blockSize;if("string"==typeof W){for(;ce<oe;)if(at[Dt]=W.charCodeAt(ce),++Dt,++ce,Dt===this.blockSize){this.compress_(at),Dt=0;break}}else for(;ce<oe;)if(at[Dt]=W[ce],++Dt,++ce,Dt===this.blockSize){this.compress_(at),Dt=0;break}}this.inbuf_=Dt,this.total_+=oe}digest(){const W=[];let oe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ce=this.blockSize-1;ce>=56;ce--)this.buf_[ce]=255&oe,oe/=256;this.compress_(this.buf_);let ke=0;for(let ce=0;ce<5;ce++)for(let at=24;at>=0;at-=8)W[ke]=this.chain_[ce]>>at&255,++ke;return W}}function Kn(J,W){const oe=new Rn(J,W);return oe.subscribe.bind(oe)}class Rn{constructor(W,oe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=oe,this.task.then(()=>{W(this)}).catch(ke=>{this.error(ke)})}next(W){this.forEachObserver(oe=>{oe.next(W)})}error(W){this.forEachObserver(oe=>{oe.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,oe,ke){let ce;if(void 0===W&&void 0===oe&&void 0===ke)throw new Error("Missing Observer.");ce=function Ct(J,W){if("object"!=typeof J||null===J)return!1;for(const oe of W)if(oe in J&&"function"==typeof J[oe])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:oe,complete:ke},void 0===ce.next&&(ce.next=un),void 0===ce.error&&(ce.error=un),void 0===ce.complete&&(ce.complete=un);const at=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ce.error(this.finalError):ce.complete()}catch{}}),this.observers.push(ce),at}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let oe=0;oe<this.observers.length;oe++)this.sendOne(oe,W)}sendOne(W,oe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{oe(this.observers[W])}catch(ke){typeof console<"u"&&console.error&&console.error(ke)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function un(){}const Er=function(J,W,oe,ke){let ce;if(ke<W?ce="at least "+W:ke>oe&&(ce=0===oe?"none":"no more than "+oe),ce)throw new Error(J+" failed: Was called with "+ke+(1===ke?" argument.":" arguments.")+" Expects "+ce+".")};function Zn(J,W){return`${J} failed: ${W} argument `}function Lt(J,W,oe,ke){if((!ke||oe)&&"function"!=typeof oe)throw new Error(Zn(J,W)+"must be a valid function.")}function zi(J,W,oe,ke){if((!ke||oe)&&("object"!=typeof oe||null===oe))throw new Error(Zn(J,W)+"must be a valid context object.")}const ln=function(J){const W=[];let oe=0;for(let ke=0;ke<J.length;ke++){let ce=J.charCodeAt(ke);if(ce>=55296&&ce<=56319){const at=ce-55296;ke++,z(ke<J.length,"Surrogate pair missing trail surrogate."),ce=65536+(at<<10)+(J.charCodeAt(ke)-56320)}ce<128?W[oe++]=ce:ce<2048?(W[oe++]=ce>>6|192,W[oe++]=63&ce|128):ce<65536?(W[oe++]=ce>>12|224,W[oe++]=ce>>6&63|128,W[oe++]=63&ce|128):(W[oe++]=ce>>18|240,W[oe++]=ce>>12&63|128,W[oe++]=ce>>6&63|128,W[oe++]=63&ce|128)}return W},Ni=function(J){let W=0;for(let oe=0;oe<J.length;oe++){const ke=J.charCodeAt(oe);ke<128?W++:ke<2048?W+=2:ke>=55296&&ke<=56319?(W+=4,oe++):W+=3}return W};function _t(J,W=1e3,oe=2){const ke=W*Math.pow(oe,J),ce=Math.round(.5*ke*(Math.random()-.5)*2);return Math.min(144e5,ke+ce)}function zt(J){return J&&J._delegate?J._delegate:J}},8778:(ae,Z,R)=>{var h=R(4650);let z=null;function F(){return z}const X=new h.OlP("DocumentToken");let ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function K(){return(0,h.LFG)(j)}()},providedIn:"platform"}),n})();const B=new h.OlP("Location Initialized");let j=(()=>{class n extends ee{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){G()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){G()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(X))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function we(){return new j((0,h.LFG)(X))}()},providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ee(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Qe(n){return n&&"?"!==n[0]?"?"+n:n}let Ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ze)},providedIn:"root"}),n})();const he=new h.OlP("appBaseHref");let Ze=(()=>{class n extends Ie{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(X).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+Qe(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+Qe(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ee),h.LFG(he,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ye=(()=>{class n extends Ie{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+Qe(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+Qe(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ee),h.LFG(he,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ee(We(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qe(r))}normalize(t){return n.stripTrailingSlash(function Pe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,We(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Qe,n.joinWithSlash=Te,n.stripTrailingSlash=Ee,n.\u0275fac=function(t){return new(t||n)(h.LFG(Ie))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function De(){return new Me((0,h.LFG)(Ie))}()},providedIn:"root"}),n})();function We(n){return n.replace(/\/index.html$/,"")}function Uo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let gn=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class yo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Zi=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new yo(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===s?void 0:s);else if(null!==s){const l=r.get(s);r.move(l,u),Ds(l,i)}});for(let i=0,s=r.length;i<s;i++){const l=r.get(i).context;l.index=i,l.count=s,l.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ds(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ds(n,e){n.context.$implicit=e.item}let Qn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new du,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class du{constructor(){this.$implicit=null,this.ngIf=null}}function fr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class hn{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class pr{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const In=new pr,ki=new hn;let fn=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return In;if((0,h.F4k)(t))return ki;throw function qe(n,e){return new h.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Ho=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function ei(n){return"server"===n}let sc=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new tp((0,h.LFG)(X),window)}),n})();class tp{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function pi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ji(this.window.history)||Ji(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ji(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Go{}class zo extends class Qd extends class re{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function q(n){z||(z=n)}(new zo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function vc(){return Ko=Ko||document.querySelector("base"),Ko?Ko.getAttribute("href"):null}();return null==t?null:function Li(n){Ar=Ar||document.createElement("a"),Ar.setAttribute("href",n);const e=Ar.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ko=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Uo(document.cookie,e)}}let Ar,Ko=null;const Bn=new h.OlP("TRANSITION_ID"),Ol=[{provide:h.ip1,useFactory:function Rl(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Bn,X,h.zs3],multi:!0}];let Ml=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ec=new h.OlP("EventManagerPlugins");let Jd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ec),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class wc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Zo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Da=(()=>{class n extends Zo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Xd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Xd))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(X))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Xd(n){F().remove(n)}const Ta={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},eh=/%COMP%/g;function Cc(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Cc(n,i,t):(i=i.replace(eh,n),t.push(i))}return t}function th(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Sa=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Aa(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new nh(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new rh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Cc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Jd),h.LFG(Da),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Aa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ta[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(bu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(bu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Ta[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ta[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,th(r)):this.eventManager.addEventListener(e,t,th(r))}}function bu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class nh extends Aa{constructor(e,t,r,i){super(e),this.component=r;const s=Cc(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function sr(n){return"_ngcontent-%COMP%".replace(eh,n)}(i+"-"+r.id),this.hostAttr=function Ic(n){return"_nghost-%COMP%".replace(eh,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class rh extends Aa{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Cc(i.id,i.styles,[]);for(let u=0;u<s.length;u++){const l=document.createElement("style");l.textContent=s[u],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Gr=(()=>{class n extends wc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(X))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Iu=["alt","control","meta","shift"],Cu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Du=(()=>{class n extends wc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),u="code."),Iu.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),u+=_+".")}),u+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=u,p}static matchEventFullKeyCode(t,r){let i=Cu[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Iu.forEach(u=>{u!==i&&(0,xs[u])(t)&&(s+=u+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(X))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ac=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Tc(){zo.makeCurrent()},multi:!0},{provide:X,useFactory:function Su(){return(0,h.RDi)(document),document},deps:[]}]),wo=new h.OlP(""),sh=[{provide:h.rWj,useClass:class Yd{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const l=function(p){u=u||p,s--,0==s&&r(u)};i.forEach(function(p){p.whenStable(l)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],bo=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Jo(){return new h.qLn},deps:[]},{provide:Ec,useClass:Gr,multi:!0,deps:[X,h.R0b,h.Lbi]},{provide:Ec,useClass:Du,multi:!0,deps:[X]},{provide:Sa,useClass:Sa,deps:[Jd,Da,h.AFp]},{provide:h.FYo,useExisting:Sa},{provide:Zo,useExisting:Da},{provide:Da,useClass:Da,deps:[X]},{provide:Jd,useClass:Jd,deps:[Ec,h.R0b]},{provide:Go,useClass:Ml,deps:[]},[]];let Nl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Bn,useExisting:h.AFp},Ol]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wo,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...bo,...sh],imports:[Ho,h.hGG]}),n})(),Zs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(X))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function xa(){return new Zs((0,h.LFG)(X))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const Vl=[{path:"/",title:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",exact:!0},{path:"catalog",title:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433",exact:!1},{path:"about",title:"\u041e \u043d\u0430\u0441",exact:!1},{path:"delivery",title:"\u041e \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0435",exact:!1},{path:"shops",title:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d\u044b",exact:!1},{path:"contacts",title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b",exact:!1}];var Rs=(()=>{return(n=Rs||(Rs={})).Catalog="\u041d\u0430\u0448 \u0430\u0441\u0441\u043e\u0440\u0442\u0438\u043c\u0435\u043d\u0442",n.Categories="\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",Rs;var n})(),es=(()=>{return(n=es||(es={})).DriedFruits="driedFruits",n.DriedBerries="driedBerries",n.CandiedFruits="candiedFruits",n.EasternSweets="easternSweets",n.Snacks="snacks",n.Grocery="grocery",n.SeedsAndBeans="seedsAndBeans",es;var n})();const Pc=[{type:es.DriedFruits,title:"\u0421\u0443\u0445\u043e\u0444\u0440\u0443\u043a\u0442\u044b"},{type:es.DriedBerries,title:"\u042f\u0433\u043e\u0434\u044b \u0441\u0443\u0448\u0435\u043d\u044b\u0435"},{type:es.CandiedFruits,title:"\u0426\u0443\u043a\u0430\u0442\u044b"},{type:es.EasternSweets,title:"\u0412\u043e\u0441\u0442\u043e\u0447\u043d\u044b\u0435 \u0441\u043b\u0430\u0434\u043e\u0441\u0442\u0438"},{type:es.Snacks,title:"\u0421\u043d\u0435\u043a\u0438"},{type:es.Grocery,title:"\u0411\u0430\u043a\u0430\u043b\u0435\u044f"},{type:es.SeedsAndBeans,title:"\u0421\u0435\u043c\u0435\u043d\u0430 \u0438 \u0431\u043e\u0431\u043e\u0432\u044b\u0435"}];var tt=R(9653),st=R(4004);const Nc=n=>n.auth,na=(0,tt.P1)(Nc,n=>n.email),Os=(0,tt.P1)(Nc,n=>n.loading),kc=(0,tt.P1)(Nc,n=>n.basket);var rn=R(8996),gt=R(9646),ti=R(1135);const Ys=(0,R(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var pn=R(9751);const{isArray:Ou}=Array,{getPrototypeOf:Do,prototype:sp,keys:ah}=Object;function op(n){if(1===n.length){const e=n[0];if(Ou(e))return{args:e,keys:null};if(function ap(n){return n&&"object"==typeof n&&Do(n)===sp}(e)){const t=ah(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ka=R(4671);const{isArray:Fa}=Array;function uh(n){return(0,st.U)(e=>function Fc(n,e){return Fa(e)?n(...e):n(e)}(n,e))}var Js=R(7669);function Ui(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var ni=R(5403),gi=R(9672);function Lc(...n){const e=(0,Js.yG)(n),t=(0,Js.jO)(n),{args:r,keys:i}=op(n);if(0===r.length)return(0,rn.D)([],e);const s=new pn.y(function Ul(n,e,t=ka.y){return r=>{Mu(e,()=>{const{length:i}=n,s=new Array(i);let u=i,l=i;for(let p=0;p<i;p++)Mu(e,()=>{const _=(0,rn.D)(n[p],e);let w=!1;_.subscribe((0,ni.x)(r,I=>{s[p]=I,w||(w=!0,l--),l||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Ui(i,u):ka.y));return t?s.pipe(uh(t)):s}function Mu(n,e,t){n?(0,gi.f)(t,n,e):e()}var ra=R(8189);function jl(...n){return function Bl(){return(0,ra.J)(1)}()((0,rn.D)(n,(0,Js.yG)(n)))}var T=R(8421);function A(n){return new pn.y(e=>{(0,T.Xf)(n()).subscribe(e)})}var k=R(9635),$=R(576);function ue(n,e){const t=(0,$.m)(n)?n:()=>n,r=i=>i.error(t());return new pn.y(e?i=>e.schedule(r,0,i):r)}var me=R(515),je=R(727),ot=R(4482);function Tt(){return(0,ot.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ni.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Mt extends pn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ot.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ni.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.w0.EMPTY)}return e}refCount(){return Tt()(this)}}var Wt=R(7579),ft=R(3900),or=R(5698);function $n(...n){const e=(0,Js.yG)(n);return(0,ot.e)((t,r)=>{(e?jl(n,t,e):jl(n,t)).subscribe(r)})}var Ln=R(9300),mr=R(5577);function Ms(n){return(0,ot.e)((e,t)=>{let r=!1;e.subscribe((0,ni.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function xr(n=fs){return(0,ot.e)((e,t)=>{let r=!1;e.subscribe((0,ni.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function fs(){return new Ys}function ts(n,e){const t=arguments.length>=2;return r=>r.pipe(n?(0,Ln.h)((i,s)=>n(i,s,r)):ka.y,(0,or.q)(1),t?Ms(e):xr(()=>new Ys))}var ia=R(4351),mi=R(8505),yi=R(262),Ps=R(5026);function $l(n){return n<=0?()=>me.E:(0,ot.e)((e,t)=>{let r=[];e.subscribe((0,ni.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function yv(n,e){const t=arguments.length>=2;return r=>r.pipe(n?(0,Ln.h)((i,s)=>n(i,s,r)):ka.y,$l(1),t?Ms(e):xr(()=>new Ys))}function ch(n){return(0,ot.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Jt="primary",Hl=Symbol("RouteTitle");class wm{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function sa(n){return new wm(n)}function Gl(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],l=n[s];if(u.startsWith(":"))i[u.substring(1)]=l;else if(u!==l.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Xs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Ev(n[i],e[i]))return!1;return!0}function Ev(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function up(n){return Array.prototype.concat.apply([],n)}function wv(n){return n.length>0?n[n.length-1]:null}function _i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function To(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,rn.D)(Promise.resolve(n)):(0,gt.of)(n)}const cp={exact:function bm(n,e,t){if(!Va(n.segments,e.segments)||!Vc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!bm(n.children[r],e.children[r],t))return!1;return!0},subset:Im},bv={exact:function aI(n,e){return Xs(n,e)},subset:function uI(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ev(n[t],e[t]))},ignored:()=>!0};function Iv(n,e,t){return cp[t.paths](n.root,e.root,t.matrixParams)&&bv[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Im(n,e,t){return lp(n,e,e.segments,t)}function lp(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Va(i,t)||e.hasChildren()||!Vc(i,t,r))}if(n.segments.length===t.length){if(!Va(n.segments,t)||!Vc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Im(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Va(n.segments,i)&&Vc(n.segments,i,r)&&n.children[Jt])&&lp(n.children[Jt],e,s,r)}}function Vc(n,e,t){return e.every((r,i)=>bv[t](n[i].parameters,r.parameters))}class So{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sa(this.queryParams)),this._queryParamMap}toString(){return fh.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,_i(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ql(this)}}class La{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=sa(this.parameters)),this._parameterMap}toString(){return Dm(this)}}function Va(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let dh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new hh},providedIn:"root"}),n})();class hh{parse(e){const t=new gh(e);return new So(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Wl(e.root,!0)}`,r=function Di(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${zl(t)}=${zl(i)}`).join("&"):`${zl(t)}=${zl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Dv(n){return encodeURI(n)}(e.fragment)}`:""}`}}const fh=new hh;function ql(n){return n.segments.map(e=>Dm(e)).join("/")}function Wl(n,e){if(!n.hasChildren())return ql(n);if(e){const t=n.children[Jt]?Wl(n.children[Jt],!1):"",r=[];return _i(n.children,(i,s)=>{s!==Jt&&r.push(`${s}:${Wl(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Cv(n,e){let t=[];return _i(n.children,(r,i)=>{i===Jt&&(t=t.concat(e(r,i)))}),_i(n.children,(r,i)=>{i!==Jt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Jt?[Wl(n.children[Jt],!1)]:[`${i}:${Wl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Jt]?`${ql(n)}/${t[0]}`:`${ql(n)}/(${t.join("//")})`}}function Cm(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zl(n){return Cm(n).replace(/%3B/gi,";")}function dp(n){return Cm(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wr(n){return decodeURIComponent(n)}function ph(n){return Wr(n.replace(/\+/g,"%20"))}function Dm(n){return`${dp(n.path)}${function oa(n){return Object.keys(n).map(e=>`;${dp(e)}=${dp(n[e])}`).join("")}(n.parameters)}`}const Kl=/^[^\/()?;=#]+/;function Pu(n){const e=n.match(Kl);return e?e[0]:""}const Tv=/^[^=?&#]+/,Tm=/^[^&#]+/;class gh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Jt]=new Xt(e,t)),r}parseSegment(){const e=Pu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new La(Wr(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Pu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Pu(this.remaining);i&&(r=i,this.capture(r))}e[Wr(t)]=Wr(r)}parseQueryParam(e){const t=function hp(n){const e=n.match(Tv);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function Sv(n){const e=n.match(Tm);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=ph(t),s=ph(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Pu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Jt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Jt]:new Xt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function fp(n){return n.segments.length>0?new Xt([],{[Jt]:n}):n}function Zl(n){const e={};for(const r of Object.keys(n.children)){const s=Zl(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function pp(n){if(1===n.numberOfChildren&&n.children[Jt]){const e=n.children[Jt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function Nu(n){return n instanceof So}function xm(n,e,t,r,i){if(0===t.length)return Uc(e.root,e.root,e.root,r,i);const s=function gp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new jc(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return _i(s.outlets,(p,_)=>{l[_]="string"==typeof p?p.split("/"):p}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((l,p)=>{0==p&&"."===l||(0==p&&""===l?t=!0:".."===l?e++:""!=l&&i.push(l))}),i):[...i,s]},[]);return new jc(t,e,r)}(t);return s.toRoot()?Uc(e.root,e.root,new Xt([],{}),r,i):function u(p){const _=function mp(n,e,t,r){if(n.isAbsolute)return new Jl(e.root,!0,0);if(-1===r)return new Jl(t,t===e.root,0);return function yp(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new h.vHH(4005,!1);i=r.segments.length}return new Jl(r,!1,i-s)}(t,r+(eo(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),w=_.processChildren?Xl(_.segmentGroup,_.index,s.commands):$c(_.segmentGroup,_.index,s.commands);return Uc(e.root,_.segmentGroup,w,r,i)}(n.snapshot?._lastPathIndex)}function eo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Yl(n){return"object"==typeof n&&null!=n&&n.outlets}function Uc(n,e,t,r,i){let u,s={};r&&_i(r,(p,_)=>{s[_]=Array.isArray(p)?p.map(w=>`${w}`):`${p}`}),u=n===e?t:Bc(n,e,t);const l=fp(Zl(u));return new So(l,s,i)}function Bc(n,e,t){const r={};return _i(n.children,(i,s)=>{r[s]=i===e?t:Bc(i,e,t)}),new Xt(n.segments,r)}class jc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&eo(r[0]))throw new h.vHH(4003,!1);const i=r.find(Yl);if(i&&i!==wv(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function $c(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return Xl(n,e,t);const r=function Rv(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],l=t[r];if(Yl(l))break;const p=`${l}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!Rm(p,_,u))return s;r+=2}else{if(!Rm(p,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Xt(n.segments.slice(0,r.pathIndex),{});return s.children[Jt]=new Xt(n.segments.slice(r.pathIndex),n.children),Xl(s,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?_p(n,e,t):r.match?Xl(n,0,i):_p(n,e,t)}function Xl(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function xv(n){return Yl(n[0])?n[0].outlets:{[Jt]:n}}(t),i={};return _i(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=$c(n.children[u],e,s))}),_i(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new Xt(n.segments,i)}}function _p(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Yl(s)){const p=Ov(s.outlets);return new Xt(r,p)}if(0===i&&eo(t[0])){r.push(new La(n.segments[e].path,Hc(t[0]))),i++;continue}const u=Yl(s)?s.outlets[Jt]:`${s}`,l=i<t.length-1?t[i+1]:null;u&&l&&eo(l)?(r.push(new La(u,Hc(l))),i+=2):(r.push(new La(u,{})),i++)}return new Xt(r,{})}function Ov(n){const e={};return _i(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=_p(new Xt([],{}),0,t))}),e}function Hc(n){const e={};return _i(n,(t,r)=>e[r]=`${t}`),e}function Rm(n,e,t){return n==t.path&&Xs(e,t.parameters)}class to{constructor(e,t){this.id=e,this.url=t}}class ed extends to{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ua extends to{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gc extends to{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Om extends to{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mm extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mh extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yh extends to{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ba extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pm extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _h{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Mv{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ns{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ja{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nm{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class km{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class td{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Eh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nd(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=nd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qc(e,this._root).map(t=>t.value)}}function nd(n,e){if(n===e.value)return e;for(const t of e.children){const r=nd(n,t);if(r)return r}return null}function qc(n,e){if(n===e.value)return[e];for(const t of e.children){const r=qc(n,t);if(r.length)return r.unshift(e),r}return[]}class zr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function $a(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class wh extends Eh{constructor(e,t){super(e),this.snapshot=t,Fs(this,e)}toString(){return this.snapshot.toString()}}function bh(n,e){const t=function vp(n,e){const u=new Wc([],{},{},"",{},Jt,e,null,n.root,-1,{});return new Fm("",new zr(u,[]))}(n,e),r=new ti.X([new La("",{})]),i=new ti.X({}),s=new ti.X({}),u=new ti.X({}),l=new ti.X(""),p=new ks(r,i,u,l,s,Jt,e,t.root);return p.snapshot=t.root,new wh(new zr(p,[]),t)}class ks{constructor(e,t,r,i,s,u,l,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=l,this.title=this.data?.pipe((0,st.U)(_=>_[Hl]))??(0,gt.of)(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(e=>sa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(e=>sa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bi(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Ih(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Wc{constructor(e,t,r,i,s,u,l,p,_,w,I,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=l,this.title=this.data?.[Hl],this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=w,this._correctedLastPathIndex=S??w,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Fm extends Eh{constructor(e,t){super(t),this.url=e,Fs(this,t)}toString(){return Ha(this._root)}}function Fs(n,e){e.value._routerState=n,e.children.forEach(t=>Fs(n,t))}function Ha(n){const e=n.children.length>0?` { ${n.children.map(Ha).join(", ")} } `:"";return`${n.value}${e}`}function ku(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Xs(e.params,t.params)||n.params.next(t.params),function vv(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Xs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function zc(n,e){const t=Xs(n.params,e.params)&&function Ao(n,e){return Va(n,e)&&n.every((t,r)=>Xs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zc(n.parent,e.parent))}function Lu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Pv(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Lu(n,r,i);return Lu(n,r)})}(n,e,t);return new zr(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(l=>Lu(n,l)),u}}const r=function cI(n){return new ks(new ti.X(n.url),new ti.X(n.params),new ti.X(n.queryParams),new ti.X(n.fragment),new ti.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Lu(n,s));return new zr(r,i)}}const Ep="ngNavigationCancelingError";function Ch(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Nu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=E(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function E(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Ep]=!0,r.cancellationCode=e,t&&(r.url=t),r}function g(n){return y(n)&&Nu(n.url)}function y(n){return n&&n[Ep]}class b{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new O,this.attachRef=null}}let O=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new b,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const L=!1;let ie=(()=>{class n{constructor(t,r,i,s,u){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=i||Jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,L);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,L);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,L);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,L);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,p=new xe(t,l,i.injector);if(r&&function it(n){return!!n.resolveComponentFactory}(r)){const _=r.resolveComponentFactory(u);this.activated=i.createComponent(_,i.length,p)}else this.activated=i.createComponent(u,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(O),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class xe{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ks?this.route:e===O?this.childContexts:this.parent.get(e,t)}}let vt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[ie],encapsulation:2}),n})();function Ft(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Th(n){const e=n.children&&n.children.map(Th),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Jt&&(t.component=vt),t}function Ls(n){return n.outlet||Jt}function Sh(n,e){const t=n.filter(r=>Ls(r)===e);return t.push(...n.filter(r=>Ls(r)!==e)),t}function Uu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Fv{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ku(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=$a(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),_i(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=$a(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=$a(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=$a(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new km(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ja(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(ku(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(l.contexts),u.attachRef=l.componentRef,u.route=l.route.value,u.outlet&&u.outlet.attach(l.componentRef,l.route.value),ku(l.route.value),this.activateChildRoutes(e,null,u.children)}else{const l=Uu(i.snapshot),p=l?.get(h._Vd)??null;u.attachRef=null,u.route=i,u.resolver=p,u.injector=l,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class Ah{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Kc{constructor(e,t){this.component=e,this.route=t}}function Bu(n,e,t){const r=n._root;return xh(r,e?e._root:null,t,[r.value])}function rd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function xh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=$a(e);return n.children.forEach(u=>{(function lI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function S1(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Va(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Va(n.url,e.url)||!Xs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zc(n,e)||!Xs(n.queryParams,e.queryParams);default:return!zc(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new Ah(r)):(s.data=u.data,s._resolvedData=u._resolvedData),xh(n,e,s.component?l?l.children:null:t,r,i),p&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new Kc(l.outlet.component,u))}else u&&Um(e,l,i),i.canActivateChecks.push(new Ah(r)),xh(n,null,s.component?l?l.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),_i(s,(u,l)=>Um(u,t.getContext(l),i)),i}function Um(n,e,t){const r=$a(n),i=n.value;_i(r,(s,u)=>{Um(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Kc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Bm(n){return"function"==typeof n}function Uv(n){return n instanceof Ys||"EmptyError"===n?.name}const bp=Symbol("INITIAL_VALUE");function ju(){return(0,ft.w)(n=>Lc(n.map(e=>e.pipe((0,or.q)(1),$n(bp)))).pipe((0,st.U)(e=>{for(const t of e)if(!0!==t){if(t===bp)return bp;if(!1===t||t instanceof So)return t}return!0}),(0,Ln.h)(e=>e!==bp),(0,or.q)(1)))}function fI(n){return(0,k.z)((0,mi.b)(e=>{if(Nu(e))throw Ch(0,e)}),(0,st.U)(e=>!0===e))}const $v={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pI(n,e,t,r,i){const s=gI(n,e,t);return s.matched?function Cx(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,gt.of)(!0);const s=i.map(u=>{const l=rd(u,n);return To(function yx(n){return n&&Bm(n.canMatch)}(l)?l.canMatch(e,t):n.runInContext(()=>l(e,t)))});return(0,gt.of)(s).pipe(ju(),fI())}(r=Ft(e,r),e,t).pipe((0,st.U)(u=>!0===u?s:{...$v})):(0,gt.of)(s)}function gI(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...$v}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Gl)(t,n,e);if(!i)return{...$v};const s={};_i(i.posParams,(l,p)=>{s[p]=l.path});const u=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function Hv(n,e,t,r,i="corrected"){if(t.length>0&&function mI(n,e,t){return t.some(r=>Cp(n,e,r)&&Ls(r)!==Jt)}(n,t,r)){const u=new Xt(e,function Gv(n,e,t,r){const i={};i[Jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ls(s)!==Jt){const u=new Xt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Ls(s)]=u}return i}(n,e,r,new Xt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function yI(n,e,t){return t.some(r=>Cp(n,e,r))}(n,t,r)){const u=new Xt(n.segments,function Ip(n,e,t,r,i,s){const u={};for(const l of r)if(Cp(n,t,l)&&!i[Ls(l)]){const p=new Xt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,u[Ls(l)]=p}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new Xt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Cp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function _I(n,e,t,r){return!!(Ls(n)===r||r!==Jt&&Cp(e,t,n))&&("**"===n.path||gI(e,n,t).matched)}function qv(n,e,t){return 0===e.length&&!n.children[t]}const Dp=!1;class Rh{constructor(e){this.segmentGroup=e||null}}class Dx{constructor(e){this.urlTree=e}}function Tp(n){return ue(new Rh(n))}function jm(n){return ue(new Dx(n))}class Tx{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Hv(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Jt).pipe((0,st.U)(s=>this.createUrlTree(Zl(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,yi.K)(s=>{if(s instanceof Dx)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Rh?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Jt).pipe((0,st.U)(i=>this.createUrlTree(Zl(i),e.queryParams,e.fragment))).pipe((0,yi.K)(i=>{throw i instanceof Rh?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,Dp)}createUrlTree(e,t,r){const i=fp(e);return new So(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,st.U)(s=>new Xt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,rn.D)(i).pipe((0,ia.b)(s=>{const u=r.children[s],l=Sh(t,s);return this.expandSegmentGroup(e,l,u,s).pipe((0,st.U)(p=>({segment:p,outlet:s})))}),(0,Ps.R)((s,u)=>(s[u.outlet]=u.segment,s),{}),yv())}expandSegment(e,t,r,i,s,u){return(0,rn.D)(r).pipe((0,ia.b)(l=>this.expandSegmentAgainstRoute(e,t,r,l,i,s,u).pipe((0,yi.K)(_=>{if(_ instanceof Rh)return(0,gt.of)(null);throw _}))),ts(l=>!!l),(0,yi.K)((l,p)=>{if(Uv(l))return qv(t,i,s)?(0,gt.of)(new Xt([],{})):Tp(t);throw l}))}expandSegmentAgainstRoute(e,t,r,i,s,u,l){return _I(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):Tp(t):Tp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?jm(s):this.lineralizeSegments(r,s).pipe((0,mr.z)(u=>{const l=new Xt(u,{});return this.expandSegment(e,l,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:l,consumedSegments:p,remainingSegments:_,positionalParamSegments:w}=gI(t,i,s);if(!l)return Tp(t);const I=this.applyRedirectCommands(p,i.redirectTo,w);return i.redirectTo.startsWith("/")?jm(I):this.lineralizeSegments(i,I).pipe((0,mr.z)(S=>this.expandSegment(e,t,r,S.concat(_),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=Ft(r,e),r.loadChildren?(r._loadedRoutes?(0,gt.of)({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,st.U)(l=>(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,new Xt(i,{})))):(0,gt.of)(new Xt(i,{}))):pI(t,r,i,e).pipe((0,ft.w)(({matched:u,consumedSegments:l,remainingSegments:p})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,mr.z)(w=>{const I=w.injector??e,S=w.routes,{segmentGroup:M,slicedSegments:P}=Hv(t,l,p,S),U=new Xt(M.segments,M.children);if(0===P.length&&U.hasChildren())return this.expandChildren(I,S,U).pipe((0,st.U)(_e=>new Xt(l,_e)));if(0===S.length&&0===P.length)return(0,gt.of)(new Xt(l,{}));const Y=Ls(r)===s;return this.expandSegment(I,U,S,P,Y?Jt:s,!0).pipe((0,st.U)(Re=>new Xt(l.concat(Re.segments),Re.children)))})):Tp(t)))}getChildConfig(e,t,r){return t.children?(0,gt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,gt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function Ix(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,gt.of)(!0);const s=i.map(u=>{const l=rd(u,n);return To(function Vv(n){return n&&Bm(n.canLoad)}(l)?l.canLoad(e,t):n.runInContext(()=>l(e,t)))});return(0,gt.of)(s).pipe(ju(),fI())}(e,t,r).pipe((0,mr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,mi.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function EI(n){return ue(E(Dp,3))}())):(0,gt.of)({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,gt.of)(r);if(i.numberOfChildren>1||!i.children[Jt])return ue(new h.vHH(4e3,Dp));i=i.children[Jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new So(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return _i(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);r[s]=t[l]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return _i(t.children,(l,p)=>{u[p]=this.createSegmentGroup(e,l,r,i)}),new Xt(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,Dp);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Sx{}class od{constructor(e,t,r,i,s,u,l,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=l,this.urlSerializer=p}recognize(){const e=Hv(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Jt).pipe((0,st.U)(t=>{if(null===t)return null;const r=new Wc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new zr(r,t),s=new Fm(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=Bi(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe((0,ia.b)(i=>{const s=r.children[i],u=Sh(t,i);return this.processSegmentGroup(e,u,s,i)}),(0,Ps.R)((i,s)=>i&&s?(i.push(...s),i):null),function Em(n,e=!1){return(0,ot.e)((t,r)=>{let i=0;t.subscribe((0,ni.x)(r,s=>{const u=n(s,i++);(u||e)&&r.next(s),!u&&r.complete()}))})}(i=>null!==i),Ms(null),yv(),(0,st.U)(i=>{if(null===i)return null;const s=bI(i);return function wI(n){n.sort((e,t)=>e.value.outlet===Jt?-1:t.value.outlet===Jt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,rn.D)(t).pipe((0,ia.b)(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,s)),ts(u=>!!u),(0,yi.K)(u=>{if(Uv(u))return qv(r,i,s)?(0,gt.of)([]):(0,gt.of)(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!_I(t,r,i,s))return(0,gt.of)(null);let u;if("**"===t.path){const l=i.length>0?wv(i).parameters:{},p=CI(r)+i.length,_=new Wc(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,TI(t),Ls(t),t.component??t._loadedComponent??null,t,ad(r),p,SI(t),p);u=(0,gt.of)({snapshot:_,consumedSegments:[],remainingSegments:[]})}else u=pI(r,t,i,e).pipe((0,st.U)(({matched:l,consumedSegments:p,remainingSegments:_,parameters:w})=>{if(!l)return null;const I=CI(r)+p.length;return{snapshot:new Wc(p,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,TI(t),Ls(t),t.component??t._loadedComponent??null,t,ad(r),I,SI(t),I),consumedSegments:p,remainingSegments:_}}));return u.pipe((0,ft.w)(l=>{if(null===l)return(0,gt.of)(null);const{snapshot:p,consumedSegments:_,remainingSegments:w}=l;e=t._injector??e;const I=t._loadedInjector??e,S=function Kv(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:M,slicedSegments:P}=Hv(r,_,w,S.filter(Y=>void 0===Y.redirectTo),this.relativeLinkResolution);if(0===P.length&&M.hasChildren())return this.processChildren(I,S,M).pipe((0,st.U)(Y=>null===Y?null:[new zr(p,Y)]));if(0===S.length&&0===P.length)return(0,gt.of)([new zr(p,[])]);const U=Ls(t)===s;return this.processSegment(I,S,M,P,U?Jt:s).pipe((0,st.U)(Y=>null===Y?null:[new zr(p,Y)]))}))}}function Ax(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function bI(n){const e=[],t=new Set;for(const r of n){if(!Ax(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=bI(r.children);e.push(new zr(r.value,i))}return e.filter(r=>!t.has(r))}function ad(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function CI(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function TI(n){return n.data||{}}function SI(n){return n.resolve||{}}function RI(n){return"string"==typeof n.title||null===n.title}function ud(n){return(0,ft.w)(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,st.U)(()=>e)):(0,gt.of)(e)})}let OI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Jt);return r}getResolvedTitleForRoute(t){return t.data[Hl]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(cd)},providedIn:"root"}),n})(),cd=(()=>{class n extends OI{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Zs))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ox{}class MI extends class M1{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Gm=new h.OlP("",{providedIn:"root",factory:()=>({})}),qm=new h.OlP("ROUTES");let Wm=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,gt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=To(t.loadComponent()).pipe((0,mi.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ch(()=>{this.componentLoaders.delete(t)})),i=new Mt(r,()=>new Wt.x).pipe(Tt());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,gt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,st.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,_,w=!1;Array.isArray(l)?_=l:(p=l.create(t).injector,_=up(p.get(qm,[],h.XFs.Self|h.XFs.Optional)));return{routes:_.map(Th),injector:p}}),ch(()=>{this.childrenLoaders.delete(r)})),u=new Mt(s,()=>new Wt.x).pipe(Tt());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return To(t()).pipe((0,mr.z)(r=>r instanceof h.YKP||Array.isArray(r)?(0,gt.of)(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Qv{}class Yv{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Jv(n){throw n}function Sp(n,e,t){return e.parse("/")}const Px={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Nx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function NI(){const n=(0,h.f3M)(dh),e=(0,h.f3M)(O),t=(0,h.f3M)(Me),r=(0,h.f3M)(h.zs3),i=(0,h.f3M)(h.Sil),s=(0,h.f3M)(qm,{optional:!0})??[],u=(0,h.f3M)(Gm,{optional:!0})??{},l=(0,h.f3M)(cd),p=(0,h.f3M)(OI,{optional:!0}),_=(0,h.f3M)(Qv,{optional:!0}),w=(0,h.f3M)(Ox,{optional:!0}),I=new Rr(null,n,e,t,r,i,up(s));return _&&(I.urlHandlingStrategy=_),w&&(I.routeReuseStrategy=w),I.titleStrategy=p??l,function kx(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,I),I}let Rr=(()=>{class n{constructor(t,r,i,s,u,l,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Wt.x,this.errorHandler=Jv,this.malformedUriErrorHandler=Sp,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,gt.of)(void 0),this.urlHandlingStrategy=new Yv,this.routeReuseStrategy=new MI,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(Wm),this.configLoader.onLoadEndListener=S=>this.triggerEvent(new Mv(S)),this.configLoader.onLoadStartListener=S=>this.triggerEvent(new _h(S)),this.ngModule=u.get(h.h0i),this.console=u.get(h.c2e);const I=u.get(h.R0b);this.isNgZoneEnabled=I instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function oI(){return new So(new Xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bh(this.currentUrlTree,this.rootComponentType),this.transitions=new ti.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe((0,Ln.h)(i=>0!==i.id),(0,st.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),(0,ft.w)(i=>{let s=!1,u=!1;return(0,gt.of)(i).pipe((0,mi.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ft.w)(l=>{const p=this.browserUrlTree.toString(),_=!this.navigated||l.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return kI(l.source)&&(this.browserUrlTree=l.extractedUrl),(0,gt.of)(l).pipe((0,ft.w)(I=>{const S=this.transitions.getValue();return r.next(new ed(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),S!==this.transitions.getValue()?me.E:Promise.resolve(I)}),function Wv(n,e,t,r){return(0,ft.w)(i=>function id(n,e,t,r,i){return new Tx(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,st.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mi.b)(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},i.urlAfterRedirects=I.urlAfterRedirects}),function Zv(n,e,t,r,i,s){return(0,mr.z)(u=>function $m(n,e,t,r,i,s,u="emptyOnly",l="legacy"){return new od(n,e,t,r,i,u,l,s).recognize().pipe((0,ft.w)(p=>null===p?function zv(n){return new pn.y(e=>e.error(n))}(new Sx):(0,gt.of)(p)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,s).pipe((0,st.U)(l=>({...u,targetSnapshot:l}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mi.b)(I=>{if(i.targetSnapshot=I.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const M=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(M,I)}this.browserUrlTree=I.urlAfterRedirects}const S=new Mm(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);r.next(S)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:S,extractedUrl:M,source:P,restoredState:U,extras:Y}=l,ge=new ed(S,this.serializeUrl(M),P,U);r.next(ge);const Re=bh(M,this.rootComponentType).snapshot;return i={...l,targetSnapshot:Re,urlAfterRedirects:M,extras:{...Y,skipLocationChange:!1,replaceUrl:!1}},(0,gt.of)(i)}return this.rawUrlTree=l.rawUrl,l.resolve(null),me.E}),(0,mi.b)(l=>{const p=new mh(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(p)}),(0,st.U)(l=>i={...l,guards:Bu(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function vx(n,e){return(0,mr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?(0,gt.of)({...t,guardsResult:!0}):function Bv(n,e,t,r){return(0,rn.D)(n).pipe((0,mr.z)(i=>function hI(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,gt.of)(!0);const u=s.map(l=>{const p=Uu(e)??i,_=rd(l,p);return To(function dI(n){return n&&Bm(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):p.runInContext(()=>_(n,e,t,r))).pipe(ts())});return(0,gt.of)(u).pipe(ju())}(i.component,i.route,t,e,r)),ts(i=>!0!==i,!0))}(u,r,i,n).pipe((0,mr.z)(l=>l&&function Lv(n){return"boolean"==typeof n}(l)?function Ex(n,e,t,r){return(0,rn.D)(e).pipe((0,ia.b)(i=>jl(function wx(n,e){return null!==n&&e&&e(new Ns(n)),(0,gt.of)(!0)}(i.route.parent,r),function ii(n,e){return null!==n&&e&&e(new Nm(n)),(0,gt.of)(!0)}(i.route,r),function jv(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function wp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>A(()=>{const l=u.guards.map(p=>{const _=Uu(u.node)??t,w=rd(p,_);return To(function x1(n){return n&&Bm(n.canActivateChild)}(w)?w.canActivateChild(r,n):_.runInContext(()=>w(r,n))).pipe(ts())});return(0,gt.of)(l).pipe(ju())}));return(0,gt.of)(s).pipe(ju())}(n,i.path,t),function bx(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,gt.of)(!0);const i=r.map(s=>A(()=>{const u=Uu(e)??t,l=rd(s,u);return To(function A1(n){return n&&Bm(n.canActivate)}(l)?l.canActivate(e,n):u.runInContext(()=>l(e,n))).pipe(ts())}));return(0,gt.of)(i).pipe(ju())}(n,i.route,t))),ts(i=>!0!==i,!0))}(r,s,n,e):(0,gt.of)(l)),(0,st.U)(l=>({...t,guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),(0,mi.b)(l=>{if(i.guardsResult=l.guardsResult,Nu(l.guardsResult))throw Ch(0,l.guardsResult);const p=new yh(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(p)}),(0,Ln.h)(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),ud(l=>{if(l.guards.canActivateChecks.length)return(0,gt.of)(l).pipe((0,mi.b)(p=>{const _=new Ba(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,ft.w)(p=>{let _=!1;return(0,gt.of)(p).pipe(function xx(n,e){return(0,mr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,gt.of)(t);let s=0;return(0,rn.D)(i).pipe((0,ia.b)(u=>function AI(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!RI(i)&&(s[Hl]=i.title),function Rx(n,e,t,r){const i=function xI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,gt.of)({});const s={};return(0,rn.D)(i).pipe((0,mr.z)(u=>function O1(n,e,t,r){const i=Uu(e)??r,s=rd(n,i);return To(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[u],e,t,r).pipe(ts(),(0,mi.b)(l=>{s[u]=l}))),$l(1),function _v(n){return(0,st.U)(()=>n)}(s),(0,yi.K)(u=>Uv(u)?me.E:ue(u)))}(s,n,e,r).pipe((0,st.U)(u=>(n._resolvedData=u,n.data=Bi(n,t).resolve,i&&RI(i)&&(n.data[Hl]=i.title),null)))}(u.route,r,n,e)),(0,mi.b)(()=>s++),$l(1),(0,mr.z)(u=>s===i.length?(0,gt.of)(t):me.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mi.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,mi.b)(p=>{const _=new Pm(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),ud(l=>{const p=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,mi.b)(I=>{_.component=I}),(0,st.U)(()=>{})));for(const I of _.children)w.push(...p(I));return w};return Lc(p(l.targetSnapshot.root)).pipe(Ms(),(0,or.q)(1))}),ud(()=>this.afterPreactivation()),(0,st.U)(l=>{const p=function Fu(n,e,t){const r=Lu(n,e._root,t?t._root:void 0);return new wh(r,e)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return i={...l,targetRouterState:p}}),(0,mi.b)(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,st.U)(r=>(new Fv(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),(0,mi.b)({next(){s=!0},complete(){s=!0}}),ch(()=>{s||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),(0,yi.K)(l=>{if(u=!0,y(l)){g(l)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new Gc(i.id,this.serializeUrl(i.extractedUrl),l.message,l.cancellationCode);if(r.next(p),g(l)){const _=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),w={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kI(i.source)};this.scheduleNavigation(_,"imperative",null,w,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new Om(i.id,this.serializeUrl(i.extractedUrl),l,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(l))}catch(_){i.reject(_)}}return me.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Th),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:l,preserveFragment:p}=r,_=i||this.routerState.root,w=p?this.currentUrlTree.fragment:u;let I=null;switch(l){case"merge":I={...this.currentUrlTree.queryParams,...s};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}return null!==I&&(I=this.removeEmptyProps(I)),xm(_,this.currentUrlTree,t,I,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Nu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Fx(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Px}:!1===r?{...Nx}:r,Nu(t))return Iv(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Iv(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ua(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,u){if(this.disposed)return Promise.resolve(!1);let l,p,_;u?(l=u.resolve,p=u.reject,_=u.promise):_=new Promise((S,M)=>{l=S,p=M});const w=++this.navigationId;let I;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),I=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):I=0,this.setTransition({id:w,targetPageId:I,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:l,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new Gc(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return NI()},providedIn:"root"}),n})();function kI(n){return"imperative"!==n}let Zc=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Wt.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Rr),h.Y36(ks),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),Vs=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Wt.x,this.subscription=t.events.subscribe(s=>{s instanceof Ua&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,u){return!!(0!==t||r||i||s||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Rr),h.Y36(ks),h.Y36(Ie))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),FI=(()=>{class n{constructor(t,r,i,s,u,l){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=u,this.linkWithHref=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(p=>{p instanceof Ua&&this.update()})}ngAfterContentInit(){(0,gt.of)(this.links.changes,this.linksWithHrefs.changes,(0,gt.of)(null)).pipe((0,ra.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,rn.D)(t).pipe((0,ra.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Lx(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Rr),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(Zc,8),h.Y36(Vs,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(h.Suo(i,Zc,5),h.Suo(i,Vs,5)),2&t){let s;h.iGM(s=h.CRH())&&(r.links=s),h.iGM(s=h.CRH())&&(r.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[h.TTD]}),n})();class Vx{}let P1=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ln.h)(t=>t instanceof Ua),(0,ia.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,h.MMx)(s.providers,t,`Route: ${s.path}`));const u=s._injector??t,l=s._loadedInjector??u;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(u,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(l,s.children??s._loadedRoutes))}return(0,rn.D)(i).pipe((0,ra.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,gt.of)(null);const s=i.pipe((0,mr.z)(u=>null===u?(0,gt.of)(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,rn.D)([s,u]).pipe((0,ra.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Rr),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Vx),h.LFG(Wm))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Km=new h.OlP("");let Bx=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ed?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ua&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof td&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new td(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Oh(n,e){return{\u0275kind:n,\u0275providers:e}}function e0(n){return[{provide:qm,multi:!0,useValue:n}]}function LI(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(Rr),i=n.get(t0);1===n.get(n0)&&r.initialNavigation(),n.get(r0,null,h.XFs.Optional)?.setUpPreloading(),n.get(Km,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const t0=new h.OlP("",{factory:()=>new Wt.x}),n0=new h.OlP("",{providedIn:"root",factory:()=>1});const r0=new h.OlP("");function Gx(n){return Oh(0,[{provide:r0,useExisting:P1},{provide:Vx,useExisting:n}])}const s0=new h.OlP("ROUTER_FORROOT_GUARD"),VI=[Me,{provide:dh,useClass:hh},{provide:Rr,useFactory:NI},O,{provide:ks,useFactory:function Xv(n){return n.routerState.root},deps:[Rr]},Wm];function UI(){return new h.PXZ("Router",Rr)}let BI=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[VI,[],e0(t),{provide:s0,useFactory:$I,deps:[[Rr,new h.FiY,new h.tp0]]},{provide:Gm,useValue:r||{}},r?.useHash?{provide:Ie,useClass:Ye}:{provide:Ie,useClass:Ze},{provide:Km,useFactory:()=>{const n=(0,h.f3M)(Rr),e=(0,h.f3M)(sc),t=(0,h.f3M)(Gm);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Bx(n,e,t)}},r?.preloadingStrategy?Gx(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:UI},r?.initialNavigation?zx(r):[],[{provide:HI,useFactory:LI},{provide:h.tb,multi:!0,useExisting:HI}]]}}static forChild(t){return{ngModule:n,providers:[e0(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(s0,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[vt]}),n})();function $I(n){return"guarded"}function zx(n){return["disabled"===n.initialNavigation?Oh(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Rr);return()=>{e.setUpLocationChangeListener()}}},{provide:n0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Oh(2,[{provide:n0,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const u=e.get(Rr),l=e.get(t0);(function i(s){e.get(Rr).events.pipe((0,Ln.h)(l=>l instanceof Ua||l instanceof Gc||l instanceof Om),(0,st.U)(l=>l instanceof Ua||l instanceof Gc&&(0===l.code||1===l.code)&&null),(0,Ln.h)(l=>null!==l),(0,or.q)(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),u.afterPreactivation=()=>(s(!0),r||l.closed?(0,gt.of)(void 0):l),u.initialNavigation()}))}}]).\u0275providers:[]]}const HI=new h.OlP(""),GI=function(n){return{exact:n}};function ld(n,e){if(1&n&&(h.ynx(0),h.TgZ(1,"li",11)(2,"a",12),h._uU(3),h.qZA()(),h.BQk()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("routerLinkActiveOptions",h.VKq(3,GI,t.exact)),h.xp6(1),h.Q6J("routerLink",t.path),h.xp6(1),h.Oqu(t.title)}}let Zx=(()=>{class n{constructor(t){this.store$=t,this.navigation=Vl}ngOnInit(){this.basket=this.store$.pipe((0,tt.Ys)(kc)).pipe((0,st.U)(t=>JSON.parse(t)))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(tt.yh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-header"]],decls:17,vars:5,consts:[[1,"flex","items-center","px-[100px]","pt-[61px]","pb-[47px]","bg-grey-200"],["src","./assets/cosinuts-logo.png","alt","logo","width","155","height","57"],[1,"ml-[27px]","flex","w-screen"],[1,"flex","items-center"],[4,"ngFor","ngForOf"],[1,"ml-auto","flex","items-center"],["src","./assets/phone.svg","alt","phone logo","width","16","height","16"],[1,"ml-[10px]","ext-grey-600"],[1,"ml-[20px]","text-grey-600"],[1,"flex","items-center","ml-[20px]","bg-orange-500","pl-[17px]","p-[7px]","rounded-[13px]","text-white","hover:bg-orange-600",3,"routerLink"],[1,"bg-white","rounded-[10px]","pl-[14px]","pr-[13px]","p-[9px]","text-grey-800","ml-[15px]"],["routerLinkActive","text-black",1,"text-[18px]","text-grey","hover:text-orange","cursor-pointer","ml-[10px]",3,"routerLinkActiveOptions"],[3,"routerLink"]],template:function(t,r){1&t&&(h.TgZ(0,"header",0),h._UZ(1,"img",1),h.TgZ(2,"nav",2)(3,"ul",3),h.YNc(4,ld,4,5,"ng-container",4),h.qZA(),h.TgZ(5,"div",5)(6,"div",3),h._UZ(7,"img",6),h.TgZ(8,"p",7),h._uU(9,"+7(900)232-32-32"),h.qZA()(),h.TgZ(10,"p",8),h._uU(11,"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"),h.qZA(),h.TgZ(12,"a",9),h._uU(13," \u041a\u043e\u0440\u0437\u0438\u043d\u0430 "),h.TgZ(14,"div",10),h._uU(15),h.ALo(16,"async"),h.qZA()()()()()),2&t&&(h.xp6(4),h.Q6J("ngForOf",r.navigation),h.xp6(8),h.Q6J("routerLink","basket"),h.xp6(3),h.hij(" ",h.lcZ(16,3,r.basket).length," "))},dependencies:[Vs,FI,Zi,fn],encapsulation:2}),n})(),o0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-footer"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"p"),h._uU(1,"footer"),h.qZA())},encapsulation:2}),n})(),a0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"flex","justify-center","pl-[68px]"]],template:function(t,r){1&t&&(h._UZ(0,"app-header"),h.TgZ(1,"main",0),h._UZ(2,"router-outlet"),h.qZA(),h._UZ(3,"app-footer"))},dependencies:[Zx,o0,ie],encapsulation:2}),n})(),Yx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Mh=(()=>{class n extends Yx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const $u=new h.OlP("NgValueAccessor"),L1={provide:$u,useExisting:(0,h.Gpc)(()=>Qm),multi:!0},Ph=new h.OlP("CompositionEventMode");let Qm=(()=>{class n extends Yx{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Xx(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Ph,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[h._Bn([L1]),h.qOj]}),n})();function ua(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function WI(n){return null!=n&&"number"==typeof n.length}const ji=new h.OlP("NgValidators"),Qc=new h.OlP("NgAsyncValidators"),eR=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class zI{static min(e){return function KI(n){return e=>{if(ua(e.value)||ua(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ZI(n){return e=>{if(ua(e.value)||ua(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return c0(e)}static requiredTrue(e){return function QI(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function l0(n){return ua(n.value)||eR.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function d0(n){return e=>ua(e.value)||!WI(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Ym(n){return e=>WI(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function tR(n){if(!n)return Nh;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ua(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return xo(e)}static composeAsync(e){return XI(e)}}function c0(n){return ua(n.value)?{required:!0}:null}function Nh(n){return null}function YI(n){return null!=n}function nR(n){return(0,h.QGY)(n)?(0,rn.D)(n):n}function dd(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function h0(n,e){return e.map(t=>t(n))}function xp(n){return n.map(e=>function JI(n){return!n.validate}(e)?e:t=>e.validate(t))}function xo(n){if(!n)return null;const e=n.filter(YI);return 0==e.length?null:function(t){return dd(h0(t,e))}}function Jm(n){return null!=n?xo(xp(n)):null}function XI(n){if(!n)return null;const e=n.filter(YI);return 0==e.length?null:function(t){return function Qx(...n){const e=(0,Js.jO)(n),{args:t,keys:r}=op(n),i=new pn.y(s=>{const{length:u}=t;if(!u)return void s.complete();const l=new Array(u);let p=u,_=u;for(let w=0;w<u;w++){let I=!1;(0,T.Xf)(t[w]).subscribe((0,ni.x)(s,S=>{I||(I=!0,_--),l[w]=S},()=>p--,void 0,()=>{(!p||!I)&&(_||s.next(r?Ui(r,l):l),s.complete())}))}});return e?i.pipe(uh(e)):i}(h0(t,e).map(nR)).pipe((0,st.U)(dd))}}function Rp(n){return null!=n?XI(xp(n)):null}function qa(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Xm(n){return n._rawValidators}function f0(n){return n._rawAsyncValidators}function Op(n){return n?Array.isArray(n)?n:[n]:[]}function p0(n,e){return Array.isArray(n)?n.includes(e):n===e}function g0(n,e){const t=Op(e);return Op(n).forEach(i=>{p0(t,i)||t.push(i)}),t}function rR(n,e){return Op(e).filter(t=>!p0(n,t))}class Mp{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Jm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Rp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ti extends Mp{get formDirective(){return null}get path(){return null}}class Wa extends Mp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ey{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let tC=(()=>{class n extends ey{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Wa,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),nC=(()=>{class n extends ey{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ti,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const ny="VALID",y0="INVALID",no="PENDING",hd="DISABLED";function _0(n){return(kh(n)?n.validators:n)||null}function v0(n){return Array.isArray(n)?Jm(n):n||null}function Pp(n,e){return(kh(e)?e.asyncValidators:n)||null}function E0(n){return Array.isArray(n)?Rp(n):n||null}function kh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class w0{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=v0(this._rawValidators),this._composedAsyncValidatorFn=E0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ny}get invalid(){return this.status===y0}get pending(){return this.status==no}get disabled(){return this.status===hd}get enabled(){return this.status!==hd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=v0(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=E0(e)}addValidators(e){this.setValidators(g0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(g0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rR(e,this._rawAsyncValidators))}hasValidator(e){return p0(this._rawValidators,e)}hasAsyncValidator(e){return p0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=no,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ny,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ny||this.status===no)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hd:ny}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=no,this._hasOwnPendingAsyncValidator=!0;const t=nR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?hd:this.errors?y0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(no)?no:this._anyControlsHaveStatus(y0)?y0:ny}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Np extends w0{constructor(e,t,r){super(_0(t),Pp(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Hu(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function aC(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function za(n,e){Lh(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function uC(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ry(n,e)})}(n,e),function cC(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function I0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ry(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function b0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Fh(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),kp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Gu(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Lh(n,e){const t=Xm(n);null!==e.validator?n.setValidators(qa(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=f0(n);null!==e.asyncValidator?n.setAsyncValidators(qa(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Gu(e._rawValidators,i),Gu(e._rawAsyncValidators,i)}function kp(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Xm(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=f0(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return Gu(e._rawValidators,r),Gu(e._rawAsyncValidators,r),t}function ry(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function D0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function fC(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const oy=class extends w0{constructor(e=null,t,r){super(_0(t),Pp(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=fC(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){D0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){D0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){fC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let vC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),EC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Up=new h.OlP("NgModelWithFormControlWarning"),A0={provide:Ti,useExisting:(0,h.Gpc)(()=>x0)};let x0=(()=>{class n extends Ti{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return za(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Fh(t.control||null,t,!1),function hC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function dC(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Fh(r||null,t),(n=>n instanceof oy)(i)&&(za(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function iy(n,e){Lh(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function lR(n,e){return kp(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Lh(this.form,this),this._oldForm&&kp(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ji,10),h.Y36(Qc,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([A0]),h.qOj,h.TTD]}),n})();const qu={provide:Wa,useExisting:(0,h.Gpc)(()=>Vh)};let Vh=(()=>{class n extends Wa{constructor(t,r,i,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ps(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Qm?t=s:function lC(n){return Object.getPrototypeOf(n.constructor)===Mh}(s)?r=s:i=s}),i||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function sy(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function fd(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Ti,13),h.Y36(ji,10),h.Y36(Qc,10),h.Y36($u,10),h.Y36(Up,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([qu]),h.qOj,h.TTD]}),n})(),pd=(()=>{class n{constructor(){this._validator=Nh}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Nh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const M0={provide:ji,useExisting:(0,h.Gpc)(()=>fy),multi:!0};let fy=(()=>{class n extends pd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>c0}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([M0]),h.qOj]}),n})(),ca=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[EC]}),n})(),Gp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[ca]}),n})(),$i=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Up,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[ca]}),n})(),yd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[$i]}),n})(),Bh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-main"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"p"),h._uU(1,"Main page"),h.qZA())},encapsulation:2}),n})(),jh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-about"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"div"),h._uU(1,"About page"),h.qZA())},encapsulation:2}),n})();const Wu=n=>n.products,$h=(0,tt.P1)(Wu,n=>n.products),NC=(0,tt.P1)(Wu,n=>n.currentPage),kC=(0,tt.P1)(Wu,n=>n.count),FC=(0,tt.P1)(Wu,n=>n.loading),_d=(0,tt.PH)("[Categories] AddProducts",(0,tt.Ky)()),N0=(0,tt.PH)("[Effect] products from effect",(0,tt.Ky)()),LC=(0,tt.PH)("[Categories] change current page to 0"),Hh=(0,tt.PH)("[catalog] loading"),py=(0,tt.P1)(n=>n.productType,n=>n.productType);var Hn=(()=>{return(n=Hn||(Hn={}))[n.loading=1]="loading",n[n.setVariables=2]="setVariables",n[n.fetchMore=3]="fetchMore",n[n.refetch=4]="refetch",n[n.poll=6]="poll",n[n.ready=7]="ready",n[n.error=8]="error",Hn;var n})();function Zp(n){return!!n&&n<7}var fe=R(655),k0="Invariant Violation",UC=Object.setPrototypeOf,F0=void 0===UC?function(n,e){return n.__proto__=e,n}:UC,Sn=function(n){function e(t){void 0===t&&(t=k0);var r=n.call(this,"number"==typeof t?k0+": "+t+" (see https://github.com/apollographql/invariant-packages)":t)||this;return r.framesToPop=1,r.name=k0,F0(r,e.prototype),r}return(0,fe.ZT)(e,n),e}(Error);function wt(n,e){if(!n)throw new Sn(e)}var n,vd=["debug","log","warn","error","silent"],Gh=vd.indexOf("log");function qh(n){return function(){if(vd.indexOf(n)>=Gh){var e=console[n]||console.log;return e.apply(console,arguments)}}}function gs(n){try{return n()}catch{}}(n=wt||(wt={})).debug=qh("debug"),n.log=qh("log"),n.warn=qh("warn"),n.error=qh("error");const V0=gs(function(){return globalThis})||gs(function(){return window})||gs(function(){return self})||gs(function(){return global})||gs(function(){return gs.constructor("return this")()});var U0="__",gy=[U0,U0].join("DEV");const my=function BC(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(V0,gy,{value:"production"!==gs(function(){return"production"}),enumerable:!1,configurable:!0,writable:!0}),V0[gy]}}();function Za(n){try{return n()}catch{}}var yy=Za(function(){return globalThis})||Za(function(){return window})||Za(function(){return self})||Za(function(){return global})||Za(function(){return Za.constructor("return this")()}),B0=!1;function Qp(n,e){if(!Boolean(n))throw new Error(e)}function $0(n){return Yp(n,[])}function Yp(n,e){switch(typeof n){case"string":return JSON.stringify(n);case"function":return n.name?`[function ${n.name}]`:"[function]";case"object":return function GC(n,e){if(null===n)return"null";if(e.includes(n))return"[Circular]";const t=[...e,n];if(function H0(n){return"function"==typeof n.toJSON}(n)){const r=n.toJSON();if(r!==n)return"string"==typeof r?r:Yp(r,t)}else if(Array.isArray(n))return function WC(n,e){if(0===n.length)return"[]";if(e.length>2)return"[Array]";const t=Math.min(10,n.length),r=n.length-t,i=[];for(let s=0;s<t;++s)i.push(Yp(n[s],e));return 1===r?i.push("... 1 more item"):r>1&&i.push(`... ${r} more items`),"["+i.join(", ")+"]"}(n,t);return function qC(n,e){const t=Object.entries(n);return 0===t.length?"{}":e.length>2?"["+function zC(n){const e=Object.prototype.toString.call(n).replace(/^\[object /,"").replace(/]$/,"");if("Object"===e&&"function"==typeof n.constructor){const t=n.constructor.name;if("string"==typeof t&&""!==t)return t}return e}(n)+"]":"{ "+t.map(([i,s])=>i+": "+Yp(s,e)).join(", ")+" }"}(n,t)}(n,e);default:return String(n)}}!function jC(){yy&&!Za(function(){return"production"})&&!Za(function(){return process})&&(Object.defineProperty(yy,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),B0=!0)}();class _y{constructor(e,t="GraphQL request",r={line:1,column:1}){"string"==typeof e||Qp(!1,`Body must be a string. Received: ${$0(e)}.`),this.body=e,this.name=t,this.locationOffset=r,this.locationOffset.line>0||Qp(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Qp(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function JC(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function G0(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function q0(n,e,t){return e&&G0(n.prototype,e),t&&G0(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}(function QC(){(function j0(){B0&&(delete yy.process,B0=!1)})()})(),function YC(){__DEV__?wt("boolean"==typeof my,my):wt("boolean"==typeof my,38)}();var Kr=function(){return"function"==typeof Symbol},vy=function(n){return Kr()&&Boolean(Symbol[n])},W0=function(n){return vy(n)?Symbol[n]:"@@"+n};Kr()&&!vy("observable")&&(Symbol.observable=Symbol("observable"));var SR=W0("iterator"),Ey=W0("observable"),XC=W0("species");function Jp(n,e){var t=n[e];if(null!=t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}}function Wh(n){var e=n.constructor;return void 0!==e&&null===(e=e[XC])&&(e=void 0),void 0!==e?e:ar}function Kh(n){Kh.log?Kh.log(n):setTimeout(function(){throw n})}function wy(n){Promise.resolve().then(function(){try{n()}catch(e){Kh(e)}})}function z0(n){var e=n._cleanup;if(void 0!==e&&(n._cleanup=void 0,e))try{if("function"==typeof e)e();else{var t=Jp(e,"unsubscribe");t&&t.call(e)}}catch(r){Kh(r)}}function K0(n){n._observer=void 0,n._queue=void 0,n._state="closed"}function AR(n,e,t){n._state="running";var r=n._observer;try{var i=Jp(r,e);switch(e){case"next":i&&i.call(r,t);break;case"error":if(K0(n),!i)throw t;i.call(r,t);break;case"complete":K0(n),i&&i.call(r)}}catch(s){Kh(s)}"closed"===n._state?z0(n):"running"===n._state&&(n._state="ready")}function by(n,e,t){if("closed"!==n._state){if("buffering"===n._state)return void n._queue.push({type:e,value:t});if("ready"!==n._state)return n._state="buffering",n._queue=[{type:e,value:t}],void wy(function(){return function eD(n){var e=n._queue;if(e){n._queue=void 0,n._state="ready";for(var t=0;t<e.length&&(AR(n,e[t].type,e[t].value),"closed"!==n._state);++t);}}(n)});AR(n,e,t)}}var Z0=function(){function n(t,r){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new Qa(this);try{this._cleanup=r.call(void 0,i)}catch(s){i.error(s)}"initializing"===this._state&&(this._state="ready")}return n.prototype.unsubscribe=function(){"closed"!==this._state&&(K0(this),z0(this))},q0(n,[{key:"closed",get:function(){return"closed"===this._state}}]),n}(),Qa=function(){function n(t){this._subscription=t}var e=n.prototype;return e.next=function(r){by(this._subscription,"next",r)},e.error=function(r){by(this._subscription,"error",r)},e.complete=function(){by(this._subscription,"complete")},q0(n,[{key:"closed",get:function(){return"closed"===this._subscription._state}}]),n}(),ar=function(){function n(t){if(!(this instanceof n))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}var e=n.prototype;return e.subscribe=function(r){return("object"!=typeof r||null===r)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new Z0(r,this._subscriber)},e.forEach=function(r){var i=this;return new Promise(function(s,u){if("function"==typeof r)var p=i.subscribe({next:function(_){try{r(_,l)}catch(w){u(w),p.unsubscribe()}},error:u,complete:s});else u(new TypeError(r+" is not a function"));function l(){p.unsubscribe(),s()}})},e.map=function(r){var i=this;if("function"!=typeof r)throw new TypeError(r+" is not a function");return new(Wh(this))(function(u){return i.subscribe({next:function(l){try{l=r(l)}catch(p){return u.error(p)}u.next(l)},error:function(l){u.error(l)},complete:function(){u.complete()}})})},e.filter=function(r){var i=this;if("function"!=typeof r)throw new TypeError(r+" is not a function");return new(Wh(this))(function(u){return i.subscribe({next:function(l){try{if(!r(l))return}catch(p){return u.error(p)}u.next(l)},error:function(l){u.error(l)},complete:function(){u.complete()}})})},e.reduce=function(r){var i=this;if("function"!=typeof r)throw new TypeError(r+" is not a function");var s=Wh(this),u=arguments.length>1,l=!1,p=arguments[1],_=p;return new s(function(w){return i.subscribe({next:function(I){var S=!l;if(l=!0,!S||u)try{_=r(_,I)}catch(M){return w.error(M)}else _=I},error:function(I){w.error(I)},complete:function(){if(!l&&!u)return w.error(new TypeError("Cannot reduce an empty sequence"));w.next(_),w.complete()}})})},e.concat=function(){for(var r=this,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];var l=Wh(this);return new l(function(p){var _,w=0;return function I(S){_=S.subscribe({next:function(M){p.next(M)},error:function(M){p.error(M)},complete:function(){w===s.length?(_=void 0,p.complete()):I(l.from(s[w++]))}})}(r),function(){_&&(_.unsubscribe(),_=void 0)}})},e.flatMap=function(r){var i=this;if("function"!=typeof r)throw new TypeError(r+" is not a function");var s=Wh(this);return new s(function(u){var l=[],p=i.subscribe({next:function(w){if(r)try{w=r(w)}catch(S){return u.error(S)}var I=s.from(w).subscribe({next:function(S){u.next(S)},error:function(S){u.error(S)},complete:function(){var S=l.indexOf(I);S>=0&&l.splice(S,1),_()}});l.push(I)},error:function(w){u.error(w)},complete:function(){_()}});function _(){p.closed&&0===l.length&&u.complete()}return function(){l.forEach(function(w){return w.unsubscribe()}),p.unsubscribe()}})},e[Ey]=function(){return this},n.from=function(r){var i="function"==typeof this?this:n;if(null==r)throw new TypeError(r+" is not an object");var s=Jp(r,Ey);if(s){var u=s.call(r);if(Object(u)!==u)throw new TypeError(u+" is not an object");return function zh(n){return n instanceof ar}(u)&&u.constructor===i?u:new i(function(l){return u.subscribe(l)})}if(vy("iterator")&&(s=Jp(r,SR)))return new i(function(l){wy(function(){if(!l.closed){for(var _,p=function rL(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=function TR(n,e){if(n){if("string"==typeof n)return JC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return JC(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(s.call(r));!(_=p()).done;)if(l.next(_.value),l.closed)return;l.complete()}})});if(Array.isArray(r))return new i(function(l){wy(function(){if(!l.closed){for(var p=0;p<r.length;++p)if(l.next(r[p]),l.closed)return;l.complete()}})});throw new TypeError(r+" is not observable")},n.of=function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var u="function"==typeof this?this:n;return new u(function(l){wy(function(){if(!l.closed){for(var p=0;p<i.length;++p)if(l.next(i[p]),l.closed)return;l.complete()}})})},q0(n,null,[{key:XC,get:function(){return this}}]),n}();function Nn(n){return null!==n&&"object"==typeof n}function da(n,e){var t=e,r=[];return n.definitions.forEach(function(s){if("OperationDefinition"===s.kind)throw __DEV__?new Sn("Found a ".concat(s.operation," operation").concat(s.name?" named '".concat(s.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new Sn(43);"FragmentDefinition"===s.kind&&r.push(s)}),typeof t>"u"&&(__DEV__?wt(1===r.length,"Found ".concat(r.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):wt(1===r.length,44),t=r[0].name.value),(0,fe.pi)((0,fe.pi)({},n),{definitions:(0,fe.ev)([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:t}}]}}],n.definitions,!0)})}function ro(n){void 0===n&&(n=[]);var e={};return n.forEach(function(t){e[t.name.value]=t}),e}function Iy(n,e){switch(n.kind){case"InlineFragment":return n;case"FragmentSpread":var t=n.name.value;if("function"==typeof e)return e(t);var r=e&&e[t];return __DEV__?wt(r,"No fragment named ".concat(t)):wt(r,45),r||null;default:return null}}function Ed(n){return{__ref:String(n)}}function Gn(n){return Boolean(n&&"object"==typeof n&&"string"==typeof n.__ref)}function zu(n,e,t,r){if(function Q0(n){return"IntValue"===n.kind}(t)||function Xp(n){return"FloatValue"===n.kind}(t))n[e.value]=Number(t.value);else if(function MR(n){return"BooleanValue"===n.kind}(t)||function OR(n){return"StringValue"===n.kind}(t))n[e.value]=t.value;else if(function tD(n){return"ObjectValue"===n.kind}(t)){var i={};t.fields.map(function(u){return zu(i,u.name,u.value,r)}),n[e.value]=i}else if(function PR(n){return"Variable"===n.kind}(t))n[e.value]=(r||{})[t.name.value];else if(function NR(n){return"ListValue"===n.kind}(t))n[e.value]=t.values.map(function(u){var l={};return zu(l,e,u,r),l[e.value]});else if(function nD(n){return"EnumValue"===n.kind}(t))n[e.value]=t.value;else{if(!function rD(n){return"NullValue"===n.kind}(t))throw __DEV__?new Sn('The inline argument "'.concat(e.value,'" of kind "').concat(t.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new Sn(54);n[e.value]=null}}Kr()&&Object.defineProperty(ar,Symbol("extensions"),{value:{symbol:Ey,hostReportError:Kh},configurable:!0});var iD=["connection","include","skip","client","rest","export"],Cy=Object.assign(function(n,e,t){if(e&&t&&t.connection&&t.connection.key){if(t.connection.filter&&t.connection.filter.length>0){var r=t.connection.filter?t.connection.filter:[];r.sort();var i={};return r.forEach(function(l){i[l]=e[l]}),"".concat(t.connection.key,"(").concat(wd(i),")")}return t.connection.key}var s=n;if(e){var u=wd(e);s+="(".concat(u,")")}return t&&Object.keys(t).forEach(function(l){-1===iD.indexOf(l)&&(t[l]&&Object.keys(t[l]).length?s+="@".concat(l,"(").concat(wd(t[l]),")"):s+="@".concat(l))}),s},{setStringify:function(n){var e=wd;return wd=n,e}}),wd=function(e){return JSON.stringify(e,Dy)};function Dy(n,e){return Nn(e)&&!Array.isArray(e)&&(e=Object.keys(e).sort().reduce(function(t,r){return t[r]=e[r],t},{})),e}function eg(n,e){if(n.arguments&&n.arguments.length){var t={};return n.arguments.forEach(function(r){return zu(t,r.name,r.value,e)}),t}return null}function Yc(n){return n.alias?n.alias.value:n.name.value}function Ty(n,e,t){if("string"==typeof n.__typename)return n.__typename;for(var r=0,i=e.selections;r<i.length;r++){var s=i[r];if(Ya(s)){if("__typename"===s.name.value)return n[Yc(s)]}else{var u=Ty(n,Iy(s,t).selectionSet,t);if("string"==typeof u)return u}}}function Ya(n){return"Field"===n.kind}function Y0(n){return"InlineFragment"===n.kind}function tg(n){__DEV__?wt(n&&"Document"===n.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):wt(n&&"Document"===n.kind,46);var e=n.definitions.filter(function(t){return"FragmentDefinition"!==t.kind}).map(function(t){if("OperationDefinition"!==t.kind)throw __DEV__?new Sn('Schema type definitions not allowed in queries. Found: "'.concat(t.kind,'"')):new Sn(47);return t});return __DEV__?wt(e.length<=1,"Ambiguous GraphQL document: contains ".concat(e.length," operations")):wt(e.length<=1,48),n}function Zh(n){return tg(n),n.definitions.filter(function(e){return"OperationDefinition"===e.kind})[0]}function Sy(n){return n.definitions.filter(function(e){return"OperationDefinition"===e.kind&&e.name}).map(function(e){return e.name.value})[0]||null}function J0(n){return n.definitions.filter(function(e){return"FragmentDefinition"===e.kind})}function sD(n){var e=Zh(n);return __DEV__?wt(e&&"query"===e.operation,"Must contain a query definition."):wt(e&&"query"===e.operation,49),e}function X0(n){tg(n);for(var e,t=0,r=n.definitions;t<r.length;t++){var i=r[t];if("OperationDefinition"===i.kind){var s=i.operation;if("query"===s||"mutation"===s||"subscription"===s)return i}"FragmentDefinition"===i.kind&&!e&&(e=i)}if(e)return e;throw __DEV__?new Sn("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new Sn(53)}function eE(n){var e=Object.create(null),t=n&&n.variableDefinitions;return t&&t.length&&t.forEach(function(r){r.defaultValue&&zu(e,r.variable.name,r.defaultValue)}),e}function oD(n,e){return e?e(n):ar.of()}function ng(n){return"function"==typeof n?new Qh(n):n}function Ay(n){return n.request.length<=1}var UR=function(n){function e(t,r){var i=n.call(this,t)||this;return i.link=r,i}return(0,fe.ZT)(e,n),e}(Error),Qh=function(){function n(e){e&&(this.request=e)}return n.empty=function(){return new n(function(){return ar.of()})},n.from=function(e){return 0===e.length?n.empty():e.map(ng).reduce(function(t,r){return t.concat(r)})},n.split=function(e,t,r){var i=ng(t),s=ng(r||new n(oD));return Ay(i)&&Ay(s)?new n(function(u){return e(u)?i.request(u)||ar.of():s.request(u)||ar.of()}):new n(function(u,l){return e(u)?i.request(u,l)||ar.of():s.request(u,l)||ar.of()})},n.execute=function(e,t){return e.request(function xR(n,e){var t=(0,fe.pi)({},n);return Object.defineProperty(e,"setContext",{enumerable:!1,value:function(s){t=(0,fe.pi)((0,fe.pi)({},t),"function"==typeof s?s(t):s)}}),Object.defineProperty(e,"getContext",{enumerable:!1,value:function(){return(0,fe.pi)({},t)}}),e}(t.context,function LR(n){var e={variables:n.variables||{},extensions:n.extensions||{},operationName:n.operationName,query:n.query};return e.operationName||(e.operationName="string"!=typeof e.query?Sy(e.query)||void 0:""),e}(function VR(n){for(var e=["query","operationName","variables","extensions","context"],t=0,r=Object.keys(n);t<r.length;t++){var i=r[t];if(e.indexOf(i)<0)throw __DEV__?new Sn("illegal argument: ".concat(i)):new Sn(26)}return n}(t))))||ar.of()},n.concat=function(e,t){var r=ng(e);if(Ay(r))return __DEV__&&wt.warn(new UR("You are calling concat on a terminating link, which will have no effect",r)),r;var i=ng(t);return Ay(i)?new n(function(s){return r.request(s,function(u){return i.request(u)||ar.of()})||ar.of()}):new n(function(s,u){return r.request(s,function(l){return i.request(l,u)||ar.of()})||ar.of()})},n.prototype.split=function(e,t,r){return this.concat(n.split(e,t,r||new n(oD)))},n.prototype.concat=function(e){return n.concat(this,e)},n.prototype.request=function(e,t){throw __DEV__?new Sn("request is not implemented"):new Sn(21)},n.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},n.prototype.setOnError=function(e){return this.onError=e,this},n}(),tE=Qh.execute;class jR{constructor(e,t,r){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class aD{constructor(e,t,r,i,s,u){this.kind=e,this.start=t,this.end=r,this.line=i,this.column=s,this.value=u,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const uD={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},$R=new Set(Object.keys(uD));function nE(n){const e=n?.kind;return"string"==typeof e&&$R.has(e)}var Jc=(()=>(function(n){n.QUERY="query",n.MUTATION="mutation",n.SUBSCRIPTION="subscription"}(Jc||(Jc={})),Jc))(),Vt=(()=>(function(n){n.NAME="Name",n.DOCUMENT="Document",n.OPERATION_DEFINITION="OperationDefinition",n.VARIABLE_DEFINITION="VariableDefinition",n.SELECTION_SET="SelectionSet",n.FIELD="Field",n.ARGUMENT="Argument",n.FRAGMENT_SPREAD="FragmentSpread",n.INLINE_FRAGMENT="InlineFragment",n.FRAGMENT_DEFINITION="FragmentDefinition",n.VARIABLE="Variable",n.INT="IntValue",n.FLOAT="FloatValue",n.STRING="StringValue",n.BOOLEAN="BooleanValue",n.NULL="NullValue",n.ENUM="EnumValue",n.LIST="ListValue",n.OBJECT="ObjectValue",n.OBJECT_FIELD="ObjectField",n.DIRECTIVE="Directive",n.NAMED_TYPE="NamedType",n.LIST_TYPE="ListType",n.NON_NULL_TYPE="NonNullType",n.SCHEMA_DEFINITION="SchemaDefinition",n.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",n.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",n.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",n.FIELD_DEFINITION="FieldDefinition",n.INPUT_VALUE_DEFINITION="InputValueDefinition",n.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",n.UNION_TYPE_DEFINITION="UnionTypeDefinition",n.ENUM_TYPE_DEFINITION="EnumTypeDefinition",n.ENUM_VALUE_DEFINITION="EnumValueDefinition",n.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",n.DIRECTIVE_DEFINITION="DirectiveDefinition",n.SCHEMA_EXTENSION="SchemaExtension",n.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",n.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",n.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",n.UNION_TYPE_EXTENSION="UnionTypeExtension",n.ENUM_TYPE_EXTENSION="EnumTypeExtension",n.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"}(Vt||(Vt={})),Vt))();const Xc=Object.freeze({});function ha(n,e,t=uD){const r=new Map;for(const ge of Object.values(Vt))r.set(ge,xy(e,ge));let i,w,I,s=Array.isArray(n),u=[n],l=-1,p=[],_=n;const S=[],M=[];do{l++;const ge=l===u.length,Re=ge&&0!==p.length;if(ge){if(w=0===M.length?void 0:S[S.length-1],_=I,I=M.pop(),Re)if(s){_=_.slice();let Le=0;for(const[Xe,rt]of p){const Et=Xe-Le;null===rt?(_.splice(Et,1),Le++):_[Et]=rt}}else{_=Object.defineProperties({},Object.getOwnPropertyDescriptors(_));for(const[Le,Xe]of p)_[Le]=Xe}l=i.index,u=i.keys,p=i.edits,s=i.inArray,i=i.prev}else if(I){if(w=s?l:u[l],_=I[w],null==_)continue;S.push(w)}let _e;if(!Array.isArray(_)){var P,U;if(nE(_)||Qp(!1,`Invalid AST Node: ${$0(_)}.`),_e=(ge?null===(P=r.get(_.kind))||void 0===P?void 0:P.leave:null===(U=r.get(_.kind))||void 0===U?void 0:U.enter)?.call(e,_,w,I,S,M),_e===Xc)break;if(!1===_e){if(!ge){S.pop();continue}}else if(void 0!==_e&&(p.push([w,_e]),!ge)){if(!nE(_e)){S.pop();continue}_=_e}}var Y;void 0===_e&&Re&&p.push([w,_]),ge?S.pop():(i={inArray:s,index:l,keys:u,edits:p,prev:i},s=Array.isArray(_),u=s?_:null!==(Y=t[_.kind])&&void 0!==Y?Y:[],l=-1,p=[],I&&M.push(I),I=_)}while(void 0!==i);return 0!==p.length?p[p.length-1][1]:n}function xy(n,e){const t=n[e];return"object"==typeof t?t:"function"==typeof t?{enter:t,leave:void 0}:{enter:n.enter,leave:n.leave}}function rg(n,e){var t=n.directives;return!t||!t.length||function iL(n){var e=[];return n&&n.length&&n.forEach(function(t){if(function Jh(n){var e=n.name.value;return"skip"===e||"include"===e}(t)){var r=t.arguments,i=t.name.value;__DEV__?wt(r&&1===r.length,"Incorrect number of arguments for the @".concat(i," directive.")):wt(r&&1===r.length,40);var s=r[0];__DEV__?wt(s.name&&"if"===s.name.value,"Invalid argument for the @".concat(i," directive.")):wt(s.name&&"if"===s.name.value,41);var u=s.value;__DEV__?wt(u&&("Variable"===u.kind||"BooleanValue"===u.kind),"Argument for the @".concat(i," directive must be a variable or a boolean value.")):wt(u&&("Variable"===u.kind||"BooleanValue"===u.kind),42),e.push({directive:t,ifArgument:s})}}),e}(t).every(function(r){var i=r.directive,s=r.ifArgument,u=!1;return"Variable"===s.value.kind?(u=e&&e[s.value.name.value],__DEV__?wt(void 0!==u,"Invalid variable referenced in @".concat(i.name.value," directive.")):wt(void 0!==u,39)):u=s.value.value,"skip"===i.name.value?!u:u})}function ig(n,e,t){var r=new Set(n),i=r.size;return ha(e,{Directive:function(s){if(r.delete(s.name.value)&&(!t||!r.size))return Xc}}),t?!r.size:r.size<i}function zR(n){return n&&ig(["client","export"],n,!0)}var sg=function(n,e){var t;try{t=JSON.stringify(n)}catch(i){var r=__DEV__?new Sn("Network request failed. ".concat(e," is not serializable: ").concat(i.message)):new Sn(23);throw r.parseError=i,r}return t},el="function"==typeof WeakMap&&"ReactNative"!==gs(function(){return navigator.product}),cD="function"==typeof WeakSet,KR="function"==typeof Symbol&&"function"==typeof Symbol.for,Nt=KR&&Symbol.asyncIterator;function rE(n){var e={next:function(){return n.read()}};return Nt&&(e[Symbol.asyncIterator]=function(){return this}),e}function hD(n){var e=n;if(function Xh(n){return!!n.body}(n)&&(e=n.body),function Ry(n){return!(!Nt||!n[Symbol.asyncIterator])}(e))return function lD(n){var e,t=n[Symbol.asyncIterator]();return(e={next:function(){return t.next()}})[Symbol.asyncIterator]=function(){return this},e}(e);if(function YR(n){return!!n.getReader}(e))return rE(e.getReader());if(function Oy(n){return!!n.stream}(e))return rE(e.stream().getReader());if(function Or(n){return!!n.arrayBuffer}(e))return function JR(n){var e=!1,t={next:function(){return e?Promise.resolve({value:void 0,done:!0}):(e=!0,new Promise(function(r,i){n.then(function(s){r({value:s,done:!1})}).catch(i)}))}};return Nt&&(t[Symbol.asyncIterator]=function(){return this}),t}(e.arrayBuffer());if(function aL(n){return!!n.pipe}(e))return function dD(n){var e=null,t=null,r=!1,i=[],s=[];function u(I){if(!t){if(s.length){var S=s.shift();if(Array.isArray(S)&&S[0])return S[0]({value:I,done:!1})}i.push(I)}}function l(I){t=I,s.slice().forEach(function(M){M[1](I)}),!e||e()}function p(){r=!0,s.slice().forEach(function(S){S[0]({value:void 0,done:!0})}),!e||e()}e=function(){e=null,n.removeListener("data",u),n.removeListener("error",l),n.removeListener("end",p),n.removeListener("finish",p),n.removeListener("close",p)},n.on("data",u),n.on("error",l),n.on("end",p),n.on("finish",p),n.on("close",p);var w={next:function(){return function _(){return new Promise(function(I,S){return t?S(t):i.length?I({value:i.shift(),done:!1}):r?I({value:void 0,done:!0}):void s.push([I,S])})}()}};return Nt&&(w[Symbol.asyncIterator]=function(){return this}),w}(e);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}gs(function(){return window.document.createElement}),gs(function(){return navigator.userAgent.indexOf("jsdom")>=0});var My=function(n,e,t){var r=new Error(t);throw r.name="ServerError",r.response=n,r.statusCode=n.status,r.result=e,r},iE=Object.prototype.hasOwnProperty;function eO(n){var e={};return n.split("\n").forEach(function(t){var r=t.indexOf(":");if(r>-1){var i=t.slice(0,r).trim().toLowerCase(),s=t.slice(r+1).trim();e[i]=s}}),e}function fD(n,e){n.status>=300&&My(n,function(){try{return JSON.parse(e)}catch{return e}}(),"Response not successful: Received status code ".concat(n.status));try{return JSON.parse(e)}catch(i){var r=i;throw r.name="ServerParseError",r.response=n,r.statusCode=n.status,r.bodyText=e,r}}function bd(n,e){var t,r;"AbortError"!==n.name&&(n.result&&n.result.errors&&n.result.data&&(null===(t=e.next)||void 0===t||t.call(e,n.result)),null===(r=e.error)||void 0===r||r.call(e,n))}function ef(n){return 9===n||32===n}function tf(n){return n>=48&&n<=57}function sE(n){return n>=97&&n<=122||n>=65&&n<=90}function oE(n){return sE(n)||95===n}function iO(n){return sE(n)||tf(n)||95===n}function og(n){var e;let t=Number.MAX_SAFE_INTEGER,r=null,i=-1;for(let u=0;u<n.length;++u){var s;const l=n[u],p=ag(l);p!==l.length&&(r=null!==(s=r)&&void 0!==s?s:u,i=u,0!==u&&p<t&&(t=p))}return n.map((u,l)=>0===l?u:u.slice(t)).slice(null!==(e=r)&&void 0!==e?e:0,i+1)}function ag(n){let e=0;for(;e<n.length&&ef(n.charCodeAt(e));)++e;return e}const pD=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function gD(n){return mD[n.charCodeAt(0)]}const mD=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];function yD(n){return ha(n,aO)}const aO={Name:{leave:n=>n.value},Variable:{leave:n=>"$"+n.name},Document:{leave:n=>At(n.definitions,"\n\n")},OperationDefinition:{leave(n){const e=Cn("(",At(n.variableDefinitions,", "),")"),t=At([n.operation,At([n.name,e]),At(n.directives," ")]," ");return("query"===t?"":t+" ")+n.selectionSet}},VariableDefinition:{leave:({variable:n,type:e,defaultValue:t,directives:r})=>n+": "+e+Cn(" = ",t)+Cn(" ",At(r," "))},SelectionSet:{leave:({selections:n})=>Ja(n)},Field:{leave({alias:n,name:e,arguments:t,directives:r,selectionSet:i}){const s=Cn("",n,": ")+e;let u=s+Cn("(",At(t,", "),")");return u.length>80&&(u=s+Cn("(\n",aE(At(t,"\n")),"\n)")),At([u,At(r," "),i]," ")}},Argument:{leave:({name:n,value:e})=>n+": "+e},FragmentSpread:{leave:({name:n,directives:e})=>"..."+n+Cn(" ",At(e," "))},InlineFragment:{leave:({typeCondition:n,directives:e,selectionSet:t})=>At(["...",Cn("on ",n),At(e," "),t]," ")},FragmentDefinition:{leave:({name:n,typeCondition:e,variableDefinitions:t,directives:r,selectionSet:i})=>`fragment ${n}${Cn("(",At(t,", "),")")} on ${e} ${Cn("",At(r," ")," ")}`+i},IntValue:{leave:({value:n})=>n},FloatValue:{leave:({value:n})=>n},StringValue:{leave:({value:n,block:e})=>e?function sO(n,e){const t=n.replace(/"""/g,'\\"""'),r=t.split(/\r\n|[\n\r]/g),i=1===r.length,s=r.length>1&&r.slice(1).every(M=>0===M.length||ef(M.charCodeAt(0))),u=t.endsWith('\\"""'),l=n.endsWith('"')&&!u,p=n.endsWith("\\"),_=l||p,w=!(null!=e&&e.minimize)&&(!i||n.length>70||_||s||u);let I="";const S=i&&ef(n.charCodeAt(0));return(w&&!S||s)&&(I+="\n"),I+=t,(w||_)&&(I+="\n"),'"""'+I+'"""'}(n):function oO(n){return`"${n.replace(pD,gD)}"`}(n)},BooleanValue:{leave:({value:n})=>n?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:n})=>n},ListValue:{leave:({values:n})=>"["+At(n,", ")+"]"},ObjectValue:{leave:({fields:n})=>"{"+At(n,", ")+"}"},ObjectField:{leave:({name:n,value:e})=>n+": "+e},Directive:{leave:({name:n,arguments:e})=>"@"+n+Cn("(",At(e,", "),")")},NamedType:{leave:({name:n})=>n},ListType:{leave:({type:n})=>"["+n+"]"},NonNullType:{leave:({type:n})=>n+"!"},SchemaDefinition:{leave:({description:n,directives:e,operationTypes:t})=>Cn("",n,"\n")+At(["schema",At(e," "),Ja(t)]," ")},OperationTypeDefinition:{leave:({operation:n,type:e})=>n+": "+e},ScalarTypeDefinition:{leave:({description:n,name:e,directives:t})=>Cn("",n,"\n")+At(["scalar",e,At(t," ")]," ")},ObjectTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:i})=>Cn("",n,"\n")+At(["type",e,Cn("implements ",At(t," & ")),At(r," "),Ja(i)]," ")},FieldDefinition:{leave:({description:n,name:e,arguments:t,type:r,directives:i})=>Cn("",n,"\n")+e+(uO(t)?Cn("(\n",aE(At(t,"\n")),"\n)"):Cn("(",At(t,", "),")"))+": "+r+Cn(" ",At(i," "))},InputValueDefinition:{leave:({description:n,name:e,type:t,defaultValue:r,directives:i})=>Cn("",n,"\n")+At([e+": "+t,Cn("= ",r),At(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:i})=>Cn("",n,"\n")+At(["interface",e,Cn("implements ",At(t," & ")),At(r," "),Ja(i)]," ")},UnionTypeDefinition:{leave:({description:n,name:e,directives:t,types:r})=>Cn("",n,"\n")+At(["union",e,At(t," "),Cn("= ",At(r," | "))]," ")},EnumTypeDefinition:{leave:({description:n,name:e,directives:t,values:r})=>Cn("",n,"\n")+At(["enum",e,At(t," "),Ja(r)]," ")},EnumValueDefinition:{leave:({description:n,name:e,directives:t})=>Cn("",n,"\n")+At([e,At(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:n,name:e,directives:t,fields:r})=>Cn("",n,"\n")+At(["input",e,At(t," "),Ja(r)]," ")},DirectiveDefinition:{leave:({description:n,name:e,arguments:t,repeatable:r,locations:i})=>Cn("",n,"\n")+"directive @"+e+(uO(t)?Cn("(\n",aE(At(t,"\n")),"\n)"):Cn("(",At(t,", "),")"))+(r?" repeatable":"")+" on "+At(i," | ")},SchemaExtension:{leave:({directives:n,operationTypes:e})=>At(["extend schema",At(n," "),Ja(e)]," ")},ScalarTypeExtension:{leave:({name:n,directives:e})=>At(["extend scalar",n,At(e," ")]," ")},ObjectTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>At(["extend type",n,Cn("implements ",At(e," & ")),At(t," "),Ja(r)]," ")},InterfaceTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>At(["extend interface",n,Cn("implements ",At(e," & ")),At(t," "),Ja(r)]," ")},UnionTypeExtension:{leave:({name:n,directives:e,types:t})=>At(["extend union",n,At(e," "),Cn("= ",At(t," | "))]," ")},EnumTypeExtension:{leave:({name:n,directives:e,values:t})=>At(["extend enum",n,At(e," "),Ja(t)]," ")},InputObjectTypeExtension:{leave:({name:n,directives:e,fields:t})=>At(["extend input",n,At(e," "),Ja(t)]," ")}};function At(n,e=""){var t;return null!==(t=n?.filter(r=>r).join(e))&&void 0!==t?t:""}function Ja(n){return Cn("{\n",aE(At(n,"\n")),"\n}")}function Cn(n,e,t=""){return null!=e&&""!==e?n+e+t:""}function aE(n){return Cn("  ",n.replace(/\n/g,"\n  "))}function uO(n){var e;return null!==(e=n?.some(t=>t.includes("\n")))&&void 0!==e&&e}var lO={http:{includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},uE=function(n,e){return e(n)};function dO(n,e){if(!e){var t=Object.create(null);return Object.keys(Object(n)).forEach(function(s){t[s.toLowerCase()]=n[s]}),t}var r=Object.create(null);Object.keys(Object(n)).forEach(function(s){r[s.toLowerCase()]={originalName:s,value:n[s]}});var i=Object.create(null);return Object.keys(r).forEach(function(s){i[r[s].originalName]=r[s].value}),i}function wD(n){return new ar(function(e){e.error(n)})}var cE=gs(function(){return fetch}),pO=function(n){void 0===n&&(n={});var e=n.uri,t=void 0===e?"/graphql":e,r=n.fetch,i=n.print,s=void 0===i?uE:i,u=n.includeExtensions,l=n.preserveHeaderCase,p=n.useGETForQueries,_=n.includeUnusedVariables,w=void 0!==_&&_,I=(0,fe._T)(n,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);__DEV__&&function(n){if(!n&&typeof fetch>"u")throw __DEV__?new Sn("\n\"fetch\" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:\n\nimport fetch from 'cross-fetch';\nimport { ApolloClient, HttpLink } from '@apollo/client';\nconst client = new ApolloClient({\n  link: new HttpLink({ uri: '/graphql', fetch })\n});\n    "):new Sn(22)}(r||cE);var S={http:{includeExtensions:u,preserveHeaderCase:l},options:I.fetchOptions,credentials:I.credentials,headers:I.headers};return new Qh(function(M){var P=function(n,e){return n.getContext().uri||("function"==typeof e?e(n):e||"/graphql")}(M,t),U=M.getContext(),Y={};if(U.clientAwareness){var ge=U.clientAwareness,Re=ge.name,_e=ge.version;Re&&(Y["apollographql-client-name"]=Re),_e&&(Y["apollographql-client-version"]=_e)}var Mi,Le=(0,fe.pi)((0,fe.pi)({},Y),U.headers),rt=function ED(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i={},s={};t.forEach(function(I){i=(0,fe.pi)((0,fe.pi)((0,fe.pi)({},i),I.options),{headers:(0,fe.pi)((0,fe.pi)({},i.headers),I.headers)}),I.credentials&&(i.credentials=I.credentials),s=(0,fe.pi)((0,fe.pi)({},s),I.http)}),i.headers=dO(i.headers,s.preserveHeaderCase);var l=n.extensions,_=n.query,w={operationName:n.operationName,variables:n.variables};return s.includeExtensions&&(w.extensions=l),s.includeQuery&&(w.query=e(_,yD)),{options:i,body:w}}(M,s,lO,S,{http:U.http,options:U.fetchOptions,credentials:U.credentials,headers:Le}),Et=rt.options,Bt=rt.body;if(Bt.variables&&!w){var Dr=new Set(Object.keys(Bt.variables));ha(M.query,{Variable:function(uu,Z3,Gd){Gd&&"VariableDefinition"!==Gd.kind&&Dr.delete(uu.name.value)}}),Dr.size&&(Bt.variables=(0,fe.pi)({},Bt.variables),Dr.forEach(function(uu){delete Bt.variables[uu]}))}if(!Et.signal){var fm=function(){if(typeof AbortController>"u")return{controller:!1,signal:!1};var n=new AbortController;return{controller:n,signal:n.signal}}();(Mi=fm.controller)&&(Et.signal=fm.signal)}if(p&&!M.query.definitions.some(function(uu){return"OperationDefinition"===uu.kind&&"mutation"===uu.operation})&&(Et.method="GET"),ig(["defer"],M.query)&&(Et.headers.accept="multipart/mixed; deferSpec=20220824, application/json"),"GET"===Et.method){var z3=function fO(n,e){var t=[],r=function(I,S){t.push("".concat(I,"=").concat(encodeURIComponent(S)))};if("query"in e&&r("query",e.query),e.operationName&&r("operationName",e.operationName),e.variables){var i=void 0;try{i=sg(e.variables,"Variables map")}catch(I){return{parseError:I}}r("variables",i)}if(e.extensions){var s=void 0;try{s=sg(e.extensions,"Extensions map")}catch(I){return{parseError:I}}r("extensions",s)}var u="",l=n,p=n.indexOf("#");-1!==p&&(u=n.substr(p),l=n.substr(0,p));var _=-1===l.indexOf("?")?"?":"&";return{newURI:l+_+t.join("&")+u}}(P,Bt),TJ=z3.newURI,K3=z3.parseError;if(K3)return wD(K3);P=TJ}else try{Et.body=sg(Bt,"Payload")}catch(uu){return wD(uu)}return new ar(function(uu){return(r||gs(function(){return fetch})||cE)(P,Et).then(function(Gd){var T1;M.setContext({response:Gd});var Q3=null===(T1=Gd.headers)||void 0===T1?void 0:T1.get("content-type");return null!==Q3&&/^multipart\/mixed/i.test(Q3)?function XR(n,e){var t,r,i;return(0,fe.mG)(this,void 0,void 0,function(){var s,u,l,p,_,w,I,S,M,P,U,Y,ge,Re,_e,Le,Xe,rt,Et,Bt;return(0,fe.Jh)(this,function(Dr){switch(Dr.label){case 0:if(void 0===TextDecoder)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");s=new TextDecoder("utf-8"),u=null===(t=n.headers)||void 0===t?void 0:t.get("content-type"),p=u?.includes(l="boundary=")?u?.substring(u?.indexOf(l)+l.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",_="--".concat(p),w="",I=hD(n),S=!0,Dr.label=1;case 1:return S?[4,I.next()]:[3,3];case 2:for(M=Dr.sent(),U=M.done,Y="string"==typeof(P=M.value)?P:s.decode(P),S=!U,ge=(w+=Y).indexOf(_);ge>-1;){if(Re=void 0,Bt=[w.slice(0,ge),w.slice(ge+_.length)],w=Bt[1],(Re=Bt[0]).trim()){if(_e=Re.indexOf("\r\n\r\n"),Le=eO(Re.slice(0,_e)),(Xe=Le["content-type"])&&-1===Xe.toLowerCase().indexOf("application/json"))throw new Error("Unsupported patch content type: application/json is required.");rt=Re.slice(_e);try{Et=fD(n,rt.replace("\r\n","")),(Object.keys(Et).length>1||"data"in Et||"incremental"in Et||"errors"in Et)&&(null===(r=e.next)||void 0===r||r.call(e,Et))}catch(Mi){bd(Mi,e)}}ge=w.indexOf(_)}return[3,1];case 3:return null===(i=e.complete)||void 0===i||i.call(e),[2]}})})}(Gd,uu):function tO(n,e,t){(function nO(n){return function(e){return e.text().then(function(t){return fD(e,t)}).then(function(t){return e.status>=300&&My(e,t,"Response not successful: Received status code ".concat(e.status)),!Array.isArray(t)&&!iE.call(t,"data")&&!iE.call(t,"errors")&&My(e,t,"Server response was missing for query '".concat(Array.isArray(n)?n.map(function(r){return r.operationName}):n.operationName,"'.")),t})}})(e)(n).then(function(r){var i,s;null===(i=t.next)||void 0===i||i.call(t,r),null===(s=t.complete)||void 0===s||s.call(t)}).catch(function(r){return bd(r,t)})}(Gd,M,uu)}).catch(function(Gd){return bd(Gd,uu)}),function(){Mi&&Mi.abort()}})})},gO=function(n){function e(t){void 0===t&&(t={});var r=n.call(this,pO(t).request)||this;return r.options=t,r}return(0,fe.ZT)(e,n),e}(Qh),nf=Object.prototype,bD=nf.toString,ID=nf.hasOwnProperty,CD=Function.prototype.toString,ky=new Map;function Ei(n,e){try{return Fy(n,e)}finally{ky.clear()}}function Fy(n,e){if(n===e)return!0;var t=bD.call(n);if(t!==bD.call(e))return!1;switch(t){case"[object Array]":if(n.length!==e.length)return!1;case"[object Object]":if(dE(n,e))return!0;var i=DD(n),s=DD(e),u=i.length;if(u!==s.length)return!1;for(var l=0;l<u;++l)if(!ID.call(e,i[l]))return!1;for(l=0;l<u;++l){var p=i[l];if(!Fy(n[p],e[p]))return!1}return!0;case"[object Error]":return n.name===e.name&&n.message===e.message;case"[object Number]":if(n!=n)return e!=e;case"[object Boolean]":case"[object Date]":return+n==+e;case"[object RegExp]":case"[object String]":return n=="".concat(e);case"[object Map]":case"[object Set]":if(n.size!==e.size)return!1;if(dE(n,e))return!0;for(var _=n.entries(),w="[object Map]"===t;;){var I=_.next();if(I.done)break;var S=I.value,M=S[0],P=S[1];if(!e.has(M)||w&&!Fy(P,e.get(M)))return!1}return!0;case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":n=new Uint8Array(n),e=new Uint8Array(e);case"[object DataView]":var U=n.byteLength;if(U===e.byteLength)for(;U--&&n[U]===e[U];);return-1===U;case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":var Y=CD.call(n);return Y===CD.call(e)&&!function TD(n,e){var t=n.length-e.length;return t>=0&&n.indexOf(e,t)===t}(Y,mO)}return!1}function DD(n){return Object.keys(n).filter(lE,n)}function lE(n){return void 0!==this[n]}var mO="{ [native code] }";function dE(n,e){var t=ky.get(n);if(t){if(t.has(e))return!0}else ky.set(n,t=new Set);return t.add(e),!1}function Ro(n){return Array.isArray(n)&&n.length>0}var yO=Object.prototype.hasOwnProperty;function SD(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return ug(n)}function ug(n){var e=n[0]||{},t=n.length;if(t>1)for(var r=new Ku,i=1;i<t;++i)e=r.merge(e,n[i]);return e}var _O=function(n,e,t){return this.merge(n[t],e[t])},Ku=function(){function n(e){void 0===e&&(e=_O),this.reconciler=e,this.isObject=Nn,this.pastCopies=new Set}return n.prototype.merge=function(e,t){for(var r=this,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return Nn(t)&&Nn(e)?(Object.keys(t).forEach(function(u){if(yO.call(e,u)){var l=e[u];if(t[u]!==l){var p=r.reconciler.apply(r,(0,fe.ev)([e,t,u],i,!1));p!==l&&((e=r.shallowCopyForMerge(e))[u]=p)}}else(e=r.shallowCopyForMerge(e))[u]=t[u]}),e):t},n.prototype.shallowCopyForMerge=function(e){return Nn(e)&&(this.pastCopies.has(e)||(e=Array.isArray(e)?e.slice(0):(0,fe.pi)({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},n}();function rf(n){return"incremental"in n}function AD(n,e){var t=n,r=new Ku;return rf(e)&&Ro(e.incremental)&&e.incremental.forEach(function(i){for(var s=i.data,u=i.path,l=u.length-1;l>=0;--l){var p=u[l],w=isNaN(+p)?{}:[];w[p]=s,s=w}t=r.merge(t,s)}),t}var wO=function(){return Object.create(null)},xD=Array.prototype,bO=xD.forEach,IO=xD.slice,sf=function(){function n(e,t){void 0===e&&(e=!0),void 0===t&&(t=wO),this.weakness=e,this.makeData=t}return n.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},n.prototype.lookupArray=function(e){var t=this;return bO.call(e,function(r){return t=t.getChildTrie(r)}),t.data||(t.data=this.makeData(IO.call(e)))},n.prototype.getChildTrie=function(e){var t=this.weakness&&function RD(n){switch(typeof n){case"object":if(null===n)break;case"function":return!0}return!1}(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=t.get(e);return r||t.set(e,r=new n(this.weakness,this.makeData)),r},n}();function Ly(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=Object.create(null);return n.forEach(function(r){!r||Object.keys(r).forEach(function(i){var s=r[i];void 0!==s&&(t[i]=s)})}),t}var Si=Object.prototype.hasOwnProperty;function af(n){return null==n}var Zr=Array.isArray;function OD(n,e){var t=n.__typename,r=n.id,i=n._id;if("string"==typeof t&&(e&&(e.keyObject=af(r)?af(i)?void 0:{_id:i}:{id:r}),af(r)&&!af(i)&&(r=i),!af(r)))return"".concat(t,":").concat("number"==typeof r||"string"==typeof r?r:JSON.stringify(r))}var MD={dataIdFromObject:OD,addTypename:!0,resultCaching:!0,canonizeResults:!1};function Vy(n){var e=n.canonizeResults;return void 0===e?MD.canonizeResults:e}var Uy=/^[_a-z][_0-9a-z]*/i;function tl(n){var e=n.match(Uy);return e?e[0]:n}function fE(n,e,t){return!!Nn(e)&&(Zr(e)?e.every(function(r){return fE(n,r,t)}):n.selections.every(function(r){if(Ya(r)&&rg(r,t)){var i=Yc(r);return Si.call(e,i)&&(!r.selectionSet||fE(r.selectionSet,e[i],t))}return!0}))}function nl(n){return Nn(n)&&!Gn(n)&&!Zr(n)}function pE(n,e){var t=ro(J0(n));return{fragmentMap:t,lookupFragment:function(r){var i=t[r];return!i&&e&&(i=e.lookup(r)),i||null}}}var ND,jy,By=function(){function n(){this.known=new(cD?WeakSet:Set),this.pool=new sf(el),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return n.prototype.isKnown=function(e){return Nn(e)&&this.known.has(e)},n.prototype.pass=function(e){if(Nn(e)){var t=function uf(n){return Nn(n)?Zr(n)?n.slice(0):(0,fe.pi)({__proto__:Object.getPrototypeOf(n)},n):n}(e);return this.passes.set(t,e),t}return e},n.prototype.admit=function(e){var t=this;if(Nn(e)){var r=this.passes.get(e);if(r)return r;switch(Object.getPrototypeOf(e)){case Array.prototype:if(this.known.has(e))return e;var s=e.map(this.admit,this);return(u=this.pool.lookupArray(s)).array||(this.known.add(u.array=s),__DEV__&&Object.freeze(s)),u.array;case null:case Object.prototype:if(this.known.has(e))return e;var l=Object.getPrototypeOf(e),p=[l],_=this.sortedKeys(e);p.push(_.json);var u,w=p.length;if(_.sorted.forEach(function(M){p.push(t.admit(e[M]))}),!(u=this.pool.lookupArray(p)).object){var I=u.object=Object.create(l);this.known.add(I),_.sorted.forEach(function(M,P){I[M]=p[w+P]}),__DEV__&&Object.freeze(I)}return u.object}}return e},n.prototype.sortedKeys=function(e){var t=Object.keys(e),r=this.pool.lookupArray(t);if(!r.keys){t.sort();var i=JSON.stringify(t);(r.keys=this.keysByJSON.get(i))||this.keysByJSON.set(i,r.keys={sorted:t,json:i})}return r.keys},n}(),Id=Object.assign(function(n){if(Nn(n)){void 0===ND&&$y();var e=ND.admit(n),t=jy.get(e);return void 0===t&&jy.set(e,t=JSON.stringify(e)),t}return JSON.stringify(n)},{reset:$y});function $y(){ND=new By,jy=new(el?WeakMap:Map)}function gE(n,e,t){return new ar(function(r){var i=r.next,s=r.error,u=r.complete,l=0,p=!1,_={then:function(M){return new Promise(function(P){return P(M())})}};function w(M,P){return M?function(U){++l;var Y=function(){return M(U)};_=_.then(Y,Y).then(function(ge){--l,i&&i.call(r,ge),p&&I.complete()},function(ge){throw--l,ge}).catch(function(ge){s&&s.call(r,ge)})}:function(U){return P&&P.call(r,U)}}var I={next:w(e,i),error:w(t,s),complete:function(){p=!0,l||u&&u.call(r)}},S=n.subscribe(I);return function(){return S.unsubscribe()}})}function cf(n){return Ro(mE(n))}function mE(n){var e=Ro(n.errors)?n.errors.slice(0):[];return rf(n)&&Ro(n.incremental)&&n.incremental.forEach(function(t){t.errors&&e.push.apply(e,t.errors)}),e}function yE(n,e,t){var r=0;return n.forEach(function(i,s){e.call(this,i,s,n)&&(n[r++]=i)},t),n.length=r,n}var Hy={kind:"Field",name:{kind:"Name",value:"__typename"}};function _E(n,e){return!n||n.selectionSet.selections.every(function(t){return"FragmentSpread"===t.kind&&_E(e[t.name.value],e)})}function Gy(n){return _E(Zh(n)||function FR(n){__DEV__?wt("Document"===n.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):wt("Document"===n.kind,50),__DEV__?wt(n.definitions.length<=1,"Fragment must have exactly one definition."):wt(n.definitions.length<=1,51);var e=n.definitions[0];return __DEV__?wt("FragmentDefinition"===e.kind,"Must be a fragment definition."):wt("FragmentDefinition"===e.kind,52),e}(n),ro(J0(n)))?null:n}function qy(n){return function(t){return n.some(function(r){return r.name&&r.name===t.name.value||r.test&&r.test(t)})}}function vE(n,e){var t=Object.create(null),r=[],i=Object.create(null),s=[],u=Gy(ha(e,{Variable:{enter:function(l,p,_){"VariableDefinition"!==_.kind&&(t[l.name.value]=!0)}},Field:{enter:function(l){if(n&&l.directives&&n.some(function(_){return _.remove})&&l.directives&&l.directives.some(qy(n)))return l.arguments&&l.arguments.forEach(function(_){"Variable"===_.value.kind&&r.push({name:_.value.name.value})}),l.selectionSet&&LD(l.selectionSet).forEach(function(_){s.push({name:_.name.value})}),null}},FragmentSpread:{enter:function(l){i[l.name.value]=!0}},Directive:{enter:function(l){if(qy(n)(l))return null}}}));return u&&yE(r,function(l){return!!l.name&&!t[l.name]}).length&&(u=function FD(n,e){var t=function cL(n){return function(t){return n.some(function(r){return t.value&&"Variable"===t.value.kind&&t.value.name&&(r.name===t.value.name.value||r.test&&r.test(t))})}}(n);return Gy(ha(e,{OperationDefinition:{enter:function(r){return(0,fe.pi)((0,fe.pi)({},r),{variableDefinitions:r.variableDefinitions?r.variableDefinitions.filter(function(i){return!n.some(function(s){return s.name===i.variable.name.value})}):[]})}},Field:{enter:function(r){var i=n.some(function(u){return u.remove});if(i){var s=0;if(r.arguments&&r.arguments.forEach(function(u){t(u)&&(s+=1)}),1===s)return null}}},Argument:{enter:function(r){if(t(r))return null}}}))}(r,u)),u&&yE(s,function(l){return!!l.name&&!i[l.name]}).length&&(u=function AO(n,e){function t(r){if(n.some(function(i){return i.name===r.name.value}))return null}return Gy(ha(e,{FragmentSpread:{enter:t},FragmentDefinition:{enter:t}}))}(s,u)),u}var EE=Object.assign(function(n){return ha(n,{SelectionSet:{enter:function(e,t,r){if(!r||"OperationDefinition"!==r.kind){var i=e.selections;if(i&&!i.some(function(l){return Ya(l)&&("__typename"===l.name.value||0===l.name.value.lastIndexOf("__",0))})){var u=r;if(!(Ya(u)&&u.directives&&u.directives.some(function(l){return"export"===l.name.value})))return(0,fe.pi)((0,fe.pi)({},e),{selections:(0,fe.ev)((0,fe.ev)([],i,!0),[Hy],!1)})}}}}})},{added:function(n){return n===Hy}}),DO={test:function(n){var e="connection"===n.name.value;return e&&(!n.arguments||!n.arguments.some(function(t){return"key"===t.name.value}))&&__DEV__&&wt.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key."),e}};function LD(n){var e=[];return n.selections.forEach(function(t){(Ya(t)||Y0(t))&&t.selectionSet?LD(t.selectionSet).forEach(function(r){return e.push(r)}):"FragmentSpread"===t.kind&&e.push(t)}),e}function lL(n){return"query"===X0(n).operation?n:ha(n,{OperationDefinition:{enter:function(i){return(0,fe.pi)((0,fe.pi)({},i),{operation:"query"})}}})}var VD=new Map;function wE(n){var e=VD.get(n)||1;return VD.set(n,e+1),"".concat(n,":").concat(e,":").concat(Math.random().toString(36).slice(2))}function cg(n,e,t){var r=[];n.forEach(function(i){return i[e]&&r.push(i)}),r.forEach(function(i){return i[e](t)})}function bE(n){function e(t){Object.defineProperty(n,t,{value:ar})}return KR&&Symbol.species&&e(Symbol.species),e("@@species"),n}function UD(n){return n&&"function"==typeof n.then}var lg=function(n){function e(t){var r=n.call(this,function(i){return r.addObserver(i),function(){return r.removeObserver(i)}})||this;return r.observers=new Set,r.promise=new Promise(function(i,s){r.resolve=i,r.reject=s}),r.handlers={next:function(i){null!==r.sub&&(r.latest=["next",i],r.notify("next",i),cg(r.observers,"next",i))},error:function(i){var s=r.sub;null!==s&&(s&&setTimeout(function(){return s.unsubscribe()}),r.sub=null,r.latest=["error",i],r.reject(i),r.notify("error",i),cg(r.observers,"error",i))},complete:function(){var i=r.sub;if(null!==i){var s=r.sources.shift();s?UD(s)?s.then(function(u){return r.sub=u.subscribe(r.handlers)}):r.sub=s.subscribe(r.handlers):(i&&setTimeout(function(){return i.unsubscribe()}),r.sub=null,r.latest&&"next"===r.latest[0]?r.resolve(r.latest[1]):r.resolve(),r.notify("complete"),cg(r.observers,"complete"))}}},r.nextResultListeners=new Set,r.cancel=function(i){r.reject(i),r.sources=[],r.handlers.complete()},r.promise.catch(function(i){}),"function"==typeof t&&(t=[new ar(t)]),UD(t)?t.then(function(i){return r.start(i)},r.handlers.error):r.start(t),r}return(0,fe.ZT)(e,n),e.prototype.start=function(t){void 0===this.sub&&(this.sources=Array.from(t),this.handlers.complete())},e.prototype.deliverLastMessage=function(t){if(this.latest){var r=this.latest[0],i=t[r];i&&i.call(t,this.latest[1]),null===this.sub&&"next"===r&&t.complete&&t.complete()}},e.prototype.addObserver=function(t){this.observers.has(t)||(this.deliverLastMessage(t),this.observers.add(t))},e.prototype.removeObserver=function(t){this.observers.delete(t)&&this.observers.size<1&&this.handlers.complete()},e.prototype.notify=function(t,r){var i=this.nextResultListeners;i.size&&(this.nextResultListeners=new Set,i.forEach(function(s){return s(t,r)}))},e.prototype.beforeNext=function(t){var r=!1;this.nextResultListeners.add(function(i,s){r||(r=!0,t(i,s))})},e}(ar);bE(lg);var lf=function(n){function e(t){var r=t.graphQLErrors,i=t.clientErrors,s=t.networkError,u=t.errorMessage,l=t.extraInfo,p=n.call(this,u)||this;return p.name="ApolloError",p.graphQLErrors=r||[],p.clientErrors=i||[],p.networkError=s||null,p.message=u||function(n){var e="";return(Ro(n.graphQLErrors)||Ro(n.clientErrors))&&(n.graphQLErrors||[]).concat(n.clientErrors||[]).forEach(function(r){e+="".concat(r?r.message:"Error message not found.","\n")}),n.networkError&&(e+="".concat(n.networkError.message,"\n")),e=e.replace(/\n$/,"")}(p),p.extraInfo=l,p.__proto__=e.prototype,p}return(0,fe.ZT)(e,n),e}(Error),OO=Object.prototype.toString;function BD(n){return IE(n)}function IE(n,e){switch(OO.call(n)){case"[object Array]":if((e=e||new Map).has(n))return e.get(n);var t=n.slice(0);return e.set(n,t),t.forEach(function(i,s){t[s]=IE(i,e)}),t;case"[object Object]":if((e=e||new Map).has(n))return e.get(n);var r=Object.create(Object.getPrototypeOf(n));return e.set(n,r),Object.keys(n).forEach(function(i){r[i]=IE(n[i],e)}),r;default:return n}}var dg=Object.assign,jD=Object.hasOwnProperty,Wy=function(n){function e(t){var r=t.queryManager,i=t.queryInfo,s=t.options,u=n.call(this,function(Y){try{var ge=Y._subscription._observer;ge&&!ge.error&&(ge.error=$D)}catch{}var Re=!u.observers.size;u.observers.add(Y);var _e=u.last;return _e&&_e.error?Y.error&&Y.error(_e.error):_e&&_e.result&&Y.next&&Y.next(_e.result),Re&&u.reobserve().catch(function(){}),function(){u.observers.delete(Y)&&!u.observers.size&&u.tearDownQuery()}})||this;u.observers=new Set,u.subscriptions=new Set,u.queryInfo=i,u.queryManager=r,u.isTornDown=!1;var l=r.defaultOptions.watchQuery,_=(void 0===l?{}:l).fetchPolicy,w=void 0===_?"cache-first":_,I=s.fetchPolicy,S=void 0===I?w:I,M=s.initialFetchPolicy,P=void 0===M?"standby"===S?w:S:M;u.options=(0,fe.pi)((0,fe.pi)({},s),{initialFetchPolicy:P,fetchPolicy:S}),u.queryId=i.queryId||r.generateQueryId();var U=Zh(u.query);return u.queryName=U&&U.name&&U.name.value,u}return(0,fe.ZT)(e,n),Object.defineProperty(e.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return new Promise(function(r,i){var s={next:function(l){r(l),t.observers.delete(s),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){u.unsubscribe()},0)},error:i},u=t.subscribe(s)})},e.prototype.getCurrentResult=function(t){void 0===t&&(t=!0);var r=this.getLastResult(!0),i=this.queryInfo.networkStatus||r&&r.networkStatus||Hn.ready,s=(0,fe.pi)((0,fe.pi)({},r),{loading:Zp(i),networkStatus:i}),u=this.options.fetchPolicy,l=void 0===u?"cache-first":u;if("network-only"!==l&&"no-cache"!==l&&"standby"!==l&&!this.queryManager.transform(this.options.query).hasForcedResolvers){var p=this.queryInfo.getDiff();(p.complete||this.options.returnPartialData)&&(s.data=p.result),Ei(s.data,{})&&(s.data=void 0),p.complete?(delete s.partial,p.complete&&s.networkStatus===Hn.loading&&("cache-first"===l||"cache-only"===l)&&(s.networkStatus=Hn.ready,s.loading=!1)):s.partial=!0,__DEV__&&!p.complete&&!this.options.partialRefetch&&!s.loading&&!s.data&&!s.error&&DE(p.missing)}return t&&this.updateLastResult(s),s},e.prototype.isDifferentFromLastResult=function(t,r){return!this.last||!Ei(this.last.result,t)||r&&!Ei(this.last.variables,r)},e.prototype.getLast=function(t,r){var i=this.last;if(i&&i[t]&&(!r||Ei(i.variables,this.variables)))return i[t]},e.prototype.getLastResult=function(t){return this.getLast("result",t)},e.prototype.getLastError=function(t){return this.getLast("error",t)},e.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var r,i={pollInterval:0},s=this.options.fetchPolicy;if(i.fetchPolicy="cache-and-network"===s?s:"no-cache"===s?"no-cache":"network-only",__DEV__&&t&&jD.call(t,"variables")){var u=sD(this.query),l=u.variableDefinitions;(!l||!l.some(function(p){return"variables"===p.variable.name.value}))&&__DEV__&&wt.warn("Called refetch(".concat(JSON.stringify(t),") for query ").concat((null===(r=u.name)||void 0===r?void 0:r.value)||JSON.stringify(u),", which does not declare a $variables variable.\nDid you mean to call refetch(variables) instead of refetch({ variables })?"))}return t&&!Ei(this.options.variables,t)&&(i.variables=this.options.variables=(0,fe.pi)((0,fe.pi)({},this.options.variables),t)),this.queryInfo.resetLastWrite(),this.reobserve(i,Hn.refetch)},e.prototype.fetchMore=function(t){var r=this,i=(0,fe.pi)((0,fe.pi)({},t.query?t:(0,fe.pi)((0,fe.pi)((0,fe.pi)((0,fe.pi)({},this.options),{query:this.query}),t),{variables:(0,fe.pi)((0,fe.pi)({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"}),s=this.queryManager.generateQueryId(),u=this.queryInfo,l=u.networkStatus;u.networkStatus=Hn.fetchMore,i.notifyOnNetworkStatusChange&&this.observe();var p=new Set;return this.queryManager.fetchQuery(s,i,Hn.fetchMore).then(function(_){return r.queryManager.removeQuery(s),u.networkStatus===Hn.fetchMore&&(u.networkStatus=l),r.queryManager.cache.batch({update:function(w){var I=t.updateQuery;I?w.updateQuery({query:r.query,variables:r.variables,returnPartialData:!0,optimistic:!1},function(S){return I(S,{fetchMoreResult:_.data,variables:i.variables})}):w.writeQuery({query:i.query,variables:i.variables,data:_.data})},onWatchUpdated:function(w){p.add(w.query)}}),_}).finally(function(){p.has(r.query)||CE(r)})},e.prototype.subscribeToMore=function(t){var r=this,i=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(s){var u=t.updateQuery;u&&r.updateQuery(function(l,p){return u(l,{subscriptionData:s,variables:p.variables})})},error:function(s){t.onError?t.onError(s):__DEV__&&wt.error("Unhandled GraphQL subscription error",s)}});return this.subscriptions.add(i),function(){r.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(t){return this.reobserve(t)},e.prototype.setVariables=function(t){return Ei(this.variables,t)?this.observers.size?this.result():Promise.resolve():(this.options.variables=t,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:t},Hn.setVariables):Promise.resolve())},e.prototype.updateQuery=function(t){var r=this.queryManager,s=t(r.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});s&&(r.cache.writeQuery({query:this.options.query,data:s,variables:this.variables}),r.broadcastQueries())},e.prototype.startPolling=function(t){this.options.pollInterval=t,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.applyNextFetchPolicy=function(t,r){if(r.nextFetchPolicy){var i=r.fetchPolicy,s=void 0===i?"cache-first":i,u=r.initialFetchPolicy,l=void 0===u?s:u;"standby"===s||(r.fetchPolicy="function"==typeof r.nextFetchPolicy?r.nextFetchPolicy(s,{reason:t,options:r,observable:this,initialFetchPolicy:l}):"variables-changed"===t?l:r.nextFetchPolicy)}return r.fetchPolicy},e.prototype.fetch=function(t,r){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,t,r)},e.prototype.updatePolling=function(){var t=this;if(!this.queryManager.ssrMode){var i=this.pollingInfo,s=this.options.pollInterval;if(!s)return void(i&&(clearTimeout(i.timeout),delete this.pollingInfo));if(!i||i.interval!==s){__DEV__?wt(s,"Attempted to start a polling query without a polling interval."):wt(s,12),(i||(this.pollingInfo={})).interval=s;var l=function(){t.pollingInfo&&(Zp(t.queryInfo.networkStatus)?p():t.reobserve({fetchPolicy:"no-cache"===t.options.initialFetchPolicy?"no-cache":"network-only"},Hn.poll).then(p,p))},p=function(){var _=t.pollingInfo;_&&(clearTimeout(_.timeout),_.timeout=setTimeout(l,_.interval))};p()}}},e.prototype.updateLastResult=function(t,r){return void 0===r&&(r=this.variables),this.last=(0,fe.pi)((0,fe.pi)({},this.last),{result:this.queryManager.assumeImmutableResults?t:BD(t),variables:r}),Ro(t.errors)||delete this.last.error,this.last},e.prototype.reobserve=function(t,r){var i=this;this.isTornDown=!1;var s=r===Hn.refetch||r===Hn.fetchMore||r===Hn.poll,u=this.options.variables,l=this.options.fetchPolicy,p=Ly(this.options,t||{}),_=s?p:dg(this.options,p);s||(this.updatePolling(),t&&t.variables&&!Ei(t.variables,u)&&"standby"!==_.fetchPolicy&&_.fetchPolicy===l&&(this.applyNextFetchPolicy("variables-changed",_),void 0===r&&(r=Hn.setVariables)));var w=_.variables&&(0,fe.pi)({},_.variables),I=this.fetch(_,r),S={next:function(M){i.reportResult(M,w)},error:function(M){i.reportError(M,w)}};return s||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=I,this.observer=S),I.addObserver(S),I.promise},e.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},e.prototype.reportResult=function(t,r){var i=this.getLastError();(i||this.isDifferentFromLastResult(t,r))&&((i||!t.partial||this.options.returnPartialData)&&this.updateLastResult(t,r),cg(this.observers,"next",t))},e.prototype.reportError=function(t,r){var i=(0,fe.pi)((0,fe.pi)({},this.getLastResult()),{error:t,errors:t.graphQLErrors,networkStatus:Hn.error,loading:!1});this.updateLastResult(i,r),cg(this.observers,"error",this.last.error=t)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e}(ar);function CE(n){var e=n.options,t=e.fetchPolicy,r=e.nextFetchPolicy;return"cache-and-network"===t||"network-only"===t?n.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=r,"function"==typeof r?r.apply(this,arguments):t}}):n.reobserve()}function $D(n){__DEV__&&wt.error("Unhandled error",n.message,n.stack)}function DE(n){__DEV__&&n&&__DEV__&&wt.debug("Missing cache result fields: ".concat(JSON.stringify(n)),n)}bE(Wy);var Ai=null,HD={},hL=1;function qD(n){try{return n()}catch{}}var TE="@wry/context:Slot",WD=qD(function(){return globalThis})||qD(function(){return global})||Object.create(null),rl=WD[TE]||Array[TE]||function(n){try{Object.defineProperty(WD,TE,{value:n,enumerable:!1,writable:!1,configurable:!0})}finally{return n}}(function(){function n(){this.id=["slot",hL++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return n.prototype.hasValue=function(){for(var e=Ai;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===HD)break;return e!==Ai&&(Ai.slots[this.id]=t),!0}return Ai&&(Ai.slots[this.id]=HD),!1},n.prototype.getValue=function(){if(this.hasValue())return Ai.slots[this.id]},n.prototype.withValue=function(e,t,r,i){var s,u=((s={__proto__:null})[this.id]=e,s),l=Ai;Ai={parent:l,slots:u};try{return t.apply(i,r)}finally{Ai=l}},n.bind=function(e){var t=Ai;return function(){var r=Ai;try{return Ai=t,e.apply(this,arguments)}finally{Ai=r}}},n.noContext=function(e,t,r){if(!Ai)return e.apply(r,t);var i=Ai;try{return Ai=null,e.apply(r,t)}finally{Ai=i}},n}());function PO(){}var hf,NO=function(){function n(e,t){void 0===e&&(e=1/0),void 0===t&&(t=PO),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return n.prototype.has=function(e){return this.map.has(e)},n.prototype.get=function(e){var t=this.getNode(e);return t&&t.value},n.prototype.getNode=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var r=t.older,i=t.newer;i&&(i.older=r),r&&(r.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t},n.prototype.set=function(e,t){var r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)},n.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},n.prototype.delete=function(e){var t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)},n}(),Cd=new rl,kO=Object.prototype.hasOwnProperty,RE=void 0===(hf=Array.from)?function(n){var e=[];return n.forEach(function(t){return e.push(t)}),e}:hf;function hg(n){var e=n.unsubscribe;"function"==typeof e&&(n.unsubscribe=void 0,e())}var ff=[];function Dd(n,e){if(!n)throw new Error(e||"assertion failure")}function zD(n){switch(n.length){case 0:throw new Error("unknown value");case 1:return n[0];case 2:throw n[1]}}var ME=function(){function n(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++n.count}return n.prototype.peek=function(){if(1===this.value.length&&!Xa(this))return zy(this),this.value[0]},n.prototype.recompute=function(e){return Dd(!this.recomputing,"already recomputing"),zy(this),Xa(this)?function KD(n,e){return YD(n),Cd.withValue(n,PE,[n,e]),function JD(n,e){if("function"==typeof n.subscribe)try{hg(n),n.unsubscribe=n.subscribe.apply(null,e)}catch{return n.setDirty(),!1}return!0}(n,e)&&function LO(n){n.dirty=!1,!Xa(n)&&QD(n)}(n),zD(n.value)}(this,e):zD(this.value)},n.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,ZD(this),hg(this))},n.prototype.dispose=function(){var e=this;this.setDirty(),YD(this),NE(this,function(t,r){t.setDirty(),LE(t,e)})},n.prototype.forget=function(){this.dispose()},n.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=ff.pop()||new Set),this.deps.add(e)},n.prototype.forgetDeps=function(){var e=this;this.deps&&(RE(this.deps).forEach(function(t){return t.delete(e)}),this.deps.clear(),ff.push(this.deps),this.deps=null)},n.count=0,n}();function zy(n){var e=Cd.getValue();if(e)return n.parents.add(e),e.childValues.has(n)||e.childValues.set(n,[]),Xa(n)?kE(e,n):Ky(e,n),e}function PE(n,e){n.recomputing=!0,n.value.length=0;try{n.value[0]=n.fn.apply(null,e)}catch(t){n.value[1]=t}n.recomputing=!1}function Xa(n){return n.dirty||!(!n.dirtyChildren||!n.dirtyChildren.size)}function ZD(n){NE(n,kE)}function QD(n){NE(n,Ky)}function NE(n,e){var t=n.parents.size;if(t)for(var r=RE(n.parents),i=0;i<t;++i)e(r[i],n)}function kE(n,e){Dd(n.childValues.has(e)),Dd(Xa(e));var t=!Xa(n);if(n.dirtyChildren){if(n.dirtyChildren.has(e))return}else n.dirtyChildren=ff.pop()||new Set;n.dirtyChildren.add(e),t&&ZD(n)}function Ky(n,e){Dd(n.childValues.has(e)),Dd(!Xa(e));var t=n.childValues.get(e);0===t.length?n.childValues.set(e,function gL(n){return n.slice(0)}(e.value)):function FO(n,e){var t=n.length;return t>0&&t===e.length&&n[t-1]===e[t-1]}(t,e.value)||n.setDirty(),FE(n,e),!Xa(n)&&QD(n)}function FE(n,e){var t=n.dirtyChildren;t&&(t.delete(e),0===t.size&&(ff.length<100&&ff.push(t),n.dirtyChildren=null))}function YD(n){n.childValues.size>0&&n.childValues.forEach(function(e,t){LE(n,t)}),n.forgetDeps(),Dd(null===n.dirtyChildren)}function LE(n,e){e.parents.delete(n),n.childValues.delete(e),FE(n,e)}var VO={setDirty:!0,dispose:!0,forget:!0};function VE(n){var e=new Map,t=n&&n.subscribe;function r(i){var s=Cd.getValue();if(s){var u=e.get(i);u||e.set(i,u=new Set),s.dependOn(u),"function"==typeof t&&(hg(u),u.unsubscribe=t(i))}}return r.dirty=function(s,u){var l=e.get(s);if(l){var p=u&&kO.call(VO,u)?u:"setDirty";RE(l).forEach(function(_){return _[p]()}),e.delete(s),hg(l)}},r}function UE(){var n=new sf("function"==typeof WeakMap);return function(){return n.lookupArray(arguments)}}UE();var Zy=new Set;function Qy(n,e){void 0===e&&(e=Object.create(null));var t=new NO(e.max||Math.pow(2,16),function(_){return _.dispose()}),r=e.keyArgs,i=e.makeCacheKey||UE(),s=function(){var _=i.apply(null,r?r.apply(null,arguments):arguments);if(void 0===_)return n.apply(null,arguments);var w=t.get(_);w||(t.set(_,w=new ME(n)),w.subscribe=e.subscribe,w.forget=function(){return t.delete(_)});var I=w.recompute(Array.prototype.slice.call(arguments));return t.set(_,w),Zy.add(t),Cd.hasValue()||(Zy.forEach(function(S){return S.clean()}),Zy.clear()),I};function u(_){var w=t.get(_);w&&w.setDirty()}function l(_){var w=t.get(_);if(w)return w.peek()}function p(_){return t.delete(_)}return Object.defineProperty(s,"size",{get:function(){return t.map.size},configurable:!1,enumerable:!1}),s.dirtyKey=u,s.dirty=function(){u(i.apply(null,arguments))},s.peekKey=l,s.peek=function(){return l(i.apply(null,arguments))},s.forgetKey=p,s.forget=function(){return p(i.apply(null,arguments))},s.makeCacheKey=i,s.getKey=r?function(){return i.apply(null,r.apply(null,arguments))}:i,Object.freeze(s)}var Hi=new rl,Td=new WeakMap;function fg(n){var e=Td.get(n);return e||Td.set(n,e={vars:new Set,dep:VE()}),e}function XD(n){fg(n).vars.forEach(function(e){return e.forgetCache(n)})}function _L(n){var e=new Set,t=new Set,r=function(s){if(arguments.length>0){if(n!==s){n=s,e.forEach(function(p){fg(p).dep.dirty(r),eT(p)});var u=Array.from(t);t.clear(),u.forEach(function(p){return p(n)})}}else{var l=Hi.getValue();l&&(i(l),fg(l).dep(r))}return n};r.onNextChange=function(s){return t.add(s),function(){t.delete(s)}};var i=r.attachCache=function(s){return e.add(s),fg(s).vars.add(r),r};return r.forgetCache=function(s){return e.delete(s)},r}function eT(n){n.broadcastWatches&&n.broadcastWatches()}var BE=function(){function n(e){var r=e.client,i=e.resolvers,s=e.fragmentMatcher;this.cache=e.cache,r&&(this.client=r),i&&this.addResolvers(i),s&&this.setFragmentMatcher(s)}return n.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(r){t.resolvers=SD(t.resolvers,r)}):this.resolvers=SD(this.resolvers,e)},n.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},n.prototype.getResolvers=function(){return this.resolvers||{}},n.prototype.runResolvers=function(e){var t=e.document,r=e.remoteResult,i=e.context,s=e.variables,u=e.onlyRunForcedResolvers,l=void 0!==u&&u;return(0,fe.mG)(this,void 0,void 0,function(){return(0,fe.Jh)(this,function(p){return t?[2,this.resolveDocument(t,r.data,i,s,this.fragmentMatcher,l).then(function(_){return(0,fe.pi)((0,fe.pi)({},r),{data:_.result})})]:[2,r]})})},n.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},n.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},n.prototype.clientQuery=function(e){return ig(["client"],e)&&this.resolvers?e:null},n.prototype.serverQuery=function(e){return function dL(n){tg(n);var e=vE([{test:function(t){return"client"===t.name.value},remove:!0}],n);return e&&(e=ha(e,{FragmentDefinition:{enter:function(t){if(t.selectionSet&&t.selectionSet.selections.every(function(i){return Ya(i)&&"__typename"===i.name.value}))return null}}})),e}(e)},n.prototype.prepareContext=function(e){var t=this.cache;return(0,fe.pi)((0,fe.pi)({},e),{cache:t,getCacheKey:function(r){return t.identify(r)}})},n.prototype.addExportedVariables=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),(0,fe.mG)(this,void 0,void 0,function(){return(0,fe.Jh)(this,function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(r),t).then(function(s){return(0,fe.pi)((0,fe.pi)({},t),s.exportedVariables)})]:[2,(0,fe.pi)({},t)]})})},n.prototype.shouldForceResolvers=function(e){var t=!1;return ha(e,{Directive:{enter:function(r){if("client"===r.name.value&&r.arguments&&(t=r.arguments.some(function(i){return"always"===i.name.value&&"BooleanValue"===i.value.kind&&!0===i.value.value})))return Xc}}}),t},n.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:lL(e),variables:t,returnPartialData:!0,optimistic:!1}).result},n.prototype.resolveDocument=function(e,t,r,i,s,u){return void 0===r&&(r={}),void 0===i&&(i={}),void 0===s&&(s=function(){return!0}),void 0===u&&(u=!1),(0,fe.mG)(this,void 0,void 0,function(){var l,p,_,w,I,S,M,P,U;return(0,fe.Jh)(this,function(Y){return l=X0(e),p=J0(e),_=ro(p),I=(w=l.operation)?w.charAt(0).toUpperCase()+w.slice(1):"Query",M=(S=this).cache,P=S.client,U={fragmentMap:_,context:(0,fe.pi)((0,fe.pi)({},r),{cache:M,client:P}),variables:i,fragmentMatcher:s,defaultOperationType:I,exportedVariables:{},onlyRunForcedResolvers:u},[2,this.resolveSelectionSet(l.selectionSet,t,U).then(function(ge){return{result:ge,exportedVariables:U.exportedVariables}})]})})},n.prototype.resolveSelectionSet=function(e,t,r){return(0,fe.mG)(this,void 0,void 0,function(){var i,s,u,l,_=this;return(0,fe.Jh)(this,function(w){return i=r.fragmentMap,s=r.context,u=r.variables,l=[t],[2,Promise.all(e.selections.map(function(I){return(0,fe.mG)(_,void 0,void 0,function(){var S;return(0,fe.Jh)(this,function(P){return rg(I,u)?Ya(I)?[2,this.resolveField(I,t,r).then(function(U){var Y;typeof U<"u"&&l.push(((Y={})[Yc(I)]=U,Y))})]:(Y0(I)?S=I:(S=i[I.name.value],__DEV__?wt(S,"No fragment named ".concat(I.name.value)):wt(S,11)),S&&S.typeCondition&&r.fragmentMatcher(t,S.typeCondition.name.value,s)?[2,this.resolveSelectionSet(S.selectionSet,t,r).then(function(U){l.push(U)})]:[2]):[2]})})})).then(function(){return ug(l)})]})})},n.prototype.resolveField=function(e,t,r){return(0,fe.mG)(this,void 0,void 0,function(){var i,s,u,l,p,_,w,I,S,M=this;return(0,fe.Jh)(this,function(P){return i=r.variables,s=e.name.value,u=Yc(e),l=s!==u,p=t[u]||t[s],_=Promise.resolve(p),(!r.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(w=t.__typename||r.defaultOperationType,(I=this.resolvers&&this.resolvers[w])&&(S=I[l?s:u])&&(_=Promise.resolve(Hi.withValue(this.cache,S,[t,eg(e,i),r.context,{field:e,fragmentMap:r.fragmentMap}])))),[2,_.then(function(U){return void 0===U&&(U=p),e.directives&&e.directives.forEach(function(Y){"export"===Y.name.value&&Y.arguments&&Y.arguments.forEach(function(ge){"as"===ge.name.value&&"StringValue"===ge.value.kind&&(r.exportedVariables[ge.value.value]=U)})}),e.selectionSet&&null!=U?Array.isArray(U)?M.resolveSubSelectedArray(e,U,r):e.selectionSet?M.resolveSelectionSet(e.selectionSet,U,r):void 0:U})]})})},n.prototype.resolveSubSelectedArray=function(e,t,r){var i=this;return Promise.all(t.map(function(s){return null===s?null:Array.isArray(s)?i.resolveSubSelectedArray(e,s,r):e.selectionSet?i.resolveSelectionSet(e.selectionSet,s,r):void 0}))},n}(),eu=new(el?WeakMap:Map);function jE(n,e){var t=n[e];"function"==typeof t&&(n[e]=function(){return eu.set(n,(eu.get(n)+1)%1e15),t.apply(this,arguments)})}function Yy(n){n.notifyTimeout&&(clearTimeout(n.notifyTimeout),n.notifyTimeout=void 0)}var $E=function(){function n(e,t){void 0===t&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var r=this.cache=e.cache;eu.has(r)||(eu.set(r,0),jE(r,"evict"),jE(r,"modify"),jE(r,"reset"))}return n.prototype.init=function(e){var t=e.networkStatus||Hn.loading;return this.variables&&this.networkStatus!==Hn.loading&&!Ei(this.variables,e.variables)&&(t=Hn.setVariables),Ei(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},n.prototype.reset=function(){Yy(this),this.dirty=!1},n.prototype.getDiff=function(e){void 0===e&&(e=this.variables);var t=this.getDiffOptions(e);if(this.lastDiff&&Ei(t,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=e);var r=this.observableQuery;if(r&&"no-cache"===r.options.fetchPolicy)return{complete:!1};var i=this.cache.diff(t);return this.updateLastDiff(i,t),i},n.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},n.prototype.getDiffOptions=function(e){var t;return void 0===e&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:null===(t=this.observableQuery)||void 0===t?void 0:t.options.canonizeResults}},n.prototype.setDiff=function(e){var t=this,r=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(e),!this.dirty&&!Ei(r&&r.result,e&&e.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return t.notify()},0)))},n.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){t.getDiff().fromOptimisticTransaction?e.observe():CE(e)})):delete this.oqListener)},n.prototype.notify=function(){var e=this;Yy(this),this.shouldNotify()&&this.listeners.forEach(function(t){return t(e)}),this.dirty=!1},n.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(Zp(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if("cache-only"!==e&&"cache-and-network"!==e)return!1}return!0},n.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=n.prototype.cancel,this.subscriptions.forEach(function(t){return t.unsubscribe()});var e=this.observableQuery;e&&e.stopPolling()}},n.prototype.cancel=function(){},n.prototype.updateWatch=function(e){var t=this;void 0===e&&(e=this.variables);var r=this.observableQuery;if(!r||"no-cache"!==r.options.fetchPolicy){var i=(0,fe.pi)((0,fe.pi)({},this.getDiffOptions(e)),{watcher:this,callback:function(s){return t.setDiff(s)}});(!this.lastWatch||!Ei(i,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=i))}},n.prototype.resetLastWrite=function(){this.lastWrite=void 0},n.prototype.shouldWrite=function(e,t){var r=this.lastWrite;return!(r&&r.dmCount===eu.get(this.cache)&&Ei(t,r.variables)&&Ei(e.data,r.result.data))},n.prototype.markResult=function(e,t,r,i){var s=this,u=new Ku,l=Ro(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&Ro(e.incremental)){var p=AD(this.getDiff().result,e);e.data=p}else if("hasNext"in e&&e.hasNext){var _=this.getDiff();e.data=u.merge(_.result,e.data)}this.graphQLErrors=l,"no-cache"===r.fetchPolicy?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(r.variables)):0!==i&&(Jy(e,r.errorPolicy)?this.cache.performTransaction(function(w){if(s.shouldWrite(e,r.variables))w.writeQuery({query:t,data:e.data,variables:r.variables,overwrite:1===i}),s.lastWrite={result:e,variables:r.variables,dmCount:eu.get(s.cache)};else if(s.lastDiff&&s.lastDiff.diff.complete)return void(e.data=s.lastDiff.diff.result);var I=s.getDiffOptions(r.variables),S=w.diff(I);s.stopped||s.updateWatch(r.variables),s.updateLastDiff(S,I),S.complete&&(e.data=S.result)}):this.lastWrite=void 0)},n.prototype.markReady=function(){return this.networkError=null,this.networkStatus=Hn.ready},n.prototype.markError=function(e){return this.networkStatus=Hn.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},n}();function Jy(n,e){void 0===e&&(e="none");var t="ignore"===e||"all"===e,r=!cf(n);return!r&&t&&n.data&&(r=!0),r}var UO=Object.prototype.hasOwnProperty,BO=function(){function n(e){var t=e.cache,r=e.link,i=e.defaultOptions,s=e.queryDeduplication,u=void 0!==s&&s,l=e.onBroadcast,p=e.ssrMode,_=void 0!==p&&p,w=e.clientAwareness,I=void 0===w?{}:w,S=e.localState,M=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(el?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=t,this.link=r,this.defaultOptions=i||Object.create(null),this.queryDeduplication=u,this.clientAwareness=I,this.localState=S||new BE({cache:t}),this.ssrMode=_,this.assumeImmutableResults=!!M,(this.onBroadcast=l)&&(this.mutationStore=Object.create(null))}return n.prototype.stop=function(){var e=this;this.queries.forEach(function(t,r){e.stopQueryNoBroadcast(r)}),this.cancelPendingFetches(__DEV__?new Sn("QueryManager stopped while query was in flight"):new Sn(13))},n.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},n.prototype.mutate=function(e){var t,r,i=e.mutation,s=e.variables,u=e.optimisticResponse,l=e.updateQueries,p=e.refetchQueries,_=void 0===p?[]:p,w=e.awaitRefetchQueries,I=void 0!==w&&w,S=e.update,M=e.onQueryUpdated,P=e.fetchPolicy,U=void 0===P?(null===(t=this.defaultOptions.mutate)||void 0===t?void 0:t.fetchPolicy)||"network-only":P,Y=e.errorPolicy,ge=void 0===Y?(null===(r=this.defaultOptions.mutate)||void 0===r?void 0:r.errorPolicy)||"none":Y,Re=e.keepRootFields,_e=e.context;return(0,fe.mG)(this,void 0,void 0,function(){var Le,Xe,Et,Bt,Dr;return(0,fe.Jh)(this,function(Mi){switch(Mi.label){case 0:return __DEV__?wt(i,"mutation option is required. You must specify your GraphQL document in the mutation option."):wt(i,14),__DEV__?wt("network-only"===U||"no-cache"===U,"Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):wt("network-only"===U||"no-cache"===U,15),Le=this.generateMutationId(),Xe=this.transform(i),Et=Xe.hasClientExports,i=this.cache.transformForLink(Xe.document),s=this.getVariables(i,s),Et?[4,this.localState.addExportedVariables(i,s,_e)]:[3,2];case 1:s=Mi.sent(),Mi.label=2;case 2:return Bt=this.mutationStore&&(this.mutationStore[Le]={mutation:i,variables:s,loading:!0,error:null}),u&&this.markMutationOptimistic(u,{mutationId:Le,document:i,variables:s,fetchPolicy:U,errorPolicy:ge,context:_e,updateQueries:l,update:S,keepRootFields:Re}),this.broadcastQueries(),Dr=this,[2,new Promise(function(fm,lv){return gE(Dr.getObservableFromLink(i,(0,fe.pi)((0,fe.pi)({},_e),{optimisticResponse:u}),s,!1),function(Lo){if(cf(Lo)&&"none"===ge)throw new lf({graphQLErrors:mE(Lo)});Bt&&(Bt.loading=!1,Bt.error=null);var dv=(0,fe.pi)({},Lo);return"function"==typeof _&&(_=_(dv)),"ignore"===ge&&cf(dv)&&delete dv.errors,Dr.markMutationResult({mutationId:Le,result:dv,document:i,variables:s,fetchPolicy:U,errorPolicy:ge,context:_e,update:S,updateQueries:l,awaitRefetchQueries:I,refetchQueries:_,removeOptimistic:u?Le:void 0,onQueryUpdated:M,keepRootFields:Re})}).subscribe({next:function(Lo){Dr.broadcastQueries(),(!("hasNext"in Lo)||!1===Lo.hasNext)&&fm(Lo)},error:function(Lo){Bt&&(Bt.loading=!1,Bt.error=Lo),u&&Dr.cache.removeOptimistic(Le),Dr.broadcastQueries(),lv(Lo instanceof lf?Lo:new lf({networkError:Lo}))}})})]}})})},n.prototype.markMutationResult=function(e,t){var r=this;void 0===t&&(t=this.cache);var i=e.result,s=[],u="no-cache"===e.fetchPolicy;if(!u&&Jy(i,e.errorPolicy)){if(rf(i)||s.push({result:i.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),rf(i)&&Ro(i.incremental)){var p=AD(t.diff({id:"ROOT_MUTATION",query:this.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}).result,i);typeof p<"u"&&(i.data=p,s.push({result:p,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var _=e.updateQueries;_&&this.queries.forEach(function(I,S){var M=I.observableQuery,P=M&&M.queryName;if(P&&UO.call(_,P)){var U=_[P],Y=r.queries.get(S),ge=Y.document,Re=Y.variables,_e=t.diff({query:ge,variables:Re,returnPartialData:!0,optimistic:!1}),Le=_e.result;if(_e.complete&&Le){var rt=U(Le,{mutationResult:i,queryName:ge&&Sy(ge)||void 0,queryVariables:Re});rt&&s.push({result:rt,dataId:"ROOT_QUERY",query:ge,variables:Re})}}})}if(s.length>0||e.refetchQueries||e.update||e.onQueryUpdated||e.removeOptimistic){var w=[];if(this.refetchQueries({updateCache:function(I){u||s.forEach(function(U){return I.write(U)});var S=e.update,M=!function EO(n){return rf(n)||function vO(n){return"hasNext"in n&&"data"in n}(n)}(i)||rf(i)&&!i.hasNext;if(S){if(!u){var P=I.diff({id:"ROOT_MUTATION",query:r.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});P.complete&&("incremental"in(i=(0,fe.pi)((0,fe.pi)({},i),{data:P.result}))&&delete i.incremental,"hasNext"in i&&delete i.hasNext)}M&&S(I,i,{context:e.context,variables:e.variables})}!u&&!e.keepRootFields&&M&&I.modify({id:"ROOT_MUTATION",fields:function(U,Y){return"__typename"===Y.fieldName?U:Y.DELETE}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(I){return w.push(I)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(w).then(function(){return i})}return Promise.resolve(i)},n.prototype.markMutationOptimistic=function(e,t){var r=this,i="function"==typeof e?e(t.variables):e;return this.cache.recordOptimisticTransaction(function(s){try{r.markMutationResult((0,fe.pi)((0,fe.pi)({},t),{result:{data:i}}),s)}catch(u){__DEV__&&wt.error(u)}},t.mutationId)},n.prototype.fetchQuery=function(e,t,r){return this.fetchQueryObservable(e,t,r).promise},n.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,r){e[r]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},n.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},n.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var r=this.cache.transformDocument(e),i=function TO(n){return vE([DO],tg(n))}(r),s=this.localState.clientQuery(r),u=i&&this.localState.serverQuery(i),l={document:r,hasClientExports:zR(r),hasForcedResolvers:this.localState.shouldForceResolvers(r),clientQuery:s,serverQuery:u,defaultVars:eE(Zh(r)),asQuery:(0,fe.pi)((0,fe.pi)({},r),{definitions:r.definitions.map(function(_){return"OperationDefinition"===_.kind&&"query"!==_.operation?(0,fe.pi)((0,fe.pi)({},_),{operation:"query"}):_})})},p=function(_){_&&!t.has(_)&&t.set(_,l)};p(e),p(r),p(s),p(u)}return t.get(e)},n.prototype.getVariables=function(e,t){return(0,fe.pi)((0,fe.pi)({},this.transform(e).defaultVars),t)},n.prototype.watchQuery=function(e){typeof(e=(0,fe.pi)((0,fe.pi)({},e),{variables:this.getVariables(e.query,e.variables)})).notifyOnNetworkStatusChange>"u"&&(e.notifyOnNetworkStatusChange=!1);var t=new $E(this),r=new Wy({queryManager:this,queryInfo:t,options:e});return this.queries.set(r.queryId,t),t.init({document:r.query,observableQuery:r,variables:r.variables}),r},n.prototype.query=function(e,t){var r=this;return void 0===t&&(t=this.generateQueryId()),__DEV__?wt(e.query,"query option is required. You must specify your GraphQL document in the query option."):wt(e.query,16),__DEV__?wt("Document"===e.query.kind,'You must wrap the query string in a "gql" tag.'):wt("Document"===e.query.kind,17),__DEV__?wt(!e.returnPartialData,"returnPartialData option only supported on watchQuery."):wt(!e.returnPartialData,18),__DEV__?wt(!e.pollInterval,"pollInterval option only supported on watchQuery."):wt(!e.pollInterval,19),this.fetchQuery(t,e).finally(function(){return r.stopQuery(t)})},n.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},n.prototype.generateRequestId=function(){return this.requestIdCounter++},n.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},n.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},n.prototype.clearStore=function(e){return void 0===e&&(e={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new Sn("Store reset while query was in flight (not completed in link chain)"):new Sn(20)),this.queries.forEach(function(t){t.observableQuery?t.networkStatus=Hn.loading:t.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},n.prototype.getObservableQueries=function(e){var t=this;void 0===e&&(e="active");var r=new Map,i=new Map,s=new Set;return Array.isArray(e)&&e.forEach(function(u){"string"==typeof u?i.set(u,!1):function RR(n){return Nn(n)&&"Document"===n.kind&&Array.isArray(n.definitions)}(u)?i.set(t.transform(u).document,!1):Nn(u)&&u.query&&s.add(u)}),this.queries.forEach(function(u,l){var p=u.observableQuery,_=u.document;if(p){if("all"===e)return void r.set(l,p);var w=p.queryName;if("standby"===p.options.fetchPolicy||"active"===e&&!p.hasObservers())return;("active"===e||w&&i.has(w)||_&&i.has(_))&&(r.set(l,p),w&&i.set(w,!0),_&&i.set(_,!0))}}),s.size&&s.forEach(function(u){var l=wE("legacyOneTimeQuery"),p=t.getQuery(l).init({document:u.query,variables:u.variables}),_=new Wy({queryManager:t,queryInfo:p,options:(0,fe.pi)((0,fe.pi)({},u),{fetchPolicy:"network-only"})});wt(_.queryId===l),p.setObservableQuery(_),r.set(l,_)}),__DEV__&&i.size&&i.forEach(function(u,l){u||__DEV__&&wt.warn("Unknown query ".concat("string"==typeof l?"named ":"").concat(JSON.stringify(l,null,2)," requested in refetchQueries options.include array"))}),r},n.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var r=[];return this.getObservableQueries(e?"all":"active").forEach(function(i,s){var u=i.options.fetchPolicy;i.resetLastResults(),(e||"standby"!==u&&"cache-only"!==u)&&r.push(i.refetch()),t.getQuery(s).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},n.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},n.prototype.startGraphQLSubscription=function(e){var t=this,r=e.query,i=e.fetchPolicy,s=e.errorPolicy,u=e.variables,l=e.context,p=void 0===l?{}:l;r=this.transform(r).document,u=this.getVariables(r,u);var _=function(I){return t.getObservableFromLink(r,p,I).map(function(S){if("no-cache"!==i&&(Jy(S,s)&&t.cache.write({query:r,result:S.data,dataId:"ROOT_SUBSCRIPTION",variables:I}),t.broadcastQueries()),cf(S))throw new lf({graphQLErrors:S.errors});return S})};if(this.transform(r).hasClientExports){var w=this.localState.addExportedVariables(r,u,p).then(_);return new ar(function(I){var S=null;return w.then(function(M){return S=M.subscribe(I)},I.error),function(){return S&&S.unsubscribe()}})}return _(u)},n.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},n.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},n.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},n.prototype.getLocalState=function(){return this.localState},n.prototype.getObservableFromLink=function(e,t,r,i){var u,s=this;void 0===i&&(i=null!==(u=t?.queryDeduplication)&&void 0!==u?u:this.queryDeduplication);var l,p=this.transform(e).serverQuery;if(p){var w=this.inFlightLinkObservables,I=this.link,S={query:p,variables:r,operationName:Sy(p)||void 0,context:this.prepareContext((0,fe.pi)((0,fe.pi)({},t),{forceFetch:!i}))};if(t=S.context,i){var M=w.get(p)||new Map;w.set(p,M);var P=Id(r);if(!(l=M.get(P))){var U=new lg([tE(I,S)]);M.set(P,l=U),U.beforeNext(function(){M.delete(P)&&M.size<1&&w.delete(p)})}}else l=new lg([tE(I,S)])}else l=new lg([ar.of({data:{}})]),t=this.prepareContext(t);var Y=this.transform(e).clientQuery;return Y&&(l=gE(l,function(ge){return s.localState.runResolvers({document:Y,remoteResult:ge,context:t,variables:r})})),l},n.prototype.getResultsFromLink=function(e,t,r){var i=e.lastRequestId=this.generateRequestId(),s=this.cache.transformForLink(this.transform(e.document).document);return gE(this.getObservableFromLink(s,r.context,r.variables),function(u){var l=mE(u),p=l.length>0;if(i>=e.lastRequestId){if(p&&"none"===r.errorPolicy)throw e.markError(new lf({graphQLErrors:l}));e.markResult(u,s,r,t),e.markReady()}var _={data:u.data,loading:!1,networkStatus:Hn.ready};return p&&"ignore"!==r.errorPolicy&&(_.errors=l,_.networkStatus=Hn.error),_},function(u){var l=function xO(n){return n.hasOwnProperty("graphQLErrors")}(u)?u:new lf({networkError:u});throw i>=e.lastRequestId&&e.markError(l),l})},n.prototype.fetchQueryObservable=function(e,t,r){var i=this;void 0===r&&(r=Hn.loading);var s=this.transform(t.query).document,u=this.getVariables(s,t.variables),l=this.getQuery(e),p=this.defaultOptions.watchQuery,_=t.fetchPolicy,I=t.errorPolicy,M=t.returnPartialData,U=t.notifyOnNetworkStatusChange,ge=t.context,_e=Object.assign({},t,{query:s,variables:u,fetchPolicy:void 0===_?p&&p.fetchPolicy||"cache-first":_,errorPolicy:void 0===I?p&&p.errorPolicy||"none":I,returnPartialData:void 0!==M&&M,notifyOnNetworkStatusChange:void 0!==U&&U,context:void 0===ge?{}:ge}),Le=function(Et){_e.variables=Et;var Bt=i.fetchQueryByPolicy(l,_e,r);return"standby"!==_e.fetchPolicy&&Bt.length>0&&l.observableQuery&&l.observableQuery.applyNextFetchPolicy("after-fetch",t),Bt},Xe=function(){return i.fetchCancelFns.delete(e)};this.fetchCancelFns.set(e,function(Et){Xe(),setTimeout(function(){return rt.cancel(Et)})});var rt=new lg(this.transform(_e.query).hasClientExports?this.localState.addExportedVariables(_e.query,_e.variables,_e.context).then(Le):Le(_e.variables));return rt.promise.then(Xe,Xe),rt},n.prototype.refetchQueries=function(e){var t=this,r=e.updateCache,i=e.include,s=e.optimistic,u=void 0!==s&&s,l=e.removeOptimistic,p=void 0===l?u?wE("refetchQueries"):void 0:l,_=e.onQueryUpdated,w=new Map;i&&this.getObservableQueries(i).forEach(function(S,M){w.set(M,{oq:S,lastDiff:t.getQuery(M).getDiff()})});var I=new Map;return r&&this.cache.batch({update:r,optimistic:u&&p||!1,removeOptimistic:p,onWatchUpdated:function(S,M,P){var U=S.watcher instanceof $E&&S.watcher.observableQuery;if(U){if(_){w.delete(U.queryId);var Y=_(U,M,P);return!0===Y&&(Y=U.refetch()),!1!==Y&&I.set(U,Y),Y}null!==_&&w.set(U.queryId,{oq:U,lastDiff:P,diff:M})}}}),w.size&&w.forEach(function(S,M){var ge,P=S.oq,U=S.lastDiff,Y=S.diff;if(_){if(!Y){var Re=P.queryInfo;Re.reset(),Y=Re.getDiff()}ge=_(P,Y,U)}(!_||!0===ge)&&(ge=P.refetch()),!1!==ge&&I.set(P,ge),M.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(M)}),p&&this.cache.removeOptimistic(p),I},n.prototype.fetchQueryByPolicy=function(e,t,r){var i=this,s=t.query,u=t.variables,l=t.fetchPolicy,p=t.refetchWritePolicy,_=t.errorPolicy,w=t.returnPartialData,I=t.context,S=t.notifyOnNetworkStatusChange,M=e.networkStatus;e.init({document:this.transform(s).document,variables:u,networkStatus:r});var P=function(){return e.getDiff(u)},U=function(Le,Xe){void 0===Xe&&(Xe=e.networkStatus||Hn.loading);var rt=Le.result;__DEV__&&!w&&!Ei(rt,{})&&DE(Le.missing);var Et=function(Bt){return ar.of((0,fe.pi)({data:Bt,loading:Zp(Xe),networkStatus:Xe},Le.complete?null:{partial:!0}))};return rt&&i.transform(s).hasForcedResolvers?i.localState.runResolvers({document:s,remoteResult:{data:rt},context:I,variables:u,onlyRunForcedResolvers:!0}).then(function(Bt){return Et(Bt.data||void 0)}):Et(rt)},Y="no-cache"===l?0:r===Hn.refetch&&"merge"!==p?1:2,ge=function(){return i.getResultsFromLink(e,Y,{variables:u,context:I,fetchPolicy:l,errorPolicy:_})},Re=S&&"number"==typeof M&&M!==r&&Zp(r);switch(l){default:case"cache-first":return(_e=P()).complete?[U(_e,e.markReady())]:w||Re?[U(_e),ge()]:[ge()];case"cache-and-network":var _e;return(_e=P()).complete||w||Re?[U(_e),ge()]:[ge()];case"cache-only":return[U(P(),e.markReady())];case"network-only":return Re?[U(P()),ge()]:[ge()];case"no-cache":return Re?[U(e.getDiff()),ge()]:[ge()];case"standby":return[]}},n.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new $E(this,e)),this.queries.get(e)},n.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return(0,fe.pi)((0,fe.pi)({},t),{clientAwareness:this.clientAwareness})},n}();function HE(n,e){return Ly(n,e,e.variables&&{variables:(0,fe.pi)((0,fe.pi)({},n&&n.variables),e.variables)})}var Xy=!1,GE=function(){function n(e){var t=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var r=e.uri,u=e.cache,l=e.ssrMode,p=void 0!==l&&l,_=e.ssrForceFetchDelay,w=void 0===_?0:_,I=e.connectToDevTools,S=void 0===I?"object"==typeof window&&!window.__APOLLO_CLIENT__&&__DEV__:I,M=e.queryDeduplication,P=void 0===M||M,U=e.defaultOptions,Y=e.assumeImmutableResults,ge=void 0!==Y&&Y,Re=e.resolvers,_e=e.typeDefs,Le=e.fragmentMatcher,Xe=e.name,rt=e.version,Et=e.link;if(Et||(Et=r?new gO({uri:r,credentials:e.credentials,headers:e.headers}):Qh.empty()),!u)throw __DEV__?new Sn("To initialize Apollo Client, you must specify a 'cache' property in the options object. \nFor more information, please visit: https://go.apollo.dev/c/docs"):new Sn(9);if(this.link=Et,this.cache=u,this.disableNetworkFetches=p||w>0,this.queryDeduplication=P,this.defaultOptions=U||Object.create(null),this.typeDefs=_e,w&&setTimeout(function(){return t.disableNetworkFetches=!1},w),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),S&&"object"==typeof window&&(window.__APOLLO_CLIENT__=this),!Xy&&S&&__DEV__&&(Xy=!0,typeof window<"u"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var Bt=window.navigator,Dr=Bt&&Bt.userAgent,Mi=void 0;"string"==typeof Dr&&(Dr.indexOf("Chrome/")>-1?Mi="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":Dr.indexOf("Firefox/")>-1&&(Mi="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),Mi&&__DEV__&&wt.log("Download the Apollo DevTools for a better development experience: "+Mi)}this.version="3.7.3",this.localState=new BE({cache:u,client:this,resolvers:Re,fragmentMatcher:Le}),this.queryManager=new BO({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:P,ssrMode:p,clientAwareness:{name:Xe,version:rt},localState:this.localState,assumeImmutableResults:ge,onBroadcast:S?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0})}return n.prototype.stop=function(){this.queryManager.stop()},n.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=HE(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&("network-only"===e.fetchPolicy||"cache-and-network"===e.fetchPolicy)&&(e=(0,fe.pi)((0,fe.pi)({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},n.prototype.query=function(e){return this.defaultOptions.query&&(e=HE(this.defaultOptions.query,e)),__DEV__?wt("cache-and-network"!==e.fetchPolicy,"The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):wt("cache-and-network"!==e.fetchPolicy,10),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=(0,fe.pi)((0,fe.pi)({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},n.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=HE(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},n.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},n.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.cache.readQuery(e,t)},n.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.cache.readFragment(e,t)},n.prototype.writeQuery=function(e){this.cache.writeQuery(e),this.queryManager.broadcastQueries()},n.prototype.writeFragment=function(e){this.cache.writeFragment(e),this.queryManager.broadcastQueries()},n.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},n.prototype.__requestRaw=function(e){return tE(this.link,e)},n.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(t){return t()}))}).then(function(){return e.reFetchObservableQueries()})},n.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(t){return t()}))})},n.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},n.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),r=[],i=[];t.forEach(function(u,l){r.push(l),i.push(u)});var s=Promise.all(i);return s.queries=r,s.results=i,s.catch(function(u){__DEV__&&wt.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(u))}),s},n.prototype.getObservableQueries=function(e){return void 0===e&&(e="active"),this.queryManager.getObservableQueries(e)},n.prototype.extract=function(e){return this.cache.extract(e)},n.prototype.restore=function(e){return this.cache.restore(e)},n.prototype.addResolvers=function(e){this.localState.addResolvers(e)},n.prototype.setResolvers=function(e){this.localState.setResolvers(e)},n.prototype.getResolvers=function(){return this.localState.getResolvers()},n.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},n.prototype.setLink=function(e){this.link=this.queryManager.link=e},n}();function e_(n,e){if(!Boolean(n))throw new Error(e??"Unexpected invariant triggered.")}const qE=/\r\n|[\n\r]/g;function nT(n,e){let t=0,r=1;for(const i of n.body.matchAll(qE)){if("number"==typeof i.index||e_(!1),i.index>=e)break;t=i.index+i[0].length,r+=1}return{line:r,column:e+1-t}}function rT(n){return iT(n.source,nT(n.source,n.start))}function iT(n,e){const t=n.locationOffset.column-1,r="".padStart(t)+n.body,i=e.line-1,u=e.line+(n.locationOffset.line-1),p=e.column+(1===e.line?t:0),_=`${n.name}:${u}:${p}\n`,w=r.split(/\r\n|[\n\r]/g),I=w[i];if(I.length>120){const S=Math.floor(p/80),M=p%80,P=[];for(let U=0;U<I.length;U+=80)P.push(I.slice(U,U+80));return _+WE([[`${u} |`,P[0]],...P.slice(1,S+1).map(U=>["|",U]),["|","^".padStart(M)],["|",P[S+1]]])}return _+WE([[u-1+" |",w[i-1]],[`${u} |`,I],["|","^".padStart(p)],[`${u+1} |`,w[i+1]]])}function WE(n){const e=n.filter(([r,i])=>void 0!==i),t=Math.max(...e.map(([r])=>r.length));return e.map(([r,i])=>r.padStart(t)+(i?" "+i:"")).join("\n")}class zE extends Error{constructor(e,...t){var r,i,s;const{nodes:u,source:l,positions:p,path:_,originalError:w,extensions:I}=function pf(n){const e=n[0];return null==e||"kind"in e||"length"in e?{nodes:e,source:n[1],positions:n[2],path:n[3],originalError:n[4],extensions:n[5]}:e}(t);super(e),this.name="GraphQLError",this.path=_??void 0,this.originalError=w??void 0,this.nodes=KE(Array.isArray(u)?u:u?[u]:void 0);const S=KE(null===(r=this.nodes)||void 0===r?void 0:r.map(P=>P.loc).filter(P=>null!=P));this.source=l??(null==S||null===(i=S[0])||void 0===i?void 0:i.source),this.positions=p??S?.map(P=>P.start),this.locations=p&&l?p.map(P=>nT(l,P)):S?.map(P=>nT(P.source,P.start));const M=function tT(n){return"object"==typeof n&&null!==n}(w?.extensions)?w?.extensions:void 0;this.extensions=null!==(s=I??M)&&void 0!==s?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=w&&w.stack?Object.defineProperty(this,"stack",{value:w.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,zE):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+="\n\n"+rT(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+="\n\n"+iT(this.source,t);return e}toJSON(){const e={message:this.message};return null!=this.locations&&(e.locations=this.locations),null!=this.path&&(e.path=this.path),null!=this.extensions&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function KE(n){return void 0===n||0===n.length?void 0:n}function xi(n,e,t){return new zE(`Syntax Error: ${t}`,{source:n,positions:[e]})}var ZE=(()=>(function(n){n.QUERY="QUERY",n.MUTATION="MUTATION",n.SUBSCRIPTION="SUBSCRIPTION",n.FIELD="FIELD",n.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",n.FRAGMENT_SPREAD="FRAGMENT_SPREAD",n.INLINE_FRAGMENT="INLINE_FRAGMENT",n.VARIABLE_DEFINITION="VARIABLE_DEFINITION",n.SCHEMA="SCHEMA",n.SCALAR="SCALAR",n.OBJECT="OBJECT",n.FIELD_DEFINITION="FIELD_DEFINITION",n.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",n.INTERFACE="INTERFACE",n.UNION="UNION",n.ENUM="ENUM",n.ENUM_VALUE="ENUM_VALUE",n.INPUT_OBJECT="INPUT_OBJECT",n.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"}(ZE||(ZE={})),ZE))(),Be=(()=>(function(n){n.SOF="<SOF>",n.EOF="<EOF>",n.BANG="!",n.DOLLAR="$",n.AMP="&",n.PAREN_L="(",n.PAREN_R=")",n.SPREAD="...",n.COLON=":",n.EQUALS="=",n.AT="@",n.BRACKET_L="[",n.BRACKET_R="]",n.BRACE_L="{",n.PIPE="|",n.BRACE_R="}",n.NAME="Name",n.INT="Int",n.FLOAT="Float",n.STRING="String",n.BLOCK_STRING="BlockString",n.COMMENT="Comment"}(Be||(Be={})),Be))();class jO{constructor(e){const t=new aD(Be.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==Be.EOF)do{if(e.next)e=e.next;else{const t=HO(this,e.end);e.next=t,t.prev=e,e=t}}while(e.kind===Be.COMMENT);return e}}function Sd(n){return n>=0&&n<=55295||n>=57344&&n<=1114111}function pg(n,e){return oT(n.charCodeAt(e))&&QE(n.charCodeAt(e+1))}function oT(n){return n>=55296&&n<=56319}function QE(n){return n>=56320&&n<=57343}function il(n,e){const t=n.source.body.codePointAt(e);if(void 0===t)return Be.EOF;if(t>=32&&t<=126){const r=String.fromCodePoint(t);return'"'===r?"'\"'":`"${r}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function si(n,e,t,r,i){return new aD(e,t,r,n.line,1+t-n.lineStart,i)}function HO(n,e){const t=n.source.body,r=t.length;let i=e;for(;i<r;){const s=t.charCodeAt(i);switch(s){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++n.line,n.lineStart=i;continue;case 13:10===t.charCodeAt(i+1)?i+=2:++i,++n.line,n.lineStart=i;continue;case 35:return aT(n,i);case 33:return si(n,Be.BANG,i,i+1);case 36:return si(n,Be.DOLLAR,i,i+1);case 38:return si(n,Be.AMP,i,i+1);case 40:return si(n,Be.PAREN_L,i,i+1);case 41:return si(n,Be.PAREN_R,i,i+1);case 46:if(46===t.charCodeAt(i+1)&&46===t.charCodeAt(i+2))return si(n,Be.SPREAD,i,i+3);break;case 58:return si(n,Be.COLON,i,i+1);case 61:return si(n,Be.EQUALS,i,i+1);case 64:return si(n,Be.AT,i,i+1);case 91:return si(n,Be.BRACKET_L,i,i+1);case 93:return si(n,Be.BRACKET_R,i,i+1);case 123:return si(n,Be.BRACE_L,i,i+1);case 124:return si(n,Be.PIPE,i,i+1);case 125:return si(n,Be.BRACE_R,i,i+1);case 34:return 34===t.charCodeAt(i+1)&&34===t.charCodeAt(i+2)?hT(n,i):uT(n,i)}if(tf(s)||45===s)return GO(n,i,s);if(oE(s))return EL(n,i);throw xi(n.source,i,39===s?"Unexpected single quote character ('), did you mean to use a double quote (\")?":Sd(s)||pg(t,i)?`Unexpected character: ${il(n,i)}.`:`Invalid character: ${il(n,i)}.`)}return si(n,Be.EOF,r,r)}function aT(n,e){const t=n.source.body,r=t.length;let i=e+1;for(;i<r;){const s=t.charCodeAt(i);if(10===s||13===s)break;if(Sd(s))++i;else{if(!pg(t,i))break;i+=2}}return si(n,Be.COMMENT,e,i,t.slice(e+1,i))}function GO(n,e,t){const r=n.source.body;let i=e,s=t,u=!1;if(45===s&&(s=r.charCodeAt(++i)),48===s){if(s=r.charCodeAt(++i),tf(s))throw xi(n.source,i,`Invalid number, unexpected digit after 0: ${il(n,i)}.`)}else i=t_(n,i,s),s=r.charCodeAt(i);if(46===s&&(u=!0,s=r.charCodeAt(++i),i=t_(n,i,s),s=r.charCodeAt(i)),(69===s||101===s)&&(u=!0,s=r.charCodeAt(++i),(43===s||45===s)&&(s=r.charCodeAt(++i)),i=t_(n,i,s),s=r.charCodeAt(i)),46===s||oE(s))throw xi(n.source,i,`Invalid number, expected digit but got: ${il(n,i)}.`);return si(n,u?Be.FLOAT:Be.INT,e,i,r.slice(e,i))}function t_(n,e,t){if(!tf(t))throw xi(n.source,e,`Invalid number, expected digit but got: ${il(n,e)}.`);const r=n.source.body;let i=e+1;for(;tf(r.charCodeAt(i));)++i;return i}function uT(n,e){const t=n.source.body,r=t.length;let i=e+1,s=i,u="";for(;i<r;){const l=t.charCodeAt(i);if(34===l)return u+=t.slice(s,i),si(n,Be.STRING,e,i+1,u);if(92!==l){if(10===l||13===l)break;if(Sd(l))++i;else{if(!pg(t,i))throw xi(n.source,i,`Invalid character within String: ${il(n,i)}.`);i+=2}}else{u+=t.slice(s,i);const p=117===t.charCodeAt(i+1)?123===t.charCodeAt(i+2)?cT(n,i):lT(n,i):vL(n,i);u+=p.value,i+=p.size,s=i}}throw xi(n.source,i,"Unterminated string.")}function cT(n,e){const t=n.source.body;let r=0,i=3;for(;i<12;){const s=t.charCodeAt(e+i++);if(125===s){if(i<5||!Sd(r))break;return{value:String.fromCodePoint(r),size:i}}if(r=r<<4|gg(s),r<0)break}throw xi(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+i)}".`)}function lT(n,e){const t=n.source.body,r=dT(t,e+2);if(Sd(r))return{value:String.fromCodePoint(r),size:6};if(oT(r)&&92===t.charCodeAt(e+6)&&117===t.charCodeAt(e+7)){const i=dT(t,e+8);if(QE(i))return{value:String.fromCodePoint(r,i),size:12}}throw xi(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function dT(n,e){return gg(n.charCodeAt(e))<<12|gg(n.charCodeAt(e+1))<<8|gg(n.charCodeAt(e+2))<<4|gg(n.charCodeAt(e+3))}function gg(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:-1}function vL(n,e){const t=n.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:"\n",size:2};case 114:return{value:"\r",size:2};case 116:return{value:"\t",size:2}}throw xi(n.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function hT(n,e){const t=n.source.body,r=t.length;let i=n.lineStart,s=e+3,u=s,l="";const p=[];for(;s<r;){const _=t.charCodeAt(s);if(34===_&&34===t.charCodeAt(s+1)&&34===t.charCodeAt(s+2)){l+=t.slice(u,s),p.push(l);const w=si(n,Be.BLOCK_STRING,e,s+3,og(p).join("\n"));return n.line+=p.length-1,n.lineStart=i,w}if(92!==_||34!==t.charCodeAt(s+1)||34!==t.charCodeAt(s+2)||34!==t.charCodeAt(s+3))if(10!==_&&13!==_)if(Sd(_))++s;else{if(!pg(t,s))throw xi(n.source,s,`Invalid character within String: ${il(n,s)}.`);s+=2}else l+=t.slice(u,s),p.push(l),13===_&&10===t.charCodeAt(s+1)?s+=2:++s,l="",u=s,i=s;else l+=t.slice(u,s),u=s+1,s+=4}throw xi(n.source,s,"Unterminated string.")}function EL(n,e){const t=n.source.body,r=t.length;let i=e+1;for(;i<r&&iO(t.charCodeAt(i));)++i;return si(n,Be.NAME,e,i,t.slice(e,i))}class YE{constructor(e,t={}){const r=function ZC(n){return n instanceof _y}(e)?e:new _y(e);this._lexer=new jO(r),this._options=t,this._tokenCounter=0}parseName(){const e=this.expectToken(Be.NAME);return this.node(e,{kind:Vt.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:Vt.DOCUMENT,definitions:this.many(Be.SOF,this.parseDefinition,Be.EOF)})}parseDefinition(){if(this.peek(Be.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===Be.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw xi(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(Be.BRACE_L))return this.node(e,{kind:Vt.OPERATION_DEFINITION,operation:Jc.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let r;return this.peek(Be.NAME)&&(r=this.parseName()),this.node(e,{kind:Vt.OPERATION_DEFINITION,operation:t,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(Be.NAME);switch(e.value){case"query":return Jc.QUERY;case"mutation":return Jc.MUTATION;case"subscription":return Jc.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(Be.PAREN_L,this.parseVariableDefinition,Be.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Vt.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(Be.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(Be.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(Be.DOLLAR),this.node(e,{kind:Vt.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Vt.SELECTION_SET,selections:this.many(Be.BRACE_L,this.parseSelection,Be.BRACE_R)})}parseSelection(){return this.peek(Be.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let r,i;return this.expectOptionalToken(Be.COLON)?(r=t,i=this.parseName()):i=t,this.node(e,{kind:Vt.FIELD,alias:r,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(Be.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){return this.optionalMany(Be.PAREN_L,e?this.parseConstArgument:this.parseArgument,Be.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,r=this.parseName();return this.expectToken(Be.COLON),this.node(t,{kind:Vt.ARGUMENT,name:r,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(Be.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(Be.NAME)?this.node(e,{kind:Vt.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:Vt.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this.node(e,!0===this._options.allowLegacyFragmentVariables?{kind:Vt.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}:{kind:Vt.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case Be.BRACKET_L:return this.parseList(e);case Be.BRACE_L:return this.parseObject(e);case Be.INT:return this.advanceLexer(),this.node(t,{kind:Vt.INT,value:t.value});case Be.FLOAT:return this.advanceLexer(),this.node(t,{kind:Vt.FLOAT,value:t.value});case Be.STRING:case Be.BLOCK_STRING:return this.parseStringLiteral();case Be.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:Vt.BOOLEAN,value:!0});case"false":return this.node(t,{kind:Vt.BOOLEAN,value:!1});case"null":return this.node(t,{kind:Vt.NULL});default:return this.node(t,{kind:Vt.ENUM,value:t.value})}case Be.DOLLAR:if(e){if(this.expectToken(Be.DOLLAR),this._lexer.token.kind===Be.NAME)throw xi(this._lexer.source,t.start,`Unexpected variable "$${this._lexer.token.value}" in constant value.`);throw this.unexpected(t)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:Vt.STRING,value:e.value,block:e.kind===Be.BLOCK_STRING})}parseList(e){return this.node(this._lexer.token,{kind:Vt.LIST,values:this.any(Be.BRACKET_L,()=>this.parseValueLiteral(e),Be.BRACKET_R)})}parseObject(e){return this.node(this._lexer.token,{kind:Vt.OBJECT,fields:this.any(Be.BRACE_L,()=>this.parseObjectField(e),Be.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,r=this.parseName();return this.expectToken(Be.COLON),this.node(t,{kind:Vt.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(Be.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(Be.AT),this.node(t,{kind:Vt.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(Be.BRACKET_L)){const r=this.parseTypeReference();this.expectToken(Be.BRACKET_R),t=this.node(e,{kind:Vt.LIST_TYPE,type:r})}else t=this.parseNamedType();return this.expectOptionalToken(Be.BANG)?this.node(e,{kind:Vt.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:Vt.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(Be.STRING)||this.peek(Be.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const r=this.parseConstDirectives(),i=this.many(Be.BRACE_L,this.parseOperationTypeDefinition,Be.BRACE_R);return this.node(e,{kind:Vt.SCHEMA_DEFINITION,description:t,directives:r,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(Be.COLON);const r=this.parseNamedType();return this.node(e,{kind:Vt.OPERATION_TYPE_DEFINITION,operation:t,type:r})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const r=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:Vt.SCALAR_TYPE_DEFINITION,description:t,name:r,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const r=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),u=this.parseFieldsDefinition();return this.node(e,{kind:Vt.OBJECT_TYPE_DEFINITION,description:t,name:r,interfaces:i,directives:s,fields:u})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(Be.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(Be.BRACE_L,this.parseFieldDefinition,Be.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),i=this.parseArgumentDefs();this.expectToken(Be.COLON);const s=this.parseTypeReference(),u=this.parseConstDirectives();return this.node(e,{kind:Vt.FIELD_DEFINITION,description:t,name:r,arguments:i,type:s,directives:u})}parseArgumentDefs(){return this.optionalMany(Be.PAREN_L,this.parseInputValueDef,Be.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName();this.expectToken(Be.COLON);const i=this.parseTypeReference();let s;this.expectOptionalToken(Be.EQUALS)&&(s=this.parseConstValueLiteral());const u=this.parseConstDirectives();return this.node(e,{kind:Vt.INPUT_VALUE_DEFINITION,description:t,name:r,type:i,defaultValue:s,directives:u})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const r=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),u=this.parseFieldsDefinition();return this.node(e,{kind:Vt.INTERFACE_TYPE_DEFINITION,description:t,name:r,interfaces:i,directives:s,fields:u})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const r=this.parseName(),i=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(e,{kind:Vt.UNION_TYPE_DEFINITION,description:t,name:r,directives:i,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(Be.EQUALS)?this.delimitedMany(Be.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const r=this.parseName(),i=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(e,{kind:Vt.ENUM_TYPE_DEFINITION,description:t,name:r,directives:i,values:s})}parseEnumValuesDefinition(){return this.optionalMany(Be.BRACE_L,this.parseEnumValueDefinition,Be.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:Vt.ENUM_VALUE_DEFINITION,description:t,name:r,directives:i})}parseEnumValueName(){if("true"===this._lexer.token.value||"false"===this._lexer.token.value||"null"===this._lexer.token.value)throw xi(this._lexer.source,this._lexer.token.start,`${JE(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const r=this.parseName(),i=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(e,{kind:Vt.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:r,directives:i,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(Be.BRACE_L,this.parseInputValueDef,Be.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===Be.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),r=this.optionalMany(Be.BRACE_L,this.parseOperationTypeDefinition,Be.BRACE_R);if(0===t.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:Vt.SCHEMA_EXTENSION,directives:t,operationTypes:r})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),r=this.parseConstDirectives();if(0===r.length)throw this.unexpected();return this.node(e,{kind:Vt.SCALAR_TYPE_EXTENSION,name:t,directives:r})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(0===r.length&&0===i.length&&0===s.length)throw this.unexpected();return this.node(e,{kind:Vt.OBJECT_TYPE_EXTENSION,name:t,interfaces:r,directives:i,fields:s})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(0===r.length&&0===i.length&&0===s.length)throw this.unexpected();return this.node(e,{kind:Vt.INTERFACE_TYPE_EXTENSION,name:t,interfaces:r,directives:i,fields:s})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),r=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(0===r.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:Vt.UNION_TYPE_EXTENSION,name:t,directives:r,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),r=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(0===r.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:Vt.ENUM_TYPE_EXTENSION,name:t,directives:r,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),r=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(0===r.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:Vt.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:r,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(Be.AT);const r=this.parseName(),i=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const u=this.parseDirectiveLocations();return this.node(e,{kind:Vt.DIRECTIVE_DEFINITION,description:t,name:r,arguments:i,repeatable:s,locations:u})}parseDirectiveLocations(){return this.delimitedMany(Be.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(ZE,t.value))return t;throw this.unexpected(e)}node(e,t){return!0!==this._options.noLocation&&(t.loc=new jR(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw xi(this._lexer.source,t.start,`Expected ${qO(e)}, found ${JE(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e&&(this.advanceLexer(),!0)}expectKeyword(e){const t=this._lexer.token;if(t.kind!==Be.NAME||t.value!==e)throw xi(this._lexer.source,t.start,`Expected "${e}", found ${JE(t)}.`);this.advanceLexer()}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===Be.NAME&&t.value===e&&(this.advanceLexer(),!0)}unexpected(e){const t=e??this._lexer.token;return xi(this._lexer.source,t.start,`Unexpected ${JE(t)}.`)}any(e,t,r){this.expectToken(e);const i=[];for(;!this.expectOptionalToken(r);)i.push(t.call(this));return i}optionalMany(e,t,r){if(this.expectOptionalToken(e)){const i=[];do{i.push(t.call(this))}while(!this.expectOptionalToken(r));return i}return[]}many(e,t,r){this.expectToken(e);const i=[];do{i.push(t.call(this))}while(!this.expectOptionalToken(r));return i}delimitedMany(e,t){this.expectOptionalToken(e);const r=[];do{r.push(t.call(this))}while(this.expectOptionalToken(e));return r}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(void 0!==e&&t.kind!==Be.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw xi(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function JE(n){const e=n.value;return qO(n.kind)+(null!=e?` "${e}"`:"")}function qO(n){return function $O(n){return n===Be.BANG||n===Be.DOLLAR||n===Be.AMP||n===Be.PAREN_L||n===Be.PAREN_R||n===Be.SPREAD||n===Be.COLON||n===Be.EQUALS||n===Be.AT||n===Be.BRACKET_L||n===Be.BRACKET_R||n===Be.BRACE_L||n===Be.PIPE||n===Be.BRACE_R}(n)?`"${n}"`:n}var Ad=new Map,fT=new Map,XE=!0,xd=!1;function ew(n){return n.replace(/[\s,]+/g," ").trim()}function gT(n){var e=ew(n);if(!Ad.has(e)){var t=function wL(n,e){return new YE(n,e).parseDocument()}(n,{experimentalFragmentVariables:xd,allowLegacyFragmentVariables:xd});if(!t||"Document"!==t.kind)throw new Error("Not a valid GraphQL document.");Ad.set(e,function tw(n){var e=new Set(n.definitions);e.forEach(function(r){r.loc&&delete r.loc,Object.keys(r).forEach(function(i){var s=r[i];s&&"object"==typeof s&&e.add(s)})});var t=n.loc;return t&&(delete t.startToken,delete t.endToken),n}(function bL(n){var e=new Set,t=[];return n.definitions.forEach(function(r){if("FragmentDefinition"===r.kind){var i=r.name.value,s=function pT(n){return ew(n.source.body.substring(n.start,n.end))}(r.loc),u=fT.get(i);u&&!u.has(s)?XE&&console.warn("Warning: fragment with name "+i+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):u||fT.set(i,u=new Set),u.add(s),e.has(s)||(e.add(s),t.push(r))}else t.push(r)}),(0,fe.pi)((0,fe.pi)({},n),{definitions:t})}(t)))}return Ad.get(e)}function gf(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];"string"==typeof n&&(n=[n]);var r=n[0];return e.forEach(function(i,s){r+=i&&"Document"===i.kind?i.loc.source.body:i,r+=n[s+1]}),gT(r)}var mg_gql=gf,mg_resetCaches=function mT(){Ad.clear(),fT.clear()},mg_disableFragmentWarnings=function IL(){XE=!1},mg_enableExperimentalFragmentVariables=function CL(){xd=!0},mg_disableExperimentalFragmentVariables=function WO(){xd=!1};(function(n){n.gql=mg_gql,n.resetCaches=mg_resetCaches,n.disableFragmentWarnings=mg_disableFragmentWarnings,n.enableExperimentalFragmentVariables=mg_enableExperimentalFragmentVariables,n.disableExperimentalFragmentVariables=mg_disableExperimentalFragmentVariables})(gf||(gf={})),gf.default=gf;var zO=R(233),DL=R(8822),n_=R(5363);function KO(n){return new pn.y(e=>(n().then(t=>{e.closed||(e.next(t),e.complete())},t=>{e.closed||e.error(t)}),()=>e.unsubscribe()))}class QO{constructor(e){this.zone=e,this.now=Date.now?Date.now:()=>+new Date}schedule(e,t=0,r){return this.zone.run(()=>zO.N.schedule(e,t,r))}}function yT(n){return n[DL.L]=()=>n,n}function YO(n,e){return n.pipe((0,n_.Q)(new QO(e)))}function _T(n,e,t){return n&&typeof n[e]<"u"?n[e]:t}class ET{constructor(e,t,r){this.obsQuery=e;const i=YO((0,rn.D)(yT(this.obsQuery)),t);this.valueChanges=r.useInitialLoading?i.pipe(function vT(n){return function(t){return new pn.y(function(i){const s=n.getCurrentResult(),{loading:u,errors:l,error:p,partial:_,data:w}=s,{partialRefetch:I,fetchPolicy:S}=n.options,M=l||p;return I&&_&&(!w||0===Object.keys(w).length)&&"cache-only"!==S&&!u&&!M&&i.next({...s,loading:!0,networkStatus:Hn.loading}),t.subscribe(i)})}}(this.obsQuery)):i,this.queryId=this.obsQuery.queryId}get options(){return this.obsQuery.options}get variables(){return this.obsQuery.variables}result(){return this.obsQuery.result()}getCurrentResult(){return this.obsQuery.getCurrentResult()}getLastResult(){return this.obsQuery.getLastResult()}getLastError(){return this.obsQuery.getLastError()}resetLastResults(){return this.obsQuery.resetLastResults()}refetch(e){return this.obsQuery.refetch(e)}fetchMore(e){return this.obsQuery.fetchMore(e)}subscribeToMore(e){return this.obsQuery.subscribeToMore(e)}updateQuery(e){return this.obsQuery.updateQuery(e)}stopPolling(){return this.obsQuery.stopPolling()}startPolling(e){return this.obsQuery.startPolling(e)}setOptions(e){return this.obsQuery.setOptions(e)}setVariables(e){return this.obsQuery.setVariables(e)}}const TL=new h.OlP("APOLLO_FLAGS"),Oo=new h.OlP("APOLLO_OPTIONS"),JO=new h.OlP("APOLLO_NAMED_OPTIONS");class r_{constructor(e,t,r){this.ngZone=e,this.flags=t,this._client=r,this.useInitialLoading=_T(t,"useInitialLoading",!1),this.useMutationLoading=_T(t,"useMutationLoading",!1)}watchQuery(e){return new ET(this.ensureClient().watchQuery({...e}),this.ngZone,{useInitialLoading:this.useInitialLoading,...e})}query(e){return KO(()=>this.ensureClient().query({...e}))}mutate(e){return function ZO(n,e){return e?n.pipe($n({loading:!0}),(0,st.U)(t=>({...t,loading:!!t.loading}))):n.pipe((0,st.U)(t=>({...t,loading:!1})))}(KO(()=>this.ensureClient().mutate({...e})),e.useMutationLoading??this.useMutationLoading)}subscribe(e,t){const r=(0,rn.D)(yT(this.ensureClient().subscribe({...e})));return t&&!0!==t.useZone?r:YO(r,this.ngZone)}getClient(){return this.client}setClient(e){this.client=e}get client(){return this._client}set client(e){if(this._client)throw new Error("Client has been already defined");this._client=e}ensureClient(){return this.checkInstance(),this._client}checkInstance(){if(!this._client)throw new Error("Client has not been defined yet")}}let wT=(()=>{class n extends r_{constructor(t,r,i,s){if(super(t,s),this._ngZone=t,this.map=new Map,r&&this.createDefault(r),i&&"object"==typeof i)for(let u in i)i.hasOwnProperty(u)&&this.create(i[u],u)}create(t,r){Us(r)?this.createDefault(t):this.createNamed(r,t)}default(){return this}use(t){return Us(t)?this.default():this.map.get(t)}createDefault(t){if(this.getClient())throw new Error("Apollo has been already created.");return this.setClient(new GE(t))}createNamed(t,r){if(this.map.has(t))throw new Error(`Client ${t} has been already created`);this.map.set(t,new r_(this._ngZone,this.flags,new GE(r)))}removeClient(t){Us(t)?this._client=void 0:this.map.delete(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(Oo,8),h.LFG(JO,8),h.LFG(TL,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Us(n){return!n||"default"===n}const XO=[wT];let rw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:XO}),n})();const CT=function IT(n,...e){return gf(n,...e)};let iw=(()=>{class n{constructor(t){this.apollo=t,this.refetchSubj=new Wt.x,this.productQuery=this.apollo.watchQuery({query:CT`
        query ($productType: String, $offset: Int) {
          getProducts(type: $productType, offset: $offset) {
            count
            products {
              id
              title
              description
              type
              src
              cost
              salePrice
            }
          }
        }
      `})}getProductsWithRefetch(t,r){return(0,rn.D)(this.productQuery?.refetch({productType:t,offset:r})).pipe((0,st.U)(i=>({count:i?.data.getProducts.count,products:i?.data.getProducts.products})))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wT))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sw=(0,tt.PH)("[ Categories] ChangeProductType",(0,tt.Ky)());function eM(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"li",4),h.NdJ("click",function(){const s=h.CHM(t).$implicit,u=h.oxw();return h.KtG(u.changeProductType(s.type))}),h.ALo(2,"async"),h._uU(3),h.qZA(),h.BQk()}if(2&n){const t=e.$implicit,r=h.oxw();h.xp6(1),h.Q6J("ngClass",h.lcZ(2,2,r.productTypeSubscription$)===t.type?"text-white rounded-[15px] p-[12px] pb-[15px] pl-[13px] bg-orange":""),h.xp6(2),h.hij(" ",t.title," ")}}let DT=(()=>{class n{constructor(t){this.store=t,this.title=Rs.Categories,this.categoriesList=Pc}ngOnInit(){this.productTypeSubscription$=this.store.pipe((0,tt.Ys)(py)),this.store.dispatch(_d({offset:0}))}changeProductType(t){this.store.dispatch(Hh()),this.store.dispatch(sw({productType:t})),this.store.dispatch(_d({offset:0}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(tt.yh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-categories"]],decls:5,vars:2,consts:[[1,"pt-[28px]","pr-[100px]","pb-[43px]","pl-[33px]","bg-black","rounded-[25px]","bg-grey-200","flex","flex-col","items-start"],[1,"text-m","font-xl"],[1,"flex","flex-col"],[4,"ngFor","ngForOf"],[1,"mt-[26px]","cursor-pointer","text-s","hover:text-orange","min-w-[206px]",3,"ngClass","click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"h3",1),h._uU(2),h.qZA(),h.TgZ(3,"ul",2),h.YNc(4,eM,4,4,"ng-container",3),h.qZA()()),2&t&&(h.xp6(2),h.Oqu(r.title),h.xp6(2),h.Q6J("ngForOf",r.categoriesList))},dependencies:[Zi,gn,fn],encapsulation:2}),n})();const tM=["*"];let i_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-page-title"]],ngContentSelectors:tM,decls:2,vars:0,consts:[[1,"text-xl","font-xl"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"h2",0),h.Hsn(1),h.qZA())},encapsulation:2}),n})();const Qu=(0,tt.PH)("[SignUp] signUp",(0,tt.Ky)()),fa=(0,tt.PH)("[Effect] NoopAction"),s_=(0,tt.PH)("[Login] loginAction",(0,tt.Ky)()),tu=(0,tt.PH)("[Effect] verifyToken",(0,tt.Ky)()),TT=(0,tt.PH)("[effect] signup with backend",(0,tt.Ky)()),ST=(0,tt.PH)("[Effect] launch loading"),AT=((0,tt.PH)("[Effect]stop loading action"),(0,tt.PH)("[Effect] add user info",(0,tt.Ky)())),xT=(0,tt.PH)("[Catalog] addToBasket",(0,tt.Ky)()),RT=(0,tt.PH)("[Effect] add products id into the basket",(0,tt.Ky)());let OT=(()=>{class n{transform(t){return t&&t.toFixed(2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=h.Yjl({name:"toFixed",type:n,pure:!0}),n})();function OL(n,e){if(1&n&&(h.ynx(0,19),h.TgZ(1,"div",19)(2,"span",20),h._uU(3),h.ALo(4,"toFixed"),h.qZA(),h.TgZ(5,"span",21),h._uU(6),h.ALo(7,"toFixed"),h.qZA()(),h.BQk()),2&n){const t=h.oxw();h.xp6(3),h.hij("\u041e\u0442 ",h.lcZ(4,2,null==t.product?null:t.product.salePrice)," P"),h.xp6(3),h.hij("\u041e\u0442 ",h.lcZ(7,4,null==t.product?null:t.product.cost)," P")}}function MT(n,e){if(1&n&&(h.ynx(0),h.TgZ(1,"span",22),h._uU(2),h.ALo(3,"toFixed"),h.qZA(),h.BQk()),2&n){const t=h.oxw();h.xp6(2),h.hij("\u041e\u0442 ",h.lcZ(3,1,null==t.product?null:t.product.cost)," P")}}let nM=(()=>{class n{constructor(t,r){this.router=t,this.store$=r}goToProductPageHandler(t){this.router.navigate(["/catalog",t])}addToBasketHandler(t){t&&this.store$.dispatch(xT({id:t}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Rr),h.Y36(tt.yh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-product-item"]],inputs:{product:"product"},decls:22,vars:5,consts:[[1,"rounded-[26px]","p-[15px]","pb-[29px]","bg-grey-200","flex","flex-col","items-start"],[1,"cursor-pointer",3,"click"],["alt","","width","280",1,"rounded-[25px]","min-h-[288px]",3,"src"],[1,"text-m","font-xl","mt-[22px]"],[1,"w-[291px]","min-h-[48px]"],["class","flex",4,"ngIf"],[4,"ngIf"],[1,"flex","mt-[30px]"],[1,"py-[18px]","px-[14px]"],["width","28","height","20","viewBox","0 0 28 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M17.7748 12.5461H27.1455V15.2197H17.7748V19.23L12.4411 13.8829L17.7748 8.53583V12.5461Z","fill","#AAAAAA"],["d","M9.78056 4.5255V0.515198L15.1143 5.86227L9.78056 11.2093V7.19903H0.409816V4.5255H9.78056Z","fill","#AAAAAA"],[1,"ml-[]","p-[17px]"],["width","20","height","21","viewBox","0 0 20 21","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19.4518 18.9852L14.3897 14.0041C15.7153 12.5639 16.5298 10.6592 16.5298 8.56333C16.5292 4.07979 12.8361 0.445679 8.28021 0.445679C3.72428 0.445679 0.03125 4.07979 0.03125 8.56333C0.03125 13.0469 3.72428 16.681 8.28021 16.681C10.2487 16.681 12.0541 16.0001 13.4723 14.8682L18.554 19.869C18.8017 20.1129 19.2036 20.1129 19.4513 19.869C19.6994 19.6251 19.6994 19.2292 19.4518 18.9852ZM8.28021 15.432C4.4254 15.432 1.30047 12.3568 1.30047 8.56333C1.30047 4.76984 4.4254 1.69463 8.28021 1.69463C12.1351 1.69463 15.26 4.76984 15.26 8.56333C15.26 12.3568 12.1351 15.432 8.28021 15.432Z","fill","#AAAAAA"],[1,"px-[14px]","pt-[16px]","pb-[15px]"],["width","28","height","25","viewBox","0 0 28 25","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M25.0298 2.90936C23.6458 1.39088 21.7468 0.554565 19.6821 0.554565C18.1389 0.554565 16.7255 1.04814 15.4812 2.02146C14.8534 2.51277 14.2845 3.11385 13.7829 3.81542C13.2815 3.11406 12.7124 2.51277 12.0844 2.02146C10.8403 1.04814 9.42697 0.554565 7.88368 0.554565C5.81902 0.554565 3.91978 1.39088 2.53579 2.90936C1.16833 4.4101 0.415039 6.46033 0.415039 8.68266C0.415039 10.97 1.25767 13.0638 3.06675 15.272C4.68511 17.2474 7.01106 19.2526 9.70459 21.5746C10.6243 22.3676 11.6669 23.2664 12.7494 24.2239C13.0353 24.4773 13.4023 24.6167 13.7829 24.6167C14.1633 24.6167 14.5305 24.4773 14.8161 24.2243C15.8986 23.2666 16.9417 22.3674 17.8619 21.574C20.555 19.2524 22.8809 17.2474 24.4993 15.2718C26.3084 13.0638 27.1508 10.97 27.1508 8.68245C27.1508 6.46033 26.3975 4.4101 25.0298 2.90936Z","fill","none","stroke","#AAAAAA"],[1,"py-[15px]","px-[18px]","bg-orange","rounded-[13px]","text-m","whitespace-nowrap",3,"click"],[1,"flex"],[1,"text-orange-800","font-xl"],[1,"text-grey","line-through","decoration-grey","font-xl","ml-[21px]"],[1,"text-grey","decoration-grey","font-xl"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"section",1),h.NdJ("click",function(){return r.goToProductPageHandler(null==r.product?null:r.product.id)}),h._UZ(2,"img",2),h.TgZ(3,"h3",3),h._uU(4),h.qZA(),h.TgZ(5,"p",4),h._uU(6),h.qZA(),h.YNc(7,OL,8,6,"ng-container",5),h.YNc(8,MT,4,3,"ng-container",6),h.qZA(),h.TgZ(9,"div",7)(10,"button",8),h.O4$(),h.TgZ(11,"svg",9),h._UZ(12,"path",10)(13,"path",11),h.qZA()(),h.kcU(),h.TgZ(14,"button",12),h.O4$(),h.TgZ(15,"svg",13),h._UZ(16,"path",14),h.qZA()(),h.kcU(),h.TgZ(17,"button",15),h.O4$(),h.TgZ(18,"svg",16),h._UZ(19,"path",17),h.qZA()(),h.kcU(),h.TgZ(20,"button",18),h.NdJ("click",function(){return r.addToBasketHandler(null==r.product?null:r.product.id)}),h._uU(21," \u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 "),h.qZA()()()),2&t&&(h.xp6(2),h.Q6J("src",null==r.product?null:r.product.src,h.LSH),h.xp6(2),h.Oqu(null==r.product?null:r.product.title),h.xp6(2),h.Oqu(null==r.product?null:r.product.description),h.xp6(1),h.Q6J("ngIf",null==r.product?null:r.product.salePrice),h.xp6(1),h.Q6J("ngIf",!(null!=r.product&&r.product.salePrice)))},dependencies:[Qn,OT],encapsulation:2}),n})(),o_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-spiner"]],decls:4,vars:0,consts:[[1,"flex","justify-center","items-center"],["role","status",1,"spinner-border","animate-spin","inline-block","w-8","h-8","border-4","rounded-full","p-[15px]","border-orange"],[1,"text-white","bg-white"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"span",2),h._uU(3,"Loading..."),h.qZA()()())},encapsulation:2}),n})();function ML(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"button",7),h.NdJ("click",function(){const s=h.CHM(t).$implicit,u=h.oxw(3);return h.KtG(u.onChangePage(s))}),h.ALo(2,"async"),h._uU(3),h.qZA()()}if(2&n){const t=e.$implicit,r=h.oxw(3);h.xp6(1),h.Q6J("ngClass",t===h.lcZ(2,2,r.currentPage$)?"text-black":""),h.xp6(2),h.hij(" ",t+1," ")}}function ow(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"button",2),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(2);return h.KtG(i.prevPageHandler())}),h._UZ(2,"img",3),h.qZA(),h.YNc(3,ML,4,4,"div",4),h.TgZ(4,"button",5),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().ngIf,s=h.oxw();return h.KtG(s.nextPageHandler(i.length))}),h._UZ(5,"img",6),h.qZA(),h.BQk()}if(2&n){const t=h.oxw().ngIf;h.xp6(3),h.Q6J("ngForOf",t)}}function PT(n,e){if(1&n&&(h.ynx(0),h.YNc(1,ow,6,1,"ng-container",1),h.BQk()),2&n){const t=e.ngIf;h.xp6(1),h.Q6J("ngIf",t.length>1)}}let NT=(()=>{class n{constructor(t){this.store$=t,this.pageChanges=new h.vpe,this.showPrevPage=new h.vpe,this.showNextPage=new h.vpe}ngOnInit(){this.pages$=this.store$.pipe((0,tt.Ys)(kC),(0,st.U)(t=>{const r=[];for(let i=0;i<t.length;i++)r.push(i);return r})),this.currentPage$=this.store$.pipe((0,tt.Ys)(NC))}onChangePage(t){this.pageChanges.emit(t)}prevPageHandler(){this.showPrevPage.emit()}nextPageHandler(t){console.log(t),this.showNextPage.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(tt.yh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-pagination-nav"]],outputs:{pageChanges:"pageChanges",showPrevPage:"showPrevPage",showNextPage:"showNextPage"},decls:3,vars:3,consts:[[1,"flex","ml-[26px]","items-center"],[4,"ngIf"],[1,"pt-[11px]","pb-[10px]","pr-[20px]","pl-[15px]","bg-orange","rounded-[15px]",3,"click"],["src","./assets/arrowLeft.svg","alt",""],[4,"ngFor","ngForOf"],[1,"ml-[20px]","pt-[11px]","pb-[10px]","pr-[20px]","pl-[15px]","bg-orange","rounded-[15px]",3,"click"],["src","./assets/arrowLeft.svg","alt","logo",1,"rotate-180"],[1,"ml-[20px]","text-grey","hover:text-black","text-l",3,"ngClass","click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,PT,2,1,"ng-container",1),h.ALo(2,"async"),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",h.lcZ(2,1,r.pages$)))},dependencies:[Zi,Qn,gn,fn],encapsulation:2}),n})();function kT(n,e){1&n&&(h.TgZ(0,"div",4),h._UZ(1,"app-spiner"),h.qZA())}function FT(n,e){if(1&n&&(h.ynx(0),h.TgZ(1,"li",9),h._UZ(2,"app-product-item",10),h.qZA(),h.BQk()),2&n){const t=e.$implicit;h.xp6(2),h.Q6J("product",t)}}function LT(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",5)(1,"app-pagination-nav",6),h.NdJ("pageChanges",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.getProductsFromCurrentPage(i))})("showPrevPage",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.prevPage())})("showNextPage",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.nextPage(i))}),h.qZA(),h.TgZ(2,"ul",7),h.YNc(3,FT,3,1,"ng-container",8),h.ALo(4,"async"),h.qZA()()}if(2&n){const t=h.oxw();h.xp6(3),h.Q6J("ngForOf",h.lcZ(4,1,t.productList$))}}let a_=(()=>{class n{constructor(t,r){this.productsService=t,this.store=r,this.type=es.DriedFruits,this.currentPage=0,this.title=Rs.Catalog}ngOnInit(){this.productList$=this.store.select($h),this.loading$=this.store.select(FC),this.productType=this.store.select(py).subscribe(()=>{this.currentPage=0})}getProductsFromCurrentPage(t){this.store.dispatch(Hh()),this.currentPage=t,this.store.dispatch(_d({offset:t}))}prevPage(){this.currentPage>0&&(this.store.dispatch(Hh()),this.currentPage-=1,this.store.dispatch(_d({offset:this.currentPage})))}nextPage(t){this.currentPage<t-1&&(this.store.dispatch(Hh()),this.currentPage+=1,this.store.dispatch(_d({offset:this.currentPage})))}ngOnDestroy(){this.productType?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(iw),h.Y36(tt.yh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-catalog"]],decls:9,vars:7,consts:[[1,"flex","flex-col","items-center"],[1,"flex","items-start","w-[100%]","mt-[37px]"],["class","min-w-[1080px] ml-[26px] flex justify-center",4,"ngIf"],["class","min-w-[1080px]",4,"ngIf"],[1,"min-w-[1080px]","ml-[26px]","flex","justify-center"],[1,"min-w-[1080px]"],[3,"pageChanges","showPrevPage","showNextPage"],[1,"grid","grid-cols-3","gap-x-[26px]","gap-y-[55px]","mt-[85px]"],[4,"ngFor","ngForOf"],[1,"ml-[15px]"],[3,"product"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"app-page-title"),h._uU(2),h.qZA(),h.TgZ(3,"section",1),h._UZ(4,"app-categories"),h.YNc(5,kT,2,0,"div",2),h.ALo(6,"async"),h.YNc(7,LT,5,3,"div",3),h.ALo(8,"async"),h.qZA()()),2&t&&(h.xp6(2),h.Oqu(r.title),h.xp6(3),h.Q6J("ngIf",h.lcZ(6,3,r.loading$)),h.xp6(2),h.Q6J("ngIf",!1===h.lcZ(8,5,r.loading$)))},dependencies:[Zi,Qn,DT,i_,nM,o_,NT,fn],encapsulation:2}),n})(),u_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-contacts"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"div"),h._uU(1,"contacts page"),h.qZA())},encapsulation:2}),n})(),VT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-shop-list"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"div"),h._uU(1,"Shop list page"),h.qZA())},encapsulation:2}),n})(),rM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-delivery"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"div"),h._uU(1,"Delivery page"),h.qZA())},encapsulation:2}),n})(),UT=(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-product"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"h3"),h._uU(1,"a"),h.qZA())},encapsulation:2}),n})(),BT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-not-found"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"h2"),h._uU(1,"Page is not found"),h.qZA())},encapsulation:2}),n})();class jT{}class $T{}class pa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof pa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new pa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof pa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(l=>-1===s.indexOf(l)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class HT{encodeKey(e){return aM(e)}encodeValue(e){return aM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const sM=/%(\d[a-f0-9])/gi,oM={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function aM(n){return encodeURIComponent(n).replace(sM,(e,t)=>oM[t]??e)}function aw(n){return`${n}`}class Rd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new HT,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function iM(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[u,l]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(u)||[];p.push(l),t.set(u,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(aw):[aw(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Rd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(aw(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(aw(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class PL{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function yg(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function GT(n){return typeof Blob<"u"&&n instanceof Blob}function qT(n){return typeof FormData<"u"&&n instanceof FormData}class ga{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function uM(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new pa),this.context||(this.context=new PL),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const l=t.indexOf("?");this.urlWithParams=t+(-1===l?"?":l<t.length-1?"&":"")+u}}else this.params=new Rd,this.urlWithParams=t}serializeBody(){return null===this.body?null:yg(this.body)||GT(this.body)||qT(this.body)||function WT(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Rd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||qT(this.body)?null:GT(this.body)?this.body.type||null:yg(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Rd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,_=e.params||this.params;const w=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((I,S)=>I.set(S,e.setHeaders[S]),p)),e.setParams&&(_=Object.keys(e.setParams).reduce((I,S)=>I.set(S,e.setParams[S]),_)),new ga(t,r,s,{params:_,headers:p,context:w,reportProgress:l,responseType:i,withCredentials:u})}}var Qr=(()=>((Qr=Qr||{})[Qr.Sent=0]="Sent",Qr[Qr.UploadProgress=1]="UploadProgress",Qr[Qr.ResponseHeader=2]="ResponseHeader",Qr[Qr.DownloadProgress=3]="DownloadProgress",Qr[Qr.Response=4]="Response",Qr[Qr.User=5]="User",Qr))();class _g{constructor(e,t=200,r="OK"){this.headers=e.headers||new pa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class vg extends _g{constructor(e={}){super(e),this.type=Qr.ResponseHeader}clone(e={}){return new vg({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class c_ extends _g{constructor(e={}){super(e),this.type=Qr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new c_({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class l_ extends _g{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Eg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let mf=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ga)s=t;else{let p,_;p=i.headers instanceof pa?i.headers:new pa(i.headers),i.params&&(_=i.params instanceof Rd?i.params:new Rd({fromObject:i.params})),s=new ga(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=(0,gt.of)(s).pipe((0,ia.b)(p=>this.handler.handle(p)));if(t instanceof ga||"events"===i.observe)return u;const l=u.pipe((0,Ln.h)(p=>p instanceof c_));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe((0,st.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return l.pipe((0,st.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return l.pipe((0,st.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return l.pipe((0,st.U)(p=>p.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Rd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Eg(i,r))}post(t,r,i={}){return this.request("POST",t,Eg(i,r))}put(t,r,i={}){return this.request("PUT",t,Eg(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(jT))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class cM{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const lM=new h.OlP("HTTP_INTERCEPTORS");let NL=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const gM=/^\)\]\}',?\n/;let uw=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new pn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((M,P)=>i.setRequestHeader(M,P.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const M=t.detectContentTypeHeader();null!==M&&i.setRequestHeader("Content-Type",M)}if(t.responseType){const M=t.responseType.toLowerCase();i.responseType="json"!==M?M:"text"}const s=t.serializeBody();let u=null;const l=()=>{if(null!==u)return u;const M=i.statusText||"OK",P=new pa(i.getAllResponseHeaders()),U=function mM(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new vg({headers:P,status:i.status,statusText:M,url:U}),u},p=()=>{let{headers:M,status:P,statusText:U,url:Y}=l(),ge=null;204!==P&&(ge=typeof i.response>"u"?i.responseText:i.response),0===P&&(P=ge?200:0);let Re=P>=200&&P<300;if("json"===t.responseType&&"string"==typeof ge){const _e=ge;ge=ge.replace(gM,"");try{ge=""!==ge?JSON.parse(ge):null}catch(Le){ge=_e,Re&&(Re=!1,ge={error:Le,text:ge})}}Re?(r.next(new c_({body:ge,headers:M,status:P,statusText:U,url:Y||void 0})),r.complete()):r.error(new l_({error:ge,headers:M,status:P,statusText:U,url:Y||void 0}))},_=M=>{const{url:P}=l(),U=new l_({error:M,status:i.status||0,statusText:i.statusText||"Unknown Error",url:P||void 0});r.error(U)};let w=!1;const I=M=>{w||(r.next(l()),w=!0);let P={type:Qr.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(P.total=M.total),"text"===t.responseType&&!!i.responseText&&(P.partialText=i.responseText),r.next(P)},S=M=>{let P={type:Qr.UploadProgress,loaded:M.loaded};M.lengthComputable&&(P.total=M.total),r.next(P)};return i.addEventListener("load",p),i.addEventListener("error",_),i.addEventListener("timeout",_),i.addEventListener("abort",_),t.reportProgress&&(i.addEventListener("progress",I),null!==s&&i.upload&&i.upload.addEventListener("progress",S)),i.send(s),r.next({type:Qr.Sent}),()=>{i.removeEventListener("error",_),i.removeEventListener("abort",_),i.removeEventListener("load",p),i.removeEventListener("timeout",_),t.reportProgress&&(i.removeEventListener("progress",I),null!==s&&i.upload&&i.upload.removeEventListener("progress",S)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Go))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const wg=new h.OlP("XSRF_COOKIE_NAME"),zT=new h.OlP("XSRF_HEADER_NAME");class cw{}let lw=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Uo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(X),h.LFG(h.Lbi),h.LFG(wg))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),dw=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(cw),h.LFG(zT))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),yM=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(lM,[]);this.chain=r.reduceRight((i,s)=>new cM(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG($T),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),_M=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:dw,useClass:NL}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:wg,useValue:t.cookieName}:[],t.headerName?{provide:zT,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[dw,{provide:lM,useExisting:dw,multi:!0},{provide:cw,useClass:lw},{provide:wg,useValue:"XSRF-TOKEN"},{provide:zT,useValue:"X-XSRF-TOKEN"}]}),n})(),KT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[mf,{provide:jT,useClass:yM},uw,{provide:$T,useExisting:uw}],imports:[_M.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const bg_firebase={apiKey:"AIzaSyCOZ-8vBtjxMgh3zLHV1O3xpauzRRDQ-FE",authDomain:"cosinuts-e9d48.firebaseapp.com",databaseURL:"https://cosinuts-e9d48-default-rtdb.firebaseio.com",projectId:"cosinuts-e9d48",storageBucket:"cosinuts-e9d48.appspot.com",messagingSenderId:"208308027771",appId:"1:208308027771:web:68e7e790245fd6e3f57dde",measurementId:"G-XTVZN1FLJ1"},bg_URL_API_url="https://cosinuts.herokuapp.com/";var vM=R(4986),kn=R(263);function ZT(){return(0,ot.e)((n,e)=>{let t,r=!1;n.subscribe((0,ni.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var f,QT=R(1884),Ri=R(2011),YT=(R(9169),R(3942)),Ne=R(5861),Bs=R(9681),nu=R(4859),a=R(1877),o=R(2090),c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d={},m=m||{},v=c||self;function C(){}function D(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function x(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var V="closure_uid_"+(1e9*Math.random()>>>0),te=0;function pe(n,e,t){return n.call.apply(n.bind,arguments)}function Fe(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function He(n,e,t){return(He=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pe:Fe).apply(null,arguments)}function lt(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function pt(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var u=Array(arguments.length-2),l=2;l<arguments.length;l++)u[l-2]=arguments[l];return e.prototype[i].apply(r,u)}}function xt(){this.s=this.s,this.o=this.o}xt.prototype.s=!1,xt.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function N(n){Object.prototype.hasOwnProperty.call(n,V)&&n[V]||(n[V]=++te)}(this)},xt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $t=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function An(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ur(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(D(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function Mr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Mr.prototype.h=function(){this.defaultPrevented=!0};var hw=function(){if(!v.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{v.addEventListener("test",C,e),v.removeEventListener("test",C,e)}catch{}return n}();function yf(n){return/^[\s\xa0]*$/.test(n)}var d_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ig(n,e){return n<e?-1:n>e?1:0}function _f(){var n=v.navigator;return n&&(n=n.userAgent)?n:""}function Mo(n){return-1!=_f().indexOf(n)}function Cg(n){return Cg[" "](n),n}Cg[" "]=C;var JT,pw=Mo("Opera"),h_=Mo("Trident")||Mo("MSIE"),BL=Mo("Edge"),EM=BL||h_,jL=Mo("Gecko")&&!(-1!=_f().toLowerCase().indexOf("webkit")&&!Mo("Edge"))&&!(Mo("Trident")||Mo("MSIE"))&&!Mo("Edge"),pq=-1!=_f().toLowerCase().indexOf("webkit")&&!Mo("Edge");function $L(){var n=v.document;return n?n.documentMode:void 0}e:{var wM="",bM=function(){var n=_f();return jL?/rv:([^\);]+)(\)|;)/.exec(n):BL?/Edge\/([\d\.]+)/.exec(n):h_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):pq?/WebKit\/(\S+)/.exec(n):pw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(bM&&(wM=bM?bM[1]:""),h_){var IM=$L();if(null!=IM&&IM>parseFloat(wM)){JT=String(IM);break e}}JT=wM}var gq={};var yq=v.document&&h_&&($L()||parseInt(JT,10))||void 0;function gw(n,e){if(Mr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(jL){e:{try{Cg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_q[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&gw.X.h.call(this)}}pt(gw,Mr);var _q={2:"touch",3:"pen",4:"mouse"};gw.prototype.h=function(){gw.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var mw="closure_listenable_"+(1e6*Math.random()|0),vq=0;function Eq(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++vq,this.ba=this.ea=!1}function XT(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function DM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function GL(n){const e={};for(const t in n)e[t]=n[t];return e}const qL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WL(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<qL.length;s++)t=qL[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function eS(n){this.src=n,this.g={},this.h=0}function TM(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=$t(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(XT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function SM(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}eS.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=SM(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new Eq(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var AM="closure_lm_"+(1e6*Math.random()|0),xM={};function zL(n,e,t,r,i){if(r&&r.once)return ZL(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)zL(n,e[s],t,r,i);return null}return t=PM(t),n&&n[mw]?n.N(e,t,x(r)?!!r.capture:!!r,i):KL(n,e,t,!1,r,i)}function KL(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=x(i)?!!i.capture:!!i,l=OM(n);if(l||(n[AM]=l=new eS(n)),(t=l.add(e,t,r,u,s)).proxy)return t;if(r=function wq(){const e=bq;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)hw||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(YL(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ZL(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ZL(n,e[s],t,r,i);return null}return t=PM(t),n&&n[mw]?n.O(e,t,x(r)?!!r.capture:!!r,i):KL(n,e,t,!0,r,i)}function QL(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)QL(n,e[s],t,r,i);else r=x(r)?!!r.capture:!!r,t=PM(t),n&&n[mw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=SM(s=n.g[e],t,r,i))&&(XT(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=OM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=SM(e,t,r,i)),(t=-1<n?e[n]:null)&&RM(t))}function RM(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[mw])TM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(YL(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=OM(e))?(TM(t,n),0==t.h&&(t.src=null,e[AM]=null)):XT(n)}}}function YL(n){return n in xM?xM[n]:xM[n]="on"+n}function bq(n,e){if(n.ba)n=!0;else{e=new gw(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&RM(n),n=t.call(r,e)}return n}function OM(n){return(n=n[AM])instanceof eS?n:null}var MM="__closure_events_fn_"+(1e9*Math.random()>>>0);function PM(n){return"function"==typeof n?n:(n[MM]||(n[MM]=function(e){return n.handleEvent(e)}),n[MM])}function ns(){xt.call(this),this.i=new eS(this),this.P=this,this.I=null}function ms(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Mr(e,n);else if(e instanceof Mr)e.target=e.target||n;else{var i=e;WL(e=new Mr(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=tS(u,r,!0,e)&&i}if(i=tS(u=e.g=n,r,!0,e)&&i,i=tS(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=tS(u=e.g=t[s],r,!1,e)&&i}function tS(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ba&&u.capture==t){var l=u.listener,p=u.ha||u.src;u.ea&&TM(n.i,u),i=!1!==l.call(p,r)&&i}}return i&&!r.defaultPrevented}pt(ns,xt),ns.prototype[mw]=!0,ns.prototype.removeEventListener=function(n,e,t,r){QL(this,n,e,t,r)},ns.prototype.M=function(){if(ns.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)XT(t[r]);delete n.g[e],n.h--}}this.I=null},ns.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ns.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var NM=v.JSON.stringify;function Iq(){var n=eV;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var kM,JL=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Dq,n=>n.reset());class Dq{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Tq(n){v.setTimeout(()=>{throw n},0)}function XL(n,e){kM||function Sq(){var n=v.Promise.resolve(void 0);kM=function(){n.then(Aq)}}(),FM||(kM(),FM=!0),eV.add(n,e)}var FM=!1,eV=new class Cq{constructor(){this.h=this.g=null}add(e,t){const r=JL.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Aq(){for(var n;n=Iq();){try{n.h.call(n.g)}catch(t){Tq(t)}var e=JL;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}FM=!1}function nS(n,e){ns.call(this),this.h=n||1,this.g=e||v,this.j=He(this.lb,this),this.l=Date.now()}function LM(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function VM(n,e,t){if("function"==typeof n)t&&(n=He(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=He(n.handleEvent,n)}return 2147483647<Number(e)?-1:v.setTimeout(n,e||0)}function tV(n){n.g=VM(()=>{n.g=null,n.i&&(n.i=!1,tV(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}pt(nS,ns),(f=nS.prototype).ca=!1,f.R=null,f.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ms(this,"tick"),this.ca&&(LM(this),this.start()))}},f.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},f.M=function(){nS.X.M.call(this),LM(this),delete this.g};class xq extends xt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tV(this)}M(){super.M(),this.g&&(v.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yw(n){xt.call(this),this.h=n,this.g={}}pt(yw,xt);var nV=[];function rV(n,e,t,r){Array.isArray(t)||(t&&(nV[0]=t.toString()),t=nV);for(var i=0;i<t.length;i++){var s=zL(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function iV(n){DM(n.g,function(e,t){this.g.hasOwnProperty(t)&&RM(e)},n),n.g={}}function rS(){this.g=!0}function f_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Pq(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return NM(t)}catch{return e}}(n,t)+(r?" "+r:"")})}yw.prototype.M=function(){yw.X.M.call(this),iV(this)},yw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rS.prototype.Aa=function(){this.g=!1},rS.prototype.info=function(){};var Dg={},sV=null;function iS(){return sV=sV||new ns}function oV(n){Mr.call(this,Dg.Pa,n)}function _w(n){const e=iS();ms(e,new oV(e))}function aV(n,e){Mr.call(this,Dg.STAT_EVENT,n),this.stat=e}function io(n){const e=iS();ms(e,new aV(e,n))}function uV(n,e){Mr.call(this,Dg.Qa,n),this.size=e}function vw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return v.setTimeout(function(){n()},e)}Dg.Pa="serverreachability",pt(oV,Mr),Dg.STAT_EVENT="statevent",pt(aV,Mr),Dg.Qa="timingevent",pt(uV,Mr);var sS={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},cV={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function UM(){}function dV(){}UM.prototype.h=null;var $M,Ew={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function BM(){Mr.call(this,"d")}function jM(){Mr.call(this,"c")}function oS(){}function ww(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new yw(this),this.O=Nq,this.T=new nS(n=EM?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new hV}function hV(){this.i=null,this.g="",this.h=!1}pt(BM,Mr),pt(jM,Mr),pt(oS,UM),oS.prototype.g=function(){return new XMLHttpRequest},oS.prototype.i=function(){return{}},$M=new oS;var Nq=45e3,HM={},aS={};function GM(n,e,t){n.K=1,n.v=dS(Od(e)),n.s=t,n.P=!0,fV(n,null)}function fV(n,e){n.F=Date.now(),bw(n),n.A=Od(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),IV(t.i,"t",r),n.C=0,t=n.l.H,n.h=new hV,n.g=zV(n.l,t?e:null,!n.s),0<n.N&&(n.L=new xq(He(n.La,n,n.g),n.N)),rV(n.S,n.g,"readystatechange",n.ib),e=n.H?GL(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),_w(),function Rq(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",l=s.split("&"),p=0;p<l.length;p++){var _=l[p].split("=");if(1<_.length){var w=_[0];_=_[1];var I=w.split("_");u=2<=I.length&&"type"==I[1]?u+(w+"=")+_+"&":u+(w+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function pV(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function gV(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=kq(n,t),i==aS){4==e&&(n.o=4,io(14),r=!1),f_(n.j,n.m,null,"[Incomplete Response]");break}if(i==HM){n.o=4,io(15),f_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}f_(n.j,n.m,i,null),qM(n,i)}pV(n)&&i!=aS&&i!=HM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,io(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),XM(e),e.K=!0,io(11))):(f_(n.j,n.m,t,"[Invalid Chunked Response]"),Tg(n),Iw(n))}function kq(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?aS:(t=Number(e.substring(t,r)),isNaN(t)?HM:(r+=1)+t>e.length?aS:(e=e.substr(r,t),n.C=r+t,e))}function bw(n){n.V=Date.now()+n.O,mV(n,n.O)}function mV(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=vw(He(n.gb,n),e)}function uS(n){n.B&&(v.clearTimeout(n.B),n.B=null)}function Iw(n){0==n.l.G||n.I||HV(n.l,n)}function Tg(n){uS(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,LM(n.T),iV(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function qM(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||WM(t.h,n)))if(!n.J&&WM(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;yS(t),gS(t)}JM(t),io(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=vw(He(t.cb,t),6e3));if(1>=TV(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ag(t,11)}else if((n.J||t.g==n)&&yS(t),!yf(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.T=_[0],_=_[1],2==t.G)if("c"==_[0]){t.I=_[1],t.ka=_[2];const w=_[3];null!=w&&(t.ma=w,t.j.info("VER="+t.ma));const I=_[4];null!=I&&(t.Ca=I,t.j.info("SVER="+t.Ca));const S=_[5];null!=S&&"number"==typeof S&&0<S&&(t.J=r=1.5*S,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const M=n.g;if(M){const P=M.g?M.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var s=r.h;s.g||-1==P.indexOf("spdy")&&-1==P.indexOf("quic")&&-1==P.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(zM(s,s.h),s.h=null))}if(r.D){const U=M.g?M.g.getResponseHeader("X-HTTP-Session-Id"):null;U&&(r.za=U,Pr(r.F,r.D,U))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=WV(r,r.H?r.ka:null,r.V),u.J){SV(r.h,u);var l=u,p=r.J;p&&l.setTimeout(p),l.B&&(uS(l),bw(l)),r.g=u}else jV(r);0<t.i.length&&mS(t)}else"stop"!=_[0]&&"close"!=_[0]||Ag(t,7);else 3==t.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Ag(t,7):YM(t):"noop"!=_[0]&&t.l&&t.l.wa(_),t.A=0)}_w()}catch{}}function yV(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(D(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Lq(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(D(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Fq(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(D(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(f=ww.prototype).setTimeout=function(n){this.O=n},f.ib=function(n){n=n.target;const e=this.L;e&&3==Md(n)?e.l():this.La(n)},f.La=function(n){try{if(n==this.g)e:{const w=Md(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>w)&&(3!=w||EM||this.g&&(this.h.h||this.g.fa()||kV(this.g)))){this.I||4!=w||7==e||_w(),uS(this);var t=this.g.aa();this.Y=t;t:if(pV(this)){var r=kV(this.g);n="";var i=r.length,s=4==Md(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Tg(this),Iw(this);var u="";break t}this.h.i=new v.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function Oq(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.U,w,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var l,p=this.g;if((l=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yf(l)){var _=l;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,io(12),Tg(this),Iw(this);break e}f_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qM(this,t)}this.P?(gV(this,w,u),EM&&this.i&&3==w&&(rV(this.S,this.T,"tick",this.hb),this.T.start())):(f_(this.j,this.m,u,null),qM(this,u)),4==w&&Tg(this),this.i&&!this.I&&(4==w?HV(this.l,this):(this.i=!1,bw(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,io(12)):(this.o=0,io(13)),Tg(this),Iw(this)}}}catch{}},f.hb=function(){if(this.g){var n=Md(this.g),e=this.g.fa();this.C<e.length&&(uS(this),gV(this,n,e),this.i&&4!=n&&bw(this))}},f.cancel=function(){this.I=!0,Tg(this)},f.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Mq(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_w(),io(17)),Tg(this),this.o=2,Iw(this)):mV(this,this.V-n)};var _V=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sg(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Sg){this.h=void 0!==e?e:n.h,cS(this,n.j),this.s=n.s,this.g=n.g,lS(this,n.m),this.l=n.l,e=n.i;var t=new Tw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),vV(this,t),this.o=n.o}else n&&(t=String(n).match(_V))?(this.h=!!e,cS(this,t[1]||"",!0),this.s=Cw(t[2]||""),this.g=Cw(t[3]||"",!0),lS(this,t[4]),this.l=Cw(t[5]||"",!0),vV(this,t[6]||"",!0),this.o=Cw(t[7]||"")):(this.h=!!e,this.i=new Tw(null,this.h))}function Od(n){return new Sg(n)}function cS(n,e,t){n.j=t?Cw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function lS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function vV(n,e,t){e instanceof Tw?(n.i=e,function Gq(n,e){e&&!n.j&&(vf(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(wV(this,r),IV(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Dw(e,$q)),n.i=new Tw(e,n.h))}function Pr(n,e,t){n.i.set(e,t)}function dS(n){return Pr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Cw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Dw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Uq),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Uq(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Sg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Dw(e,EV,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Dw(e,EV,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Dw(t,"/"==t.charAt(0)?jq:Bq,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Dw(t,Hq)),n.join("")};var EV=/[#\/\?@]/g,Bq=/[#\?:]/g,jq=/[#\?]/g,$q=/[#\?@]/g,Hq=/#/g;function Tw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function vf(n){n.g||(n.g=new Map,n.h=0,n.i&&function Vq(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function wV(n,e){vf(n),e=p_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function bV(n,e){return vf(n),e=p_(n,e),n.g.has(e)}function IV(n,e,t){wV(n,e),0<t.length&&(n.i=null,n.g.set(p_(n,e),An(t)),n.h+=t.length)}function p_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function CV(n){this.l=n||Wq,n=v.PerformanceNavigationTiming?0<(n=v.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(v.g&&v.g.Ga&&v.g.Ga()&&v.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(f=Tw.prototype).add=function(n,e){vf(this),this.i=null,n=p_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},f.forEach=function(n,e){vf(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},f.oa=function(){vf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},f.W=function(n){vf(this);let e=[];if("string"==typeof n)bV(this,n)&&(e=e.concat(this.g.get(p_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},f.set=function(n,e){return vf(this),this.i=null,bV(this,n=p_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},f.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},f.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var Wq=10;function DV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function TV(n){return n.h?1:n.g?n.g.size:0}function WM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function zM(n,e){n.g?n.g.add(e):n.h=e}function SV(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function AV(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return An(n.i)}function KM(){}function zq(){this.g=new KM}function Kq(n,e,t){const r=t||"";try{yV(n,function(i,s){let u=i;x(i)&&(u=NM(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Sw(n){this.l=n.ac||null,this.j=n.jb||!1}function fS(n,e){ns.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ZM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}CV.prototype.cancel=function(){if(this.i=AV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},KM.prototype.stringify=function(n){return v.JSON.stringify(n,void 0)},KM.prototype.parse=function(n){return v.JSON.parse(n,void 0)},pt(Sw,UM),Sw.prototype.g=function(){return new fS(this.l,this.j)},Sw.prototype.i=function(n){return function(){return n}}({}),pt(fS,ns);var ZM=0;function xV(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Aw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,xw(n)}function xw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(f=fS.prototype).open=function(n,e){if(this.readyState!=ZM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,xw(this)},f.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||v).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},f.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Aw(this)),this.readyState=ZM},f.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,xw(this)),this.g&&(this.readyState=3,xw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof v.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xV(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},f.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Aw(this):xw(this),3==this.readyState&&xV(this)}},f.Va=function(n){this.g&&(this.response=this.responseText=n,Aw(this))},f.Ua=function(n){this.g&&(this.response=n,Aw(this))},f.ga=function(){this.g&&Aw(this)},f.setRequestHeader=function(n,e){this.v.append(n,e)},f.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},f.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Qq=v.JSON.parse;function oi(n){ns.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=RV,this.K=this.L=!1}pt(oi,ns);var RV="",Yq=/^https?$/i,Jq=["POST","PUT"];function OV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,MV(n),pS(n)}function MV(n){n.D||(n.D=!0,ms(n,"complete"),ms(n,"error"))}function PV(n){if(n.h&&typeof m<"u"&&(!n.C[1]||4!=Md(n)||2!=n.aa()))if(n.v&&4==Md(n))VM(n.Ha,0,n);else if(ms(n,"readystatechange"),4==Md(n)){n.h=!1;try{const l=n.aa();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.H).match(_V)[1]||null;if(!i&&v.self&&v.self.location){var s=v.self.location.protocol;i=s.substr(0,s.length-1)}r=!Yq.test(i?i.toLowerCase():"")}t=r}if(t)ms(n,"complete"),ms(n,"success");else{n.m=6;try{var u=2<Md(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",MV(n)}}finally{pS(n)}}}function pS(n,e){if(n.g){NV(n);const t=n.g,r=n.C[0]?C:null;n.g=null,n.C=null,e||ms(n,"ready");try{t.onreadystatechange=r}catch{}}}function NV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(v.clearTimeout(n.A),n.A=null)}function Md(n){return n.g?n.g.readyState:0}function kV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case RV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function FV(n){let e="";return DM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function QM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=FV(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Pr(n,e,t))}function Rw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function LV(n){this.Ca=0,this.i=[],this.j=new rS,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Rw("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Rw("baseRetryDelayMs",5e3,n),this.bb=Rw("retryDelaySeedMs",1e4,n),this.$a=Rw("forwardChannelMaxRetries",2,n),this.ta=Rw("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new CV(n&&n.concurrentRequestLimit),this.Fa=new zq,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function YM(n){if(VV(n),3==n.G){var e=n.U++,t=Od(n.F);Pr(t,"SID",n.I),Pr(t,"RID",e),Pr(t,"TYPE","terminate"),Ow(n,t),(e=new ww(n,n.j,e,void 0)).K=2,e.v=dS(Od(t)),t=!1,v.navigator&&v.navigator.sendBeacon&&(t=v.navigator.sendBeacon(e.v.toString(),"")),!t&&v.Image&&((new Image).src=e.v,t=!0),t||(e.g=zV(e.l,null),e.g.da(e.v)),e.F=Date.now(),bw(e)}qV(n)}function gS(n){n.g&&(XM(n),n.g.cancel(),n.g=null)}function VV(n){gS(n),n.u&&(v.clearTimeout(n.u),n.u=null),yS(n),n.h.cancel(),n.m&&("number"==typeof n.m&&v.clearTimeout(n.m),n.m=null)}function mS(n){DV(n.h)||n.m||(n.m=!0,XL(n.Ja,n),n.C=0)}function UV(n,e){var t;t=e?e.m:n.U++;const r=Od(n.F);Pr(r,"SID",n.I),Pr(r,"RID",t),Pr(r,"AID",n.T),Ow(n,r),n.o&&n.s&&QM(r,n.o,n.s),t=new ww(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=BV(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),zM(n.h,t),GM(t,r,e)}function Ow(n,e){n.ia&&DM(n.ia,function(t,r){Pr(e,r,t)}),n.l&&yV({},function(t,r){Pr(e,r,t)})}function BV(n,e,t){t=Math.min(n.i.length,t);var r=n.l?He(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let l=!0;for(let p=0;p<t;p++){let _=i[p].h;const w=i[p].g;if(_-=s,0>_)s=Math.max(0,i[p].h-100),l=!1;else try{Kq(w,u,"req"+_+"_")}catch{r&&r(w)}}if(l){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function jV(n){n.g||n.u||(n.Z=1,XL(n.Ia,n),n.A=0)}function JM(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=vw(He(n.Ia,n),GV(n,n.A)),n.A++,0))}function XM(n){null!=n.B&&(v.clearTimeout(n.B),n.B=null)}function $V(n){n.g=new ww(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Od(n.sa);Pr(e,"RID","rpc"),Pr(e,"SID",n.I),Pr(e,"CI",n.L?"0":"1"),Pr(e,"AID",n.T),Pr(e,"TYPE","xmlhttp"),Ow(n,e),n.o&&n.s&&QM(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=dS(Od(e)),t.s=null,t.P=!0,fV(t,n)}function yS(n){null!=n.v&&(v.clearTimeout(n.v),n.v=null)}function HV(n,e){var t=null;if(n.g==e){yS(n),XM(n),n.g=null;var r=2}else{if(!WM(n.h,e))return;t=e.D,SV(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ms(r=iS(),new uV(r,t)),mS(n)}else jV(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function eW(n,e){return!(TV(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=vw(He(n.Ja,n,e),GV(n,n.C)),n.C++,0)))}(n,e)||2==r&&JM(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Ag(n,5);break;case 4:Ag(n,10);break;case 3:Ag(n,6);break;default:Ag(n,2)}}function GV(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Ag(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=He(n.kb,n);t||(t=new Sg("//www.google.com/images/cleardot.gif"),v.location&&"http"==v.location.protocol||cS(t,"https"),dS(t)),function Zq(n,e){const t=new rS;if(v.Image){const r=new Image;r.onload=lt(hS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=lt(hS,t,r,"TestLoadImage: error",!1,e),r.onabort=lt(hS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=lt(hS,t,r,"TestLoadImage: timeout",!1,e),v.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else io(2);n.G=0,n.l&&n.l.va(e),qV(n),VV(n)}function qV(n){if(n.G=0,n.la=[],n.l){const e=AV(n.h);(0!=e.length||0!=n.i.length)&&(ur(n.la,e),ur(n.la,n.i),n.h.i.length=0,An(n.i),n.i.length=0),n.l.ua()}}function WV(n,e,t){var r=t instanceof Sg?Od(t):new Sg(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),lS(r,r.m);else{var i=v.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Sg(null,void 0);r&&cS(s,r),e&&(s.g=e),i&&lS(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&Pr(r,t,e),Pr(r,"VER",n.ma),Ow(n,r),r}function zV(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new oi(t&&n.Da&&!n.ra?new Sw({jb:!0}):n.ra)).Ka(n.H),e}function KV(){}function _S(){if(h_&&!(10<=Number(yq)))throw Error("Environmental error: no available transport.")}function ma(n,e){ns.call(this),this.g=new LV(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!yf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new g_(this)}function ZV(n){BM.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function QV(){jM.call(this),this.status=1}function g_(n){this.g=n}(f=oi.prototype).Ka=function(n){this.L=n},f.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$M.g(),this.C=function lV(n){return n.h||(n.h=n.i())}(this.u?this.u:$M),this.g.onreadystatechange=He(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void OV(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=v.FormData&&n instanceof v.FormData,!(0<=$t(Jq,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{NV(this),0<this.B&&((this.K=function Xq(n){return h_&&function mq(){return function fw(n){var e=gq;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=d_(String(JT)).split("."),t=d_("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",s=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=Ig(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Ig(0==i[2].length,0==s[2].length)||Ig(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=He(this.qa,this)):this.A=VM(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){OV(this,s)}},f.qa=function(){typeof m<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ms(this,"timeout"),this.abort(8))},f.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ms(this,"complete"),ms(this,"abort"),pS(this))},f.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pS(this,!0)),oi.X.M.call(this)},f.Ha=function(){this.s||(this.F||this.v||this.l?PV(this):this.fb())},f.fb=function(){PV(this)},f.aa=function(){try{return 2<Md(this)?this.g.status:-1}catch{return-1}},f.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},f.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Qq(e)}},f.Ea=function(){return this.m},f.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(f=LV.prototype).ma=8,f.G=1,f.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new ww(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=GL(s),WL(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=BV(this,i,e),Pr(t=Od(this.F),"RID",n),Pr(t,"CVER",22),this.D&&Pr(t,"X-HTTP-Session-Id",this.D),Ow(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(FV(s)))+"&"+e:this.o&&QM(t,this.o,s)),zM(this.h,i),this.Ya&&Pr(t,"TYPE","init"),this.O?(Pr(t,"$req",e),Pr(t,"SID","null"),i.Z=!0,GM(i,t,null)):GM(i,t,e),this.G=2}}else 3==this.G&&(n?UV(this,n):0==this.i.length||DV(this.h)||UV(this))},f.Ia=function(){if(this.u=null,$V(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=vw(He(this.eb,this),n)}},f.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,io(10),gS(this),$V(this))},f.cb=function(){null!=this.v&&(this.v=null,gS(this),JM(this),io(19))},f.kb=function(n){n?(this.j.info("Successfully pinged google.com"),io(2)):(this.j.info("Failed to ping google.com"),io(1))},(f=KV.prototype).xa=function(){},f.wa=function(){},f.va=function(){},f.ua=function(){},f.Ra=function(){},_S.prototype.g=function(n,e){return new ma(n,e)},pt(ma,ns),ma.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;io(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=WV(n,null,n.V),mS(n)},ma.prototype.close=function(){YM(this.g)},ma.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=NM(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&mS(e)},ma.prototype.M=function(){this.g.l=null,delete this.j,YM(this.g),delete this.g,ma.X.M.call(this)},pt(ZV,BM),pt(QV,jM),pt(g_,KV),g_.prototype.xa=function(){ms(this.g,"a")},g_.prototype.wa=function(n){ms(this.g,new ZV(n))},g_.prototype.va=function(n){ms(this.g,new QV)},g_.prototype.ua=function(){ms(this.g,"b")},_S.prototype.createWebChannel=_S.prototype.g,ma.prototype.send=ma.prototype.u,ma.prototype.open=ma.prototype.m,ma.prototype.close=ma.prototype.close,sS.NO_ERROR=0,sS.TIMEOUT=8,sS.HTTP_ERROR=6,cV.COMPLETE="complete",dV.EventType=Ew,Ew.OPEN="a",Ew.CLOSE="b",Ew.ERROR="c",Ew.MESSAGE="d",ns.prototype.listen=ns.prototype.N,oi.prototype.listenOnce=oi.prototype.O,oi.prototype.getLastError=oi.prototype.Oa,oi.prototype.getLastErrorCode=oi.prototype.Ea,oi.prototype.getStatus=oi.prototype.aa,oi.prototype.getResponseJson=oi.prototype.Sa,oi.prototype.getResponseText=oi.prototype.fa,oi.prototype.send=oi.prototype.da,oi.prototype.setWithCredentials=oi.prototype.Ka;var tW=d.createWebChannelTransport=function(){return new _S},nW=d.getStatEventTarget=function(){return iS()},eP=d.ErrorCode=sS,rW=d.EventType=cV,iW=d.Event=Dg,YV=d.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},sW=d.FetchXmlHttpFactory=Sw,vS=d.WebChannel=dV,oW=d.XhrIo=oi;const JV="@firebase/firestore";class rs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rs.UNAUTHENTICATED=new rs(null),rs.GOOGLE_CREDENTIALS=new rs("google-credentials-uid"),rs.FIRST_PARTY=new rs("first-party-uid"),rs.MOCK_USER=new rs("mock-user");let m_="9.15.0";const Ef=new a.Yd("@firebase/firestore");function tP(){return Ef.logLevel}function Je(n,...e){if(Ef.logLevel<=a.in.DEBUG){const t=e.map(nP);Ef.debug(`Firestore (${m_}): ${n}`,...t)}}function wi(n,...e){if(Ef.logLevel<=a.in.ERROR){const t=e.map(nP);Ef.error(`Firestore (${m_}): ${n}`,...t)}}function xg(n,...e){if(Ef.logLevel<=a.in.WARN){const t=e.map(nP);Ef.warn(`Firestore (${m_}): ${n}`,...t)}}function nP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function It(n="Unexpected state"){const e=`FIRESTORE (${m_}) INTERNAL ASSERTION FAILED: `+n;throw wi(e),new Error(e)}function Ot(n,e){n||It()}function yt(n,e){return n}const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends o.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class XV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rs.UNAUTHENTICATED))}shutdown(){}}class lW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dW{constructor(e){this.t=e,this.currentUser=rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let u=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Gi,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const _=u;e.enqueueRetryable((0,Ne.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},p=_=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Gi)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot("string"==typeof r.accessToken),new XV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ot(null===e||"string"==typeof e),new rs(e)}}class hW{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=rs.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ot(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class fW{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new hW(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(rs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pW{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.A;return this.A=s.token,Je("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ot("string"==typeof t.token),this.A=t.token,new eU(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function gW(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class tU{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=gW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Yt(n,e){return n<e?-1:n>e?1:0}function y_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function nU(n){return n+"\0"}class Nr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nr.fromMillis(Date.now())}static fromDate(e){return Nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new Nr(0,0))}static max(){return new kt(new Nr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mw{constructor(e,t,r){void 0===t?t=0:t>e.length&&It(),void 0===r?r=e.length-t:r>e.length-t&&It(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Mw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Mn extends Mw{construct(e,t,r){return new Mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ge(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Mn(t)}static emptyPath(){return new Mn([])}}const mW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ai extends Mw{construct(e,t,r){return new ai(e,t,r)}static isValidIdentifier(e){return mW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ai(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ge(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const l=e[i];if("\\"===l){if(i+1===e.length)throw new Ge(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ge(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===l?(u=!u,i++):"."!==l||u?(r+=l,i++):(s(),i++)}if(s(),u)throw new Ge(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ai(t)}static emptyPath(){return new ai([])}}class mt{constructor(e){this.path=e}static fromPath(e){return new mt(Mn.fromString(e))}static fromName(e){return new mt(Mn.fromString(e).popFirst(5))}static empty(){return new mt(Mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mt(new Mn(e.slice()))}}class ES{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function rP(n){return n.fields.find(e=>2===e.kind)}function Rg(n){return n.fields.filter(e=>2!==e.kind)}ES.UNKNOWN_ID=-1;class wS{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pw(0,ya.min())}}function rU(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=kt.fromTimestamp(1e9===r?new Nr(t+1,0):new Nr(t,r));return new ya(i,mt.empty(),e)}function iU(n){return new ya(n.readTime,n.key,-1)}class ya{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ya(kt.min(),mt.empty(),-1)}static max(){return new ya(kt.max(),mt.empty(),-1)}}function iP(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=mt.comparator(n.documentKey,e.documentKey),0!==t?t:Yt(n.largestBatchId,e.largestBatchId))}const sU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wf(n){return sP.apply(this,arguments)}function sP(){return sP=(0,Ne.Z)(function*(n){if(n.code!==Se.FAILED_PRECONDITION||n.message!==sU)throw n;Je("LocalStore","Unexpectedly lost primary lease")}),sP.apply(this,arguments)}class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ce((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ce?t:Ce.resolve(t)}catch(t){return Ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.reject(t)}static resolve(e){return new Ce((t,r)=>{t(e)})}static reject(e){return new Ce((t,r)=>{r(e)})}static waitFor(e){return new Ce((t,r)=>{let i=0,s=0,u=!1;e.forEach(l=>{++i,l.next(()=>{++s,u&&s===i&&t()},p=>r(p))}),u=!0,s===i&&t()})}static or(e){let t=Ce.resolve(!1);for(const r of e)t=t.next(i=>i?Ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Ce((r,i)=>{const s=e.length,u=new Array(s);let l=0;for(let p=0;p<s;p++){const _=p;t(e[_]).next(w=>{u[_]=w,++l,l===s&&r(u)},w=>i(w))}})}static doWhile(e,t){return new Ce((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class bS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Gi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Nw(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=oP(r.target.error);this.P.reject(new Nw(e,i))}}static open(e,t,r,i){try{return new bS(t,e.transaction(i,r))}catch(s){throw new Nw(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new EW(t)}}class Yu{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Yu.D((0,o.z$)())&&wi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Je("SimpleDb","Removing database:",e),Og(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,o.hl)())return!1;if(Yu.N())return!0;const e=(0,o.z$)(),t=Yu.D(e),r=0<t&&t<10,i=Yu.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ne.Z)(function*(){return t.db||(Je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new Nw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const l=u.target.error;i("VersionError"===l.name?new Ge(Se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===l.name?new Ge(Se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l):new Nw(e,l))},s.onupgradeneeded=u=>{Je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{Je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Ne.Z)(function*(){const u="readonly"===t;let l=0;for(;;){++l;try{s.db=yield s.F(e);const p=bS.open(s.db,e,u?"readonly":"readwrite",r),_=i(p).next(w=>(p.V(),w)).catch(w=>(p.abort(w),Ce.reject(w))).toPromise();return _.catch(()=>{}),yield p.v,_}catch(p){const _=p,w="FirebaseError"!==_.name&&l<3;if(Je("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),s.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class vW{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Og(this.q.delete())}}class Nw extends Ge{constructor(e,t){super(Se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bf(n){return"IndexedDbTransactionError"===n.name}class EW{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Og(r)}add(e){return Je("SimpleDb","ADD",this.store.name,e,e),Og(this.store.add(e))}get(e){return Og(this.store.get(e)).next(t=>(void 0===t&&(t=null),Je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Je("SimpleDb","DELETE",this.store.name,e),Og(this.store.delete(e))}count(){return Je("SimpleDb","COUNT",this.store.name),Og(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(u,l)=>{s.push(l)}).next(()=>s)}{const i=this.store.getAll(r.range);return new Ce((s,u)=>{i.onerror=l=>{u(l.target.error)},i.onsuccess=l=>{s(l.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Ce((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){Je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,u,l)=>l.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new Ce((r,i)=>{t.onerror=s=>{const u=oP(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(l=>{l?u.continue():r()}):r()}})}H(e,t){const r=[];return new Ce((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const l=u.target.result;if(!l)return void i();const p=new vW(l),_=t(l.primaryKey,l.value,p);if(_ instanceof Ce){const w=_.catch(I=>(p.done(),Ce.reject(I)));r.push(w)}p.isDone?i():null===p.G?l.continue():l.continue(p.G)}}).next(()=>Ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Og(n){return new Ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=oP(r.target.error);t(i)}})}let aU=!1;function oP(n){const e=Yu.D((0,o.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aU||(aU=!0,setTimeout(()=>{throw r},0)),r}}return n}class wW{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Je("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ne.Z)(function*(){t.task=null;try{Je("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){bf(r)?Je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield wf(r)}yield t.nt(6e4)}))}}class bW{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ne.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return Ce.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Je("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(l=>{i-=l,r.add(u)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const u=s.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,s)).next(l=>(Je("IndexBackiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,t,l))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const u=iU(s);iP(u,r)>0&&(r=u)}),new ya(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let _a=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class IW{constructor(e,t,r,i,s,u,l,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=l,this.useFetchStreams=p}}class If{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new If("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof If&&e.projectId===this.projectId&&e.database===this.database}}function uU(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mg(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cU(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function kw(n){return null==n}function Fw(n){return 0===n&&1/n==-1/0}function lU(n){return"number"==typeof n&&Number.isInteger(n)&&!Fw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class qi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new qi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new qi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qi.EMPTY_BYTE_STRING=new qi("");const DW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cf(n){if(Ot(!!n),"string"==typeof n){let e=0;const t=DW.exec(n);if(Ot(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ui(n.seconds),nanos:ui(n.nanos)}}function ui(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pg(n){return"string"==typeof n?qi.fromBase64String(n):qi.fromUint8Array(n)}function aP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dU(n){const e=n.mapValue.fields.__previous_value__;return aP(e)?dU(e):e}function Lw(n){const e=Cf(n.mapValue.fields.__local_write_time__.timestampValue);return new Nr(e.seconds,e.nanos)}const Df={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},IS={nullValue:"NULL_VALUE"};function Ng(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?aP(n)?4:gU(n)?9007199254740991:10:It()}function sl(n,e){if(n===e)return!0;const t=Ng(n);if(t!==Ng(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lw(n).isEqual(Lw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Cf(r.timestampValue),u=Cf(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Pg(n.bytesValue).isEqual(Pg(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ui(r.geoPointValue.latitude)===ui(i.geoPointValue.latitude)&&ui(r.geoPointValue.longitude)===ui(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ui(r.integerValue)===ui(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=ui(r.doubleValue),u=ui(i.doubleValue);return s===u?Fw(s)===Fw(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return y_(n.arrayValue.values||[],e.arrayValue.values||[],sl);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(uU(s)!==uU(u))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(void 0===u[l]||!sl(s[l],u[l])))return!1;return!0}(n,e);default:return It()}var i}function Vw(n,e){return void 0!==(n.values||[]).find(t=>sl(t,e))}function Tf(n,e){if(n===e)return 0;const t=Ng(n),r=Ng(e);if(t!==r)return Yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=ui(i.integerValue||i.doubleValue),l=ui(s.integerValue||s.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1}(n,e);case 3:return hU(n.timestampValue,e.timestampValue);case 4:return hU(Lw(n),Lw(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(i,s){const u=Pg(i),l=Pg(s);return u.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),l=s.split("/");for(let p=0;p<u.length&&p<l.length;p++){const _=Yt(u[p],l[p]);if(0!==_)return _}return Yt(u.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Yt(ui(i.latitude),ui(s.latitude));return 0!==u?u:Yt(ui(i.longitude),ui(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],l=s.values||[];for(let p=0;p<u.length&&p<l.length;++p){const _=Tf(u[p],l[p]);if(_)return _}return Yt(u.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Df.mapValue&&s===Df.mapValue)return 0;if(i===Df.mapValue)return 1;if(s===Df.mapValue)return-1;const u=i.fields||{},l=Object.keys(u),p=s.fields||{},_=Object.keys(p);l.sort(),_.sort();for(let w=0;w<l.length&&w<_.length;++w){const I=Yt(l[w],_[w]);if(0!==I)return I;const S=Tf(u[l[w]],p[_[w]]);if(0!==S)return S}return Yt(l.length,_.length)}(n.mapValue,e.mapValue);default:throw It()}}function hU(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Yt(n,e);const t=Cf(n),r=Cf(e),i=Yt(t.seconds,r.seconds);return 0!==i?i:Yt(t.nanos,r.nanos)}function __(n){return uP(n)}function uP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Cf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pg(n.bytesValue).toBase64():"referenceValue"in n?mt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=uP(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const l of i)u?u=!1:s+=",",s+=`${l}:${uP(r.fields[l])}`;return s+"}"}(n.mapValue):It();var e}function kg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cP(n){return!!n&&"integerValue"in n}function Uw(n){return!!n&&"arrayValue"in n}function fU(n){return!!n&&"nullValue"in n}function pU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function CS(n){return!!n&&"mapValue"in n}function Bw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Mg(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gU(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function TW(n){return"nullValue"in n?IS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?kg(If.empty(),mt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:It()}function SW(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?kg(If.empty(),mt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Df:It()}function mU(n,e){const t=Tf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yU(n,e){const t=Tf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Sf{constructor(e,t){this.position=e,this.inclusive=t}}function _U(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?mt.comparator(mt.fromName(u.referenceValue),t.key):Tf(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function vU(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sl(n.position[t],e.position[t]))return!1;return!0}class EU{}class Dn extends EU{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new AW(e,t,r):"array-contains"===t?new OW(e,r):"in"===t?new AU(e,r):"not-in"===t?new MW(e,r):"array-contains-any"===t?new PW(e,r):new Dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new xW(e,r):new RW(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tf(t,this.value)):null!==t&&Ng(this.value)===Ng(t)&&this.matchesComparison(Tf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return It()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Yn extends EU{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Yn(e,t)}matches(e){return v_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function v_(n){return"and"===n.op}function lP(n){return"or"===n.op}function wU(n){return bU(n)&&v_(n)}function bU(n){for(const e of n.filters)if(e instanceof Yn)return!1;return!0}function IU(n){if(n instanceof Dn)return n.field.canonicalString()+n.op.toString()+__(n.value);{const e=n.filters.map(t=>IU(t)).join(",");return`${n.op}(${e})`}}function CU(n,e){return n instanceof Dn?(t=n,(r=e)instanceof Dn&&t.op===r.op&&t.field.isEqual(r.field)&&sl(t.value,r.value)):n instanceof Yn?function(t,r){return r instanceof Yn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,u)=>i&&CU(s,r.filters[u]),!0)}(n,e):void It();var t,r}function DU(n,e){const t=n.filters.concat(e);return Yn.create(t,n.op)}function TU(n){return n instanceof Dn?`${(e=n).field.canonicalString()} ${e.op} ${__(e.value)}`:n instanceof Yn?function(e){return e.op.toString()+" {"+e.getFilters().map(TU).join(" ,")+"}"}(n):"Filter";var e}class AW extends Dn{constructor(e,t,r){super(e,t,r),this.key=mt.fromName(r.referenceValue)}matches(e){const t=mt.comparator(e.key,this.key);return this.matchesComparison(t)}}class xW extends Dn{constructor(e,t){super(e,"in",t),this.keys=SU(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RW extends Dn{constructor(e,t){super(e,"not-in",t),this.keys=SU(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function SU(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>mt.fromName(r.referenceValue))}class OW extends Dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uw(t)&&Vw(t.arrayValue,this.value)}}class AU extends Dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vw(this.value.arrayValue,t)}}class MW extends Dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vw(this.value.arrayValue,t)}}class PW extends Dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vw(this.value.arrayValue,r))}}class E_{constructor(e,t="asc"){this.field=e,this.dir=t}}function NW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class ci{constructor(e,t){this.comparator=e,this.root=t||ys.EMPTY}insert(e,t){return new ci(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ys.BLACK,null,null))}remove(e){return new ci(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ys.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new DS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new DS(this.root,e,this.comparator,!1)}getReverseIterator(){return new DS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new DS(this.root,e,this.comparator,!0)}}class DS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ys{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ys.RED,this.left=i??ys.EMPTY,this.right=s??ys.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ys(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ys.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ys.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}ys.EMPTY=null,ys.RED=!0,ys.BLACK=!1,ys.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ys(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xn{constructor(e){this.comparator=e,this.data=new ci(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xU(this.data.getIterator())}getIteratorFrom(e){return new xU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Xn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xn(this.comparator);return t.data=e,t}}class xU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function w_(n){return n.hasNext()?n.getNext():void 0}class va{constructor(e){this.fields=e,e.sort(ai.comparator)}static empty(){return new va([])}unionWith(e){let t=new Xn(ai.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new va(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return y_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class _s{constructor(e){this.value=e}static empty(){return new _s({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!CS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bw(t)}setAll(e){let t=ai.emptyPath(),r={},i=[];e.forEach((u,l)=>{if(!t.isImmediateParentOf(l)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=l.popLast()}u?r[l.lastSegment()]=Bw(u):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());CS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];CS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Mg(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new _s(Bw(this.value))}}function RU(n){const e=[];return Mg(n.fields,(t,r)=>{const i=new ai([t]);if(CS(r)){const s=RU(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new va(e)}class br{constructor(e,t,r,i,s,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=l}static newInvalidDocument(e){return new br(e,0,kt.min(),kt.min(),kt.min(),_s.empty(),0)}static newFoundDocument(e,t,r,i){return new br(e,1,t,kt.min(),r,i,0)}static newNoDocument(e,t){return new br(e,2,t,kt.min(),kt.min(),_s.empty(),0)}static newUnknownDocument(e,t){return new br(e,3,t,kt.min(),kt.min(),_s.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(kt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_s.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_s.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new br(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kW{constructor(e,t=null,r=[],i=[],s=null,u=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=l,this.ft=null}}function dP(n,e=null,t=[],r=[],i=null,s=null,u=null){return new kW(n,e,t,r,i,s,u)}function Fg(n){const e=yt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>IU(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),kw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>__(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>__(r)).join(",")),e.ft=t}return e.ft}function jw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vU(n.startAt,e.startAt)&&vU(n.endAt,e.endAt)}function TS(n){return mt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function SS(n,e){return n.filters.filter(t=>t instanceof Dn&&t.field.isEqual(e))}function OU(n,e,t){let r=IS,i=!0;for(const s of SS(n,e)){let u=IS,l=!0;switch(s.op){case"<":case"<=":u=TW(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,l=!1;break;case"!=":case"not-in":u=IS}mU({value:r,inclusive:i},{value:u,inclusive:l})<0&&(r=u,i=l)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];mU({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function MU(n,e,t){let r=Df,i=!0;for(const s of SS(n,e)){let u=Df,l=!0;switch(s.op){case">=":case">":u=SW(s.value),l=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,l=!1;break;case"!=":case"not-in":u=Df}yU({value:r,inclusive:i},{value:u,inclusive:l})>0&&(r=u,i=l)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];yU({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Pd{constructor(e,t=null,r=[],i=[],s=null,u="F",l=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=l,this.endAt=p,this.dt=null,this._t=null}}function PU(n,e,t,r,i,s,u,l){return new Pd(n,e,t,r,i,s,u,l)}function b_(n){return new Pd(n)}function NU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function hP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function AS(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function fP(n){return null!==n.collectionGroup}function Lg(n){const e=yt(n);if(null===e.dt){e.dt=[];const t=AS(e),r=hP(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new E_(t)),e.dt.push(new E_(ai.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new E_(ai.keyField(),s))}}}return e.dt}function so(n){const e=yt(n);if(!e._t)if("F"===e.limitType)e._t=dP(e.path,e.collectionGroup,Lg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Lg(e))t.push(new E_(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Sf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Sf(e.startAt.position,e.startAt.inclusive):null;e._t=dP(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function pP(n,e){e.getFirstInequalityField(),AS(n);const t=n.filters.concat([e]);return new Pd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xS(n,e,t){return new Pd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $w(n,e){return jw(so(n),so(e))&&n.limitType===e.limitType}function kU(n){return`${Fg(so(n))}|lt:${n.limitType}`}function gP(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>TU(r)).join(", ")}]`),kw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>__(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>__(r)).join(",")),`Target(${t})`}(so(n))}; limitType=${n.limitType})`}function mP(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):mt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Lg(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const l=_U(i,s,u);return i.inclusive?l<=0:l<0}(t.startAt,Lg(t),r)||t.endAt&&!function(i,s,u){const l=_U(i,s,u);return i.inclusive?l>=0:l>0}(t.endAt,Lg(t),r)));var t,r}function FU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LU(n){return(e,t)=>{let r=!1;for(const i of Lg(n)){const s=FW(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function FW(n,e,t){const r=n.field.isKeyField()?mt.comparator(e.key,t.key):function(i,s,u){const l=s.data.field(i),p=u.data.field(i);return null!==l&&null!==p?Tf(l,p):It()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return It()}}function VU(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fw(e)?"-0":e}}function UU(n){return{integerValue:""+n}}function BU(n,e){return lU(e)?UU(e):VU(n,e)}class RS{constructor(){this._=void 0}}function LW(n,e,t){return n instanceof I_?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Vg?$U(n,e):n instanceof Ug?HU(n,e):function(r,i){const s=jU(r,i),u=GU(s)+GU(r.gt);return cP(s)&&cP(r.gt)?UU(u):VU(r.yt,u)}(n,e)}function VW(n,e,t){return n instanceof Vg?$U(n,e):n instanceof Ug?HU(n,e):t}function jU(n,e){return n instanceof C_?cP(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class I_ extends RS{}class Vg extends RS{constructor(e){super(),this.elements=e}}function $U(n,e){const t=qU(e);for(const r of n.elements)t.some(i=>sl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ug extends RS{constructor(e){super(),this.elements=e}}function HU(n,e){let t=qU(e);for(const r of n.elements)t=t.filter(i=>!sl(i,r));return{arrayValue:{values:t}}}class C_ extends RS{constructor(e,t){super(),this.yt=e,this.gt=t}}function GU(n){return ui(n.integerValue||n.doubleValue)}function qU(n){return Uw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hw{constructor(e,t){this.field=e,this.transform=t}}class BW{constructor(e,t){this.version=e,this.transformResults=t}}class kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function OS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class MS{}function WU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new T_(n.key,kr.none()):new D_(n.key,n.data,kr.none());{const t=n.data,r=_s.empty();let i=new Xn(ai.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new Nd(n.key,r,new va(i.toArray()),kr.none())}}function jW(n,e,t){n instanceof D_?function(r,i,s){const u=r.value.clone(),l=ZU(r.fieldTransforms,i,s.transformResults);u.setAll(l),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Nd?function(r,i,s){if(!OS(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=ZU(r.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(KU(r)),l.setAll(u),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Gw(n,e,t,r){return n instanceof D_?function(i,s,u,l){if(!OS(i.precondition,s))return u;const p=i.value.clone(),_=QU(i.fieldTransforms,l,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Nd?function(i,s,u,l){if(!OS(i.precondition,s))return u;const p=QU(i.fieldTransforms,l,s),_=s.data;return _.setAll(KU(i)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(w=>w.field))}(n,e,t,r):(u=t,OS(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function $W(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=jU(r.transform,i||null);null!=s&&(null===t&&(t=_s.empty()),t.set(r.field,s))}return t||null}function zU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&y_(t,r,(i,s)=>function UW(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Vg&&r instanceof Vg||t instanceof Ug&&r instanceof Ug?y_(t.elements,r.elements,sl):t instanceof C_&&r instanceof C_?sl(t.gt,r.gt):t instanceof I_&&r instanceof I_);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class D_ extends MS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Nd extends MS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function KU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ZU(n,e,t){const r=new Map;Ot(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,l=e.data.field(s.field);r.set(s.field,VW(u,l,t[i]))}return r}function QU(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,LW(s,u,e))}return r}class T_ extends MS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yP extends MS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class HW{constructor(e){this.count=e}}var Oi,Pn;function YU(n){switch(n){default:return It();case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0}}function JU(n){if(void 0===n)return wi("GRPC error has no .code"),Se.UNKNOWN;switch(n){case Oi.OK:return Se.OK;case Oi.CANCELLED:return Se.CANCELLED;case Oi.UNKNOWN:return Se.UNKNOWN;case Oi.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case Oi.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case Oi.INTERNAL:return Se.INTERNAL;case Oi.UNAVAILABLE:return Se.UNAVAILABLE;case Oi.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case Oi.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case Oi.NOT_FOUND:return Se.NOT_FOUND;case Oi.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case Oi.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case Oi.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case Oi.ABORTED:return Se.ABORTED;case Oi.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case Oi.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case Oi.DATA_LOSS:return Se.DATA_LOSS;default:return It()}}(Pn=Oi||(Oi={}))[Pn.OK=0]="OK",Pn[Pn.CANCELLED=1]="CANCELLED",Pn[Pn.UNKNOWN=2]="UNKNOWN",Pn[Pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pn[Pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pn[Pn.NOT_FOUND=5]="NOT_FOUND",Pn[Pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pn[Pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pn[Pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pn[Pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pn[Pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pn[Pn.ABORTED=10]="ABORTED",Pn[Pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pn[Pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pn[Pn.INTERNAL=13]="INTERNAL",Pn[Pn.UNAVAILABLE=14]="UNAVAILABLE",Pn[Pn.DATA_LOSS=15]="DATA_LOSS";class Af{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mg(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return cU(this.inner)}size(){return this.innerSize}}const GW=new ci(mt.comparator);function Po(){return GW}const XU=new ci(mt.comparator);function qw(...n){let e=XU;for(const t of n)e=e.insert(t.key,t);return e}function eB(n){let e=XU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ol(){return Ww()}function tB(){return Ww()}function Ww(){return new Af(n=>n.toString(),(n,e)=>n.isEqual(e))}const qW=new ci(mt.comparator),WW=new Xn(mt.comparator);function sn(...n){let e=WW;for(const t of n)e=e.add(t);return e}const zW=new Xn(Yt);function PS(){return zW}class zw{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Kw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new zw(kt.min(),i,PS(),Po(),sn())}}class Kw{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Kw(r,t,sn(),sn(),sn())}}class NS{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class nB{constructor(e,t){this.targetId=e,this.Et=t}}class rB{constructor(e,t,r=qi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class iB{constructor(){this.At=0,this.Rt=oB(),this.bt=qi.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=sn(),t=sn(),r=sn();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:It()}}),new Kw(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=oB()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class KW{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Po(),this.qt=sB(),this.Ut=new Xn(Yt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:It()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const s=i.target;if(TS(s))if(0===r){const u=new mt(s.path);this.Qt(t,u,br.newNoDocument(u,kt.min()))}else Ot(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((s,u)=>{const l=this.Yt(u);if(l){if(s.current&&TS(l.target)){const p=new mt(l.target.path);null!==this.Lt.get(p)||this.te(u,p)||this.Qt(u,p,br.newNoDocument(p,e))}s.St&&(t.set(u,s.Ct()),s.xt())}});let r=sn();this.qt.forEach((s,u)=>{let l=!0;u.forEachWhile(p=>{const _=this.Yt(p);return!_||2===_.purpose||(l=!1,!1)}),l&&(r=r.add(s))}),this.Lt.forEach((s,u)=>u.setReadTime(e));const i=new zw(e,t,this.Ut,this.Lt,r);return this.Lt=Po(),this.qt=sB(),this.Ut=new Xn(Yt),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new iB,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Xn(Yt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Je("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new iB),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function sB(){return new ci(mt.comparator)}function oB(){return new ci(mt.comparator)}const ZW={asc:"ASCENDING",desc:"DESCENDING"},QW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YW={and:"AND",or:"OR"};class JW{constructor(e,t){this.databaseId=e,this.wt=t}}function S_(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aB(n,e){return n.wt?e.toBase64():e.toUint8Array()}function XW(n,e){return S_(n,e.toTimestamp())}function bi(n){return Ot(!!n),kt.fromTimestamp(function(e){const t=Cf(e);return new Nr(t.seconds,t.nanos)}(n))}function _P(n,e){return(t=n,new Mn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function uB(n){const e=Mn.fromString(n);return Ot(yB(e)),e}function Zw(n,e){return _P(n.databaseId,e.path)}function al(n,e){const t=uB(e);if(t.get(1)!==n.databaseId.projectId)throw new Ge(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ge(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new mt(lB(t))}function vP(n,e){return _P(n.databaseId,e)}function cB(n){const e=uB(n);return 4===e.length?Mn.emptyPath():lB(e)}function Qw(n){return new Mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lB(n){return Ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function dB(n,e,t){return{name:Zw(n,e),fields:t.value.mapValue.fields}}function hB(n,e,t){const r=al(n,e.name),i=bi(e.updateTime),s=e.createTime?bi(e.createTime):kt.min(),u=new _s({mapValue:{fields:e.fields}}),l=br.newFoundDocument(r,i,s,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Yw(n,e){let t;if(e instanceof D_)t={update:dB(n,e.key,e.value)};else if(e instanceof T_)t={delete:Zw(n,e.key)};else if(e instanceof Nd)t={update:dB(n,e.key,e.data),updateMask:az(e.fieldMask)};else{if(!(e instanceof yP))return It();t={verify:Zw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof I_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Vg)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ug)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof C_)return{fieldPath:s.field.canonicalString(),increment:u.gt};throw It()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:XW(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:It()),t;var i}function EP(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?kr.updateTime(bi(i.updateTime)):void 0!==i.exists?kr.exists(i.exists):kr.none():kr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let l=null;"setToServerValue"in u?(Ot("REQUEST_TIME"===u.setToServerValue),l=new I_):"appendMissingElements"in u?l=new Vg(u.appendMissingElements.values||[]):"removeAllFromArray"in u?l=new Ug(u.removeAllFromArray.values||[]):"increment"in u?l=new C_(s,u.increment):It();const p=ai.fromServerFormat(u.fieldPath);return new Hw(p,l)}(n,i)):[];var i;if(e.update){const i=al(n,e.update.name),s=new _s({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new va((e.updateMask.fieldPaths||[]).map(_=>ai.fromServerFormat(_)));return new Nd(i,s,u,t,r)}return new D_(i,s,t,r)}if(e.delete){const i=al(n,e.delete);return new T_(i,t)}if(e.verify){const i=al(n,e.verify);return new yP(i,t)}return It()}function fB(n,e){return{documents:[vP(n,e.path)]}}function wP(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=vP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=vP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0!==p.length)return mB(Yn.create(p,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:A_((w=_).field),direction:iz(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=(_=e.limit,n.wt||kw(_)?_:{value:_});var _,l,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function pB(n){let e=cB(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ot(1===r);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=function(w){const I=gB(w);return I instanceof Yn&&wU(I)?I.getFilters():[I]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(w=>{return new E_(x_((I=w).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let l=null;t.limit&&(l=function(w){let I;return I="object"==typeof w?w.value:w,kw(I)?null:I}(t.limit));let p=null;var w;t.startAt&&(p=new Sf((w=t.startAt).values||[],!!w.before));let _=null;return t.endAt&&(_=function(w){return new Sf(w.values||[],!w.before)}(t.endAt)),PU(e,i,u,s,l,"F",p,_)}function gB(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=x_(e.unaryFilter.field);return Dn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=x_(e.unaryFilter.field);return Dn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=x_(e.unaryFilter.field);return Dn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=x_(e.unaryFilter.field);return Dn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return It()}}(n):void 0!==n.fieldFilter?Dn.create(x_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Yn.create(e.compositeFilter.filters.map(t=>gB(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return It()}}(e.compositeFilter.op))}(n):It();var e}function iz(n){return ZW[n]}function sz(n){return QW[n]}function oz(n){return YW[n]}function A_(n){return{fieldPath:n.canonicalString()}}function x_(n){return ai.fromServerFormat(n.fieldPath)}function mB(n){return n instanceof Dn?function(e){if("=="===e.op){if(pU(e.value))return{unaryFilter:{field:A_(e.field),op:"IS_NAN"}};if(fU(e.value))return{unaryFilter:{field:A_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pU(e.value))return{unaryFilter:{field:A_(e.field),op:"IS_NOT_NAN"}};if(fU(e.value))return{unaryFilter:{field:A_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:A_(e.field),op:sz(e.op),value:e.value}}}(n):n instanceof Yn?function(e){const t=e.getFilters().map(r=>mB(r));return 1===t.length?t[0]:{compositeFilter:{op:oz(e.op),filters:t}}}(n):It()}function az(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function oo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_B(e)),e=uz(n.get(t),e);return _B(e)}function uz(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function _B(n){return n+"\x01\x01"}function ul(n){const e=n.length;if(Ot(e>=2),2===e)return Ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Mn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&It(),n.charAt(u+1)){case"\x01":const l=n.substring(s,u);let p;0===i.length?p=l:(i+=l,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:It()}s=u+2}return new Mn(r)}const vB=["userId","batchId"];function kS(n,e){return[n,oo(e)]}function EB(n,e,t){return[n,oo(e),t]}const cz={},lz=["prefixPath","collectionGroup","readTime","documentId"],dz=["prefixPath","collectionGroup","documentId"],hz=["collectionGroup","readTime","prefixPath","documentId"],fz=["canonicalId","targetId"],pz=["targetId","path"],gz=["path","targetId"],mz=["collectionId","parent"],yz=["indexId","uid"],_z=["uid","sequenceNumber"],vz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ez=["indexId","uid","orderedDocumentKey"],wz=["userId","collectionPath","documentId"],bz=["userId","collectionPath","largestBatchId"],Iz=["userId","collectionGroup","largestBatchId"],wB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cz=[...wB,"documentOverlays"],bB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IB=bB,Dz=[...IB,"indexConfiguration","indexState","indexEntries"];class bP extends oU{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function is(n,e){const t=yt(n);return Yu.M(t.se,e)}class IP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&jW(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Gw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Gw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tB();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let l=this.applyToLocalView(u,s.mutatedFields);l=t.has(i.key)?null:l;const p=WU(u,l);null!==p&&r.set(i.key,p),u.isValidDocument()||u.convertToNoDocument(kt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sn())}isEqual(e){return this.batchId===e.batchId&&y_(this.mutations,e.mutations,(t,r)=>zU(t,r))&&y_(this.baseMutations,e.baseMutations,(t,r)=>zU(t,r))}}class CP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ot(e.mutations.length===r.length);let i=qW;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new CP(e,t,r,i)}}class DP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xf{constructor(e,t,r,i,s=kt.min(),u=kt.min(),l=qi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=l}withSequenceNumber(e){return new xf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class CB{constructor(e){this.ie=e}}function DB(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:FS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Zw(i=n.ie,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:S_(i,s.version.toTimestamp()),createTime:S_(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bg(e.version)};else{if(!e.isUnknownDocument())return It();r.unknownDocument={path:t.path.toArray(),version:Bg(e.version)}}var i,s;return r}function FS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jg(n){const e=new Nr(n.seconds,n.nanoseconds);return kt.fromTimestamp(e)}function $g(n,e){const t=(e.baseMutations||[]).map(s=>EP(n.ie,s));for(let s=0;s<e.mutations.length-1;++s){const u=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(u.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>EP(n.ie,s)),i=Nr.fromMillis(e.localWriteTimeMs);return new IP(e.batchId,i,t,r)}function Jw(n){const e=jg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jg(n.lastLimboFreeSnapshotVersion):kt.min();let r;var i;return void 0!==n.query.documents?(Ot(1===(i=n.query).documents.length),r=so(b_(cB(i.documents[0])))):r=so(pB(n.query)),new xf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,qi.fromBase64String(n.resumeToken))}function TB(n,e){const t=Bg(e.snapshotVersion),r=Bg(e.lastLimboFreeSnapshotVersion);let i;i=TS(e.target)?fB(n.ie,e.target):wP(n.ie,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fg(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function TP(n){const e=pB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?xS(e,e.limit,"L"):e}function SP(n,e){return new DP(e.largestBatchId,EP(n.ie,e.overlayMutation))}function SB(n,e){const t=e.path.lastSegment();return[n,oo(e.path.popLast()),t]}function AB(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Bg(r.readTime),documentKey:oo(r.documentKey.path),largestBatchId:r.largestBatchId}}class Sz{getBundleMetadata(e,t){return xB(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:jg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return xB(e).put({bundleId:(r=t).id,createTime:Bg(bi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return RB(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:TP(i.bundledQuery),readTime:jg(i.readTime)};var i})}saveNamedQuery(e,t){return RB(e).put({name:(r=t).name,readTime:Bg(bi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function xB(n){return is(n,"bundles")}function RB(n){return is(n,"namedQueries")}class LS{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new LS(e,t.uid||"")}getOverlay(e,t){return Xw(e).get(SB(this.userId,t)).next(r=>r?SP(this.yt,r):null)}getOverlays(e,t){const r=ol();return Ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const l=new DP(t,u);i.push(this.oe(e,l))}),Ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(oo(u.getCollectionPath())));const s=[];return i.forEach(u=>{const l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(Xw(e).Y("collectionPathOverlayIndex",l))}),Ce.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ol(),s=oo(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Xw(e).W("collectionPathOverlayIndex",u).next(l=>{for(const p of l){const _=SP(this.yt,p);i.set(_.getKey(),_)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ol();let u;const l=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xw(e).Z({index:"collectionGroupOverlayIndex",range:l},(p,_,w)=>{const I=SP(this.yt,_);s.size()<i||I.largestBatchId===u?(s.set(I.getKey(),I),u=I.largestBatchId):w.done()}).next(()=>s)}oe(e,t){return Xw(e).put(function(r,i,s){const[u,l,p]=SB(i,s.mutation.key);return{userId:i,collectionPath:l,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Yw(r.ie,s.mutation)}}(this.yt,this.userId,t))}}function Xw(n){return is(n,"documentOverlays")}class Hg{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ui(e.integerValue));else if("doubleValue"in e){const r=ui(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Fw(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Pg(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?gU(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):It()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),mt.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function Az(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function OB(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=Az(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Hg.Ie=new Hg;class xz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=OB(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=OB(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Rz{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class Oz{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class eb{constructor(){this.$e=new xz,this.Be=new Rz(this.$e),this.Le=new Oz(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Gg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gg(this.indexId,this.documentKey,this.arrayValue,r)}}function Rf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=MB(n.arrayValue,e.arrayValue),0!==t?t:(t=MB(n.directionalValue,e.directionalValue),0!==t?t:mt.comparator(n.documentKey,e.documentKey)))}function MB(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Mz{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){Ot(e.collectionGroup===this.collectionId);const t=rP(e);if(void 0!==t&&!this.We(t))return!1;const r=Rg(e);let i=0,s=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const u=r[i];if(!this.ze(this.Qe,u)||!this.He(this.Ke[s++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(s>=this.Ke.length||!this.He(this.Ke[s++],u))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function PB(n){var e,t;if(Ot(n instanceof Dn||n instanceof Yn),n instanceof Dn){if(n instanceof AU){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Dn.create(n.field,"==",s)))||[];return Yn.create(i,"or")}return n}const r=n.filters.map(i=>PB(i));return Yn.create(r,n.op)}function Pz(n){if(0===n.getFilters().length)return[];const e=RP(PB(n));return Ot(NB(e)),AP(e)||xP(e)?[e]:e.getFilters()}function AP(n){return n instanceof Dn}function xP(n){return n instanceof Yn&&wU(n)}function NB(n){return AP(n)||xP(n)||function(e){if(e instanceof Yn&&lP(e)){for(const t of e.getFilters())if(!AP(t)&&!xP(t))return!1;return!0}return!1}(n)}function RP(n){if(Ot(n instanceof Dn||n instanceof Yn),n instanceof Dn)return n;if(1===n.filters.length)return RP(n.filters[0]);const e=n.filters.map(r=>RP(r));let t=Yn.create(e,n.op);return t=VS(t),NB(t)?t:(Ot(t instanceof Yn),Ot(v_(t)),Ot(t.filters.length>1),t.filters.reduce((r,i)=>OP(r,i)))}function OP(n,e){let t;return Ot(n instanceof Dn||n instanceof Yn),Ot(e instanceof Dn||e instanceof Yn),t=n instanceof Dn?e instanceof Dn?Yn.create([n,e],"and"):kB(n,e):e instanceof Dn?kB(e,n):function(r,i){if(Ot(r.filters.length>0&&i.filters.length>0),v_(r)&&v_(i))return DU(r,i.getFilters());const s=lP(r)?r:i,u=lP(r)?i:r,l=s.filters.map(p=>OP(p,u));return Yn.create(l,"or")}(n,e),VS(t)}function kB(n,e){if(v_(e))return DU(e,n.getFilters());{const t=e.filters.map(r=>OP(n,r));return Yn.create(t,"or")}}function VS(n){if(Ot(n instanceof Dn||n instanceof Yn),n instanceof Dn)return n;const e=n.getFilters();if(1===e.length)return VS(e[0]);if(bU(n))return n;const t=e.map(i=>VS(i)),r=[];return t.forEach(i=>{i instanceof Dn?r.push(i):i instanceof Yn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Yn.create(r,n.op)}class Nz{constructor(){this.Je=new MP}addToCollectionParentIndex(e,t){return this.Je.add(t),Ce.resolve()}getCollectionParents(e,t){return Ce.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return Ce.resolve()}deleteFieldIndex(e,t){return Ce.resolve()}getDocumentsMatchingTarget(e,t){return Ce.resolve(null)}getIndexType(e,t){return Ce.resolve(0)}getFieldIndexes(e,t){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,t){return Ce.resolve(ya.min())}getMinOffsetFromCollectionGroup(e,t){return Ce.resolve(ya.min())}updateCollectionGroup(e,t,r){return Ce.resolve()}updateIndexEntries(e,t){return Ce.resolve()}}class MP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xn(Mn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xn(Mn.comparator)).toArray()}}const US=new Uint8Array(0);class kz{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new MP,this.Xe=new Af(r=>Fg(r),(r,i)=>jw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const s={collectionId:r,parent:oo(i)};return FB(e).put(s)}return Ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[nU(t),""],!1,!0);return FB(e).W(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(ul(u.parent))}return r})}addFieldIndex(e,t){const r=BS(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var u;delete i.indexId;const s=r.add(i);if(t.indexState){const u=nb(e);return s.next(l=>{u.put(AB(l,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=BS(e),i=nb(e),s=tb(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=tb(e);let i=!0;const s=new Map;return Ce.forEach(this.Ze(t),u=>this.tn(e,u).next(l=>{i&&(i=!!l),s.set(u,l)})).next(()=>{if(i){let u=sn();const l=[];return Ce.forEach(s,(p,_)=>{var w;Je("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(_e=>`${_e.fieldPath}:${_e.kind}`).join(",")}`} to execute ${Fg(t)}`);const I=function(_e,Le){const Xe=rP(Le);if(void 0===Xe)return null;for(const rt of SS(_e,Xe.fieldPath))switch(rt.op){case"array-contains-any":return rt.value.arrayValue.values||[];case"array-contains":return[rt.value]}return null}(_,p),S=function(_e,Le){const Xe=new Map;for(const rt of Rg(Le))for(const Et of SS(_e,rt.fieldPath))switch(Et.op){case"==":case"in":Xe.set(rt.fieldPath.canonicalString(),Et.value);break;case"not-in":case"!=":return Xe.set(rt.fieldPath.canonicalString(),Et.value),Array.from(Xe.values())}return null}(_,p),M=function(_e,Le){const Xe=[];let rt=!0;for(const Et of Rg(Le)){const Bt=0===Et.kind?OU(_e,Et.fieldPath,_e.startAt):MU(_e,Et.fieldPath,_e.startAt);Xe.push(Bt.value),rt&&(rt=Bt.inclusive)}return new Sf(Xe,rt)}(_,p),P=function(_e,Le){const Xe=[];let rt=!0;for(const Et of Rg(Le)){const Bt=0===Et.kind?MU(_e,Et.fieldPath,_e.endAt):OU(_e,Et.fieldPath,_e.endAt);Xe.push(Bt.value),rt&&(rt=Bt.inclusive)}return new Sf(Xe,rt)}(_,p),U=this.en(p,_,M),Y=this.en(p,_,P),ge=this.nn(p,_,S),Re=this.sn(p.indexId,I,U,M.inclusive,Y,P.inclusive,ge);return Ce.forEach(Re,_e=>r.J(_e,t.limit).next(Le=>{Le.forEach(Xe=>{const rt=mt.fromSegments(Xe.documentKey);u.has(rt)||(u=u.add(rt),l.push(rt))})}))}).next(()=>l)}return Ce.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:Pz(Yn.create(e.filters,"and")).map(r=>dP(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,s,u,l){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),_=p/(null!=t?t.length:1),w=[];for(let I=0;I<p;++I){const S=t?this.rn(t[I/_]):US,M=this.on(e,S,r[I%_],i),P=this.un(e,S,s[I%_],u),U=l.map(Y=>this.on(e,S,Y,!0));w.push(...this.createRange(M,P,U))}return w}on(e,t,r,i){const s=new Gg(e,mt.empty(),t,r);return i?s:s.Ue()}un(e,t,r,i){const s=new Gg(e,mt.empty(),t,r);return i?s.Ue():s}tn(e,t){const r=new Mz(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const l of s)r.je(l)&&(!u||l.fields.length>u.fields.length)&&(u=l);return u})}getIndexType(e,t){let r=2;const i=this.Ze(t);return Ce.forEach(i,s=>this.tn(e,s).next(u=>{u?0!==r&&u.fields.length<function(l){let p=new Xn(ai.comparator),_=!1;for(const w of l.filters)for(const I of w.getFlattenedFilters())I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?_=!0:p=p.add(I.field));for(const w of l.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(_?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new eb;for(const i of Rg(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.qe(i.kind);Hg.Ie.ue(s,u)}return r.Fe()}rn(e){const t=new eb;return Hg.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new eb;return Hg.Ie.ue(kg(this.databaseId,t),r.qe(function(i){const s=Rg(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new eb);let s=0;for(const u of Rg(e)){const l=r[s++];for(const p of i)if(this.hn(t,u.fieldPath)&&Uw(l))i=this.ln(i,u,l);else{const _=p.qe(u.kind);Hg.Ie.ue(l,_)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const l of i){const p=new eb;p.seed(l.Fe()),Hg.Ie.ue(u,p.qe(t.kind)),s.push(p)}return s}hn(e,t){return!!e.filters.find(r=>r instanceof Dn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=BS(e),i=nb(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const u=[];return Ce.forEach(s,l=>i.get([l.indexId,this.uid]).next(p=>{u.push(function(_,w){const I=w?new Pw(w.sequenceNumber,new ya(jg(w.readTime),new mt(ul(w.documentKey)),w.largestBatchId)):Pw.empty(),S=_.fields.map(([M,P])=>new wS(ai.fromServerFormat(M),P));return new ES(_.indexId,_.collectionGroup,S,I)}(l,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Yt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=BS(e),s=nb(e);return this.dn(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(l=>Ce.forEach(l,p=>s.put(AB(p.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return Ce.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?Ce.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(l=>(r.set(i.collectionGroup,l),Ce.forEach(l,p=>this._n(e,i,p).next(_=>{const w=this.wn(s,p);return _.isEqual(w)?Ce.resolve():this.mn(e,s,p,_,w)}))))})}gn(e,t,r,i){return tb(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return tb(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=tb(e);let s=new Xn(Rf);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(u,l)=>{s=s.add(new Gg(r.indexId,t,l.arrayValue,l.directionalValue))}).next(()=>s)}wn(e,t){let r=new Xn(Rf);const i=this.cn(t,e);if(null==i)return r;const s=rP(t);if(null!=s){const u=e.data.field(s.fieldPath);if(Uw(u))for(const l of u.arrayValue.values||[])r=r.add(new Gg(t.indexId,e.key,this.rn(l),i))}else r=r.add(new Gg(t.indexId,e.key,US,i));return r}mn(e,t,r,i,s){Je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(l,p,_,w,I){const S=l.getIterator(),M=p.getIterator();let P=w_(S),U=w_(M);for(;P||U;){let Y=!1,ge=!1;if(P&&U){const Re=_(P,U);Re<0?ge=!0:Re>0&&(Y=!0)}else null!=P?ge=!0:Y=!0;Y?(w(U),U=w_(M)):ge?(I(P),P=w_(S)):(P=w_(S),U=w_(M))}}(i,s,Rf,l=>{u.push(this.gn(e,t,r,l))},l=>{u.push(this.yn(e,t,r,l))}),Ce.waitFor(u)}dn(e){let t=1;return nb(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,l)=>Rf(u,l)).filter((u,l,p)=>!l||0!==Rf(u,p[l-1]));const i=[];i.push(e);for(const u of r){const l=Rf(u,e),p=Rf(u,t);if(0===l)i[0]=e.Ue();else if(l>0&&p<0)i.push(u),i.push(u.Ue());else if(p>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2){if(this.pn(i[u],i[u+1]))return[];s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,US,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,US,[]]))}return s}pn(e,t){return Rf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(LB)}getMinOffset(e,t){return Ce.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||It())).next(LB)}}function FB(n){return is(n,"collectionParents")}function tb(n){return is(n,"indexEntries")}function BS(n){return is(n,"indexConfiguration")}function nb(n){return is(n,"indexState")}function LB(n){Ot(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;iP(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ya(e.readTime,e.documentKey,t)}const VB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class No{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new No(e,No.DEFAULT_COLLECTION_PERCENTILE,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function UB(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let l=0;const p=r.Z({range:u},(w,I,S)=>(l++,S.delete()));s.push(p.next(()=>{Ot(1===l)}));const _=[];for(const w of t.mutations){const I=EB(e,w.key.path,t.batchId);s.push(i.delete(I)),_.push(w.key)}return Ce.waitFor(s).next(()=>_)}function jS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw It();e=n.noDocument}return JSON.stringify(e).length}No.DEFAULT_COLLECTION_PERCENTILE=10,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,No.DEFAULT=new No(41943040,No.DEFAULT_COLLECTION_PERCENTILE,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),No.DISABLED=new No(-1,0,0);class $S{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){Ot(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new $S(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Of(e).Z({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=R_(e),u=Of(e);return u.add({}).next(l=>{Ot("number"==typeof l);const p=new IP(l,t,r,i),_=function(S,M,P){const U=P.baseMutations.map(ge=>Yw(S.ie,ge)),Y=P.mutations.map(ge=>Yw(S.ie,ge));return{userId:M,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:U,mutations:Y}}(this.yt,this.userId,p),w=[];let I=new Xn((S,M)=>Yt(S.canonicalString(),M.canonicalString()));for(const S of i){const M=EB(this.userId,S.key.path,l);I=I.add(S.key.path.popLast()),w.push(u.put(_)),w.push(s.put(M,cz))}return I.forEach(S=>{w.push(this.indexManager.addToCollectionParentIndex(e,S))}),e.addOnCommittedListener(()=>{this.In[l]=p.keys()}),Ce.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return Of(e).get(t).next(r=>r?(Ot(r.userId===this.userId),$g(this.yt,r)):null)}Tn(e,t){return this.In[t]?Ce.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Of(e).Z({index:"userMutationsIndex",range:i},(u,l,p)=>{l.userId===this.userId&&(Ot(l.batchId>=r),s=$g(this.yt,l)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Of(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Of(e).W("userMutationsIndex",t).next(r=>r.map(i=>$g(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=kS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return R_(e).Z({range:i},(u,l,p)=>{const[_,w,I]=u,S=ul(w);if(_===this.userId&&t.path.isEqual(S))return Of(e).get(I).next(M=>{if(!M)throw It();Ot(M.userId===this.userId),s.push($g(this.yt,M))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xn(Yt);const i=[];return t.forEach(s=>{const u=kS(this.userId,s.path),l=IDBKeyRange.lowerBound(u),p=R_(e).Z({range:l},(_,w,I)=>{const[S,M,P]=_,U=ul(M);S===this.userId&&s.path.isEqual(U)?r=r.add(P):I.done()});i.push(p)}),Ce.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=kS(this.userId,r),u=IDBKeyRange.lowerBound(s);let l=new Xn(Yt);return R_(e).Z({range:u},(p,_,w)=>{const[I,S,M]=p,P=ul(S);I===this.userId&&r.isPrefixOf(P)?P.length===i&&(l=l.add(M)):w.done()}).next(()=>this.En(e,l))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Of(e).get(s).next(u=>{if(null===u)throw It();Ot(u.userId===this.userId),r.push($g(this.yt,u))}))}),Ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return UB(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return R_(e).Z({range:r},(s,u,l)=>{if(s[0]===this.userId){const p=ul(s[1]);i.push(p)}else l.done()}).next(()=>{Ot(0===i.length)})})}containsKey(e,t){return BB(e,this.userId,t)}Rn(e){return jB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function BB(n,e,t){const r=kS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return R_(n).Z({range:s,X:!0},(l,p,_)=>{const[w,I,S]=l;w===e&&I===i&&(u=!0),_.done()}).next(()=>u)}function Of(n){return is(n,"mutations")}function R_(n){return is(n,"documentMutations")}function jB(n){return is(n,"mutationQueues")}class qg{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new qg(0)}static vn(){return new qg(-1)}}class Fz{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new qg(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>kt.fromTimestamp(new Nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>O_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ot(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return O_(e).Z((u,l)=>{const p=Jw(l);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>Ce.waitFor(s)).next(()=>i)}forEachTarget(e,t){return O_(e).Z((r,i)=>{const s=Jw(i);t(s)})}Vn(e){return $B(e).get("targetGlobalKey").next(t=>(Ot(null!==t),t))}Sn(e,t){return $B(e).put("targetGlobalKey",t)}Dn(e,t){return O_(e).put(TB(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Fg(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return O_(e).Z({range:i,index:"queryTargetsIndex"},(u,l,p)=>{const _=Jw(l);jw(t,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Mf(e);return t.forEach(u=>{const l=oo(u.path);i.push(s.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,u))}),Ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=Mf(e);return Ce.forEach(t,s=>{const u=oo(s.path);return Ce.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Mf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Mf(e);let s=sn();return i.Z({range:r,X:!0},(u,l,p)=>{const _=ul(u[1]),w=new mt(_);s=s.add(w)}).next(()=>s)}containsKey(e,t){const r=oo(t.path),i=IDBKeyRange.bound([r],[nU(r)],!1,!0);let s=0;return Mf(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,l],p,_)=>{0!==u&&(s++,_.done())}).next(()=>s>0)}ne(e,t){return O_(e).get(t).next(r=>r?Jw(r):null)}}function O_(n){return is(n,"targets")}function $B(n){return is(n,"targetGlobal")}function Mf(n){return is(n,"targetDocuments")}function HB([n,e],[t,r]){const i=Yt(n,t);return 0===i?Yt(e,r):i}class Lz{constructor(e){this.xn=e,this.buffer=new Xn(HB),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();HB(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Vz{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ne.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){bf(r)?Je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield wf(r)}yield t.Fn(3e5)}))}}class Uz{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ce.resolve(_a.at);const r=new Lz(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(VB)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VB):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,s,u,l,p,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),i=this.params.maximumSequenceNumbersToCollect):i=I,u=Date.now(),this.nthSequenceNumber(e,i))).next(I=>(r=I,l=Date.now(),this.removeTargets(e,r,t))).next(I=>(s=I,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(_=Date.now(),tP()<=a.in.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-w}ms\n\tDetermined least recently used ${i} in `+(l-u)+`ms\n\tRemoved ${s} targets in `+(p-l)+`ms\n\tRemoved ${I} documents in `+(_-p)+`ms\nTotal Duration: ${_-w}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:I})))}}class Bz{constructor(e,t){this.db=e,this.garbageCollector=new Uz(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return HS(e,r)}removeReference(e,t,r){return HS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return HS(e,t)}Gn(e,t){return function(r,i){let s=!1;return jB(r).tt(u=>BB(r,u,i).next(l=>(l&&(s=!0),Ce.resolve(!l)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(u,l)=>{if(l<=t){const p=this.Gn(e,u).next(_=>{if(!_)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,kt.min()),Mf(e).delete([0,oo(u.path)])))});i.push(p)}}).next(()=>Ce.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return HS(e,t)}Kn(e,t){const r=Mf(e);let i,s=_a.at;return r.Z({index:"documentTargetsIndex"},([u,l],{path:p,sequenceNumber:_})=>{0===u?(s!==_a.at&&t(new mt(ul(i)),s),s=_,i=p):s=_a.at}).next(()=>{s!==_a.at&&t(new mt(ul(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function HS(n,e){return Mf(n).put((r=n.currentSequenceNumber,{targetId:0,path:oo(e.path),sequenceNumber:r}));var r}class GB{constructor(){this.changes=new Af(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,br.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jz{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wg(e).put(r)}removeEntry(e,t,r){return Wg(e).delete(function(i,s){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],FS(s),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=br.newInvalidDocument(t);return Wg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rb(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:br.newInvalidDocument(t)};return Wg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rb(t))},(i,s)=>{r={document:this.jn(t,s),size:jS(s)}}).next(()=>r)}getEntries(e,t){let r=Po();return this.zn(e,t,(i,s)=>{const u=this.jn(i,s);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=Po(),i=new ci(mt.comparator);return this.zn(e,t,(s,u)=>{const l=this.jn(s,u);r=r.insert(s,l),i=i.insert(s,jS(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return Ce.resolve();let i=new Xn(KB);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(rb(i.first()),rb(i.last())),u=i.getIterator();let l=u.getNext();return Wg(e).Z({index:"documentKeyIndex",range:s},(p,_,w)=>{const I=mt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;l&&KB(l,I)<0;)r(l,null),l=u.getNext();l&&l.isEqual(I)&&(r(l,_),l=u.hasNext()?u.getNext():null),l?w.j(rb(l)):w.done()}).next(()=>{for(;l;)r(l,null),l=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),FS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wg(e).W(IDBKeyRange.bound(i,s,!0)).next(u=>{let l=Po();for(const p of u){const _=this.jn(mt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(_.key,_)}return l})}getAllFromCollectionGroup(e,t,r,i){let s=Po();const u=zB(t,r),l=zB(t,ya.max());return Wg(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,l,!0)},(p,_,w)=>{const I=this.jn(mt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(I.key,I),s.size===i&&w.done()}).next(()=>s)}newChangeBuffer(e){return new $z(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return WB(e).get("remoteDocumentGlobalKey").next(t=>(Ot(!!t),t))}Qn(e,t){return WB(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Tz(n,e){let t;if(e.document)t=hB(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=mt.fromSegments(e.noDocument.path),i=jg(e.noDocument.readTime);t=br.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return It();{const r=mt.fromSegments(e.unknownDocument.path),i=jg(e.unknownDocument.version);t=br.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Nr(r[0],r[1]);return kt.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(kt.min()))return r}return br.newInvalidDocument(e)}}function qB(n){return new jz(n)}class $z extends GB{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Af(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Xn((s,u)=>Yt(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const l=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,l.readTime)),u.isValidDocument()){const p=DB(this.Yn.yt,u);i=i.add(s.path.popLast()),r+=jS(p)-l.size,t.push(this.Yn.addEntry(e,s,p))}else if(r-=l.size,this.trackRemovals){const p=DB(this.Yn.yt,u.convertToNoDocument(kt.min()));t.push(this.Yn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),Ce.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,u)=>{this.Xn.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function WB(n){return is(n,"remoteDocumentGlobal")}function Wg(n){return is(n,"remoteDocumentsV14")}function rb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zB(n,e){const t=e.documentKey.path.toArray();return[n,FS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function KB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Yt(t[s],r[s]),i)return i;return i=Yt(t.length,r.length),i||(i=Yt(t[t.length-2],r[r.length-2]),i||Yt(t[t.length-1],r[r.length-1]))}class Hz{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ZB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Gw(r.mutation,i,va.empty(),Nr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,sn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=sn()){const i=ol();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=qw();return s.forEach((l,p)=>{u=u.insert(l,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=ol();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,sn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,l)=>{t.set(u,l)})})}computeViews(e,t,r,i){let s=Po();const u=Ww(),l=Ww();return t.forEach((p,_)=>{const w=r.get(_.key);i.has(_.key)&&(void 0===w||w.mutation instanceof Nd)?s=s.insert(_.key,_):void 0!==w&&(u.set(_.key,w.mutation.getFieldMask()),Gw(w.mutation,_,w.mutation.getFieldMask(),Nr.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((_,w)=>u.set(_,w)),t.forEach((_,w)=>{var I;return l.set(_,new Hz(w,null!==(I=u.get(_))&&void 0!==I?I:null))}),l))}recalculateAndSaveOverlays(e,t){const r=Ww();let i=new ci((u,l)=>u-l),s=sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const l of u)l.keys().forEach(p=>{const _=t.get(p);if(null===_)return;let w=r.get(p)||va.empty();w=l.applyToLocalView(_,w),r.set(p,w);const I=(i.get(l.batchId)||sn()).add(p);i=i.insert(l.batchId,I)})}).next(()=>{const u=[],l=i.getReverseIterator();for(;l.hasNext();){const p=l.getNext(),_=p.key,w=p.value,I=tB();w.forEach(S=>{if(!s.has(S)){const M=WU(t.get(S),r.get(S));null!==M&&I.set(S,M),s=s.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,_,I))}return Ce.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return mt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):fP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Ce.resolve(ol());let l=-1,p=s;return u.next(_=>Ce.forEach(_,(w,I)=>(l<I.largestBatchId&&(l=I.largestBatchId),s.get(w)?Ce.resolve():this.remoteDocumentCache.getEntry(e,w).next(S=>{p=p.insert(w,S)}))).next(()=>this.populateOverlays(e,_,s)).next(()=>this.computeViews(e,p,_,sn())).next(w=>({batchId:l,changes:eB(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new mt(t)).next(r=>{let i=qw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=qw();return this.indexManager.getCollectionParents(e,i).next(u=>Ce.forEach(u,l=>{const p=(_=t,w=l.child(i),new Pd(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,w;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(_=>{_.forEach((w,I)=>{s=s.insert(w,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((l,p)=>{const _=p.getKey();null===i.get(_)&&(i=i.insert(_,br.newInvalidDocument(_)))});let u=qw();return i.forEach((l,p)=>{const _=s.get(l);void 0!==_&&Gw(_.mutation,p,va.empty(),Nr.now()),mP(t,p)&&(u=u.insert(l,p))}),u})}}class Gz{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Ce.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:bi(r.createTime)}),Ce.resolve()}getNamedQuery(e,t){return Ce.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:TP(r.bundledQuery),readTime:bi(r.readTime)}),Ce.resolve();var r}}class qz{constructor(){this.overlays=new ci(mt.comparator),this.es=new Map}getOverlay(e,t){return Ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ol();return Ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.oe(e,t,s)}),Ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),Ce.resolve()}getOverlaysForCollection(e,t,r){const i=ol(),s=t.length+1,u=new mt(t.child("")),l=this.overlays.getIteratorFrom(u);for(;l.hasNext();){const p=l.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return Ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ci((_,w)=>_-w);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let w=s.get(_.largestBatchId);null===w&&(w=ol(),s=s.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const l=ol(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,w)=>l.set(_,w)),!(l.size()>=i)););return Ce.resolve(l)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new DP(t,r));let s=this.es.get(t);void 0===s&&(s=sn(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class PP{constructor(){this.ns=new Xn(ss.ss),this.rs=new Xn(ss.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ss(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ss(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new mt(new Mn([])),r=new ss(t,e),i=new ss(t,e+1),s=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),s.push(u.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new mt(new Mn([])),r=new ss(t,e),i=new ss(t,e+1);let s=sn();return this.rs.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new ss(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ss{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return mt.comparator(e.key,t.key)||Yt(e._s,t._s)}static os(e,t){return Yt(e._s,t._s)||mt.comparator(e.key,t.key)}}class Wz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Xn(ss.ss)}checkEmpty(e){return Ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const u=new IP(s,t,r,i);this.mutationQueue.push(u);for(const l of i)this.gs=this.gs.add(new ss(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Ce.resolve(u)}lookupMutationBatch(e,t){return Ce.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return Ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ss(t,0),i=new ss(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],u=>{const l=this.ys(u._s);s.push(l)}),Ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xn(Yt);return t.forEach(i=>{const s=new ss(i,0),u=new ss(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,u],l=>{r=r.add(l._s)})}),Ce.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;mt.isDocumentKey(s)||(s=s.child(""));const u=new ss(new mt(s),0);let l=new Xn(Yt);return this.gs.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(l=l.add(p._s)),!0)},u),Ce.resolve(this.Is(l))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ot(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return Ce.forEach(t.mutations,i=>{const s=new ss(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ss(t,0),i=this.gs.firstAfterOrEqual(r);return Ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Ce.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zz{constructor(e){this.Es=e,this.docs=new ci(mt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ce.resolve(r?r.document.mutableCopy():br.newInvalidDocument(t))}getEntries(e,t){let r=Po();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():br.newInvalidDocument(i))}),Ce.resolve(r)}getAllFromCollection(e,t,r){let i=Po();const s=new mt(t.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:l,value:{document:p}}=u.getNext();if(!t.isPrefixOf(l.path))break;l.path.length>t.length+1||iP(iU(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return Ce.resolve(i)}getAllFromCollectionGroup(e,t,r,i){It()}As(e,t){return Ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Kz(this)}getSize(e){return Ce.resolve(this.size)}}class Kz extends GB{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),Ce.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Zz{constructor(e){this.persistence=e,this.Rs=new Af(t=>Fg(t),jw),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new PP,this.targetCount=0,this.vs=qg.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),Ce.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new qg(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Ce.resolve()}updateTargetData(e,t){return this.Dn(t),Ce.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((u,l)=>{l.sequenceNumber<=t&&null===r.get(l.targetId)&&(this.Rs.delete(u),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Ce.waitFor(s).next(()=>i)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return Ce.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),Ce.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),Ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return Ce.resolve(r)}containsKey(e,t){return Ce.resolve(this.Ps.containsKey(t))}}class QB{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new _a(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Zz(this),this.indexManager=new Nz,this.remoteDocumentCache=new zz(r=>this.referenceDelegate.xs(r)),this.yt=new CB(t),this.Ns=new Gz(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qz,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Wz(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Je("MemoryPersistence","Starting transaction:",e);const i=new Qz(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return Ce.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Qz extends oU{constructor(e){super(),this.currentSequenceNumber=e}}class GS{constructor(e){this.persistence=e,this.Fs=new PP,this.$s=null}static Bs(e){return new GS(e)}get Ls(){if(this.$s)return this.$s;throw It()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),Ce.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),Ce.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Ce.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.Ls,r=>{const i=mt.fromPath(r);return this.qs(e,i).next(s=>{s||t.removeEntry(i,kt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return Ce.or([()=>Ce.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Yz{constructor(e){this.yt=e}$(e,t,r,i){const s=new bS("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vB,{unique:!0}),l.createObjectStore("documentMutations"),YB(e),function(l){l.createObjectStore("remoteDocuments")}(e));let u=Ce.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),YB(e)),u=u.next(()=>function(l){const p=l.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:kt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(l,p){return p.store("mutations").W().next(_=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vB,{unique:!0});const w=p.store("mutations"),I=_.map(S=>w.put(S));return Ce.waitFor(I)})}(e,s))),u=u.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Us(s))),r<6&&i>=6&&(u=u.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(s))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(s))),r<11&&i>=11&&(u=u.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(l){const p=l.createObjectStore("documentOverlays",{keyPath:wz});p.createIndex("collectionPathOverlayIndex",bz,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",Iz,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(l){const p=l.createObjectStore("remoteDocumentsV14",{keyPath:lz});p.createIndex("documentKeyIndex",dz),p.createIndex("collectionGroupIndex",hz)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,s))),r<15&&i>=15&&(u=u.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:yz}).createIndex("sequenceNumberIndex",_z,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:vz}).createIndex("documentKeyIndex",Ez,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=jS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>Ce.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(l=>Ce.forEach(l,p=>{Ot(p.userId===s.userId);const _=$g(this.yt,p);return UB(e,s.userId,_).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((u,l)=>{const p=new Mn(u),_=[0,oo(p)];s.push(t.get(_).next(w=>w?Ce.resolve():t.put({targetId:0,path:oo(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Ce.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:mz});const r=t.store("collectionParents"),i=new MP,s=u=>{if(i.add(u)){const l=u.lastSegment(),p=u.popLast();return r.put({collectionId:l,parent:oo(p)})}};return t.store("remoteDocuments").Z({X:!0},(u,l)=>{const p=new Mn(u);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,l,p],_)=>{const w=ul(l);return s(w.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=Jw(i),u=TB(this.yt,s);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,u)=>{const l=t.store("remoteDocumentsV14"),p=(_=u,_.document?new mt(Mn.fromString(_.document.name).popFirst(5)):_.noDocument?mt.fromSegments(_.noDocument.path):_.unknownDocument?mt.fromSegments(_.unknownDocument.path):It()).path.toArray();var _;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(l.put(w))}).next(()=>Ce.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=qB(this.yt),s=new QB(GS.Bs,this.yt.ie);return r.W().next(u=>{const l=new Map;return u.forEach(p=>{var _;let w=null!==(_=l.get(p.userId))&&void 0!==_?_:sn();$g(this.yt,p).keys().forEach(I=>w=w.add(I)),l.set(p.userId,w)}),Ce.forEach(l,(p,_)=>{const w=new rs(_),I=LS.re(this.yt,w),S=s.getIndexManager(w),M=$S.re(w,this.yt,S,s.referenceDelegate);return new ZB(i,M,I,S).recalculateAndSaveOverlaysForDocumentKeys(new bP(t,_a.at),p).next()})})}}function YB(n){n.createObjectStore("targetDocuments",{keyPath:pz}).createIndex("documentTargetsIndex",gz,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fz,{unique:!0}),n.createObjectStore("targetGlobal")}const NP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kP{constructor(e,t,r,i,s,u,l,p,_,w,I=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=u,this.document=l,this.Js=_,this.Ys=w,this.Xs=I,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=S=>Promise.resolve(),!kP.C())throw new Ge(Se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bz(this,i),this.ii=t+"main",this.yt=new CB(p),this.ri=new Yu(this.ii,this.Xs,new Yz(this.yt)),this.Cs=new Fz(this.referenceDelegate,this.yt),this.remoteDocumentCache=qB(this.yt),this.Ns=new Sz,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===w&&wi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ge(Se.FAILED_PRECONDITION,NP);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new _a(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ne.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ne.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ne.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(bf(e))return Je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return ib(e).get("owner").next(t=>Ce.resolve(this.mi(t)))}gi(e){return qS(e).delete(this.clientId)}yi(){var e=this;return(0,Ne.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=is(r,"clientMetadata");return i.W().next(s=>{const u=e.Ii(s,18e5),l=s.filter(p=>-1===u.indexOf(p));return Ce.forEach(l,p=>i.delete(p.clientId)).next(()=>l)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Ce.resolve(!0):ib(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ge(Se.FAILED_PRECONDITION,NP);return!1}}return!(!this.networkEnabled||!this.inForeground)||qS(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&l)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ne.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bP(t,_a.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>qS(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return $S.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kz(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return LS.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(u=this.Xs)?Dz:14===u?IB:13===u?bB:12===u?Cz:11===u?wB:void It();var u;let l;return this.ri.runTransaction(e,i,s,p=>(l=new bP(p,this.Ss?this.Ss.next():_a.at),"readwrite-primary"===t?this.fi(l).next(_=>!!_||this.di(l)).next(_=>{if(!_)throw wi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ge(Se.FAILED_PRECONDITION,sU);return r(l)}).next(_=>this.wi(l).next(()=>_)):this.Vi(l).next(()=>r(l)))).then(p=>(l.raiseOnCommittedEvent(),p))}Vi(e){return ib(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ge(Se.FAILED_PRECONDITION,NP)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ib(e).put("owner",t)}static C(){return Yu.C()}_i(e){const t=ib(e);return t.get("owner").next(r=>this.mi(r)?(Je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ce.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(wi(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,o.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return wi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){wi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ib(n){return is(n,"owner")}function qS(n){return is(n,"clientMetadata")}function FP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class LP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=sn(),i=sn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new LP(e,t.fromCache,r,i)}}class JB{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(NU(t))return Ce.resolve(null);let r=so(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=xS(t,null,"F"),r=so(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=sn(...s);return this.Ni.getDocuments(e,u).next(l=>this.indexManager.getMinOffset(e,r).next(p=>{const _=this.Fi(t,l);return this.$i(t,_,u,p.readTime)?this.ki(e,xS(t,null,"F")):this.Bi(e,_,t,p)}))})))}Oi(e,t,r,i){return NU(t)||i.isEqual(kt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const u=this.Fi(t,s);return this.$i(t,u,r,i)?this.Mi(e,t):(tP()<=a.in.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gP(t)),this.Bi(e,u,t,rU(i,-1)))})}Fi(e,t){let r=new Xn(LU(e));return t.forEach((i,s)=>{mP(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return tP()<=a.in.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",gP(t)),this.Ni.getDocumentsMatchingQuery(e,t,ya.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class Jz{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new ci(Yt),this.Ui=new Af(s=>Fg(s),jw),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZB(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function XB(n,e,t,r){return new Jz(n,e,t,r)}function e2(n,e){return VP.apply(this,arguments)}function VP(){return VP=(0,Ne.Z)(function*(n,e){const t=yt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],l=[];let p=sn();for(const _ of i){u.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}for(const _ of s){l.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(r,p).next(_=>({ji:_,removedBatchIds:u,addedBatchIds:l}))})})}),VP.apply(this,arguments)}function Xz(n,e){const t=yt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,l,p,_){const w=p.batch,I=w.keys();let S=Ce.resolve();return I.forEach(M=>{S=S.next(()=>_.getEntry(l,M)).next(P=>{const U=p.docVersions.get(M);Ot(null!==U),P.version.compareTo(U)<0&&(w.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),_.addEntry(P)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(l,w))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let l=sn();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(l=l.add(u.batch.mutations[p].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function t2(n){const e=yt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function e4(n,e){const t=yt(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const l=[];e.targetChanges.forEach((w,I)=>{const S=i.get(I);if(!S)return;l.push(t.Cs.removeMatchingKeys(s,w.removedDocuments,I).next(()=>t.Cs.addMatchingKeys(s,w.addedDocuments,I)));let M=S.withSequenceNumber(s.currentSequenceNumber);var P,U,Y;e.targetMismatches.has(I)?M=M.withResumeToken(qi.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):w.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(w.resumeToken,r)),i=i.insert(I,M),U=M,Y=w,(0===(P=S).resumeToken.approximateByteSize()||U.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0)&&l.push(t.Cs.updateTargetData(s,M))});let p=Po(),_=sn();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),l.push(n2(s,u,e.documentUpdates).next(w=>{p=w.Wi,_=w.zi})),!r.isEqual(kt.min())){const w=t.Cs.getLastRemoteSnapshotVersion(s).next(I=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(w)}return Ce.waitFor(l).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(t.qi=i,s))}function n2(n,e,t){let r=sn(),i=sn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=Po();return t.forEach((l,p)=>{const _=s.get(l);p.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(l)),p.isNoDocument()&&p.version.isEqual(kt.min())?(e.removeEntry(l,p.readTime),u=u.insert(l,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),u=u.insert(l,p)):Je("LocalStore","Ignoring outdated watch update for ",l,". Current version:",_.version," Watch version:",p.version)}),{Wi:u,zi:i}})}function t4(n,e){const t=yt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function M_(n,e){const t=yt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,Ce.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new xf(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function P_(n,e,t){return UP.apply(this,arguments)}function UP(){return UP=(0,Ne.Z)(function*(n,e,t){const r=yt(n),i=r.qi.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!bf(u))throw u;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),UP.apply(this,arguments)}function WS(n,e,t){const r=yt(n);let i=kt.min(),s=sn();return r.persistence.runTransaction("Execute query","readonly",u=>function(l,p,_){const w=yt(l),I=w.Ui.get(_);return void 0!==I?Ce.resolve(w.qi.get(I)):w.Cs.getTargetData(p,_)}(r,u,so(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,l.targetId).next(p=>{s=p})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:kt.min(),t?s:sn())).next(l=>(s2(r,FU(e),l),{documents:l,Hi:s})))}function r2(n,e){const t=yt(n),r=yt(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ne(s,e).next(u=>u?u.target:null))}function i2(n,e){const t=yt(n),r=t.Ki.get(e)||kt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,rU(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(s2(t,e,i),i))}function s2(n,e,t){let r=n.Ki.get(e)||kt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function BP(){return BP=(0,Ne.Z)(function*(n,e,t,r){const i=yt(n);let s=sn(),u=Po();for(const _ of t){const w=e.Ji(_.metadata.name);_.document&&(s=s.add(w));const I=e.Yi(_);I.setReadTime(e.Xi(_.metadata.readTime)),u=u.insert(w,I)}const l=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield M_(i,(_=r,so(b_(Mn.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>n2(_,l,u).next(w=>(l.apply(_),w)).next(w=>i.Cs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>i.Cs.addMatchingKeys(_,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(_,w.Wi,w.zi)).next(()=>w.Wi)))}),BP.apply(this,arguments)}function r4(n,e){return jP.apply(this,arguments)}function jP(){return jP=(0,Ne.Z)(function*(n,e,t=sn()){const r=yield M_(n,so(TP(e.bundledQuery))),i=yt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=bi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(s,e);const l=r.withResumeToken(qi.EMPTY_BYTE_STRING,u);return i.qi=i.qi.insert(l.targetId,l),i.Cs.updateTargetData(s,l).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),jP.apply(this,arguments)}function o2(n,e){return`firestore_clients_${n}_${e}`}function a2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function $P(n,e){return`firestore_targets_${n}_${e}`}class zS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new Ge(i.error.code,i.error.message))),u?new zS(e,t,i.state,s):(wi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sb{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ge(r.error.code,r.error.message))),s?new sb(e,r.state,i):(wi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class KS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=PS();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=lU(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new KS(e,s):(wi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class HP{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new HP(t.clientId,t.onlineState):(wi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class GP{constructor(){this.activeTargetIds=PS()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qP{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ci(Yt),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=o2(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new GP),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(o2(e.persistenceKey,i));if(s){const u=KS.Zi(i,s);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem($P(this.persistenceKey,e));if(r){const i=sb.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($P(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Je("SharedClientState","READ",e,t),t}setItem(e,t){Je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void wi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ne.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let u=_a.at;if(null!=s)try{const l=JSON.parse(s);Ot("number"==typeof l),u=l}catch(l){wi("SharedClientState","Failed to read sequence number from WebStorage",l)}return u}(r.newValue);i!==_a.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new zS(this.currentUser,e,t,r),s=a2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=a2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=$P(this.persistenceKey,e),s=new sb(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return KS.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return zS.Zi(new rs(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return sb.Zi(i,t)}yr(e){return HP.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ne.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),u=[],l=[];return s.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{s.has(p)||l.push(p)}),this.syncEngine.Br(u,l).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=PS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class u2{constructor(){this.Lr=new GP,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new GP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class i4{Ur(e){}shutdown(){}}class c2{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const s4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o4{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class a4 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const u=this.ho(e,t);Je("RestConnection","Sending: ",u,r);const l={};return this.lo(l,i,s),this.fo(e,u,l,r).then(p=>(Je("RestConnection","Received: ",p),p),p=>{throw xg("RestConnection",`${e} failed with error: `,p,"url: ",u,"request:",r),p})}_o(e,t,r,i,s,u){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+m_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${s4[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,u)=>{const l=new oW;l.setWithCredentials(!0),l.listenOnce(rW.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case eP.NO_ERROR:const _=l.getResponseJson();Je("Connection","XHR received:",JSON.stringify(_)),s(_);break;case eP.TIMEOUT:Je("Connection",'RPC "'+e+'" timed out'),u(new Ge(Se.DEADLINE_EXCEEDED,"Request time out"));break;case eP.HTTP_ERROR:const w=l.getStatus();if(Je("Connection",'RPC "'+e+'" failed with status:',w,"response text:",l.getResponseText()),w>0){let I=l.getResponseJson();Array.isArray(I)&&(I=I[0]);const S=I?.error;if(S&&S.status&&S.message){const M=function(P){const U=P.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(U)>=0?U:Se.UNKNOWN}(S.status);u(new Ge(M,S.message))}else u(new Ge(Se.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new Ge(Se.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{Je("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);l.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=tW(),u=nW(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new sW({})),this.lo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const p=i.join("");Je("Connection","Creating WebChannel: "+p,l);const _=s.createWebChannel(p,l);let w=!1,I=!1;const S=new o4({Hr:P=>{I?Je("Connection","Not sending because WebChannel is closed:",P):(w||(Je("Connection","Opening WebChannel transport."),_.open(),w=!0),Je("Connection","WebChannel sending:",P),_.send(P))},Jr:()=>_.close()}),M=(P,U,Y)=>{P.listen(U,ge=>{try{Y(ge)}catch(Re){setTimeout(()=>{throw Re},0)}})};return M(_,vS.EventType.OPEN,()=>{I||Je("Connection","WebChannel transport opened.")}),M(_,vS.EventType.CLOSE,()=>{I||(I=!0,Je("Connection","WebChannel transport closed"),S.io())}),M(_,vS.EventType.ERROR,P=>{I||(I=!0,xg("Connection","WebChannel transport errored:",P),S.io(new Ge(Se.UNAVAILABLE,"The operation could not be completed")))}),M(_,vS.EventType.MESSAGE,P=>{var U;if(!I){const Y=P.data[0];Ot(!!Y);const ge=Y,Re=ge.error||(null===(U=ge[0])||void 0===U?void 0:U.error);if(Re){Je("Connection","WebChannel received error:",Re);const _e=Re.status;let Le=function(rt){const Et=Oi[rt];if(void 0!==Et)return JU(Et)}(_e),Xe=Re.message;void 0===Le&&(Le=Se.INTERNAL,Xe="Unknown error status: "+_e+" with message "+Re.message),I=!0,S.io(new Ge(Le,Xe)),_.close()}else Je("Connection","WebChannel received:",Y),S.ro(Y)}}),M(u,iW.STAT_EVENT,P=>{P.stat===YV.PROXY?Je("Connection","Detected buffering proxy"):P.stat===YV.NOPROXY&&Je("Connection","Detected no buffering proxy")}),setTimeout(()=>{S.so()},0),S}}function l2(){return typeof window<"u"?window:null}function ZS(){return typeof document<"u"?document:null}function ob(n){return new JW(n,!0)}class WP{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class d2{constructor(e,t,r,i,s,u,l,p){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=l,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new WP(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ne.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ne.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ne.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===Se.RESOURCE_EXHAUSTED?(wi(t.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===Se.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ge(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ne.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class u4 extends d2{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.yt=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function tz(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:It(),i=e.targetChange.targetIds||[],s=function(p,_){return p.wt?(Ot(void 0===_||"string"==typeof _),qi.fromBase64String(_||"")):(Ot(void 0===_||_ instanceof Uint8Array),qi.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,l=u&&function(p){const _=void 0===p.code?Se.UNKNOWN:JU(p.code);return new Ge(_,p.message||"")}(u);t=new rB(r,i,s,l||null)}else if("documentChange"in e){const r=e.documentChange,i=al(n,r.document.name),s=bi(r.document.updateTime),u=r.document.createTime?bi(r.document.createTime):kt.min(),l=new _s({mapValue:{fields:r.document.fields}}),p=br.newFoundDocument(i,s,u,l);t=new NS(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=al(n,r.document),s=r.readTime?bi(r.readTime):kt.min(),u=br.newNoDocument(i,s);t=new NS([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=al(n,r.document);t=new NS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return It();{const r=e.filter,s=new HW(r.count||0);t=new nB(r.targetId,s)}}var p;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return kt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?kt.min():s.readTime?bi(s.readTime):kt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Qw(this.yt),t.addTarget=function(i,s){let u;const l=s.target;return u=TS(l)?{documents:fB(i,l)}:{query:wP(i,l)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=aB(i,s.resumeToken):s.snapshotVersion.compareTo(kt.min())>0&&(u.readTime=S_(i,s.snapshotVersion.toTimestamp())),u}(this.yt,e);const r=function rz(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return It()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Qw(this.yt),t.removeTarget=e,this.Bo(t)}}class c4 extends d2{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function nz(n,e){return n&&n.length>0?(Ot(void 0!==e),n.map(t=>function(r,i){let s=bi(r.updateTime?r.updateTime:i);return s.isEqual(kt.min())&&(s=bi(i)),new BW(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=bi(e.commitTime);return this.listener.Zo(r,t)}return Ot(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Qw(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Yw(this.yt,r))};this.Bo(t)}}class l4 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Ge(Se.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ge(Se.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection._o(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ge(Se.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class h4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(wi(t),this.ou=!1):Je("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class f4{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(l=>{r.enqueueAndForget((0,Ne.Z)(function*(){var p;kd(u)&&(Je("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ne.Z)(function*(_){const w=yt(_);w._u.add(4),yield N_(w),w.gu.set("Unknown"),w._u.delete(4),yield ab(w)}),function(_){return p.apply(this,arguments)})(u))}))}),this.gu=new h4(r,i)}}function ab(n){return KP.apply(this,arguments)}function KP(){return KP=(0,Ne.Z)(function*(n){if(kd(n))for(const e of n.wu)yield e(!0)}),KP.apply(this,arguments)}function N_(n){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,Ne.Z)(function*(n){for(const e of n.wu)yield e(!1)}),ZP.apply(this,arguments)}function QS(n,e){const t=yt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),JP(t)?YP(t):F_(t).ko()&&QP(t,e))}function ub(n,e){const t=yt(n),r=F_(t);t.du.delete(e),r.ko()&&h2(t,e),0===t.du.size&&(r.ko()?r.Fo():kd(t)&&t.gu.set("Unknown"))}function QP(n,e){n.yu.Ot(e.targetId),F_(n).zo(e)}function h2(n,e){n.yu.Ot(e),F_(n).Ho(e)}function YP(n){n.yu=new KW({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),F_(n).start(),n.gu.uu()}function JP(n){return kd(n)&&!F_(n).No()&&n.du.size>0}function kd(n){return 0===yt(n)._u.size}function f2(n){n.yu=void 0}function p4(n){return XP.apply(this,arguments)}function XP(){return XP=(0,Ne.Z)(function*(n){n.du.forEach((e,t)=>{QP(n,e)})}),XP.apply(this,arguments)}function g4(n,e){return eN.apply(this,arguments)}function eN(){return eN=(0,Ne.Z)(function*(n,e){f2(n),JP(n)?(n.gu.hu(e),YP(n)):n.gu.set("Unknown")}),eN.apply(this,arguments)}function m4(n,e,t){return tN.apply(this,arguments)}function tN(){return tN=(0,Ne.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof rB&&2===e.state&&e.cause)try{yield(r=(0,Ne.Z)(function*(i,s){const u=s.cause;for(const l of s.targetIds)i.du.has(l)&&(yield i.remoteSyncer.rejectListen(l,u),i.du.delete(l),i.yu.removeTarget(l))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield YS(n,r)}else if(e instanceof NS?n.yu.Kt(e):e instanceof nB?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(kt.min()))try{const r=yield t2(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.yu.Zt(s);return u.targetChanges.forEach((l,p)=>{if(l.resumeToken.approximateByteSize()>0){const _=i.du.get(p);_&&i.du.set(p,_.withResumeToken(l.resumeToken,s))}}),u.targetMismatches.forEach(l=>{const p=i.du.get(l);if(!p)return;i.du.set(l,p.withResumeToken(qi.EMPTY_BYTE_STRING,p.snapshotVersion)),h2(i,l);const _=new xf(p.target,l,1,p.sequenceNumber);QP(i,_)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Je("RemoteStore","Failed to raise snapshot:",r),yield YS(n,r)}var r}),tN.apply(this,arguments)}function YS(n,e,t){return nN.apply(this,arguments)}function nN(){return nN=(0,Ne.Z)(function*(n,e,t){if(!bf(e))throw e;n._u.add(1),yield N_(n),n.gu.set("Offline"),t||(t=()=>t2(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ne.Z)(function*(){Je("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield ab(n)}))}),nN.apply(this,arguments)}function p2(n,e){return e().catch(t=>YS(n,t,e))}function k_(n){return rN.apply(this,arguments)}function rN(){return rN=(0,Ne.Z)(function*(n){const e=yt(n),t=Pf(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;y4(e);)try{const i=yield t4(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,_4(e,i)}catch(i){yield YS(e,i)}g2(e)&&m2(e)}),rN.apply(this,arguments)}function y4(n){return kd(n)&&n.fu.length<10}function _4(n,e){n.fu.push(e);const t=Pf(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function g2(n){return kd(n)&&!Pf(n).No()&&n.fu.length>0}function m2(n){Pf(n).start()}function v4(n){return iN.apply(this,arguments)}function iN(){return iN=(0,Ne.Z)(function*(n){Pf(n).eu()}),iN.apply(this,arguments)}function E4(n){return sN.apply(this,arguments)}function sN(){return sN=(0,Ne.Z)(function*(n){const e=Pf(n);for(const t of n.fu)e.Xo(t.mutations)}),sN.apply(this,arguments)}function w4(n,e,t){return oN.apply(this,arguments)}function oN(){return oN=(0,Ne.Z)(function*(n,e,t){const r=n.fu.shift(),i=CP.from(r,e,t);yield p2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield k_(n)}),oN.apply(this,arguments)}function b4(n,e){return aN.apply(this,arguments)}function aN(){return aN=(0,Ne.Z)(function*(n,e){var t;e&&Pf(n).Yo&&(yield(t=(0,Ne.Z)(function*(r,i){if(YU(s=i.code)&&s!==Se.ABORTED){const u=r.fu.shift();Pf(r).Mo(),yield p2(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield k_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),g2(n)&&m2(n)}),aN.apply(this,arguments)}function y2(n,e){return uN.apply(this,arguments)}function uN(){return uN=(0,Ne.Z)(function*(n,e){const t=yt(n);t.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const r=kd(t);t._u.add(3),yield N_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield ab(t)}),uN.apply(this,arguments)}function cN(n,e){return lN.apply(this,arguments)}function lN(){return lN=(0,Ne.Z)(function*(n,e){const t=yt(n);e?(t._u.delete(2),yield ab(t)):e||(t._u.add(2),yield N_(t),t.gu.set("Unknown"))}),lN.apply(this,arguments)}function F_(n){return n.pu||(n.pu=function(e,t,r){const i=yt(e);return i.su(),new u4(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:p4.bind(null,n),Zr:g4.bind(null,n),Wo:m4.bind(null,n)}),n.wu.push(function(){var e=(0,Ne.Z)(function*(t){t?(n.pu.Mo(),JP(n)?YP(n):n.gu.set("Unknown")):(yield n.pu.stop(),f2(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Pf(n){return n.Iu||(n.Iu=function(e,t,r){const i=yt(e);return i.su(),new c4(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:v4.bind(null,n),Zr:b4.bind(null,n),tu:E4.bind(null,n),Zo:w4.bind(null,n)}),n.wu.push(function(){var e=(0,Ne.Z)(function*(t){t?(n.Iu.Mo(),yield k_(n)):(yield n.Iu.stop(),n.fu.length>0&&(Je("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class dN{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,l=new dN(e,t,u,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ge(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function L_(n,e){if(wi("AsyncQueue",`${e}: ${n}`),bf(n))return new Ge(Se.UNAVAILABLE,`${e}: ${n}`);throw n}class V_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||mt.comparator(t.key,r.key):(t,r)=>mt.comparator(t.key,r.key),this.keyedMap=qw(),this.sortedSet=new ci(this.comparator)}static emptySet(e){return new V_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof V_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new V_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _2{constructor(){this.Tu=new ci(mt.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):It():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class U_{constructor(e,t,r,i,s,u,l,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=l,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(l=>{u.push({type:0,doc:l})}),new U_(e,t,V_.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$w(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class I4{constructor(){this.Au=void 0,this.listeners=[]}}class C4{constructor(){this.queries=new Af(e=>kU(e),$w),this.onlineState="Unknown",this.Ru=new Set}}function hN(n,e){return fN.apply(this,arguments)}function fN(){return fN=(0,Ne.Z)(function*(n,e){const t=yt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new I4),i)try{s.Au=yield t.onListen(r)}catch(u){const l=L_(u,`Initialization of query '${gP(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&mN(t)}),fN.apply(this,arguments)}function pN(n,e){return gN.apply(this,arguments)}function gN(){return gN=(0,Ne.Z)(function*(n,e){const t=yt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),gN.apply(this,arguments)}function D4(n,e){const t=yt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const l of u.listeners)l.Pu(i)&&(r=!0);u.Au=i}}r&&mN(t)}function T4(n,e,t){const r=yt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function mN(n){n.Ru.forEach(e=>{e.next()})}class yN{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new U_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=U_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class S4{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class v2{constructor(e){this.yt=e}Ji(e){return al(this.yt,e)}Yi(e){return e.metadata.exists?hB(this.yt,e.document,!1):br.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return bi(e)}}class A4{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=E2(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Mn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new v2(this.yt);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const l=(t.get(u)||sn()).add(s);t.set(u,l)}}return t}complete(){var e=this;return(0,Ne.Z)(function*(){const t=yield function n4(n,e,t,r){return BP.apply(this,arguments)}(e.localStore,new v2(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield r4(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function E2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class w2{constructor(e){this.key=e}}class b2{constructor(e){this.key=e}}class I2{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=sn(),this.mutatedKeys=sn(),this.Gu=LU(e),this.Qu=new V_(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new _2,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,l=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,I)=>{const S=i.get(w),M=mP(this.query,I)?I:null,P=!!S&&this.mutatedKeys.has(S.key),U=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let Y=!1;S&&M?S.data.isEqual(M.data)?P!==U&&(r.track({type:3,doc:M}),Y=!0):this.Hu(S,M)||(r.track({type:2,doc:M}),Y=!0,(p&&this.Gu(M,p)>0||_&&this.Gu(M,_)<0)&&(l=!0)):!S&&M?(r.track({type:0,doc:M}),Y=!0):S&&!M&&(r.track({type:1,doc:S}),Y=!0,(p||_)&&(l=!0)),Y&&(M?(u=u.add(M),s=U?s.add(w):s.delete(w)):(u=u.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const w="F"===this.query.limitType?u.last():u.first();u=u.delete(w.key),s=s.delete(w.key),r.track({type:1,doc:w})}return{Qu:u,zu:r,$i:l,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((_,w)=>function(I,S){const M=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return M(I)-M(S)}(_.type,w.type)||this.Gu(_.doc,w.doc)),this.Ju(r);const u=t?this.Yu():[],l=0===this.Ku.size&&this.current?1:0,p=l!==this.Uu;return this.Uu=l,0!==s.length||p?{snapshot:new U_(this.query,e.Qu,i,s,e.mutatedKeys,0===l,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:u}:{Xu:u}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new _2,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=sn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new b2(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new w2(r))}),t}tc(e){this.qu=e.Hi,this.Ku=sn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return U_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class x4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class R4{constructor(e){this.key=e,this.nc=!1}}class O4{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new Af(l=>kU(l),$w),this.rc=new Map,this.oc=new Set,this.uc=new ci(mt.comparator),this.cc=new Map,this.ac=new PP,this.hc={},this.lc=new Map,this.fc=qg.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function M4(n,e){return _N.apply(this,arguments)}function _N(){return _N=(0,Ne.Z)(function*(n,e){const t=jN(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const u=yield M_(t.localStore,so(e));t.isPrimaryClient&&QS(t.remoteStore,u);const l=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield vN(t,e,r,"current"===l,u.resumeToken)}return i}),_N.apply(this,arguments)}function vN(n,e,t,r,i){return EN.apply(this,arguments)}function EN(){return EN=(0,Ne.Z)(function*(n,e,t,r,i){n._c=(I,S,M)=>{return(P=(0,Ne.Z)(function*(U,Y,ge,Re){let _e=Y.view.Wu(ge);_e.$i&&(_e=yield WS(U.localStore,Y.query,!1).then(({documents:rt})=>Y.view.Wu(rt,_e)));const Le=Re&&Re.targetChanges.get(Y.targetId),Xe=Y.view.applyChanges(_e,U.isPrimaryClient,Le);return RN(U,Y.targetId,Xe.Xu),Xe.snapshot}),function(U,Y,ge,Re){return P.apply(this,arguments)})(n,I,S,M);var P};const s=yield WS(n.localStore,e,!0),u=new I2(e,s.Hi),l=u.Wu(s.documents),p=Kw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=u.applyChanges(l,n.isPrimaryClient,p);RN(n,t,_.Xu);const w=new x4(e,t,u);return n.ic.set(e,w),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),_.snapshot}),EN.apply(this,arguments)}function P4(n,e){return wN.apply(this,arguments)}function wN(){return wN=(0,Ne.Z)(function*(n,e){const t=yt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!$w(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield P_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ub(t.remoteStore,r.targetId),B_(t,r.targetId)}).catch(wf))):(B_(t,r.targetId),yield P_(t.localStore,r.targetId,!0))}),wN.apply(this,arguments)}function bN(){return bN=(0,Ne.Z)(function*(n,e,t){const r=$N(n);try{const i=yield function(s,u){const l=yt(s),p=Nr.now(),_=u.reduce((S,M)=>S.add(M.key),sn());let w,I;return l.persistence.runTransaction("Locally write mutations","readwrite",S=>{let M=Po(),P=sn();return l.Gi.getEntries(S,_).next(U=>{M=U,M.forEach((Y,ge)=>{ge.isValidDocument()||(P=P.add(Y))})}).next(()=>l.localDocuments.getOverlayedDocuments(S,M)).next(U=>{w=U;const Y=[];for(const ge of u){const Re=$W(ge,w.get(ge.key).overlayedDocument);null!=Re&&Y.push(new Nd(ge.key,Re,RU(Re.value.mapValue),kr.exists(!0)))}return l.mutationQueue.addMutationBatch(S,p,Y,u)}).next(U=>{I=U;const Y=U.applyToLocalDocumentSet(w,P);return l.documentOverlayCache.saveOverlays(S,U.batchId,Y)})}).then(()=>({batchId:I.batchId,changes:eB(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,l){let p=s.hc[s.currentUser.toKey()];p||(p=new ci(Yt)),p=p.insert(u,l),s.hc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Fd(r,i.changes),yield k_(r.remoteStore)}catch(i){const s=L_(i,"Failed to persist write");t.reject(s)}}),bN.apply(this,arguments)}function C2(n,e){return IN.apply(this,arguments)}function IN(){return IN=(0,Ne.Z)(function*(n,e){const t=yt(n);try{const r=yield e4(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.cc.get(s);u&&(Ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.nc=!0:i.modifiedDocuments.size>0?Ot(u.nc):i.removedDocuments.size>0&&(Ot(u.nc),u.nc=!1))}),yield Fd(t,r,e)}catch(r){yield wf(r)}}),IN.apply(this,arguments)}function D2(n,e,t){const r=yt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,u)=>{const l=u.view.bu(e);l.snapshot&&i.push(l.snapshot)}),function(s,u){const l=yt(s);l.onlineState=u;let p=!1;l.queries.forEach((_,w)=>{for(const I of w.listeners)I.bu(u)&&(p=!0)}),p&&mN(l)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function k4(n,e,t){return CN.apply(this,arguments)}function CN(){return CN=(0,Ne.Z)(function*(n,e,t){const r=yt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let u=new ci(mt.comparator);u=u.insert(s,br.newNoDocument(s,kt.min()));const l=sn().add(s),p=new zw(kt.min(),new Map,new Xn(Yt),u,l);yield C2(r,p),r.uc=r.uc.remove(s),r.cc.delete(e),ON(r)}else yield P_(r.localStore,e,!1).then(()=>B_(r,e,t)).catch(wf)}),CN.apply(this,arguments)}function F4(n,e){return DN.apply(this,arguments)}function DN(){return DN=(0,Ne.Z)(function*(n,e){const t=yt(n),r=e.batch.batchId;try{const i=yield Xz(t.localStore,e);xN(t,r,null),AN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fd(t,i)}catch(i){yield wf(i)}}),DN.apply(this,arguments)}function L4(n,e,t){return TN.apply(this,arguments)}function TN(){return TN=(0,Ne.Z)(function*(n,e,t){const r=yt(n);try{const i=yield function(s,u){const l=yt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return l.mutationQueue.lookupMutationBatch(p,u).next(w=>(Ot(null!==w),_=w.keys(),l.mutationQueue.removeMutationBatch(p,w))).next(()=>l.mutationQueue.performConsistencyCheck(p)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(p,_,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>l.localDocuments.getDocuments(p,_))})}(r.localStore,e);xN(r,e,t),AN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fd(r,i)}catch(i){yield wf(i)}}),TN.apply(this,arguments)}function SN(){return SN=(0,Ne.Z)(function*(n,e){const t=yt(n);kd(t.remoteStore)||Je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=yt(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>u.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=L_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),SN.apply(this,arguments)}function AN(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function xN(n,e,t){const r=yt(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function B_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||T2(n,r)})}function T2(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(ub(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),ON(n))}function RN(n,e,t){for(const r of t)r instanceof w2?(n.ac.addReference(r.key,e),U4(n,r)):r instanceof b2?(Je("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||T2(n,r.key)):It()}function U4(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Je("SyncEngine","New document in limbo: "+t),n.oc.add(r),ON(n))}function ON(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new mt(Mn.fromString(e)),r=n.fc.next();n.cc.set(r,new R4(t)),n.uc=n.uc.insert(t,r),QS(n.remoteStore,new xf(so(b_(t.path)),r,2,_a.at))}}function Fd(n,e,t){return MN.apply(this,arguments)}function MN(){return MN=(0,Ne.Z)(function*(n,e,t){const r=yt(n),i=[],s=[],u=[];var l;r.ic.isEmpty()||(r.ic.forEach((l,p)=>{u.push(r._c(p,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,_?.fromCache?"not-current":"current"),_){i.push(_);const w=LP.Ci(p.targetId,_);s.push(w)}}))}),yield Promise.all(u),r.sc.Wo(i),yield(l=(0,Ne.Z)(function*(p,_){const w=yt(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>Ce.forEach(_,S=>Ce.forEach(S.Si,M=>w.persistence.referenceDelegate.addReference(I,S.targetId,M)).next(()=>Ce.forEach(S.Di,M=>w.persistence.referenceDelegate.removeReference(I,S.targetId,M)))))}catch(I){if(!bf(I))throw I;Je("LocalStore","Failed to update sequence numbers: "+I)}for(const I of _){const S=I.targetId;if(!I.fromCache){const M=w.qi.get(S),U=M.withLastLimboFreeSnapshotVersion(M.snapshotVersion);w.qi=w.qi.insert(S,U)}}}),function(p,_){return l.apply(this,arguments)})(r.localStore,s))}),MN.apply(this,arguments)}function B4(n,e){return PN.apply(this,arguments)}function PN(){return PN=(0,Ne.Z)(function*(n,e){const t=yt(n);if(!t.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const r=yield e2(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(u=>{u.forEach(l=>{l.reject(new Ge(Se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fd(t,r.ji)}var i}),PN.apply(this,arguments)}function j4(n,e){const t=yt(n),r=t.cc.get(e);if(r&&r.nc)return sn().add(r.key);{let i=sn();const s=t.rc.get(e);if(!s)return i;for(const u of s){const l=t.ic.get(u);i=i.unionWith(l.view.ju)}return i}}function $4(n,e){return NN.apply(this,arguments)}function NN(){return NN=(0,Ne.Z)(function*(n,e){const t=yt(n),r=yield WS(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&RN(t,e.targetId,i.Xu),i}),NN.apply(this,arguments)}function H4(n,e){return kN.apply(this,arguments)}function kN(){return kN=(0,Ne.Z)(function*(n,e){const t=yt(n);return i2(t.localStore,e).then(r=>Fd(t,r))}),kN.apply(this,arguments)}function G4(n,e,t,r){return FN.apply(this,arguments)}function FN(){return FN=(0,Ne.Z)(function*(n,e,t,r){const i=yt(n),s=yield function(u,l){const p=yt(u),_=yt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>_.Tn(w,l).next(I=>I?p.localDocuments.getDocuments(w,I):Ce.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield k_(i.remoteStore):"acknowledged"===t||"rejected"===t?(xN(i,e,r||null),AN(i,e),l=e,yt(yt(i.localStore).mutationQueue).An(l)):It(),yield Fd(i,s)):Je("SyncEngine","Cannot apply mutation batch with id: "+e)}),FN.apply(this,arguments)}function LN(){return LN=(0,Ne.Z)(function*(n,e){const t=yt(n);if(jN(t),$N(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield S2(t,r.toArray());t.dc=!0,yield cN(t.remoteStore,!0);for(const s of i)QS(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(B_(t,u),P_(t.localStore,u,!0))),ub(t.remoteStore,u)}),yield i,yield S2(t,r),function(s){const u=yt(s);u.cc.forEach((l,p)=>{ub(u.remoteStore,p)}),u.ac.fs(),u.cc=new Map,u.uc=new ci(mt.comparator)}(t),t.dc=!1,yield cN(t.remoteStore,!1)}}),LN.apply(this,arguments)}function S2(n,e,t){return VN.apply(this,arguments)}function VN(){return VN=(0,Ne.Z)(function*(n,e,t){const r=yt(n),i=[],s=[];for(const u of e){let l;const p=r.rc.get(u);if(p&&0!==p.length){l=yield M_(r.localStore,so(p[0]));for(const _ of p){const w=r.ic.get(_),I=yield $4(r,w);I.snapshot&&s.push(I.snapshot)}}else{const _=yield r2(r.localStore,u);l=yield M_(r.localStore,_),yield vN(r,A2(_),u,!1,l.resumeToken)}i.push(l)}return r.sc.Wo(s),i}),VN.apply(this,arguments)}function A2(n){return PU(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function W4(n){const e=yt(n);return yt(yt(e.localStore).persistence).vi()}function z4(n,e,t,r){return UN.apply(this,arguments)}function UN(){return UN=(0,Ne.Z)(function*(n,e,t,r){const i=yt(n);if(i.dc)return void Je("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield i2(i.localStore,FU(s[0])),l=zw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,qi.EMPTY_BYTE_STRING);yield Fd(i,u,l);break}case"rejected":yield P_(i.localStore,e,!0),B_(i,e,r);break;default:It()}}),UN.apply(this,arguments)}function K4(n,e,t){return BN.apply(this,arguments)}function BN(){return BN=(0,Ne.Z)(function*(n,e,t){const r=jN(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Je("SyncEngine","Adding an already active target "+i);continue}const s=yield r2(r.localStore,i),u=yield M_(r.localStore,s);yield vN(r,A2(s),u.targetId,!1,u.resumeToken),QS(r.remoteStore,u)}for(const i of t)r.rc.has(i)&&(yield P_(r.localStore,i,!1).then(()=>{ub(r.remoteStore,i),B_(r,i)}).catch(wf))}}),BN.apply(this,arguments)}function jN(n){const e=yt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=C2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k4.bind(null,e),e.sc.Wo=D4.bind(null,e.eventManager),e.sc.wc=T4.bind(null,e.eventManager),e}function $N(n){const e=yt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L4.bind(null,e),e}class x2{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ne.Z)(function*(){t.yt=ob(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return XB(this.persistence,new JB,e.initialUser,this.yt)}yc(e){return new QB(GS.Bs,this.yt)}gc(e){return new u2}terminate(){var e=this;return(0,Ne.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class R2 extends x2{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ne.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield $N(r.Ac.syncEngine),yield k_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return XB(this.persistence,new JB,e.initialUser,this.yt)}Tc(e,t){return new Vz(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new bW(t,this.persistence);return new wW(e.asyncQueue,r)}yc(e){const t=FP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?No.withCacheSize(this.cacheSizeBytes):No.DEFAULT;return new kP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,l2(),ZS(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new u2}}class Q4 extends R2{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ne.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof qP&&(r.sharedClientState.syncEngine={Fr:G4.bind(null,i),$r:z4.bind(null,i),Br:K4.bind(null,i),vi:W4.bind(null,i),Mr:H4.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,Ne.Z)(function*(u){yield function q4(n,e){return LN.apply(this,arguments)}(r.Ac.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}gc(e){const t=l2();if(!qP.C(t))throw new Ge(Se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=FP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class HN{initialize(e,t){var r=this;return(0,Ne.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>D2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=B4.bind(null,r.syncEngine),yield cN(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new C4}createDatastore(e){const t=ob(e.databaseInfo.databaseId),r=new a4(e.databaseInfo);return new l4(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=l=>D2(this.syncEngine,l,0),u=c2.C()?new c2:new i4,new f4(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,l,p,_){const w=new O4(r,i,s,u,l,p);return _&&(w.dc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ne.Z)(function*(t){const r=yt(t);Je("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield N_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function GN(n,e,t){if(!t)throw new Ge(Se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function O2(n,e,t,r){if(!0===e&&!0===r)throw new Ge(Se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function M2(n){if(!mt.isDocumentKey(n))throw new Ge(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function P2(n){if(mt.isDocumentKey(n))throw new Ge(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":It()}function Tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ge(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=JS(n);throw new Ge(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function N2(n,e){if(e<=0)throw new Ge(Se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const k2=new Map;class F2{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ge(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ge(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,O2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cb{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ge(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ge(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cW;switch(t.type){case"gapi":return new fW(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ge(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=k2.get(e);t&&(Je("ComponentProvider","Removing Datastore"),k2.delete(e),t.terminate())}(this),Promise.resolve()}}class Ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ir(this.firestore,e,this._key)}}class vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class cl extends vs{constructor(e,t,r){super(e,t,b_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ir(this.firestore,null,new mt(e))}withConverter(e){return new cl(this.firestore,e,this._path)}}function V2(n,e,...t){if(n=(0,o.m9)(n),GN("collection","path",e),n instanceof cb){const r=Mn.fromString(e,...t);return P2(r),new cl(n,null,r)}{if(!(n instanceof Ir||n instanceof cl))throw new Ge(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mn.fromString(e,...t));return P2(r),new cl(n.firestore,null,r)}}function XS(n,e,...t){if(n=(0,o.m9)(n),1===arguments.length&&(e=tU.R()),GN("doc","path",e),n instanceof cb){const r=Mn.fromString(e,...t);return M2(r),new Ir(n,null,new mt(r))}{if(!(n instanceof Ir||n instanceof cl))throw new Ge(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mn.fromString(e,...t));return M2(r),new Ir(n.firestore,n instanceof cl?n.converter:null,new mt(r))}}function U2(n,e){return n=(0,o.m9)(n),e=(0,o.m9)(e),(n instanceof Ir||n instanceof cl)&&(e instanceof Ir||e instanceof cl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function qN(n,e){return n=(0,o.m9)(n),e=(0,o.m9)(e),n instanceof vs&&e instanceof vs&&n.firestore===e.firestore&&$w(n._query,e._query)&&n.converter===e.converter}function B2(n,e=10240){let t=0;return{read:()=>(0,Ne.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ne.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class eA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class J4{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Gi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ne.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ne.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new S4(JSON.parse(s),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ne.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ne.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class t6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ne.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ge(Se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ne.Z)(function*(s,u){const l=yt(s),p=Qw(l.yt)+"/documents",_={documents:u.map(M=>Zw(l.yt,M))},w=yield l._o("BatchGetDocuments",p,_,u.length),I=new Map;w.forEach(M=>{const P=function ez(n,e){return"found"in e?function(t,r){Ot(!!r.found);const i=al(t,r.found.name),s=bi(r.found.updateTime),u=r.found.createTime?bi(r.found.createTime):kt.min(),l=new _s({mapValue:{fields:r.found.fields}});return br.newFoundDocument(i,s,u,l)}(n,e):"missing"in e?function(t,r){Ot(!!r.missing),Ot(!!r.readTime);const i=al(t,r.missing),s=bi(r.readTime);return br.newNoDocument(i,s)}(n,e):It()}(l.yt,M);I.set(P.key.toString(),P)});const S=[];return u.forEach(M=>{const P=I.get(M.toString());Ot(!!P),S.push(P)}),S}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new T_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ne.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=mt.fromPath(i);e.mutations.push(new yP(s,e.precondition(s)))}),yield(r=(0,Ne.Z)(function*(i,s){const u=yt(i),l=Qw(u.yt)+"/documents",p={writes:s.map(_=>Yw(u.yt,_))};yield u.ao("Commit",l,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw It();t=kt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ge(Se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(kt.min())?kr.exists(!1):kr.updateTime(t):kr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(kt.min()))throw new Ge(Se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kr.updateTime(t)}return kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class n6{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new WP(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ne.Z)(function*(){const t=new t6(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!kw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!YU(t)}return!1}}class r6{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rs.UNAUTHENTICATED,this.clientId=tU.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Ne.Z)(function*(l){Je("FirestoreClient","Received user=",l.uid),yield s.authCredentialListener(l),s.user=l});return function(l){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Je("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Ne.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ge(Se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ne.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=L_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function j2(n,e){return WN.apply(this,arguments)}function WN(){return WN=(0,Ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ne.Z)(function*(s){r.isEqual(s)||(yield e2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),WN.apply(this,arguments)}function $2(n,e){return zN.apply(this,arguments)}function zN(){return zN=(0,Ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield KN(n);Je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>y2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>y2(e.remoteStore,s)),n.onlineComponents=e}),zN.apply(this,arguments)}function KN(n){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,Ne.Z)(function*(n){return n.offlineComponents||(Je("FirestoreClient","Using default OfflineComponentProvider"),yield j2(n,new x2)),n.offlineComponents}),ZN.apply(this,arguments)}function tA(n){return QN.apply(this,arguments)}function QN(){return QN=(0,Ne.Z)(function*(n){return n.onlineComponents||(Je("FirestoreClient","Using default OnlineComponentProvider"),yield $2(n,new HN)),n.onlineComponents}),QN.apply(this,arguments)}function H2(n){return KN(n).then(e=>e.persistence)}function nA(n){return KN(n).then(e=>e.localStore)}function YN(n){return tA(n).then(e=>e.remoteStore)}function JN(n){return tA(n).then(e=>e.syncEngine)}function j_(n){return XN.apply(this,arguments)}function XN(){return XN=(0,Ne.Z)(function*(n){const e=yield tA(n),t=e.eventManager;return t.onListen=M4.bind(null,e.syncEngine),t.onUnlisten=P4.bind(null,e.syncEngine),t}),XN.apply(this,arguments)}function q2(n,e,t={}){const r=new Gi;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function(i,s,u,l,p){const _=new eA({next:I=>{s.enqueueAndForget(()=>pN(i,w));const S=I.docs.has(u);!S&&I.fromCache?p.reject(new Ge(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&I.fromCache&&l&&"server"===l.source?p.reject(new Ge(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new yN(b_(u.path),_,{includeMetadataChanges:!0,Nu:!0});return hN(i,w)}(yield j_(n),n.asyncQueue,e,t,r)})),r.promise}function W2(n,e,t={}){const r=new Gi;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function(i,s,u,l,p){const _=new eA({next:I=>{s.enqueueAndForget(()=>pN(i,w)),I.fromCache&&"server"===l.source?p.reject(new Ge(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new yN(u,_,{includeMetadataChanges:!0,Nu:!0});return hN(i,w)}(yield j_(n),n.asyncQueue,e,t,r)})),r.promise}class d6{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new WP(this,"async_queue_retry"),this.Wc=()=>{const t=ZS();t&&Je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=ZS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=ZS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Gi;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ne.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!bf(t))throw t;Je("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,wi("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=dN.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&It()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ne.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function ek(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class h6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Cr extends cb{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new d6,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||z2(this),this._firestoreClient.terminate()}}function Ii(n){return n._firestoreClient||z2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function z2(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new IW(n._databaseId,s,n._persistenceKey,(l=t).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams));var s,l;n._firestoreClient=new r6(n._authCredentials,n._appCheckCredentials,n._queue,r)}function K2(n,e,t){const r=new Gi;return n.asyncQueue.enqueue((0,Ne.Z)(function*(){try{yield j2(n,t),yield $2(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(u=s).name?u.code===Se.FAILED_PRECONDITION||u.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;xg("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function Z2(n){if(n._initialized||n._terminated)throw new Ge(Se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ll(qi.fromBase64String(e))}catch(t){throw new Ge(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ll(qi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ld{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ge(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zg{constructor(e){this._methodName=e}}class rA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ge(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ge(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}const b6=/^__.*__$/;class I6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Nd(e,this.data,this.fieldMask,t,this.fieldTransforms):new D_(e,this.data,t,this.fieldTransforms)}}class Q2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Nd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Y2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It()}}class iA{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new iA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return aA(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Y2(this.sa)&&b6.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class C6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||ob(e)}da(e,t,r,i=!1){return new iA({sa:e,methodName:t,fa:r,path:ai.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Kg(n){const e=n._freezeSettings(),t=ob(n._databaseId);return new C6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sA(n,e,t,r,i,s={}){const u=n.da(s.merge||s.mergeFields?2:0,e,t,i);ik("Data must be an object, but it was:",u,r);const l=ej(r,u);let p,_;if(s.merge)p=new va(u.fieldMask),_=u.fieldTransforms;else if(s.mergeFields){const w=[];for(const I of s.mergeFields){const S=sk(e,I,t);if(!u.contains(S))throw new Ge(Se.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);nj(w,S)||w.push(S)}p=new va(w),_=u.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,_=u.fieldTransforms;return new I6(new _s(l),p,_)}class lb extends zg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lb}}function J2(n,e,t){return new iA({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class tk extends zg{_toFieldTransform(e){return new Hw(e.path,new I_)}isEqual(e){return e instanceof tk}}class D6 extends zg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=J2(this,e,!0),r=this._a.map(s=>Zg(s,t)),i=new Vg(r);return new Hw(e.path,i)}isEqual(e){return this===e}}class T6 extends zg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=J2(this,e,!0),r=this._a.map(s=>Zg(s,t)),i=new Ug(r);return new Hw(e.path,i)}isEqual(e){return this===e}}class S6 extends zg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new C_(e.yt,BU(e.yt,this.wa));return new Hw(e.path,t)}isEqual(e){return this===e}}function nk(n,e,t,r){const i=n.da(1,e,t);ik("Data must be an object, but it was:",i,r);const s=[],u=_s.empty();Mg(r,(p,_)=>{const w=oA(e,p,t);_=(0,o.m9)(_);const I=i.ca(w);if(_ instanceof lb)s.push(w);else{const S=Zg(_,I);null!=S&&(s.push(w),u.set(w,S))}});const l=new va(s);return new Q2(u,l,i.fieldTransforms)}function rk(n,e,t,r,i,s){const u=n.da(1,e,t),l=[sk(e,r,t)],p=[i];if(s.length%2!=0)throw new Ge(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<s.length;S+=2)l.push(sk(e,s[S])),p.push(s[S+1]);const _=[],w=_s.empty();for(let S=l.length-1;S>=0;--S)if(!nj(_,l[S])){const M=l[S];let P=p[S];P=(0,o.m9)(P);const U=u.ca(M);if(P instanceof lb)_.push(M);else{const Y=Zg(P,U);null!=Y&&(_.push(M),w.set(M,Y))}}const I=new va(_);return new Q2(w,I,u.fieldTransforms)}function X2(n,e,t,r=!1){return Zg(t,n.da(r?4:3,e))}function Zg(n,e){if(tj(n=(0,o.m9)(n)))return ik("Unsupported field value:",e,n),ej(n,e);if(n instanceof zg)return function(t,r){if(!Y2(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let l=Zg(u,r.aa(s));null==l&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,o.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return BU(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Nr.fromDate(t);return{timestampValue:S_(r.yt,i)}}if(t instanceof Nr){const i=new Nr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:S_(r.yt,i)}}if(t instanceof rA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ll)return{bytesValue:aB(r.yt,t._byteString)};if(t instanceof Ir){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:_P(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${JS(t)}`)}(n,e)}function ej(n,e){const t={};return cU(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mg(n,(r,i)=>{const s=Zg(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function tj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nr||n instanceof rA||n instanceof ll||n instanceof Ir||n instanceof zg)}function ik(n,e,t){if(!tj(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=JS(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function sk(n,e,t){if((e=(0,o.m9)(e))instanceof Ld)return e._internalPath;if("string"==typeof e)return oA(n,e);throw aA("Field path arguments must be of type string or ",n,!1,void 0,t)}const A6=new RegExp("[~\\*/\\[\\]]");function oA(n,e,t){if(e.search(A6)>=0)throw aA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ld(...e.split("."))._internalPath}catch{throw aA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function aA(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new Ge(Se.INVALID_ARGUMENT,l+n+p)}function nj(n,e){return n.some(t=>t.isEqual(e))}class db{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new x6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class x6 extends db{data(){return super.data()}}function uA(n,e){return"string"==typeof e?oA(n,e):e instanceof Ld?e._internalPath:e._delegate._internalPath}function rj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ge(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ok{}class hb extends ok{}function Nf(n,e,...t){let r=[];e instanceof ok&&r.push(e),r=r.concat(t),function(i){const s=i.filter(l=>l instanceof $_).length,u=i.filter(l=>l instanceof fb).length;if(s>1||s>0&&u>0)throw new Ge(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class fb extends hb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fb(e,t,r)}_apply(e){const t=this._parse(e);return aj(e._query,t),new vs(e.firestore,e.converter,pP(e._query,t))}_parse(e){const t=Kg(e.firestore);return function(i,s,u,l,p,_,w){let I;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new Ge(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){oj(w,_);const S=[];for(const M of w)S.push(sj(l,i,M));I={arrayValue:{values:S}}}else I=sj(l,i,w)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||oj(w,_),I=X2(u,"where",w,"in"===_||"not-in"===_);return Dn.create(p,_,I)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class $_ extends ok{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const u=i.getFlattenedFilters();for(const l of u)aj(s,l),s=pP(s,l)}(e._query,t),new vs(e.firestore,e.converter,pP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ak extends hb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ak(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Ge(Se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ge(Se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new E_(i,s);return function(l,p){if(null===hP(l)){const _=AS(l);null!==_&&uj(0,_,p.field)}}(r,u),u}(e._query,this._field,this._direction);return new vs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Pd(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class cA extends hb{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new cA(e,t,r)}_apply(e){return new vs(e.firestore,e.converter,xS(e._query,this._limit,this._limitType))}}class lA extends hb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new lA(e,t,r)}_apply(e){const t=ij(e,this.type,this._docOrFields,this._inclusive);return new vs(e.firestore,e.converter,(i=t,new Pd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class dA extends hb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new dA(e,t,r)}_apply(e){const t=ij(e,this.type,this._docOrFields,this._inclusive);return new vs(e.firestore,e.converter,(i=t,new Pd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function ij(n,e,t,r){if(t[0]=(0,o.m9)(t[0]),t[0]instanceof db)return function(i,s,u,l,p){if(!l)throw new Ge(Se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const _=[];for(const w of Lg(i))if(w.field.isKeyField())_.push(kg(s,l.key));else{const I=l.data.field(w.field);if(aP(I))throw new Ge(Se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const S=w.field.canonicalString();throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}_.push(I)}return new Sf(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Kg(n.firestore);return function(s,u,l,p,_,w){const I=s.explicitOrderBy;if(_.length>I.length)throw new Ge(Se.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let M=0;M<_.length;M++){const P=_[M];if(I[M].field.isKeyField()){if("string"!=typeof P)throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof P}`);if(!fP(s)&&-1!==P.indexOf("/"))throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${P}' contains a slash.`);const U=s.path.child(Mn.fromString(P));if(!mt.isDocumentKey(U))throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const Y=new mt(U);S.push(kg(u,Y))}else{const U=X2(l,p,P);S.push(U)}}return new Sf(S,w)}(n._query,n.firestore._databaseId,i,e,t,r)}}function sj(n,e,t){if("string"==typeof(t=(0,o.m9)(t))){if(""===t)throw new Ge(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fP(e)&&-1!==t.indexOf("/"))throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Mn.fromString(t));if(!mt.isDocumentKey(r))throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kg(n,new mt(r))}if(t instanceof Ir)return kg(n,t._key);throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${JS(t)}.`)}function oj(n,e){if(!Array.isArray(n)||0===n.length)throw new Ge(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ge(Se.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function aj(n,e){if(e.isInequality()){const r=AS(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=hP(n);null!==s&&uj(0,i,s)}const t=function(r,i){for(const s of r)for(const u of s.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ge(Se.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function uj(n,e,t){if(!t.isEqual(e))throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class uk{convertValue(e,t="none"){switch(Ng(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ui(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw It()}}convertObject(e,t){const r={};return Mg(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new rA(ui(e.latitude),ui(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dU(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lw(e));default:return null}}convertTimestamp(e){const t=Cf(e);return new Nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Mn.fromString(e);Ot(yB(r));const i=new If(r.get(1),r.get(3)),s=new mt(r.popFirst(5));return i.isEqual(t)||wi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function hA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class V6 extends uk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,t)}}class Qg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vd extends db{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(uA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pb extends Vd{data(e={}){return super.data(e)}}class kf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pb(this._firestore,this._userDataWriter,r.key,r,new Qg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ge(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new pb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Qg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const l=new pb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Qg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),_=s.indexOf(u.doc.key)),{type:U6(u.type),doc:l,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function U6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}function lj(n,e){return n instanceof Vd&&e instanceof Vd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof kf&&e instanceof kf&&n._firestore===e._firestore&&qN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ff extends uk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,t)}}function dj(n,e,t){n=Tn(n,Ir);const r=Tn(n.firestore,Cr),i=hA(n.converter,e,t);return H_(r,[sA(Kg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,kr.none())])}function hj(n,e,t,...r){n=Tn(n,Ir);const i=Tn(n.firestore,Cr),s=Kg(i);let u;return u="string"==typeof(e=(0,o.m9)(e))||e instanceof Ld?rk(s,"updateDoc",n._key,e,t,r):nk(s,"updateDoc",n._key,e),H_(i,[u.toMutation(n._key,kr.exists(!0))])}function fj(n,...e){var t,r,i;n=(0,o.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||ek(e[u])||(s=e[u],u++);const l={includeMetadataChanges:s.includeMetadataChanges};if(ek(e[u])){const I=e[u];e[u]=null===(t=I.next)||void 0===t?void 0:t.bind(I),e[u+1]=null===(r=I.error)||void 0===r?void 0:r.bind(I),e[u+2]=null===(i=I.complete)||void 0===i?void 0:i.bind(I)}let p,_,w;if(n instanceof Ir)_=Tn(n.firestore,Cr),w=b_(n._key.path),p={next:I=>{e[u]&&e[u](ck(_,n,I))},error:e[u+1],complete:e[u+2]};else{const I=Tn(n,vs);_=Tn(I.firestore,Cr),w=I._query;const S=new Ff(_);p={next:M=>{e[u]&&e[u](new kf(_,S,I,M))},error:e[u+1],complete:e[u+2]},rj(n._query)}return function(I,S,M,P){const U=new eA(P),Y=new yN(S,U,M);return I.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return hN(yield j_(I),Y)})),()=>{U.bc(),I.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return pN(yield j_(I),Y)}))}}(Ii(_),w,l,p)}function H_(n,e){return function(t,r){const i=new Gi;return t.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function N4(n,e,t){return bN.apply(this,arguments)}(yield JN(t),r,i)})),i.promise}(Ii(n),e)}function ck(n,e,t){const r=t.docs.get(e._key),i=new Ff(n);return new Vd(n,i,e._key,r,new Qg(t.hasPendingWrites,t.fromCache),e.converter)}const Z6={maxAttempts:5};class pj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kg(e)}set(e,t,r){this._verifyNotCommitted();const i=Lf(e,this._firestore),s=hA(i.converter,t,r),u=sA(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,kr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Lf(e,this._firestore);let u;return u="string"==typeof(t=(0,o.m9)(t))||t instanceof Ld?rk(this._dataReader,"WriteBatch.update",s._key,t,r,i):nk(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lf(e,this._firestore);return this._mutations=this._mutations.concat(new T_(t._key,kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ge(Se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lf(n,e){if((n=(0,o.m9)(n)).firestore!==e)throw new Ge(Se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Q6 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kg(e)}get(e){const t=Lf(e,this._firestore),r=new V6(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return It();const s=i[0];if(s.isFoundDocument())return new db(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new db(this._firestore,r,t._key,null,t.converter);throw It()})}set(e,t,r){const i=Lf(e,this._firestore),s=hA(i.converter,t,r),u=sA(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=Lf(e,this._firestore);let u;return u="string"==typeof(t=(0,o.m9)(t))||t instanceof Ld?rk(this._dataReader,"Transaction.update",s._key,t,r,i):nk(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=Lf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lf(e,this._firestore),r=new Ff(this._firestore);return super.get(e).then(i=>new Vd(this._firestore,r,t._key,i._document,new Qg(!1,!1),t.converter))}}function lk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function mj(){if(typeof Uint8Array>"u")throw new Ge("unimplemented","Uint8Arrays are not available in this environment.")}function yj(){if(!function CW(){return typeof atob<"u"}())throw new Ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){m_=Bs.SDK_VERSION,(0,Bs._registerComponent)(new nu.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),u=new Cr(new dW(t.getProvider("auth-internal")),new pW(t.getProvider("app-check-internal")),function(l,p){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ge(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new If(l.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Bs.registerVersion)(JV,"3.8.0",n),(0,Bs.registerVersion)(JV,"3.8.0","esm2017")}();class gb{constructor(e){this._delegate=e}static fromBase64String(e){return yj(),new gb(ll.fromBase64String(e))}static fromUint8Array(e){return mj(),new gb(ll.fromUint8Array(e))}toBase64(){return yj(),this._delegate.toBase64()}toUint8Array(){return mj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function dk(n){return function sK(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class oK{enableIndexedDbPersistence(e,t){return function p6(n,e){Z2(n=Tn(n,Cr));const t=Ii(n),r=n._freezeSettings(),i=new HN;return K2(t,i,new R2(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function g6(n){Z2(n=Tn(n,Cr));const e=Ii(n),t=n._freezeSettings(),r=new HN;return K2(e,r,new Q4(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function m6(n){if(n._initialized&&!n._terminated)throw new Ge(Se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ne.Z)(function*(){try{yield(t=(0,Ne.Z)(function*(r){if(!Yu.C())return Promise.resolve();const i=r+"main";yield Yu.delete(i)}),function(r){return t.apply(this,arguments)})(FP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _j{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof If||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function L2(n,e,t,r={}){var i;const s=(n=Tn(n,cb))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&xg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,l;if("string"==typeof r.mockUserToken)u=r.mockUserToken,l=rs.MOCK_USER;else{u=(0,o.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ge(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new rs(p)}n._authCredentials=new lW(new XV(u,l))}}(this._delegate,e,t,r)}enableNetwork(){return function _6(n){return function i6(n){return n.asyncQueue.enqueue((0,Ne.Z)(function*(){const e=yield H2(n),t=yield YN(n);return e.setNetworkEnabled(!0),function(r){const i=yt(r);return i._u.delete(0),ab(i)}(t)}))}(Ii(n=Tn(n,Cr)))}(this._delegate)}disableNetwork(){return function v6(n){return function s6(n){return n.asyncQueue.enqueue((0,Ne.Z)(function*(){const e=yield H2(n),t=yield YN(n);return e.setNetworkEnabled(!1),(r=(0,Ne.Z)(function*(i){const s=yt(i);s._u.add(0),yield N_(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ii(n=Tn(n,Cr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,O2("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function y6(n){return function(e){const t=new Gi;return e.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function V4(n,e){return SN.apply(this,arguments)}(yield JN(e),t)})),t.promise}(Ii(n=Tn(n,Cr)))}(this._delegate)}onSnapshotsInSync(e){return function K6(n,e){return function u6(n,e){const t=new eA(e);return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return r=yield j_(n),i=t,yt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return r=yield j_(n),i=t,void yt(r).Ru.delete(i);var r,i}))}}(Ii(n=Tn(n,Cr)),ek(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new G_(this,V2(this._delegate,e))}catch(t){throw ao(t,"collection()","Firestore.collection()")}}doc(e){try{return new ru(this,XS(this._delegate,e))}catch(t){throw ao(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new uo(this,function Y4(n,e){if(n=Tn(n,cb),GN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ge(Se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vs(n,null,(t=e,new Pd(Mn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ao(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Y6(n,e,t){n=Tn(n,Cr);const r=Object.assign(Object.assign({},Z6),t);return function(i){if(i.maxAttempts<1)throw new Ge(Se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,u){const l=new Gi;return i.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){const p=yield function G2(n){return tA(n).then(e=>e.datastore)}(i);new n6(i.asyncQueue,p,u,s,l).run()})),l.promise}(Ii(n),i=>e(new Q6(n,i)),r)}(this._delegate,t=>e(new vj(this,t)))}batch(){return Ii(this._delegate),new Ej(new pj(this._delegate,e=>H_(this._delegate,e)))}loadBundle(e){return function E6(n,e){const t=Ii(n=Tn(n,Cr)),r=new h6;return function c6(n,e,t,r){const i=function(s,u){let l;return l="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return B2(p,_);if(p instanceof ArrayBuffer)return B2(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new J4(p,u);var p}(t,ob(e));n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){!function Z4(n,e,t){const r=yt(n);var i;(i=(0,Ne.Z)(function*(s,u,l){try{const p=yield u.getMetadata();if(yield function(S,M){const P=yt(S),U=bi(M.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",Y=>P.Ns.getBundleMetadata(Y,M.id)).then(Y=>!!Y&&Y.createTime.compareTo(U)>=0)}(s.localStore,p))return yield u.close(),l._completeWith({taskState:"Success",documentsLoaded:(S=p).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);l._updateProgress(E2(p));const _=new A4(p,s.localStore,u.yt);let w=yield u.mc();for(;w;){const S=yield _.Fu(w);S&&l._updateProgress(S),w=yield u.mc()}const I=yield _.complete();return yield Fd(s,I.Lu,void 0),yield function(S,M){const P=yt(S);return P.persistence.runTransaction("Save bundle","readwrite",U=>P.Ns.saveBundleMetadata(U,M))}(s.localStore,p),l._completeWith(I.progress),Promise.resolve(I.Bu)}catch(p){return xg("SyncEngine",`Loading bundle failed with ${p}`),l._failWith(p),Promise.resolve(new Set)}var S}),function(s,u,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield JN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function w6(n,e){return function l6(n,e){return n.asyncQueue.enqueue((0,Ne.Z)(function*(){return function(t,r){const i=yt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield nA(n),e)}))}(Ii(n=Tn(n,Cr)),e).then(t=>t?new vs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new uo(this,t):null)}}class fA extends uk{constructor(e){super(),this.firestore=e}convertBytes(e){return new gb(new ll(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ru.forKey(t,this.firestore,null)}}class vj{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fA(e)}get(e){const t=Jg(e);return this._delegate.get(t).then(r=>new mb(this._firestore,new Vd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Jg(e);return r?(lk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jg(e);return this._delegate.delete(t),this}}class Ej{constructor(e){this._delegate=e}set(e,t,r){const i=Jg(e);return r?(lk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Yg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yb(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Yg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Yg(e,new fA(e),t),i.set(t,s)),s}}Yg.INSTANCES=new WeakMap;class ru{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ru(t,new Ir(t._delegate,r,new mt(e)))}static forKey(e,t,r){return new ru(t,new Ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new G_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new G_(this.firestore,V2(this._delegate,e))}catch(t){throw ao(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,o.m9)(e))instanceof Ir&&U2(this._delegate,e)}set(e,t){t=lk("DocumentReference.set",t);try{return t?dj(this._delegate,e,t):dj(this._delegate,e)}catch(r){throw ao(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?hj(this._delegate,e):hj(this._delegate,e,t,...r)}catch(i){throw ao(i,"updateDoc()","DocumentReference.update()")}}delete(){return function W6(n){return H_(Tn(n.firestore,Cr),[new T_(n._key,kr.none())])}(this._delegate)}onSnapshot(...e){const t=wj(e),r=bj(e,i=>new mb(this.firestore,new Vd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return fj(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function j6(n){n=Tn(n,Ir);const e=Tn(n.firestore,Cr),t=Ii(e),r=new Ff(e);return function o6(n,e){const t=new Gi;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return(r=(0,Ne.Z)(function*(i,s,u){try{const l=yield function(p,_){const w=yt(p);return w.persistence.runTransaction("read document","readonly",I=>w.localDocuments.getDocument(I,_))}(i,s);l.isFoundDocument()?u.resolve(l):l.isNoDocument()?u.resolve(null):u.reject(new Ge(Se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const p=L_(l,`Failed to get document '${s} from cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield nA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Vd(e,r,n._key,i,new Qg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function $6(n){n=Tn(n,Ir);const e=Tn(n.firestore,Cr);return q2(Ii(e),n._key,{source:"server"}).then(t=>ck(e,n,t))}(this._delegate):function B6(n){n=Tn(n,Ir);const e=Tn(n.firestore,Cr);return q2(Ii(e),n._key).then(t=>ck(e,n,t))}(this._delegate),t.then(r=>new mb(this.firestore,new Vd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ru(this.firestore,this._delegate.withConverter(e?Yg.getInstance(this.firestore,e):null))}}function ao(n,e,t){return n.message=n.message.replace(e,t),n}function wj(n){for(const e of n)if("object"==typeof e&&!dk(e))return e;return{}}function bj(n,e){var t,r;let i;return i=dk(n[0])?n[0]:dk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ru(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lj(this._delegate,e._delegate)}}class yb extends mb{data(e){const t=this._delegate.data(e);return function uW(n,e){n||It()}(void 0!==t),t}}class uo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fA(e)}where(e,t,r){try{return new uo(this.firestore,Nf(this._delegate,function R6(n,e,t){const r=e,i=uA("where",n);return fb._create(i,r,t)}(e,t,r)))}catch(i){throw ao(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new uo(this.firestore,Nf(this._delegate,function O6(n,e="asc"){const t=e,r=uA("orderBy",n);return ak._create(r,t)}(e,t)))}catch(r){throw ao(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new uo(this.firestore,Nf(this._delegate,function M6(n){return N2("limit",n),cA._create("limit",n,"F")}(e)))}catch(t){throw ao(t,"limit()","Query.limit()")}}limitToLast(e){try{return new uo(this.firestore,Nf(this._delegate,function P6(n){return N2("limitToLast",n),cA._create("limitToLast",n,"L")}(e)))}catch(t){throw ao(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new uo(this.firestore,Nf(this._delegate,function N6(...n){return lA._create("startAt",n,!0)}(...e)))}catch(t){throw ao(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new uo(this.firestore,Nf(this._delegate,function k6(...n){return lA._create("startAfter",n,!1)}(...e)))}catch(t){throw ao(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new uo(this.firestore,Nf(this._delegate,function F6(...n){return dA._create("endBefore",n,!1)}(...e)))}catch(t){throw ao(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new uo(this.firestore,Nf(this._delegate,function L6(...n){return dA._create("endAt",n,!0)}(...e)))}catch(t){throw ao(t,"endAt()","Query.endAt()")}}isEqual(e){return qN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function G6(n){n=Tn(n,vs);const e=Tn(n.firestore,Cr),t=Ii(e),r=new Ff(e);return function a6(n,e){const t=new Gi;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return(r=(0,Ne.Z)(function*(i,s,u){try{const l=yield WS(i,s,!0),p=new I2(s,l.Hi),_=p.Wu(l.documents),w=p.applyChanges(_,!1);u.resolve(w.snapshot)}catch(l){const p=L_(l,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield nA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new kf(e,r,n,i))}(this._delegate):"server"===e?.source?function q6(n){n=Tn(n,vs);const e=Tn(n.firestore,Cr),t=Ii(e),r=new Ff(e);return W2(t,n._query,{source:"server"}).then(i=>new kf(e,r,n,i))}(this._delegate):function H6(n){n=Tn(n,vs);const e=Tn(n.firestore,Cr),t=Ii(e),r=new Ff(e);return rj(n._query),W2(t,n._query).then(i=>new kf(e,r,n,i))}(this._delegate),t.then(r=>new hk(this.firestore,new kf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=wj(e),r=bj(e,i=>new hk(this.firestore,new kf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return fj(this._delegate,t,r)}withConverter(e){return new uo(this.firestore,this._delegate.withConverter(e?Yg.getInstance(this.firestore,e):null))}}class uK{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new yb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new uo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uK(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new yb(this._firestore,r))})}isEqual(e){return lj(this._delegate,e._delegate)}}class G_ extends uo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ru(this.firestore,e):null}doc(e){try{return new ru(this.firestore,void 0===e?XS(this._delegate):XS(this._delegate,e))}catch(t){throw ao(t,"doc()","CollectionReference.doc()")}}add(e){return function z6(n,e){const t=Tn(n.firestore,Cr),r=XS(n),i=hA(n.converter,e);return H_(t,[sA(Kg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ru(this.firestore,t))}isEqual(e){return U2(this._delegate,e._delegate)}withConverter(e){return new G_(this.firestore,this._delegate.withConverter(e?Yg.getInstance(this.firestore,e):null))}}function Jg(n){return Tn(n,Ir)}class fk{constructor(...e){this._delegate=new Ld(...e)}static documentId(){return new fk(ai.keyField().canonicalString())}isEqual(e){return(e=(0,o.m9)(e))instanceof Ld&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function X6(){return new tk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xg(e)}static delete(){const e=function J6(){return new lb("deleteField")}();return e._methodName="FieldValue.delete",new Xg(e)}static arrayUnion(...e){const t=function eK(...n){return new D6("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xg(t)}static arrayRemove(...e){const t=function tK(...n){return new T6("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xg(t)}static increment(e){const t=function nK(n){return new S6("increment",n)}(e);return t._methodName="FieldValue.increment",new Xg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cK={Firestore:_j,GeoPoint:rA,Timestamp:Nr,Blob:gb,Transaction:vj,WriteBatch:Ej,DocumentReference:ru,DocumentSnapshot:mb,Query:uo,QueryDocumentSnapshot:yb,QuerySnapshot:hk,CollectionReference:G_,FieldPath:fk,FieldValue:Xg,setLogLevel:function aK(n){!function aW(n){Ef.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function dK(n){(function lK(n,e){n.INTERNAL.registerComponent(new nu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},cK)))})(n,(e,t)=>new _j(e,t,new oK)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(YT.Z);var _b=R(6451),hK=R(4707),Ij=R(3099);function Cj(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Ij.B)({connector:()=>new hK.t(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Dj(n,e){return(0,$.m)(e)?(0,ft.w)(()=>n,e):(0,ft.w)(()=>n)}var pk=R(9468);R(259);const mk=new Map,Sj={activated:!1,tokenObservers:[]},yK={initialized:!1,enabled:!1};function Es(n){return mk.get(n)||Object.assign({},Sj)}function gA(){return yK}class IK{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ne.Z)(function*(){t.stop();try{t.pending=new o.BH,yield function CK(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new o.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const co=new o.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function xj(n){if(!Es(n).activated)throw co.create("use-before-activation",{appName:n.name})}function vk(n,e){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,Ne.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const I=yield i.getHeartbeatsHeader();I&&(r["X-Firebase-Client"]=I)}const s={method:"POST",body:JSON.stringify(e),headers:r};let u,l;try{u=yield fetch(n,s)}catch(I){throw co.create("fetch-network-error",{originalErrorMessage:I?.message})}if(200!==u.status)throw co.create("fetch-status-error",{httpStatus:u.status});try{l=yield u.json()}catch(I){throw co.create("fetch-parse-error",{originalErrorMessage:I?.message})}const p=l.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw co.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const _=1e3*Number(p[1]),w=Date.now();return{token:l.token,expireTimeMillis:w+_,issuedAtTimeMillis:w}}),Ek.apply(this,arguments)}function AK(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const vb="firebase-app-check-store";let _A=null;function Oj(){return _A||(_A=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(co.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(vb,{keyPath:"compositeKey"})}}catch(t){e(co.create("storage-open",{originalErrorMessage:t?.message}))}}),_A)}function wk(){return wk=(0,Ne.Z)(function*(n,e){const r=(yield Oj()).transaction(vb,"readwrite"),s=r.objectStore(vb).put({compositeKey:n,value:e});return new Promise((u,l)=>{s.onsuccess=p=>{u()},r.onerror=p=>{var _;l(co.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})}),wk.apply(this,arguments)}const Eb=new a.Yd("@firebase/app-check");function Ck(n,e){return(0,o.hl)()?function MK(n,e){return function Mj(n,e){return wk.apply(this,arguments)}(function Nj(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Eb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kj(){return gA().enabled}function Fj(){return Tk.apply(this,arguments)}function Tk(){return Tk=(0,Ne.Z)(function*(){const n=gA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Tk.apply(this,arguments)}const VK={error:"UNKNOWN_ERROR"};function UK(n){return o.US.encodeString(JSON.stringify(n),!1)}function vA(n){return Sk.apply(this,arguments)}function Sk(){return Sk=(0,Ne.Z)(function*(n,e=!1){const t=n.app;xj(t);const r=Es(t);let s,i=r.token;if(i&&!q_(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(q_(p)?i=p:yield Ck(t,void 0))}if(!e&&i&&q_(i))return{token:i.token};let l,u=!1;if(kj()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vk(AK(t,yield Fj()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const p=yield r.exchangeTokenPromise;return yield Ck(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield Es(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Eb.warn(p.message):Eb.error(p),s=p}return i?s?l=q_(i)?{token:i.token,internalError:s}:Uj(s):(l={token:i.token},r.token=i,yield Ck(t,i)):l=Uj(s),u&&Vj(t,l),l}),Sk.apply(this,arguments)}function xk(n,e){const t=Es(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Lj(n){const{app:e}=n,t=Es(e);let r=t.tokenRefresher;r||(r=function BK(n){const{app:e}=n;return new IK((0,Ne.Z)(function*(){let r;if(r=Es(e).token?yield vA(n,!0):yield vA(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Es(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Vj(n,e){const t=Es(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function q_(n){return n.expireTimeMillis-Date.now()>0}function Uj(n){return{token:UK(VK),error:n}}class jK{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Es(this.app);for(const t of e)xk(this.app,t.next);return Promise.resolve()}}const zj="app-check-internal";!function t8(){(0,Bs._registerComponent)(new nu.wA("app-check",n=>function $K(n,e){return new jK(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zj).initialize()})),(0,Bs._registerComponent)(new nu.wA(zj,n=>function HK(n){return{getToken:e=>vA(n,e),addTokenListener:e=>function Ak(n,e,t,r){const{app:i}=n,s=Es(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&q_(s.token)){const l=s.token;Promise.resolve().then(()=>{t({token:l.token}),Lj(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Lj(n))}(n,"INTERNAL",e),removeTokenListener:e=>xk(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Bs.registerVersion)("@firebase/app-check","0.6.0")}();class wb{constructor(){return(0,kn.vb)("app-check")}}typeof window<"u"&&window;var wA=R(9260);const Nk=new h.OlP("angularfire2.auth.use-emulator"),kk=new h.OlP("angularfire2.auth.settings"),Fk=new h.OlP("angularfire2.auth.tenant-id"),Lk=new h.OlP("angularfire2.auth.langugage-code"),Vk=new h.OlP("angularfire2.auth.use-device-language"),Uk=new h.OlP("angularfire.auth.persistence"),Bk=(n,e,t,r,i,s,u,l)=>(0,Ri.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),u)for(const[_,w]of Object.entries(u))p.settings[_]=w;return l&&p.setPersistence(l),p},[t,r,i,s,u,l]);let bb=(()=>{class n{constructor(t,r,i,s,u,l,p,_,w,I,S,M){const P=new Wt.x,U=(0,gt.of)(void 0).pipe((0,n_.Q)(u.outsideAngular),(0,ft.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,9169)))),(0,st.U)(()=>(0,Ri.on)(t,s,r)),(0,st.U)(Y=>Bk(Y,s,l,_,w,I,p,S)),Cj({bufferSize:1,refCount:!1}));if(ei(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,gt.of)(null);else{U.pipe(ts()).subscribe();const ge=U.pipe((0,ft.w)(Le=>Le.getRedirectResult().then(Xe=>Xe,()=>null)),kn.iC,Cj({bufferSize:1,refCount:!1})),Re=U.pipe((0,ft.w)(Le=>new pn.y(Xe=>({unsubscribe:s.runOutsideAngular(()=>Le.onAuthStateChanged(rt=>Xe.next(rt),rt=>Xe.error(rt),()=>Xe.complete()))})))),_e=U.pipe((0,ft.w)(Le=>new pn.y(Xe=>({unsubscribe:s.runOutsideAngular(()=>Le.onIdTokenChanged(rt=>Xe.next(rt),rt=>Xe.error(rt),()=>Xe.complete()))}))));this.authState=ge.pipe(Dj(Re),(0,pk.R)(u.outsideAngular),(0,n_.Q)(u.insideAngular)),this.user=ge.pipe(Dj(_e),(0,pk.R)(u.outsideAngular),(0,n_.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,ft.w)(Le=>Le?(0,rn.D)(Le.getIdToken()):(0,gt.of)(null))),this.idTokenResult=this.user.pipe((0,ft.w)(Le=>Le?(0,rn.D)(Le.getIdTokenResult()):(0,gt.of)(null))),this.credential=(0,_b.T)(ge,P,this.authState.pipe((0,Ln.h)(Le=>!Le))).pipe((0,st.U)(Le=>Le?.user?Le:null),(0,pk.R)(u.outsideAngular),(0,n_.Q)(u.insideAngular))}return(0,Ri.pX)(this,U,s,{spy:{apply:(Y,ge,Re)=>{(Y.startsWith("signIn")||Y.startsWith("createUser"))&&Re.then(_e=>P.next(_e))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ri.Dh),h.LFG(Ri.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(kn.HU),h.LFG(Nk,8),h.LFG(kk,8),h.LFG(Fk,8),h.LFG(Lk,8),h.LFG(Vk,8),h.LFG(Uk,8),h.LFG(wb,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),a8=(()=>{class n{constructor(){wA.Z.registerVersion("angularfire",kn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[bb]}),n})();function Zj(n,e){return function u8(n,e=vM.z){return new pn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function jk(n,e){return Zj(n,e).pipe((0,st.U)(t=>({payload:t,type:"query"})))}function bA(n,e){return jk(n,e).pipe($n(void 0),ZT(),(0,st.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,l)=>{const p=i.find(w=>w.doc.ref.isEqual(u.ref)),_=t?.payload.docs.find(w=>w.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:u}})}),s}))}function Qj(n,e,t){return bA(n,t).pipe((0,Ps.R)((r,i)=>function l8(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function d8(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return $k(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return $k(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $k(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),(0,QT.x)(),(0,st.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function $k(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Yj(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Jj{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=bA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,st.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe($n(void 0),ZT(),(0,Ln.h)(([r,i])=>i.length>0||!r),(0,st.U)(([r,i])=>i),kn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ps.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Yj(e);return Qj(this.query,t,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return jk(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),kn.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(kn.iC)}add(e){return this.ref.add(e)}doc(e){return new Xj(this.ref.doc(e),this.afs)}}class Xj{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=n$(r,t);return new Jj(i,s,this.afs)}snapshotChanges(){return function c8(n,e){return Zj(n,e).pipe($n(void 0),ZT(),(0,st.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(kn.iC)}}class h8{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?bA(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),(0,Ln.h)(t=>t.length>0),kn.iC):bA(this.query,this.afs.schedulers.outsideAngular).pipe(kn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ps.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Yj(e);return Qj(this.query,t,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return jk(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),kn.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(kn.iC)}}const e$=new h.OlP("angularfire2.enableFirestorePersistence"),t$=new h.OlP("angularfire2.firestore.persistenceSettings"),f8=new h.OlP("angularfire2.firestore.settings"),p8=new h.OlP("angularfire2.firestore.use-emulator");function n$(n,e=(t=>t)){return{query:e(n),ref:n}}let r$=(()=>{class n{constructor(t,r,i,s,u,l,p,_,w,I,S,M,P,U,Y,ge,Re){this.schedulers=p;const _e=(0,Ri.on)(t,l,r),Le=w;I&&Bk(_e,l,S,P,U,Y,M,ge),[this.firestore,this.persistenceEnabled$]=(0,Ri.cc)(`${_e.name}.firestore`,"AngularFirestore",_e.name,()=>{const Xe=l.runOutsideAngular(()=>_e.firestore());if(s&&Xe.settings(s),Le&&Xe.useEmulator(...Le),i&&!ei(u)){const rt=()=>{try{return(0,rn.D)(Xe.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(Et){return typeof console<"u"&&console.warn(Et),(0,gt.of)(!1)}};return[Xe,l.runOutsideAngular(rt)]}return[Xe,(0,gt.of)(!1)]},[s,Le,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=n$(i,r),l=this.schedulers.ngZone.run(()=>s);return new Jj(l,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new h8(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Xj(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ri.Dh),h.LFG(Ri.xv,8),h.LFG(e$,8),h.LFG(f8,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(kn.HU),h.LFG(t$,8),h.LFG(p8,8),h.LFG(bb,8),h.LFG(Nk,8),h.LFG(kk,8),h.LFG(Fk,8),h.LFG(Lk,8),h.LFG(Vk,8),h.LFG(Uk,8),h.LFG(wb,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),g8=(()=>{class n{constructor(){wA.Z.registerVersion("angularfire",kn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:e$,useValue:!0},{provide:t$,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[r$]}),n})(),i$=(()=>{class n{constructor(t,r,i,s,u){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this.http=u,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}login(t){return A(()=>(0,rn.D)(this.afAuth.signInWithEmailAndPassword(t.email,t.password)))}showUser(){return A(()=>(0,rn.D)(this.afAuth.currentUser)).pipe((0,Ln.h)(t=>!!t&&!!t.getIdToken(!0)))}signUp(t,r){return A(()=>(0,rn.D)(this.afAuth.createUserWithEmailAndPassword(t,r)))}signUpWithBack(t){return this.http.post(bg_URL_API_url+"auth/signup",{email:t},{responseType:"text"})}verifyToken(t,r){const i=new pa({"Content-Type":"application/json",Authorization:t});return this.http.post(bg_URL_API_url+"auth/login",{id:r},{headers:i})}signOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user")})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(r$),h.LFG(bb),h.LFG(Rr),h.LFG(h.R0b),h.LFG(mf))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const m8=["*"];let s$=(()=>{class n{constructor(t){this.store$=t,this.authHandler=new h.vpe,this.signupForm=new Np({})}ngOnInit(){this.signupForm=new Np({email:new oy("",[zI.required,this.emailValidator.bind(this)]),password:new oy("",[zI.required,this.passwordValidator.bind(this)])})}emailValidator(t){return t.value.includes("@")?null:{email:!0}}passwordValidator(t){return t.value.length<6?{password:!0}:null}submitHandler(){this.store$.dispatch(ST()),this.authHandler.emit({email:this.signupForm.value.email,password:this.signupForm.value.password}),this.signupForm.reset({email:"",password:""})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(tt.yh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-auth-form"]],inputs:{title:"title",description:"description"},outputs:{authHandler:"authHandler"},ngContentSelectors:m8,decls:18,vars:6,consts:[[1,"mt-[100px]","p-[20px]","shadow-xl","rounded-[10px]","flex","flex-col","items-center",3,"formGroup","ngSubmit"],[1,"flex","flex-col","items-center"],[1,"text-l","font-xl","text-grey-600"],[1,"mt-[20px]","font-xl","text-grey-600"],[1,"mt-[30px]"],[1,"flex","flex-col"],["for","email",1,"text-grey-600","font-xl"],["type","text","formControlName","email","id","email",1,"mt-[10px]","border-[1px]","border-grey-400","py-[10px]","text-[20px]","px-[5px]","rounded-[5px]"],[1,"flex","flex-col","mt-[10px]"],["for","password",1,"text-grey-600","font-xl"],["type","text","formControlName","password","id","password","required","",1,"mt-[10px]","border-[1px]","border-grey-400","py-[10px]","text-[20px]","px-[5px]","rounded-[5px]",3,"ngClass"],["type","submit",1,"mt-[30px]","p-[20px]","text-white","px-[40px]","rounded-[10px]",3,"disabled","ngClass"]],template:function(t,r){if(1&t&&(h.F$t(),h.TgZ(0,"form",0),h.NdJ("ngSubmit",function(){return r.submitHandler()}),h.TgZ(1,"article",1)(2,"h2",2),h._uU(3),h.qZA(),h.TgZ(4,"p",3),h._uU(5),h.qZA()(),h.TgZ(6,"section",4)(7,"div",5)(8,"label",6),h._uU(9,"Enter Email"),h.qZA(),h._UZ(10,"input",7),h.qZA(),h.TgZ(11,"div",8)(12,"label",9),h._uU(13,"Enter password"),h.qZA(),h._UZ(14,"input",10),h.qZA()(),h.TgZ(15,"button",11),h._uU(16," Sign up "),h.qZA(),h.Hsn(17),h.qZA()),2&t){let i,s;h.Q6J("formGroup",r.signupForm),h.xp6(3),h.Oqu(r.title),h.xp6(2),h.hij(" ",r.description," "),h.xp6(9),h.Q6J("ngClass",null!=(i=r.signupForm.get("email"))&&i.valid||null==(i=r.signupForm.get("email"))||!i.touched?"":"border-red"),h.xp6(1),h.Q6J("disabled",!r.signupForm.valid)("ngClass",null!=(s=r.signupForm.get("email"))&&s.valid&&null!=(s=r.signupForm.get("password"))&&s.valid?"bg-orange":"bg-orange-500")}},dependencies:[gn,vC,Qm,tC,nC,fy,x0,Vh],encapsulation:2}),n})();function y8(n,e){1&n&&(h.ynx(0),h.TgZ(1,"div",1),h._UZ(2,"app-spiner"),h.qZA(),h.BQk())}function _8(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"app-auth-form",2),h.NdJ("authHandler",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.loginHandler(i))}),h.TgZ(2,"p",3),h._uU(3," if you do not have account, please go to "),h.TgZ(4,"a",4),h._uU(5,"Signup "),h.qZA(),h._uU(6," page "),h.qZA()(),h.BQk()}}let v8=(()=>{class n{constructor(t,r){this.store$=t,this.auth=r,this.loading$=(0,gt.of)(!1),this.loading$=this.store$.pipe((0,tt.Ys)(Os))}loginHandler(t){this.store$.dispatch(s_({email:t.email,password:t.password})),this.store$.dispatch(ST())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(tt.yh),h.Y36(i$))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:4,vars:6,consts:[[4,"ngIf"],[1,"mt-[100px]"],["title","Login","description","Enter credentials to enter the app",3,"authHandler"],[1,"mt-[20px]","font-xl","text-grey-600"],["routerLink","/signup",1,"text-black","cursor-pointer"]],template:function(t,r){1&t&&(h.YNc(0,y8,3,0,"ng-container",0),h.ALo(1,"async"),h.YNc(2,_8,7,0,"ng-container",0),h.ALo(3,"async")),2&t&&(h.Q6J("ngIf",!0===h.lcZ(1,2,r.loading$)),h.xp6(2),h.Q6J("ngIf",!h.lcZ(3,4,r.loading$)))},dependencies:[Qn,Vs,s$,o_,fn],encapsulation:2}),n})();function E8(n,e){1&n&&(h.ynx(0),h.TgZ(1,"div",1),h._UZ(2,"app-spiner"),h.qZA(),h.BQk())}function w8(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"app-auth-form",2),h.NdJ("authHandler",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.submitHandler(i))}),h.TgZ(2,"p",3),h._uU(3," if you are already signed up, got to "),h.TgZ(4,"a",4),h._uU(5,"Login "),h.qZA(),h._uU(6," page "),h.qZA()(),h.BQk()}}const b8=[{path:"",component:Bh},{path:"about",component:jh},{path:"catalog",children:[{path:"",component:a_},{path:":id",component:UT}]},{path:"contacts",component:u_},{path:"shops",component:VT},{path:"signup",component:(()=>{class n{constructor(t){this.store$=t}ngOnInit(){this.loading$=this.store$.pipe((0,tt.Ys)(Os))}submitHandler(t){this.store$.dispatch(Qu({email:t.email,password:t.password}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(tt.yh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-signup"]],decls:4,vars:6,consts:[[4,"ngIf"],[1,"mt-[100px]"],["title","Sign up","description","please enter email and password to register",3,"authHandler"],[1,"mt-[20px]","font-xl","text-grey-600"],["routerLink","/login",1,"text-black","cursor-pointer"]],template:function(t,r){1&t&&(h.YNc(0,E8,3,0,"ng-container",0),h.ALo(1,"async"),h.YNc(2,w8,7,0,"ng-container",0),h.ALo(3,"async")),2&t&&(h.Q6J("ngIf",h.lcZ(1,2,r.loading$)),h.xp6(2),h.Q6J("ngIf",!h.lcZ(3,4,r.loading$)))},dependencies:[Qn,Vs,s$,o_,fn],encapsulation:2}),n})()},{path:"login",component:v8},{path:"delivery",component:rM},{path:"basket",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-basket"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"app-page-title"),h._uU(1,"Basket component"),h.qZA())},dependencies:[i_],encapsulation:2}),n})(),canActivate:[(()=>{class n{constructor(t,r){this.store$=t,this.router=r}canActivate(t,r){return this.store$.pipe((0,tt.Ys)(na)).pipe((0,st.U)(i=>(i||this.router.navigate(["signup"]),!0)))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(tt.yh),h.LFG(Rr))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"**",redirectTo:"not-found",pathMatch:"full"},{path:"not-found",component:BT}];let I8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ho,BI.forRoot(b8),$i,yd,Gp,BI]}),n})();class C8 extends Qh{constructor(e,t){super(),this.httpClient=e,this.options=t,this.print=yD,this.options.operationPrinter&&(this.print=this.options.operationPrinter),this.requester=r=>new ar(i=>{const s=r.getContext(),u=(Re,_e)=>function em(...n){const e=n.find(t=>typeof t<"u");return typeof e>"u"?n[n.length-1]:e}(s[Re],this.options[Re],_e);let l=u("method","POST");const p=u("includeQuery",!0),_=u("includeExtensions",!1),w=u("uri","graphql"),I=u("withCredentials"),S=u("useMultipart"),M=!0===this.options.useGETForQueries,P=r.query.definitions.some(Re=>"OperationDefinition"===Re.kind&&"query"===Re.operation);M&&P&&(l="GET");const U={method:l,url:"function"==typeof w?w(r):w,body:{operationName:r.operationName,variables:r.variables},options:{withCredentials:I,useMultipart:S,headers:this.options.headers}};_&&(U.body.extensions=r.extensions),p&&(U.body.query=this.print(r.query));const Y=function u$(n){let e=n.headers&&n.headers instanceof pa?n.headers:new pa(n.headers);if(n.clientAwareness){const{name:t,version:r}=n.clientAwareness;t&&!e.has("apollographql-client-name")&&(e=e.set("apollographql-client-name",t)),r&&!e.has("apollographql-client-version")&&(e=e.set("apollographql-client-version",r))}return e}(s);U.options.headers=((n,e)=>n&&e?e.keys().reduce((r,i)=>r.set(i,e.getAll(i)),n):e||n)(U.options.headers,Y);const ge=((n,e,t)=>{const r=-1!==["POST","PUT","PATCH"].indexOf(n.method.toUpperCase()),s=n.body.length;let l,u=n.options&&n.options.useMultipart;if(u){if(s)return new pn.y(_=>_.error(new Error("File upload is not available when combined with Batching")));if(!r)return new pn.y(_=>_.error(new Error("File upload is not available when GET is used")));if(!t)return new pn.y(_=>_.error(new Error('To use File upload you need to pass "extractFiles" function from "extract-files" library to HttpLink\'s options')));l=t(n.body),u=!!l.files.size}let p={};if(s){if(!r)return new pn.y(_=>_.error(new Error("Batching is not available for GET requests")));p={body:n.body}}else{const _=u?l.clone:n.body;p=r?{body:_}:{params:Object.keys(n.body).reduce((I,S)=>{const M=n.body[S];return I[S]=(_=>-1!==["variables","extensions"].indexOf(_.toLowerCase()))(S)?JSON.stringify(M):M,I},{})}}if(u&&r){const _=new FormData;_.append("operations",JSON.stringify(p.body));const w={},I=l.files;let S=0;I.forEach(M=>{w[++S]=M}),_.append("map",JSON.stringify(w)),S=0,I.forEach((M,P)=>{_.append(++S+"",P,P.name)}),p.body=_}return e.request(n.method,n.url,{observe:"response",responseType:"json",reportProgress:!1,...p,...n.options})})(U,this.httpClient,this.options.extractFiles).subscribe({next:Re=>{r.setContext({response:Re}),i.next(Re.body)},error:Re=>i.error(Re),complete:()=>i.complete()});return()=>{ge.closed||ge.unsubscribe()}})}request(e){return this.requester(e)}}let D8=(()=>{class n{constructor(t){this.httpClient=t}create(t){return new C8(this.httpClient,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(mf))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var T8=function(){function n(){this.getFragmentDoc=Qy(da)}return n.prototype.batch=function(e){var i,t=this;return this.performTransaction(function(){return i=e.update(t)},"string"==typeof e.optimistic?e.optimistic:!1===e.optimistic?null:void 0),i},n.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},n.prototype.transformDocument=function(e){return e},n.prototype.transformForLink=function(e){return e},n.prototype.identify=function(e){},n.prototype.gc=function(){return[]},n.prototype.modify=function(e){return!1},n.prototype.readQuery=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read((0,fe.pi)((0,fe.pi)({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},n.prototype.readFragment=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read((0,fe.pi)((0,fe.pi)({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},n.prototype.writeQuery=function(e){var t=e.id,r=e.data,i=(0,fe._T)(e,["id","data"]);return this.write(Object.assign(i,{dataId:t||"ROOT_QUERY",result:r}))},n.prototype.writeFragment=function(e){var t=e.id,r=e.data,i=e.fragment,s=e.fragmentName,u=(0,fe._T)(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(u,{query:this.getFragmentDoc(i,s),dataId:t,result:r}))},n.prototype.updateQuery=function(e,t){return this.batch({update:function(r){var i=r.readQuery(e),s=t(i);return null==s?i:(r.writeQuery((0,fe.pi)((0,fe.pi)({},e),{data:s})),s)}})},n.prototype.updateFragment=function(e,t){return this.batch({update:function(r){var i=r.readFragment(e),s=t(i);return null==s?i:(r.writeFragment((0,fe.pi)((0,fe.pi)({},e),{data:s})),s)}})},n}(),c$=function(n){function e(t,r,i,s){var u,l=n.call(this,t)||this;if(l.message=t,l.path=r,l.query=i,l.variables=s,Array.isArray(l.path)){l.missing=l.message;for(var p=l.path.length-1;p>=0;--p)l.missing=((u={})[l.path[p]]=l.missing,u)}else l.missing=l.path;return l.__proto__=e.prototype,l}return(0,fe.ZT)(e,n),e}(Error);function Hk(n){return __DEV__&&function S8(n){var e=new Set([n]);return e.forEach(function(t){Nn(t)&&function A8(n){if(__DEV__&&!Object.isFrozen(n))try{Object.freeze(n)}catch(e){if(e instanceof TypeError)return null;throw e}return n}(t)===t&&Object.getOwnPropertyNames(t).forEach(function(r){Nn(t[r])&&e.add(t[r])})}),n}(n),n}var CA=Object.create(null),Gk=function(){return CA},l$=Object.create(null),Ib=function(){function n(e,t){var r=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(i,s){return Hk(Gn(i)?r.get(i.__ref,s):i&&i[s])},this.canRead=function(i){return Gn(i)?r.has(i.__ref):"object"==typeof i},this.toReference=function(i,s){if("string"==typeof i)return Ed(i);if(Gn(i))return i;var u=r.policies.identify(i)[0];if(u){var l=Ed(u);return s&&r.merge(u,i),l}}}return n.prototype.toObject=function(){return(0,fe.pi)({},this.data)},n.prototype.has=function(e){return void 0!==this.lookup(e,!0)},n.prototype.get=function(e,t){if(this.group.depend(e,t),Si.call(this.data,e)){var r=this.data[e];if(r&&Si.call(r,t))return r[t]}return"__typename"===t&&Si.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof Vf?this.parent.get(e,t):void 0},n.prototype.lookup=function(e,t){return t&&this.group.depend(e,"__exists"),Si.call(this.data,e)?this.data[e]:this instanceof Vf?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?Object.create(null):void 0},n.prototype.merge=function(e,t){var i,r=this;Gn(e)&&(e=e.__ref),Gn(t)&&(t=t.__ref);var s="string"==typeof e?this.lookup(i=e):e,u="string"==typeof t?this.lookup(i=t):t;if(u){__DEV__?wt("string"==typeof i,"store.merge expects a string ID"):wt("string"==typeof i,1);var l=new Ku(R8).merge(s,u);if(this.data[i]=l,l!==s&&(delete this.refs[i],this.group.caching)){var p=Object.create(null);s||(p.__exists=1),Object.keys(u).forEach(function(_){if(!s||s[_]!==l[_]){p[_]=1;var w=tl(_);w!==_&&!r.policies.hasKeyArgs(l.__typename,w)&&(p[w]=1),void 0===l[_]&&!(r instanceof Vf)&&delete l[_]}}),p.__typename&&!(s&&s.__typename)&&this.policies.rootTypenamesById[i]===l.__typename&&delete p.__typename,Object.keys(p).forEach(function(_){return r.group.dirty(i,_)})}}},n.prototype.modify=function(e,t){var r=this,i=this.lookup(e);if(i){var s=Object.create(null),u=!1,l=!0,p={DELETE:CA,INVALIDATE:l$,isReference:Gn,toReference:this.toReference,canRead:this.canRead,readField:function(_,w){return r.policies.readField("string"==typeof _?{fieldName:_,from:w||Ed(e)}:_,{store:r})}};if(Object.keys(i).forEach(function(_){var w=tl(_),I=i[_];if(void 0!==I){var S="function"==typeof t?t:t[_]||t[w];if(S){var M=S===Gk?CA:S(Hk(I),(0,fe.pi)((0,fe.pi)({},p),{fieldName:w,storeFieldName:_,storage:r.getStorage(e,_)}));M===l$?r.group.dirty(e,_):(M===CA&&(M=void 0),M!==I&&(s[_]=M,u=!0,I=M))}void 0!==I&&(l=!1)}}),u)return this.merge(e,s),l&&(this instanceof Vf?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},n.prototype.delete=function(e,t,r){var i,s=this.lookup(e);if(s){var u=this.getFieldValue(s,"__typename"),l=t&&r?this.policies.getStoreFieldName({typename:u,fieldName:t,args:r}):t;return this.modify(e,l?((i={})[l]=Gk,i):Gk)}return!1},n.prototype.evict=function(e,t){var r=!1;return e.id&&(Si.call(this.data,e.id)&&(r=this.delete(e.id,e.fieldName,e.args)),this instanceof Vf&&this!==t&&(r=this.parent.evict(e,t)||r),(e.fieldName||r)&&this.group.dirty(e.id,e.fieldName||"__exists")),r},n.prototype.clear=function(){this.replace(null)},n.prototype.extract=function(){var e=this,t=this.toObject(),r=[];return this.getRootIdSet().forEach(function(i){Si.call(e.policies.rootTypenamesById,i)||r.push(i)}),r.length&&(t.__META={extraRootIds:r.sort()}),t},n.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach(function(s){e&&Si.call(e,s)||t.delete(s)}),e){var r=e.__META,i=(0,fe._T)(e,["__META"]);Object.keys(i).forEach(function(s){t.merge(s,i[s])}),r&&r.extraRootIds.forEach(this.retain,this)}},n.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},n.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},n.prototype.getRootIdSet=function(e){return void 0===e&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof Vf?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},n.prototype.gc=function(){var e=this,t=this.getRootIdSet(),r=this.toObject();t.forEach(function(u){Si.call(r,u)&&(Object.keys(e.findChildRefIds(u)).forEach(t.add,t),delete r[u])});var i=Object.keys(r);if(i.length){for(var s=this;s instanceof Vf;)s=s.parent;i.forEach(function(u){return s.delete(u)})}return i},n.prototype.findChildRefIds=function(e){if(!Si.call(this.refs,e)){var t=this.refs[e]=Object.create(null),r=this.data[e];if(!r)return t;var i=new Set([r]);i.forEach(function(s){Gn(s)&&(t[s.__ref]=!0),Nn(s)&&Object.keys(s).forEach(function(u){var l=s[u];Nn(l)&&i.add(l)})})}return this.refs[e]},n.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},n}(),d$=function(){function n(e,t){void 0===t&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return n.prototype.resetCaching=function(){this.d=this.caching?VE():null,this.keyMaker=new sf(el)},n.prototype.depend=function(e,t){if(this.d){this.d(qk(e,t));var r=tl(t);r!==t&&this.d(qk(e,r)),this.parent&&this.parent.depend(e,t)}},n.prototype.dirty=function(e,t){this.d&&this.d.dirty(qk(e,t),"__exists"===t?"forget":"setDirty")},n}();function qk(n,e){return e+"#"+n}function h$(n,e){Cb(n)&&n.group.depend(e,"__exists")}!function(n){var e=function(t){function r(i){var u=i.resultCaching,p=i.seed,_=t.call(this,i.policies,new d$(void 0===u||u))||this;return _.stump=new x8(_),_.storageTrie=new sf(el),p&&_.replace(p),_}return(0,fe.ZT)(r,t),r.prototype.addLayer=function(i,s){return this.stump.addLayer(i,s)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(n);n.Root=e}(Ib||(Ib={}));var Vf=function(n){function e(t,r,i,s){var u=n.call(this,r.policies,s)||this;return u.id=t,u.parent=r,u.replay=i,u.group=s,i(u),u}return(0,fe.ZT)(e,n),e.prototype.addLayer=function(t,r){return new e(t,this,r,this.group)},e.prototype.removeLayer=function(t){var r=this,i=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(s){var u=r.data[s],l=i.lookup(s);l?u?u!==l&&Object.keys(u).forEach(function(p){Ei(u[p],l[p])||r.group.dirty(s,p)}):(r.group.dirty(s,"__exists"),Object.keys(l).forEach(function(p){r.group.dirty(s,p)})):r.delete(s)}),i):i===this.parent?this:i.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return(0,fe.pi)((0,fe.pi)({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(t){var r=this.parent.findChildRefIds(t);return Si.call(this.data,t)?(0,fe.pi)((0,fe.pi)({},r),n.prototype.findChildRefIds.call(this,t)):r},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(Ib),x8=function(n){function e(t){return n.call(this,"EntityStore.Stump",t,function(){},new d$(t.group.caching,t.group))||this}return(0,fe.ZT)(e,n),e.prototype.removeLayer=function(){return this},e.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},e}(Vf);function R8(n,e,t){var r=n[t],i=e[t];return Ei(r,i)?r:i}function Cb(n){return!!(n instanceof Ib&&n.group.caching)}function f$(n){return[n.selectionSet,n.objectOrReference,n.context,n.context.canonizeResults]}var O8=function(){function n(e){var t=this;this.knownResults=new(el?WeakMap:Map),this.config=Ly(e,{addTypename:!1!==e.addTypename,canonizeResults:Vy(e)}),this.canon=e.canon||new By,this.executeSelectionSet=Qy(function(r){var i,s=r.context.canonizeResults,u=f$(r);u[3]=!s;var l=(i=t.executeSelectionSet).peek.apply(i,u);return l?s?(0,fe.pi)((0,fe.pi)({},l),{result:t.canon.admit(l.result)}):l:(h$(r.context.store,r.enclosingRef.__ref),t.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize,keyArgs:f$,makeCacheKey:function(r,i,s,u){if(Cb(s.store))return s.store.makeCacheKey(r,Gn(i)?i.__ref:i,s.varString,u)}}),this.executeSubSelectedArray=Qy(function(r){return h$(r.context.store,r.enclosingRef.__ref),t.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(r){var i=r.field,s=r.array,u=r.context;if(Cb(u.store))return u.store.makeCacheKey(i,s,u.varString)}})}return n.prototype.resetCanon=function(){this.canon=new By},n.prototype.diffQueryAgainstStore=function(e){var t=e.store,r=e.query,i=e.rootId,s=void 0===i?"ROOT_QUERY":i,u=e.variables,l=e.returnPartialData,p=void 0===l||l,_=e.canonizeResults,w=void 0===_?this.config.canonizeResults:_,I=this.config.cache.policies;u=(0,fe.pi)((0,fe.pi)({},eE(sD(r))),u);var P,S=Ed(s),M=this.executeSelectionSet({selectionSet:X0(r).selectionSet,objectOrReference:S,enclosingRef:S,context:(0,fe.pi)({store:t,query:r,policies:I,variables:u,varString:Id(u),canonizeResults:w},pE(r,this.config.fragments))});if(M.missing&&(P=[new c$(M8(M.missing),M.missing,r,u)],!p))throw P[0];return{result:M.result,complete:!P,missing:P}},n.prototype.isFresh=function(e,t,r,i){if(Cb(i.store)&&this.knownResults.get(e)===r){var s=this.executeSelectionSet.peek(r,t,i,this.canon.isKnown(e));if(s&&e===s.result)return!0}return!1},n.prototype.execSelectionSetImpl=function(e){var t=this,r=e.selectionSet,i=e.objectOrReference,s=e.enclosingRef,u=e.context;if(Gn(i)&&!u.policies.rootTypenamesById[i.__ref]&&!u.store.has(i.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(i.__ref," object")};var S,l=u.variables,p=u.policies,w=u.store.getFieldValue(i,"__typename"),I=[],M=new Ku;function P(_e,Le){var Xe;return _e.missing&&(S=M.merge(S,((Xe={})[Le]=_e.missing,Xe))),_e.result}this.config.addTypename&&"string"==typeof w&&!p.rootIdsByTypename[w]&&I.push({__typename:w});var U=new Set(r.selections);U.forEach(function(_e){var Le,Xe;if(rg(_e,l))if(Ya(_e)){var rt=p.readField({fieldName:_e.name.value,field:_e,variables:u.variables,from:i},u),Et=Yc(_e);void 0===rt?EE.added(_e)||(S=M.merge(S,((Le={})[Et]="Can't find field '".concat(_e.name.value,"' on ").concat(Gn(i)?i.__ref+" object":"object "+JSON.stringify(i,null,2)),Le))):Zr(rt)?rt=P(t.executeSubSelectedArray({field:_e,array:rt,enclosingRef:s,context:u}),Et):_e.selectionSet?null!=rt&&(rt=P(t.executeSelectionSet({selectionSet:_e.selectionSet,objectOrReference:rt,enclosingRef:Gn(rt)?rt:s,context:u}),Et)):u.canonizeResults&&(rt=t.canon.pass(rt)),void 0!==rt&&I.push(((Xe={})[Et]=rt,Xe))}else{var Bt=Iy(_e,u.lookupFragment);if(!Bt&&_e.kind===Vt.FRAGMENT_SPREAD)throw __DEV__?new Sn("No fragment named ".concat(_e.name.value)):new Sn(5);Bt&&p.fragmentMatches(Bt,w)&&Bt.selectionSet.selections.forEach(U.add,U)}});var ge={result:ug(I),missing:S},Re=u.canonizeResults?this.canon.admit(ge):Hk(ge);return Re.result&&this.knownResults.set(Re.result,r),Re},n.prototype.execSubSelectedArrayImpl=function(e){var l,t=this,r=e.field,i=e.array,s=e.enclosingRef,u=e.context,p=new Ku;function _(w,I){var S;return w.missing&&(l=p.merge(l,((S={})[I]=w.missing,S))),w.result}return r.selectionSet&&(i=i.filter(u.store.canRead)),i=i.map(function(w,I){return null===w?null:Zr(w)?_(t.executeSubSelectedArray({field:r,array:w,enclosingRef:s,context:u}),I):r.selectionSet?_(t.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:w,enclosingRef:Gn(w)?w:s,context:u}),I):(__DEV__&&function P8(n,e,t){if(!e.selectionSet){var r=new Set([t]);r.forEach(function(i){Nn(i)&&(__DEV__?wt(!Gn(i),"Missing selection set for object of type ".concat(function PD(n,e){return Gn(e)?n.get(e.__ref,"__typename"):e&&e.__typename}(n,i)," returned for query field ").concat(e.name.value)):wt(!Gn(i),6),Object.values(i).forEach(r.add,r))})}}(u.store,r,w),w)}),{result:u.canonizeResults?this.canon.admit(i):i,missing:l}},n}();function M8(n){try{JSON.stringify(n,function(e,t){if("string"==typeof t)throw t;return t})}catch(e){return e}}var p$=Object.create(null);function Wk(n){var e=JSON.stringify(n);return p$[e]||(p$[e]=Object.create(null))}function g$(n){var e=Wk(n);return e.keyFieldsFn||(e.keyFieldsFn=function(t,r){var i=function(u,l){return r.readField(l,u)},s=r.keyObject=zk(n,function(u){var l=W_(r.storeObject,u,i);return void 0===l&&t!==r.storeObject&&Si.call(t,u[0])&&(l=W_(t,u,_$)),__DEV__?wt(void 0!==l,"Missing field '".concat(u.join("."),"' while extracting keyFields from ").concat(JSON.stringify(t))):wt(void 0!==l,2),l});return"".concat(r.typename,":").concat(JSON.stringify(s))})}function m$(n){var e=Wk(n);return e.keyArgsFn||(e.keyArgsFn=function(t,r){var i=r.field,s=r.variables,u=r.fieldName,l=zk(n,function(_){var w=_[0],I=w.charAt(0);if("@"!==I)if("$"!==I){if(t)return W_(t,_)}else{var U=w.slice(1);if(s&&Si.call(s,U)){var Y=_.slice(0);return Y[0]=U,W_(s,Y)}}else if(i&&Ro(i.directives)){var S=w.slice(1),M=i.directives.find(function(ge){return ge.name.value===S}),P=M&&eg(M,s);return P&&W_(P,_.slice(1))}}),p=JSON.stringify(l);return(t||"{}"!==p)&&(u+=":"+p),u})}function zk(n,e){var t=new Ku;return y$(n).reduce(function(r,i){var s,u=e(i);if(void 0!==u){for(var l=i.length-1;l>=0;--l)(s={})[i[l]]=u,u=s;r=t.merge(r,u)}return r},Object.create(null))}function y$(n){var e=Wk(n);if(!e.paths){var t=e.paths=[],r=[];n.forEach(function(i,s){Zr(i)?(y$(i).forEach(function(u){return t.push(r.concat(u))}),r.length=0):(r.push(i),Zr(n[s+1])||(t.push(r.slice(0)),r.length=0))})}return e.paths}function _$(n,e){return n[e]}function W_(n,e,t){return t=t||_$,v$(e.reduce(function r(i,s){return Zr(i)?i.map(function(u){return r(u,s)}):i&&t(i,s)},n))}function v$(n){return Nn(n)?Zr(n)?n.map(v$):zk(Object.keys(n).sort(),function(e){return W_(n,e)}):n}function Kk(n){return void 0!==n.args?n.args:n.field?eg(n.field,n.variables):null}Cy.setStringify(Id);var k8=function(){},E$=function(n,e){return e.fieldName},w$=function(n,e,t){return(0,t.mergeObjects)(n,e)},b$=function(n,e){return e},F8=function(){function n(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=(0,fe.pi)({dataIdFromObject:OD},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return n.prototype.identify=function(e,t){var r,i=this,s=t&&(t.typename||(null===(r=t.storeObject)||void 0===r?void 0:r.__typename))||e.__typename;if(s===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var p,u=t&&t.storeObject||e,l=(0,fe.pi)((0,fe.pi)({},t),{typename:s,storeObject:u,readField:t&&t.readField||function(){var S=Zk(arguments,u);return i.readField(S,{store:i.cache.data,variables:S.variables})}}),_=s&&this.getTypePolicy(s),w=_&&_.keyFn||this.config.dataIdFromObject;w;){var I=w(e,l);if(!Zr(I)){p=I;break}w=g$(I)}return p=p?String(p):void 0,l.keyObject?[p,l.keyObject]:[p]},n.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach(function(r){var i=e[r],s=i.queryType,u=i.mutationType,l=i.subscriptionType,p=(0,fe._T)(i,["queryType","mutationType","subscriptionType"]);s&&t.setRootTypename("Query",r),u&&t.setRootTypename("Mutation",r),l&&t.setRootTypename("Subscription",r),Si.call(t.toBeAdded,r)?t.toBeAdded[r].push(p):t.toBeAdded[r]=[p]})},n.prototype.updateTypePolicy=function(e,t){var r=this,i=this.getTypePolicy(e),s=t.keyFields,u=t.fields;function l(p,_){p.merge="function"==typeof _?_:!0===_?w$:!1===_?b$:p.merge}l(i,t.merge),i.keyFn=!1===s?k8:Zr(s)?g$(s):"function"==typeof s?s:i.keyFn,u&&Object.keys(u).forEach(function(p){var _=r.getFieldPolicy(e,p,!0),w=u[p];if("function"==typeof w)_.read=w;else{var I=w.keyArgs,S=w.read,M=w.merge;_.keyFn=!1===I?E$:Zr(I)?m$(I):"function"==typeof I?I:_.keyFn,"function"==typeof S&&(_.read=S),l(_,M)}_.read&&_.merge&&(_.keyFn=_.keyFn||E$)})},n.prototype.setRootTypename=function(e,t){void 0===t&&(t=e);var r="ROOT_"+e.toUpperCase(),i=this.rootTypenamesById[r];t!==i&&(__DEV__?wt(!i||i===e,"Cannot change root ".concat(e," __typename more than once")):wt(!i||i===e,3),i&&delete this.rootIdsByTypename[i],this.rootIdsByTypename[t]=r,this.rootTypenamesById[r]=t)},n.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(r){t.getSupertypeSet(r,!0),e[r].forEach(function(i){t.getSupertypeSet(i,!0).add(r);var s=i.match(Uy);(!s||s[0]!==i)&&t.fuzzySubtypes.set(i,new RegExp(i))})})},n.prototype.getTypePolicy=function(e){var t=this;if(!Si.call(this.typePolicies,e)){var r=this.typePolicies[e]=Object.create(null);r.fields=Object.create(null);var i=this.supertypeMap.get(e);i&&i.size&&i.forEach(function(u){var l=t.getTypePolicy(u),p=l.fields,_=(0,fe._T)(l,["fields"]);Object.assign(r,_),Object.assign(r.fields,p)})}var s=this.toBeAdded[e];return s&&s.length&&s.splice(0).forEach(function(u){t.updateTypePolicy(e,u)}),this.typePolicies[e]},n.prototype.getFieldPolicy=function(e,t,r){if(e){var i=this.getTypePolicy(e).fields;return i[t]||r&&(i[t]=Object.create(null))}},n.prototype.getSupertypeSet=function(e,t){var r=this.supertypeMap.get(e);return!r&&t&&this.supertypeMap.set(e,r=new Set),r},n.prototype.fragmentMatches=function(e,t,r,i){var s=this;if(!e.typeCondition)return!0;if(!t)return!1;var u=e.typeCondition.name.value;if(t===u)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(u))for(var l=this.getSupertypeSet(t,!0),p=[l],_=function(P){var U=s.getSupertypeSet(P,!1);U&&U.size&&p.indexOf(U)<0&&p.push(U)},w=!(!r||!this.fuzzySubtypes.size),I=!1,S=0;S<p.length;++S){var M=p[S];if(M.has(u))return l.has(u)||(I&&__DEV__&&wt.warn("Inferring subtype ".concat(t," of supertype ").concat(u)),l.add(u)),!0;M.forEach(_),w&&S===p.length-1&&fE(e.selectionSet,r,i)&&(w=!1,I=!0,this.fuzzySubtypes.forEach(function(P,U){var Y=t.match(P);Y&&Y[0]===t&&_(U)}))}return!1},n.prototype.hasKeyArgs=function(e,t){var r=this.getFieldPolicy(e,t,!1);return!(!r||!r.keyFn)},n.prototype.getStoreFieldName=function(e){var s,t=e.typename,r=e.fieldName,i=this.getFieldPolicy(t,r,!1),u=i&&i.keyFn;if(u&&t)for(var l={typename:t,fieldName:r,field:e.field||null,variables:e.variables},p=Kk(e);u;){var _=u(p,l);if(!Zr(_)){s=_||r;break}u=m$(_)}return void 0===s&&(s=e.field?function kR(n,e){var t=null;n.directives&&(t={},n.directives.forEach(function(i){t[i.name.value]={},i.arguments&&i.arguments.forEach(function(s){return zu(t[i.name.value],s.name,s.value,e)})}));var r=null;return n.arguments&&n.arguments.length&&(r={},n.arguments.forEach(function(i){return zu(r,i.name,i.value,e)})),Cy(n.name.value,r,t)}(e.field,e.variables):Cy(r,Kk(e))),!1===s?r:r===tl(s)?s:r+":"+s},n.prototype.readField=function(e,t){var r=e.from;if(r&&(e.field||e.fieldName)){if(void 0===e.typename){var s=t.store.getFieldValue(r,"__typename");s&&(e.typename=s)}var u=this.getStoreFieldName(e),l=tl(u),p=t.store.getFieldValue(r,u),_=this.getFieldPolicy(e.typename,l,!1),w=_&&_.read;if(w){var I=I$(this,r,e,t,t.store.getStorage(Gn(r)?r.__ref:r,u));return Hi.withValue(this.cache,w,[p,I])}return p}},n.prototype.getReadFunction=function(e,t){var r=this.getFieldPolicy(e,t,!1);return r&&r.read},n.prototype.getMergeFunction=function(e,t,r){var i=this.getFieldPolicy(e,t,!1),s=i&&i.merge;return!s&&r&&(s=(i=this.getTypePolicy(r))&&i.merge),s},n.prototype.runMergeFunction=function(e,t,r,i,s){var u=r.field,l=r.typename,p=r.merge;return p===w$?C$(i.store)(e,t):p===b$?t:(i.overwrite&&(e=void 0),p(e,t,I$(this,void 0,{typename:l,fieldName:u.name.value,field:u,variables:i.variables},i,s||Object.create(null))))},n}();function I$(n,e,t,r,i){var s=n.getStoreFieldName(t),u=tl(s),l=t.variables||r.variables,p=r.store,_=p.toReference,w=p.canRead;return{args:Kk(t),field:t.field||null,fieldName:u,storeFieldName:s,variables:l,isReference:Gn,toReference:_,storage:i,cache:n.cache,canRead:w,readField:function(){return n.readField(Zk(arguments,e,l),r)},mergeObjects:C$(r.store)}}function Zk(n,e,t){var u,r=n[0];return"string"==typeof r?u={fieldName:r,from:n.length>1?n[1]:e}:(u=(0,fe.pi)({},r),Si.call(u,"from")||(u.from=e)),__DEV__&&void 0===u.from&&__DEV__&&wt.warn("Undefined 'from' passed to readField with arguments ".concat(function N8(n){var e=wE("stringifyForDisplay");return JSON.stringify(n,function(t,r){return void 0===r?e:r}).split(JSON.stringify(e)).join("<undefined>")}(Array.from(n)))),void 0===u.variables&&(u.variables=t),u}function C$(n){return function(t,r){if(Zr(t)||Zr(r))throw __DEV__?new Sn("Cannot automatically merge arrays"):new Sn(4);if(Nn(t)&&Nn(r)){var i=n.getFieldValue(t,"__typename"),s=n.getFieldValue(r,"__typename");if(i&&s&&i!==s)return r;if(Gn(t)&&nl(r))return n.merge(t.__ref,r),t;if(nl(t)&&Gn(r))return n.merge(t,r.__ref),r;if(nl(t)&&nl(r))return(0,fe.pi)((0,fe.pi)({},t),r)}return r}}function Qk(n,e,t){var r="".concat(e).concat(t),i=n.flavors.get(r);return i||n.flavors.set(r,i=n.clientOnly===e&&n.deferred===t?n:(0,fe.pi)((0,fe.pi)({},n),{clientOnly:e,deferred:t})),i}var L8=function(){function n(e,t,r){this.cache=e,this.reader=t,this.fragments=r}return n.prototype.writeToStore=function(e,t){var r=this,i=t.query,s=t.result,u=t.dataId,l=t.variables,p=t.overwrite,_=Zh(i),w=function CO(){return new Ku}();l=(0,fe.pi)((0,fe.pi)({},eE(_)),l);var I=(0,fe.pi)((0,fe.pi)({store:e,written:Object.create(null),merge:function(M,P){return w.merge(M,P)},variables:l,varString:Id(l)},pE(i,this.fragments)),{overwrite:!!p,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),S=this.processSelectionSet({result:s||Object.create(null),dataId:u,selectionSet:_.selectionSet,mergeTree:{map:new Map},context:I});if(!Gn(S))throw __DEV__?new Sn("Could not identify object ".concat(JSON.stringify(s))):new Sn(7);return I.incomingById.forEach(function(M,P){var U=M.storeObject,Y=M.mergeTree,ge=M.fieldNodeSet,Re=Ed(P);if(Y&&Y.map.size){var _e=r.applyMerges(Y,Re,U,I);if(Gn(_e))return;U=_e}if(__DEV__&&!I.overwrite){var Le=Object.create(null);ge.forEach(function(Et){Et.selectionSet&&(Le[Et.name.value]=!0)}),Object.keys(U).forEach(function(Et){(function(Et){return!0===Le[tl(Et)]})(Et)&&!function(Et){var Bt=Y&&Y.map.get(Et);return Boolean(Bt&&Bt.info&&Bt.info.merge)}(Et)&&function V8(n,e,t,r){var i=function(I){var S=r.getFieldValue(I,t);return"object"==typeof S&&S},s=i(n);if(s){var u=i(e);if(u&&!Gn(s)&&!Ei(s,u)&&!Object.keys(s).every(function(I){return void 0!==r.getFieldValue(u,I)})){var l=r.getFieldValue(n,"__typename")||r.getFieldValue(e,"__typename"),p=tl(t),_="".concat(l,".").concat(p);if(!A$.has(_)){A$.add(_);var w=[];!Zr(s)&&!Zr(u)&&[s,u].forEach(function(I){var S=r.getFieldValue(I,"__typename");"string"==typeof S&&!w.includes(S)&&w.push(S)}),__DEV__&&wt.warn("Cache data may be lost when replacing the ".concat(p," field of a ").concat(l," object.\n\nTo address this problem (which is not a bug in Apollo Client), ").concat(w.length?"either ensure all objects of type "+w.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(_," field, so InMemoryCache can safely merge these objects:\n\n  existing: ").concat(JSON.stringify(s).slice(0,1e3),"\n  incoming: ").concat(JSON.stringify(u).slice(0,1e3),"\n\nFor more information about these options, please refer to the documentation:\n\n  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers\n  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects\n"))}}}}(Re,U,Et,I.store)})}e.merge(P,U)}),e.retain(S.__ref),S},n.prototype.processSelectionSet=function(e){var t=this,r=e.dataId,i=e.result,s=e.selectionSet,u=e.context,l=e.mergeTree,p=this.cache.policies,_=Object.create(null),w=r&&p.rootTypenamesById[r]||Ty(i,s,u.fragmentMap)||r&&u.store.get(r,"__typename");"string"==typeof w&&(_.__typename=w);var I=function(){var _e=Zk(arguments,_,u.variables);if(Gn(_e.from)){var Le=u.incomingById.get(_e.from.__ref);if(Le){var Xe=p.readField((0,fe.pi)((0,fe.pi)({},_e),{from:Le.storeObject}),u);if(void 0!==Xe)return Xe}}return p.readField(_e,u)},S=new Set;this.flattenFields(s,i,u,w).forEach(function(_e,Le){var Xe,rt=Yc(Le),Et=i[rt];if(S.add(Le),void 0!==Et){var Bt=p.getStoreFieldName({typename:w,fieldName:Le.name.value,field:Le,variables:_e.variables}),Dr=T$(l,Bt),Mi=t.processFieldValue(Et,Le,Le.selectionSet?Qk(_e,!1,!1):_e,Dr),fm=void 0;Le.selectionSet&&(Gn(Mi)||nl(Mi))&&(fm=I("__typename",Mi));var lv=p.getMergeFunction(w,Le.name.value,fm);lv?Dr.info={field:Le,typename:w,merge:lv}:S$(l,Bt),_=_e.merge(_,((Xe={})[Bt]=Mi,Xe))}else __DEV__&&!_e.clientOnly&&!_e.deferred&&!EE.added(Le)&&!p.getReadFunction(w,Le.name.value)&&__DEV__&&wt.error("Missing field '".concat(Yc(Le),"' while writing result ").concat(JSON.stringify(i,null,2)).substring(0,1e3))});try{var M=p.identify(i,{typename:w,selectionSet:s,fragmentMap:u.fragmentMap,storeObject:_,readField:I}),U=M[1];r=r||M[0],U&&(_=u.merge(_,U))}catch(_e){if(!r)throw _e}if("string"==typeof r){var Y=Ed(r),ge=u.written[r]||(u.written[r]=[]);if(ge.indexOf(s)>=0||(ge.push(s),this.reader&&this.reader.isFresh(i,Y,s,u)))return Y;var Re=u.incomingById.get(r);return Re?(Re.storeObject=u.merge(Re.storeObject,_),Re.mergeTree=Yk(Re.mergeTree,l),S.forEach(function(_e){return Re.fieldNodeSet.add(_e)})):u.incomingById.set(r,{storeObject:_,mergeTree:DA(l)?void 0:l,fieldNodeSet:S}),Y}return _},n.prototype.processFieldValue=function(e,t,r,i){var s=this;return t.selectionSet&&null!==e?Zr(e)?e.map(function(u,l){var p=s.processFieldValue(u,t,r,T$(i,l));return S$(i,l),p}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:i}):__DEV__?BD(e):e},n.prototype.flattenFields=function(e,t,r,i){void 0===i&&(i=Ty(t,e,r.fragmentMap));var s=new Map,u=this.cache.policies,l=new sf(!1);return function p(_,w){var I=l.lookup(_,w.clientOnly,w.deferred);I.visited||(I.visited=!0,_.selections.forEach(function(S){if(rg(S,r.variables)){var M=w.clientOnly,P=w.deferred;if(!(M&&P)&&Ro(S.directives)&&S.directives.forEach(function(ge){var Re=ge.name.value;if("client"===Re&&(M=!0),"defer"===Re){var _e=eg(ge,r.variables);(!_e||!1!==_e.if)&&(P=!0)}}),Ya(S)){var U=s.get(S);U&&(M=M&&U.clientOnly,P=P&&U.deferred),s.set(S,Qk(r,M,P))}else{var Y=Iy(S,r.lookupFragment);if(!Y&&S.kind===Vt.FRAGMENT_SPREAD)throw __DEV__?new Sn("No fragment named ".concat(S.name.value)):new Sn(8);Y&&u.fragmentMatches(Y,i,t,r.variables)&&p(Y.selectionSet,Qk(r,M,P))}}}))}(e,r),s},n.prototype.applyMerges=function(e,t,r,i,s){var u,l=this;if(e.map.size&&!Gn(r)){var p=Zr(r)||!Gn(t)&&!nl(t)?void 0:t,_=r;p&&!s&&(s=[Gn(p)?p.__ref:p]);var w,I=function(S,M){return Zr(S)?"number"==typeof M?S[M]:void 0:i.store.getFieldValue(S,String(M))};e.map.forEach(function(S,M){var P=I(p,M),U=I(_,M);if(void 0!==U){s&&s.push(M);var Y=l.applyMerges(S,P,U,i,s);Y!==U&&(w=w||new Map).set(M,Y),s&&wt(s.pop()===M)}}),w&&(r=Zr(_)?_.slice(0):(0,fe.pi)({},_),w.forEach(function(S,M){r[M]=S}))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,i,s&&(u=i.store).getStorage.apply(u,s)):r},n}(),D$=[];function T$(n,e){var t=n.map;return t.has(e)||t.set(e,D$.pop()||{map:new Map}),t.get(e)}function Yk(n,e){if(n===e||!e||DA(e))return n;if(!n||DA(n))return e;var t=n.info&&e.info?(0,fe.pi)((0,fe.pi)({},n.info),e.info):n.info||e.info,r=n.map.size&&e.map.size,s={info:t,map:r?new Map:n.map.size?n.map:e.map};if(r){var u=new Set(e.map.keys());n.map.forEach(function(l,p){s.map.set(p,Yk(l,e.map.get(p))),u.delete(p)}),u.forEach(function(l){s.map.set(l,Yk(e.map.get(l),n.map.get(l)))})}return s}function DA(n){return!n||!(n.info||n.map.size)}function S$(n,e){var t=n.map,r=t.get(e);r&&DA(r)&&(D$.push(r),t.delete(e))}var A$=new Set,U8=function(n){function e(t){void 0===t&&(t={});var r=n.call(this)||this;return r.watches=new Set,r.typenameDocumentCache=new Map,r.makeVar=_L,r.txCount=0,r.config=function hE(n){return Ly(MD,n)}(t),r.addTypename=!!r.config.addTypename,r.policies=new F8({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return(0,fe.ZT)(e,n),e.prototype.init=function(){var t=this.data=new Ib.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=t.stump,this.resetResultCache()},e.prototype.resetResultCache=function(t){var r=this,i=this.storeReader,s=this.config.fragments;this.storeWriter=new L8(this,this.storeReader=new O8({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:Vy(this.config),canon:t?void 0:i&&i.canon,fragments:s}),s),this.maybeBroadcastWatch=Qy(function(u,l){return r.broadcastWatch(u,l)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(u){var l=u.optimistic?r.optimisticData:r.data;if(Cb(l))return l.makeCacheKey(u.query,u.callback,Id({optimistic:u.optimistic,id:u.id,variables:u.variables}))}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(u){return u.resetCaching()})},e.prototype.restore=function(t){return this.init(),t&&this.data.replace(t),this},e.prototype.extract=function(t){return void 0===t&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){var r=t.returnPartialData,i=void 0!==r&&r;try{return this.storeReader.diffQueryAgainstStore((0,fe.pi)((0,fe.pi)({},t),{store:t.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:i})).result||null}catch(s){if(s instanceof c$)return null;throw s}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore(this.data,t)}finally{!--this.txCount&&!1!==t.broadcast&&this.broadcastWatches()}},e.prototype.modify=function(t){if(Si.call(t,"id")&&!t.id)return!1;var r=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(t.id||"ROOT_QUERY",t.fields)}finally{!--this.txCount&&!1!==t.broadcast&&this.broadcastWatches()}},e.prototype.diff=function(t){return this.storeReader.diffQueryAgainstStore((0,fe.pi)((0,fe.pi)({},t),{store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(t){var r=this;return this.watches.size||function yL(n){fg(n).vars.forEach(function(e){return e.attachCache(n)})}(this),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){r.watches.delete(t)&&!r.watches.size&&XD(r),r.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(t){Id.reset();var r=this.optimisticData.gc();return t&&!this.txCount&&(t.resetResultCache?this.resetResultCache(t.resetResultIdentities):t.resetResultIdentities&&this.storeReader.resetCanon()),r},e.prototype.retain=function(t,r){return(r?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,r){return(r?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){if(Gn(t))return t.__ref;try{return this.policies.identify(t)[0]}catch(r){__DEV__&&wt.warn(r)}},e.prototype.evict=function(t){if(!t.id){if(Si.call(t,"id"))return!1;t=(0,fe.pi)((0,fe.pi)({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t,this.data)}finally{!--this.txCount&&!1!==t.broadcast&&this.broadcastWatches()}},e.prototype.reset=function(t){var r=this;return this.init(),Id.reset(),t&&t.discardWatches?(this.watches.forEach(function(i){return r.maybeBroadcastWatch.forget(i)}),this.watches.clear(),XD(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var r=this.optimisticData.removeLayer(t);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},e.prototype.batch=function(t){var _,r=this,i=t.update,s=t.optimistic,u=void 0===s||s,l=t.removeOptimistic,p=t.onWatchUpdated,w=function(S){var P=r.data,U=r.optimisticData;++r.txCount,S&&(r.data=r.optimisticData=S);try{return _=i(r)}finally{--r.txCount,r.data=P,r.optimisticData=U}},I=new Set;return p&&!this.txCount&&this.broadcastWatches((0,fe.pi)((0,fe.pi)({},t),{onWatchUpdated:function(S){return I.add(S),!1}})),"string"==typeof u?this.optimisticData=this.optimisticData.addLayer(u,w):!1===u?w(this.data):w(),"string"==typeof l&&(this.optimisticData=this.optimisticData.removeLayer(l)),p&&I.size?(this.broadcastWatches((0,fe.pi)((0,fe.pi)({},t),{onWatchUpdated:function(S,M){var P=p.call(this,S,M);return!1!==P&&I.delete(S),P}})),I.size&&I.forEach(function(S){return r.maybeBroadcastWatch.dirty(S)})):this.broadcastWatches(t),_},e.prototype.performTransaction=function(t,r){return this.batch({update:t,optimistic:r||null!==r})},e.prototype.transformDocument=function(t){if(this.addTypename){var r=this.typenameDocumentCache.get(t);return r||(r=EE(t),this.typenameDocumentCache.set(t,r),this.typenameDocumentCache.set(r,r)),r}return t},e.prototype.transformForLink=function(t){var r=this.config.fragments;return r?r.transform(t):t},e.prototype.broadcastWatches=function(t){var r=this;this.txCount||this.watches.forEach(function(i){return r.maybeBroadcastWatch(i,t)})},e.prototype.broadcastWatch=function(t,r){var i=t.lastDiff,s=this.diff(t);r&&(t.optimistic&&"string"==typeof r.optimistic&&(s.fromOptimisticTransaction=!0),r.onWatchUpdated&&!1===r.onWatchUpdated.call(this,t,s,i))||(!i||!Ei(i.result,s.result))&&t.callback(t.lastDiff=s,i)},e}(T8),B8=R(5032);class Ud{constructor(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}observe(e){return x$(this,e)}do(e,t,r){const{kind:i,value:s,error:u}=this;return"N"===i?e?.(s):"E"===i?t?.(u):r?.()}accept(e,t,r){var i;return(0,$.m)(null===(i=e)||void 0===i?void 0:i.next)?this.observe(e):this.do(e,t,r)}toObservable(){const{kind:e,value:t,error:r}=this,i="N"===e?(0,gt.of)(t):"E"===e?ue(()=>r):"C"===e?me.E:0;if(!i)throw new TypeError(`Unexpected notification kind ${e}`);return i}static createNext(e){return new Ud("N",e)}static createError(e){return new Ud("E",void 0,e)}static createComplete(){return Ud.completeNotification}}function x$(n,e){var t,r,i;const{kind:s,value:u,error:l}=n;if("string"!=typeof s)throw new TypeError('Invalid notification, missing "kind"');"N"===s?null===(t=e.next)||void 0===t||t.call(e,u):"E"===s?null===(r=e.error)||void 0===r||r.call(e,l):null===(i=e.complete)||void 0===i||i.call(e)}function R$(n,e,t,r){return(0,ot.e)((i,s)=>{let u;e&&"function"!=typeof e?({duration:t,element:u,connector:r}=e):u=e;const l=new Map,p=P=>{l.forEach(P),P(s)},_=P=>p(U=>U.error(P));let w=0,I=!1;const S=new ni.Q(s,P=>{try{const U=n(P);let Y=l.get(U);if(!Y){l.set(U,Y=r?r():new Wt.x);const ge=function M(P,U){const Y=new pn.y(ge=>{w++;const Re=U.subscribe(ge);return()=>{Re.unsubscribe(),0==--w&&I&&S.unsubscribe()}});return Y.key=P,Y}(U,Y);if(s.next(ge),t){const Re=(0,ni.x)(Y,()=>{Y.complete(),Re?.unsubscribe()},void 0,void 0,()=>l.delete(U));S.add((0,T.Xf)(t(ge)).subscribe(Re))}}Y.next(u?u(P):P)}catch(U){_(U)}},()=>p(P=>P.complete()),_,()=>l.clear(),()=>(I=!0,0===w));i.subscribe(S)})}function O$(n,e){return e?t=>t.pipe(O$((r,i)=>(0,T.Xf)(n(r,i)).pipe((0,st.U)((s,u)=>e(r,s,i,u))))):(0,ot.e)((t,r)=>{let i=0,s=null,u=!1;t.subscribe((0,ni.x)(r,l=>{s||(s=(0,ni.x)(r,void 0,()=>{s=null,u&&r.complete()}),(0,T.Xf)(n(l,i++)).subscribe(s))},()=>{u=!0,!s&&r.complete()}))})}Ud.completeNotification=new Ud("C");const M$={dispatch:!0,useEffectsErrorHandler:!0},TA="__@ngrx/effects_create__";function z_(n,e){const t=n(),r={...M$,...e};return Object.defineProperty(t,TA,{value:r}),t}function G8(n){return Object.getOwnPropertyNames(n).filter(r=>!(!n[r]||!n[r].hasOwnProperty(TA))&&n[r][TA].hasOwnProperty("dispatch")).map(r=>({propertyName:r,...n[r][TA]}))}function Jk(n){return Object.getPrototypeOf(n)}const SA="__@ngrx/effects__";function q8(n){return(0,tt.qC)(z8,Jk)(n)}function z8(n){return function P$(n){return n.constructor.hasOwnProperty(SA)}(n)?n.constructor[SA]:[]}function K8(n,e,t){const r=Jk(n).constructor.name,i=function N$(n){return[q8,G8].reduce((t,r)=>t.concat(r(n)),[])}(n).map(({propertyName:s,dispatch:u,useEffectsErrorHandler:l})=>{const p="function"==typeof n[s]?n[s]():n[s],_=l?t(p,e):p;return!1===u?_.pipe(function j8(){return(0,ot.e)((n,e)=>{n.subscribe((0,ni.x)(e,B8.Z))})}()):_.pipe(function $8(){return(0,ot.e)((n,e)=>{n.subscribe((0,ni.x)(e,t=>{e.next(Ud.createNext(t))},()=>{e.next(Ud.createComplete()),e.complete()},t=>{e.next(Ud.createError(t)),e.complete()}))})}()).pipe((0,st.U)(I=>({effect:n[s],notification:I,propertyName:s,sourceName:r,sourceInstance:n})))});return(0,_b.T)(...i)}function k$(n,e,t=10){return n.pipe((0,yi.K)(r=>(e&&e.handleError(r),t<=1?n:k$(n,e,t-1))))}let Xk=(()=>{class n extends pn.y{constructor(t){super(),t&&(this.source=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(tt.Y$))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function K_(...n){return(0,Ln.h)(e=>n.some(t=>"string"==typeof t?t===e.type:t.type===e.type))}const F$=new h.OlP("@ngrx/effects Internal Root Guard"),AA=new h.OlP("@ngrx/effects User Provided Effects"),eF=new h.OlP("@ngrx/effects Internal Root Effects"),L$=new h.OlP("@ngrx/effects Root Effects"),V$=new h.OlP("@ngrx/effects Internal Feature Effects"),U$=new h.OlP("@ngrx/effects Feature Effects"),Q8=new h.OlP("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>k$}),B$="@ngrx/effects/init";function a5(n){return tF(n,"ngrxOnInitEffects")}function tF(n,e){return n&&e in n&&"function"==typeof n[e]}(0,tt.PH)(B$);let nF=(()=>{class n extends Wt.x{constructor(t,r){super(),this.errorHandler=t,this.effectsErrorHandler=r}addEffects(t){this.next(t)}toActions(){return this.pipe(R$(Jk),(0,mr.z)(t=>t.pipe(R$(u5))),(0,mr.z)(t=>{const r=t.pipe(O$(s=>function c5(n,e){return t=>{const r=K8(t,n,e);return function s5(n){return tF(n,"ngrxOnRunEffects")}(t)?t.ngrxOnRunEffects(r):r}}(this.errorHandler,this.effectsErrorHandler)(s)),(0,st.U)(s=>(function J8(n,e){if("N"===n.notification.kind){const t=n.notification.value;!function X8(n){return"function"!=typeof n&&n&&n.type&&"string"==typeof n.type}(t)&&e.handleError(new Error(`Effect ${function e5({propertyName:n,sourceInstance:e,sourceName:t}){const r="function"==typeof e[n];return`"${t}.${String(n)}${r?"()":""}"`}(n)} dispatched an invalid action: ${function t5(n){try{return JSON.stringify(n)}catch{return n}}(t)}`))}}(s,this.errorHandler),s.notification)),(0,Ln.h)(s=>"N"===s.kind&&null!=s.value),function H8(){return(0,ot.e)((n,e)=>{n.subscribe((0,ni.x)(e,t=>x$(t,e)))})}()),i=t.pipe((0,or.q)(1),(0,Ln.h)(a5),(0,st.U)(s=>s.ngrxOnInitEffects()));return(0,_b.T)(r,i)}))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.qLn),h.LFG(Q8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function u5(n){return function r5(n){return tF(n,"ngrxOnIdentifyEffects")}(n)?n.ngrxOnIdentifyEffects():""}let rF=(()=>{class n{constructor(t,r){this.effectSources=t,this.store=r,this.effectsSubscription=null}get isStarted(){return!!this.effectsSubscription}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(nF),h.LFG(tt.yh))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),j$=(()=>{class n{constructor(t,r,i,s,u,l,p){this.sources=t,r.start(),s.forEach(_=>t.addEffects(_)),i.dispatch({type:B$})}addEffects(t){this.sources.addEffects(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(nF),h.LFG(rF),h.LFG(tt.yh),h.LFG(L$),h.LFG(tt.cr,8),h.LFG(tt.CK,8),h.LFG(F$,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),l5=(()=>{class n{constructor(t,r,i,s){r.forEach(u=>u.forEach(l=>t.addEffects(l)))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(j$),h.LFG(U$),h.LFG(tt.cr,8),h.LFG(tt.CK,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),d5=(()=>{class n{static forFeature(t=[]){return{ngModule:l5,providers:[t,{provide:V$,multi:!0,useValue:t},{provide:AA,multi:!0,useValue:[]},{provide:U$,multi:!0,useFactory:$$,deps:[h.zs3,V$,AA]}]}}static forRoot(t=[]){return{ngModule:j$,providers:[t,{provide:eF,useValue:[t]},{provide:F$,useFactory:f5,deps:[[rF,new h.FiY,new h.tp0],[eF,new h.PiD]]},{provide:AA,multi:!0,useValue:[]},{provide:L$,useFactory:$$,deps:[h.zs3,eF,AA]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function $$(n,e,t){const r=[];for(const i of e)r.push(...i);for(const i of t)r.push(...i);return function h5(n,e){return e.map(t=>n.get(t))}(n,r)}function f5(n,e){if((1!==e.length||0!==e[0].length)&&n)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}const g5=(0,tt.Lq)({productType:es.DriedFruits},(0,tt.on)(sw,(n,{productType:e})=>({productType:e}))),y5=(0,tt.Lq)({count:[],products:[],currentPage:0,loading:!1},(0,tt.on)(N0,(n,{count:e,products:t,currentPage:r})=>({...n,count:new Array(Math.ceil(e/6)),products:t,currentPage:r,loading:!1})),(0,tt.on)(LC,n=>({...n,currentPage:0})),(0,tt.on)(Hh,n=>({...n,loading:!0}))),v5=(0,tt.Lq)({email:"",basket:"[]",loading:!1},(0,tt.on)(fa,n=>n),(0,tt.on)(ST,n=>({...n,loading:!0})),(0,tt.on)(fa,n=>({...n,loading:!1})),(0,tt.on)(AT,(n,e)=>({...n,email:e.email,basket:e.basket,loading:!1})),(0,tt.on)(RT,(n,{id:e})=>{const r=[...JSON.parse(n.basket),e];return{...n,basket:JSON.stringify(r),loading:!1}})),E5={productType:g5,products:y5,auth:v5};var w5=R(825),iF=R(1365);let b5=(()=>{class n{constructor(t,r,i){this.actions=t,this.productService=r,this.store=i,this.loadProducts$=z_(()=>this.actions.pipe(K_(_d),(0,iF.M)(this.store.select(py)),(0,ft.w)(([s,u])=>this.productService.getProductsWithRefetch(u,s.offset).pipe((0,st.U)(l=>N0({count:l.count,products:l.products,currentPage:s.offset}))))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xk),h.LFG(iw),h.LFG(tt.yh))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var I5=R(8372);const H$="firebasestorage.googleapis.com",G$="storageBucket";class Yr extends o.ZR{constructor(e,t,r=0){super(sF(e),`Firebase Storage: ${t} (${sF(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sF(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function sF(n){return"storage/"+n}function oF(){return new Yr("unknown","An unknown error occurred, please check the error payload for server response.")}function q$(){return new Yr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function W$(){return new Yr("canceled","User canceled the upload/download.")}function z$(){return new Yr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Z_(n){return new Yr("invalid-argument",n)}function K$(){return new Yr("app-deleted","The Firebase app was deleted.")}function Z$(n){return new Yr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Db(n,e){return new Yr("invalid-format","String does not match format '"+n+"': "+e)}function Tb(n){throw new Yr("internal-error","Internal error: "+n)}class js{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=js.makeFromUrl(e,t)}catch{return new js(e,"")}if(""===r.path)return r;throw function P5(n){return new Yr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",l=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(Le){Le.path_=decodeURIComponent(Le.path)}const I=t.replace(/[.]/g,"\\."),_e=[{regex:l,indices:{bucket:1,path:3},postModify:function s(Le){"/"===Le.path.charAt(Le.path.length-1)&&(Le.path_=Le.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${I}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===H$?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Le=0;Le<_e.length;Le++){const Xe=_e[Le],rt=Xe.regex.exec(e);if(rt){let Bt=rt[Xe.indices.path];Bt||(Bt=""),r=new js(rt[Xe.indices.bucket],Bt),Xe.postModify(r);break}}if(null==r)throw function M5(n){return new Yr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class V5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function xA(n){return"string"==typeof n||n instanceof String}function Q$(n){return aF()&&n instanceof Blob}function aF(){return typeof Blob<"u"&&!(0,o.UG)()}function uF(n,e,t,r){if(r<e)throw Z_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Z_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Bd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Y$(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Uf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Uf||(Uf={})),Uf))();function J$(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class G5{constructor(e,t,r,i,s,u,l,p,_,w,I,S=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=l,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=w,this.connectionFactory_=I,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,P)=>{this.resolve_=M,this.reject_=P,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,u=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(l,l.getResponse());!function j5(n){return void 0!==n}(p)?s():s(p)}catch(p){u(p)}else if(null!==l){const p=oF();p.serverResponse=l.getErrorText(),u(this.errorCallback_?this.errorCallback_(l,p):p)}else u(i.canceled?this.appDelete_?K$():W$():q$())};this.canceled_?t(0,new RA(!1,null,!0)):this.backoffId_=function U5(n,e,t){let r=1,i=null,s=null,u=!1,l=0;function p(){return 2===l}let _=!1;function w(...Y){_||(_=!0,e.apply(null,Y))}function I(Y){i=setTimeout(()=>{i=null,n(M,p())},Y)}function S(){s&&clearTimeout(s)}function M(Y,...ge){if(_)return void S();if(Y)return S(),void w.call(null,Y,...ge);if(p()||u)return S(),void w.call(null,Y,...ge);let _e;r<64&&(r*=2),1===l?(l=2,_e=0):_e=1e3*(r+Math.random()),I(_e)}let P=!1;function U(Y){P||(P=!0,S(),!_&&(null!==i?(Y||(l=2),clearTimeout(i),I(0)):Y||(l=1)))}return I(0),s=setTimeout(()=>{u=!0,U(!0)},t),U}((r,i)=>{if(i)return void r(!1,new RA(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=l=>{null!==this.progressCallback_&&this.progressCallback_(l.loaded,l.lengthComputable?l.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const l=s.getErrorCode()===Uf.NO_ERROR,p=s.getStatus();if((!l||J$(p,this.additionalRetryCodes_))&&this.retry){const w=s.getErrorCode()===Uf.ABORT;return void r(!1,new RA(!1,null,w))}const _=-1!==this.successCodes_.indexOf(p);r(!0,new RA(_,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function B5(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class RA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Y5(...n){const e=function Q5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(aF())return new Blob(n);throw new Yr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ea={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cF{constructor(e,t){this.data=e,this.contentType=t||null}}function lF(n,e){switch(n){case Ea.RAW:return new cF(X$(e));case Ea.BASE64:case Ea.BASE64URL:return new cF(eH(n,e));case Ea.DATA_URL:return new cF(function tZ(n){const e=new tH(n);return e.base64?eH(Ea.BASE64,e.rest):function eZ(n){let e;try{e=decodeURIComponent(n)}catch{throw Db(Ea.DATA_URL,"Malformed data URL.")}return X$(e)}(e.rest)}(e),function nZ(n){return new tH(n).contentType}(e))}throw oF()}function X$(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function eH(n,e){switch(n){case Ea.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Db(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ea.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Db(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function X5(n){if(typeof atob>"u")throw function L5(n){return new Yr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Db(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class tH{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Db(Ea.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function rZ(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class dl{constructor(e,t){let r=0,i="";Q$(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Q$(this.data_)){const i=function J5(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new dl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new dl(r,!0)}}static getBlob(...e){if(aF()){const t=e.map(r=>r instanceof dl?r.data_:r);return new dl(Y5.apply(null,t))}{const t=e.map(u=>xA(u)?lF(Ea.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(u=>{for(let l=0;l<u.length;l++)i[s++]=u[l]}),new dl(i,!0)}}uploadData(){return this.data_}}function dF(n){let e;try{e=JSON.parse(n)}catch{return null}return function H5(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function nH(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function oZ(n,e){return e}class lo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||oZ}}let OA=null;function Sb(){if(OA)return OA;const n=[];n.push(new lo("bucket")),n.push(new lo("generation")),n.push(new lo("metageneration")),n.push(new lo("name","fullPath",!0));const t=new lo("name");t.xform=function e(s,u){return function aZ(n){return!xA(n)||n.length<2?n:nH(n)}(u)},n.push(t);const i=new lo("size");return i.xform=function r(s,u){return void 0!==u?Number(u):u},n.push(i),n.push(new lo("timeCreated")),n.push(new lo("updated")),n.push(new lo("md5Hash",null,!0)),n.push(new lo("cacheControl",null,!0)),n.push(new lo("contentDisposition",null,!0)),n.push(new lo("contentEncoding",null,!0)),n.push(new lo("contentLanguage",null,!0)),n.push(new lo("contentType",null,!0)),n.push(new lo("metadata","customMetadata",!0)),OA=n,OA}function rH(n,e,t){const r=dF(e);return null===r?null:function cZ(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const u=t[s];r[u.local]=u.xform(r,e[u.server])}return function uZ(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new js(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function hF(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const iH="prefixes";class hl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function fl(n){if(!n)throw oF()}function MA(n,e){return function t(r,i){const s=rH(n,i,e);return fl(null!==s),s}}function Q_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function R5(){return new Yr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function x5(){return new Yr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function A5(n){return new Yr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function O5(n){return new Yr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Ab(n){const e=Q_(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function S5(n){return new Yr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function oH(n,e,t){const i=Bd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,l=new hl(i,"GET",MA(n,t),u);return l.errorHandler=Ab(e),l}function gZ(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const l=Bd(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,w=new hl(l,"GET",function fZ(n,e){return function t(r,i){const s=function hZ(n,e,t){const r=dF(t);return null===r?null:function dZ(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[iH])for(const i of t[iH]){const s=i.replace(/\/$/,""),u=n._makeStorageReference(new js(e,s));r.prefixes.push(u)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new js(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return fl(null!==s),s}}(n,e.bucket),_);return w.urlParams=s,w.errorHandler=Q_(e),w}function uH(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function vZ(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class PA{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function fF(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{fl(!1)}return fl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const IZ={STATE_CHANGED:"state_changed"},ho={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pF(n){switch(n){case"running":case"pausing":case"canceling":return ho.RUNNING;case"paused":return ho.PAUSED;case"success":return ho.SUCCESS;case"canceled":return ho.CANCELED;default:return ho.ERROR}}class CZ{constructor(e,t,r){if(function $5(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Y_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class TZ extends class DZ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Uf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Uf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Uf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Tb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tb("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Tb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ju(){return new TZ}class hH{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Sb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(J$(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=q$()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function EZ(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u=uH(e,r,i),l={name:u.fullPath},p=Bd(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},I=hF(u,t),P=new hl(p,"POST",function M(U){let Y;fF(U);try{Y=U.getResponseHeader("X-Goog-Upload-URL")}catch{fl(!1)}return fl(xA(Y)),Y},n.maxUploadRetryTime);return P.urlParams=l,P.headers=w,P.body=I,P.errorHandler=Q_(e),P}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ju,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function wZ(n,e,t,r){const p=new hl(t,"POST",function s(_){const w=fF(_,["active","final"]);let I=null;try{I=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{fl(!1)}I||fl(!1);const S=Number(I);return fl(!isNaN(S)),new PA(S,r.size(),"final"===w)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Q_(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ju,t,r);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new PA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let u;try{u=function bZ(n,e,t,r,i,s,u,l){const p=new PA(0,0);if(u?(p.current=u.current,p.total=u.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function k5(){return new Yr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let w=_;i>0&&(w=Math.min(w,i));const I=p.current;let M="";M=0===w?"finalize":_===w?"upload, finalize":"upload";const P={"X-Goog-Upload-Command":M,"X-Goog-Upload-Offset":`${p.current}`},U=r.slice(I,I+w);if(null===U)throw z$();const _e=new hl(t,"POST",function Y(Le,Xe){const rt=fF(Le,["active","final"]),Et=p.current+w,Bt=r.size();let Dr;return Dr="final"===rt?MA(e,s)(Le,Xe):null,new PA(Et,Bt,"final"===rt,Dr)},e.maxUploadRetryTime);return _e.headers=P,_e.body=U.uploadData(),_e.progressCallback=l||null,_e.errorHandler=Q_(n),_e}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const l=this._ref.storage._makeRequest(u,Ju,i,s,!1);this._request=l,l.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=oH(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ju,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function cH(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},p=function l(){let _e="";for(let Le=0;Le<2;Le++)_e+=Math.random().toString().slice(2);return _e}();u["Content-Type"]="multipart/related; boundary="+p;const _=uH(e,r,i),w=hF(_,t),M=dl.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===M)throw z$();const P={name:_.fullPath},U=Bd(s,n.host,n._protocol),ge=n.maxUploadRetryTime,Re=new hl(U,"POST",MA(n,t),ge);return Re.urlParams=P,Re.headers=u,Re.body=M.uploadData(),Re.errorHandler=Q_(e),Re}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ju,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=W$(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=pF(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new CZ(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(pF(this._state)){case ho.SUCCESS:Y_(this._resolve.bind(null,this.snapshot))();break;case ho.CANCELED:case ho.ERROR:Y_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(pF(this._state)){case ho.RUNNING:case ho.PAUSED:e.next&&Y_(e.next.bind(e,this.snapshot))();break;case ho.SUCCESS:e.complete&&Y_(e.complete.bind(e))();break;default:e.error&&Y_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class tm{constructor(e,t){this._service=e,this._location=t instanceof js?t:js.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new tm(e,t)}get root(){const e=new js(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nH(this._location.path)}get storage(){return this._service}get parent(){const e=function iZ(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new js(this._location.bucket,e);return new tm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Z$(e)}}function pH(n,e,t){return gF.apply(this,arguments)}function gF(){return gF=(0,Ne.Z)(function*(n,e,t){const i=yield gH(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield pH(n,e,i.nextPageToken))}),gF.apply(this,arguments)}function gH(n,e){null!=e&&"number"==typeof e.maxResults&&uF("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=gZ(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ju)}function VZ(n){n._throwIfRoot("getDownloadURL");const e=function mZ(n,e,t){const i=Bd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,l=new hl(i,"GET",function pZ(n,e){return function t(r,i){const s=rH(n,i,e);return fl(null!==s),function lZ(n,e,t,r){const i=dF(e);if(null===i||!xA(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const u=encodeURIComponent;return s.split(",").map(_=>{const I=n.fullPath;return Bd("/b/"+u(n.bucket)+"/o/"+u(I),t,r)+Y$({alt:"media",token:_})})[0]}(s,i,n.host,n._protocol)}}(n,t),u);return l.errorHandler=Ab(e),l}(n.storage,n._location,Sb());return n.storage.makeRequestWithTokens(e,Ju).then(t=>{if(null===t)throw function F5(){return new Yr("no-download-url","The given file does not have any download URLs.")}();return t})}function mH(n,e){const t=function sZ(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new js(n._location.bucket,t);return new tm(n.storage,r)}function yH(n,e){if(n instanceof mF){const t=n;if(null==t._bucket)throw function N5(){return new Yr("no-default-bucket","No default bucket found. Did you set the '"+G$+"' property when initializing the app?")}();const r=new tm(t,t._bucket);return null!=e?yH(r,e):r}return void 0!==e?mH(n,e):n}function $Z(n,e){if(e&&function BZ(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof mF)return function jZ(n,e){return new tm(n,e)}(n,e);throw Z_("To use ref(service, url), the first argument must be a Storage instance.")}return yH(n,e)}function _H(n,e){const t=e?.[G$];return null==t?null:js.makeFromBucketSpec(t,n)}class mF{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=H$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?js.makeFromBucketSpec(i,this._host):_H(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?js.makeFromBucketSpec(this._url,e):_H(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ne.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ne.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tm(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new V5(K$());{const u=function Z5(n,e,t,r,i,s,u=!0){const l=Y$(n.urlParams),p=n.url+l,_=Object.assign({},n.headers);return function z5(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function q5(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function W5(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(_,s),function K5(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new G5(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,Ne.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const vH="@firebase/storage";function bH(n,e){return $Z(n=(0,o.m9)(n),e)}function JZ(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new mF(t,r,i,e,Bs.SDK_VERSION)}!function XZ(){(0,Bs._registerComponent)(new nu.wA("storage",JZ,"PUBLIC").setMultipleInstances(!0)),(0,Bs.registerVersion)(vH,"0.10.0",""),(0,Bs.registerVersion)(vH,"0.10.0","esm2017")}();class NA{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class CH{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new NA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new NA(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?u=>t(new NA(u,this,this._ref)):{next:t.next?u=>t.next(new NA(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class DH{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new jd(e,this._service))}get items(){return this._delegate.items.map(e=>new jd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function YZ(n,e){return mH(n,e)}(this._delegate,e);return new jd(t,this.storage)}get root(){return new jd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new jd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new CH(function GZ(n,e,t){return function PZ(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new hH(n,new dl(e),t)}(n=(0,o.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ea.RAW,r){this._throwIfRoot("putString");const i=lF(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new CH(new hH(this._delegate,new dl(i.data,!0),s),this)}listAll(){return function KZ(n){return function kZ(n){const e={prefixes:[],items:[]};return pH(n,e).then(()=>e)}(n=(0,o.m9)(n))}(this._delegate).then(e=>new DH(e,this.storage))}list(e){return function zZ(n,e){return gH(n=(0,o.m9)(n),e)}(this._delegate,e||void 0).then(t=>new DH(t,this.storage))}getMetadata(){return function qZ(n){return function FZ(n){n._throwIfRoot("getMetadata");const e=oH(n.storage,n._location,Sb());return n.storage.makeRequestWithTokens(e,Ju)}(n=(0,o.m9)(n))}(this._delegate)}updateMetadata(e){return function WZ(n,e){return function LZ(n,e){n._throwIfRoot("updateMetadata");const t=function yZ(n,e,t,r){const s=Bd(e.fullServerUrl(),n.host,n._protocol),l=hF(t,r),_=n.maxOperationRetryTime,w=new hl(s,"PATCH",MA(n,r),_);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=l,w.errorHandler=Ab(e),w}(n.storage,n._location,e,Sb());return n.storage.makeRequestWithTokens(t,Ju)}(n=(0,o.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function ZZ(n){return VZ(n=(0,o.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function QZ(n){return function UZ(n){n._throwIfRoot("deleteObject");const e=function _Z(n,e){const r=Bd(e.fullServerUrl(),n.host,n._protocol),l=new hl(r,"DELETE",function u(p,_){},n.maxOperationRetryTime);return l.successCodes=[200,204],l.errorHandler=Ab(e),l}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ju)}(n=(0,o.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Z$(e)}}class TH{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(SH(e))throw Z_("ref() expected a child path but got a URL, use refFromURL instead.");return new jd(bH(this._delegate,e),this)}refFromURL(e){if(!SH(e))throw Z_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{js.makeFromUrl(e,this._delegate.host)}catch{throw Z_("refFromUrl() expected a valid full URL but got an invalid one.")}return new jd(bH(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function IH(n,e,t,r={}){!function HZ(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,o.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function SH(n){return/^[A-Za-z]+:\/\//.test(n)}function r7(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new TH(t,r)}function AH(n){const e=function s7(n){return new pn.y(e=>{const t=u=>e.next(u);t(n.snapshot);const s=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){s()}}).pipe((0,I5.b)(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,st.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function kA(n){return{getDownloadURL:()=>(0,gt.of)(void 0).pipe(kn.fc,(0,ft.w)(()=>n.getDownloadURL()),kn.iC),getMetadata:()=>(0,gt.of)(void 0).pipe(kn.fc,(0,ft.w)(()=>n.getMetadata()),kn.iC),delete:()=>(0,rn.D)(n.delete()),child:e=>kA(n.child(e)),updateMetadata:e=>(0,rn.D)(n.updateMetadata(e)),put:(e,t)=>AH(n.put(e,t)),putString:(e,t,r)=>AH(n.putString(e,t,r)),list:e=>(0,rn.D)(n.list(e)),listAll:()=>(0,rn.D)(n.listAll())}}!function i7(n){const e={TaskState:ho,TaskEvent:IZ,StringFormat:Ea,Storage:TH,Reference:jd};n.INTERNAL.registerComponent(new nu.wA("storage-compat",r7,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.0")}(YT.Z);const o7=new h.OlP("angularfire2.storageBucket"),a7=new h.OlP("angularfire2.storage.maxUploadRetryTime"),u7=new h.OlP("angularfire2.storage.maxOperationRetryTime"),c7=new h.OlP("angularfire2.storage.use-emulator");let l7=(()=>{class n{constructor(t,r,i,s,u,l,p,_,w,I){const S=(0,Ri.on)(t,u,r);this.storage=(0,Ri.cc)(`${S.name}.storage.${i}`,"AngularFireStorage",S.name,()=>{const M=u.runOutsideAngular(()=>S.storage(i||void 0)),P=w;return P&&M.useEmulator(...P),p&&M.setMaxUploadRetryTime(p),_&&M.setMaxOperationRetryTime(_),M},[p,_])}ref(t){return kA(this.storage.ref(t))}refFromURL(t){return kA(this.storage.refFromURL(t))}upload(t,r,i){return kA(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ri.Dh),h.LFG(Ri.xv,8),h.LFG(o7,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(kn.HU),h.LFG(a7,8),h.LFG(u7,8),h.LFG(c7,8),h.LFG(wb,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),d7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),h7=(()=>{class n{constructor(){wA.Z.registerVersion("angularfire",kn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[l7],imports:[d7]}),n})();const xH="@firebase/database";let yF="";function OH(n){yF=n}class p7{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,o.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,o.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class g7{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,o.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const MH=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new p7(e)}}catch{}return new g7},nm=MH("localStorage"),_F=MH("sessionStorage"),J_=new a.Yd("@firebase/database"),PH=function(){let n=1;return function(){return n++}}(),NH=function(n){const e=(0,o.dS)(n),t=new o.gQ;t.update(e);const r=t.digest();return o.US.encodeByteArray(r)},xb=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=xb.apply(null,r):e+="object"==typeof r?(0,o.Wl)(r):r,e+=" "}return e};let rm=null,kH=!0;const FH=function(n,e){(0,o.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(J_.logLevel=a.in.VERBOSE,rm=J_.log.bind(J_),e&&_F.set("logging_enabled",!0)):"function"==typeof n?rm=n:(rm=null,_F.remove("logging_enabled"))},os=function(...n){if(!0===kH&&(kH=!1,null===rm&&!0===_F.get("logging_enabled")&&FH(!0)),rm){const e=xb.apply(null,n);rm(e)}},Rb=function(n){return function(...e){os(n,...e)}},vF=function(...n){const e="FIREBASE INTERNAL ERROR: "+xb(...n);J_.error(e)},pl=function(...n){const e=`FIREBASE FATAL ERROR: ${xb(...n)}`;throw J_.error(e),new Error(e)},$s=function(...n){const e="FIREBASE WARNING: "+xb(...n);J_.warn(e)},FA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Bf="[MIN_NAME]",$d="[MAX_NAME]",im=function(n,e){if(n===e)return 0;if(n===Bf||e===$d)return-1;if(e===Bf||n===$d)return 1;{const t=UH(n),r=UH(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},_7=function(n,e){return n===e?0:n<e?-1:1},Ob=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,o.Wl)(e))},EF=function(n){if("object"!=typeof n||null===n)return(0,o.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,o.Wl)(e[r]),t+=":",t+=EF(n[e[r]]);return t+="}",t},LH=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function as(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const VH=function(n){(0,o.hu)(!FA(n),"Invalid JSON number");const r=1023;let i,s,u,l,p;0===n?(s=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=l+r,u=Math.round(n*Math.pow(2,52-l)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(i?1:0),_.reverse();const w=_.join("");let I="";for(p=0;p<64;p+=8){let S=parseInt(w.substr(p,8),2).toString(16);1===S.length&&(S="0"+S),I+=S}return I.toLowerCase()},b7=new RegExp("^-?(0*)\\d{1,10}$"),UH=function(n){if(b7.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},X_=function(n){try{n()}catch(e){setTimeout(()=>{throw $s("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Mb=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class T7{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$s(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class S7{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(os("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$s(e)}}let Pb=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const GH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zH="websocket",KH="long_polling";class bF{constructor(e,t,r,i,s=!1,u="",l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ZH(n,e,t){let r;if((0,o.hu)("string"==typeof e,"typeof type must == string"),(0,o.hu)("object"==typeof t,"typeof params must == object"),e===zH)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==KH)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function A7(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return as(t,(s,u)=>{i.push(s+"="+u)}),r+i.join("&")}class x7{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,o.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,o.p$)(this.counters_)}}const IF={},CF={};function DF(n){const e=n.toString();return IF[e]||(IF[e]=new x7),IF[e]}class O7{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&X_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class jf{constructor(e,t,r,i,s,u,l){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rb(e),this.stats_=DF(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),ZH(t,KH,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new O7(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,o.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new TF((...s)=>{const[u,l,p,_,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=l,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,l)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&GH.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jf.forceAllow_=!0}static forceDisallow(){jf.forceDisallow_=!0}static isAvailable(){return!((0,o.Yr)()||!jf.forceAllow_&&(jf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,o.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,o.h$)(t),i=LH(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,o.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,o.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class TF{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=PH(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=TF.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(l){os("frame writing exception"),l.stack&&os(l.stack),os(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||os("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,o.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{os("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let VA=null;typeof MozWebSocket<"u"?VA=MozWebSocket:typeof WebSocket<"u"&&(VA=WebSocket);let ev=(()=>{class n{constructor(t,r,i,s,u,l,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rb(this.connId),this.stats_=DF(r),this.connURL=n.connectionURL_(r,l,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,u){const l={v:"5"};return!(0,o.Yr)()&&typeof location<"u"&&location.hostname&&GH.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),s&&(l.ac=s),u&&(l.p=u),ZH(t,zH,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nm.set("previous_websocket_failure",!0);try{let i;if((0,o.Yr)()){i={headers:{"User-Agent":`Firebase/5/${yF}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,l=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;l&&(i.proxy={origin:l})}this.mySock=new VA(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==VA&&!n.forceDisallow_}static previouslyFailed(){return nm.isInMemoryStorage||!0===nm.get("previous_websocket_failure")}markConnectionHealthy(){nm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,o.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,o.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=LH(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),nG=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[jf,ev]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=ev&&ev.isAvailable();let i=r&&!ev.previouslyFailed();if(t.webSocketOnly&&(r||$s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ev];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class cG{constructor(e,t,r,i,s,u,l,p,_,w){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=l,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rb("c:"+this.id+":"),this.transportManager_=new nG(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Mb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ob("t",e),r=Ob("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ob("t",e),r=Ob("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ob("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?vF("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vF("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&$s("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Mb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Mb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class lG{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class dG{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,o.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,o.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class UA extends dG{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,o.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new UA}getInitialEvent(e){return(0,o.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Wn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Vn(){return new Wn("")}function yn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function $f(n){return n.pieces_.length-n.pieceNum_}function cr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Wn(n.pieces_,e)}function AF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Nb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function pG(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Wn(e,0)}function Fr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Wn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Wn(t,0)}function _n(n){return n.pieceNum_>=n.pieces_.length}function fo(n,e){const t=yn(n),r=yn(e);if(null===t)return e;if(t===r)return fo(cr(n),cr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function X7(n,e){const t=Nb(n,0),r=Nb(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=im(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function xF(n,e){if($f(n)!==$f(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function iu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if($f(n)>$f(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class eQ{constructor(e,t){this.errorPrefix_=t,this.parts_=Nb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,o.ug)(this.parts_[r]);gG(this)}}function gG(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+sm(n))}function sm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class RF extends dG{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new RF}getInitialEvent(e){return(0,o.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const kb=1e3;let jA,om=(()=>{class n extends lG{constructor(t,r,i,s,u,l,p,_){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=l,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=Rb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");RF.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&UA.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,u={r:s,a:t,b:r};this.log_((0,o.Wl)(u)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new o.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:l=>{const p=l.d;"ok"===l.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const u=t._queryIdentifier,l=t._path.toString();this.log_("Listen called for "+l+" "+u),this.listens.has(l)||this.listens.set(l,new Map),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(l).has(u),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(l).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const _=p.d,w=p.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(i,s),t.onComplete&&t.onComplete(w,_))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,o.r3)(t,"w")){const i=(0,o.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();$s(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,o.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const u=s.s,l=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const u={p:t};s&&(u.q=i,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,u){this.initConnection_();const l={p:r,d:i};void 0!==u&&(l.h=u),this.outstandingPuts_.push({action:t,request:l,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,o.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):vF("Unrecognized action received from server: "+(0,o.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=kb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ne.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,l=t.lastSessionId;let p=!1,_=null;const w=function(){_?_.close():(p=!0,s())};t.realtime_={close:w,sendRequest:function(M){(0,o.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(M)}};const S=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[M,P]=yield Promise.all([t.authTokenProvider_.getToken(S),t.appCheckTokenProvider_.getToken(S)]);p?os("getToken() completed but was canceled"):(os("getToken() completed. Creating connection."),t.authToken_=M&&M.accessToken,t.appCheckToken_=P&&P.token,_=new cG(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,U=>{$s(U+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},l))}catch(M){t.log_("Failed to get token: "+M),p||(t.repoInfo_.nodeAdmin&&$s(M),w())}}})()}interrupt(t){os("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){os("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>EF(u)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Wn(t).toString();let s;if(this.listens.has(i)){const u=this.listens.get(i);s=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){os("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){os("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,o.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+yF.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=UA.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class En{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new En(e,t)}}class BA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new En(Bf,e),i=new En(Bf,t);return 0!==this.compare(r,i)}minPost(){return En.MIN}}class _G extends BA{static get __EMPTY_NODE(){return jA}static set __EMPTY_NODE(e){jA=e}compare(e,t){return im(e.name,t.name)}isDefinedOn(e){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return En.MIN}maxPost(){return new En($d,jA)}makePost(e,t){return(0,o.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new En(e,jA)}toString(){return".key"}}const gl=new _G;class $A{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let MF,Xu=(()=>{class n{constructor(t,r,i,s,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??ko.EMPTY_NODE,this.right=u??ko.EMPTY_NODE}copy(t,r,i,s,u){return new n(t??this.key,r??this.value,i??this.color,s??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const u=i(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===u?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ko.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ko.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ko{constructor(e,t=ko.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ko(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Xu.BLACK,null,null))}remove(e){return new ko(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $A(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new $A(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new $A(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new $A(this.root_,null,this.comparator_,!0,e)}}function uQ(n,e){return im(n.name,e.name)}function OF(n,e){return im(n,e)}ko.EMPTY_NODE=new class aQ{copy(e,t,r,i,s){return this}insert(e,t,r){return new Xu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const vG=function(n){return"number"==typeof n?"number:"+VH(n):"string:"+n},EG=function(n){if(n.isLeafNode()){const e=n.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(n===MF||n.isEmpty(),"priority of unexpected type.");(0,o.hu)(n===MF||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let wG,bG,IG,tv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,o.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),EG(this.priorityNode_)}static set __childrenNodeConstructor(t){wG=t}static get __childrenNodeConstructor(){return wG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return _n(t)?this:".priority"===yn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=yn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,o.hu)(".priority"!==i||1===$f(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(cr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+vG(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?VH(this.value_):this.value_,this.lazyHash_=NH(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,o.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,o.hu)(s>=0,"Unknown leaf type: "+r),(0,o.hu)(u>=0,"Unknown leaf type: "+i),s===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const yr=new class hQ extends BA{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?im(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return En.MIN}maxPost(){return new En($d,new tv("[PRIORITY-POST]",IG))}makePost(e,t){const r=bG(e);return new En(t,new tv("[PRIORITY-POST]",r))}toString(){return".priority"}},fQ=Math.log(2);class pQ{constructor(e){this.count=parseInt(Math.log(e+1)/fQ,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const HA=function(n,e,t,r){n.sort(e);const i=function(p,_){const w=_-p;let I,S;if(0===w)return null;if(1===w)return I=n[p],S=t?t(I):I,new Xu(S,I.node,Xu.BLACK,null,null);{const M=parseInt(w/2,10)+p,P=i(p,M),U=i(M+1,_);return I=n[M],S=t?t(I):I,new Xu(S,I.node,Xu.BLACK,P,U)}},l=function(p){let _=null,w=null,I=n.length;const S=function(P,U){const Y=I-P,ge=I;I-=P;const Re=i(Y+1,ge),_e=n[Y],Le=t?t(_e):_e;M(new Xu(Le,_e.node,U,null,Re))},M=function(P){_?(_.left=P,_=P):(w=P,_=P)};for(let P=0;P<p.count;++P){const U=p.nextBitIsOne(),Y=Math.pow(2,p.count-(P+1));U?S(Y,Xu.BLACK):(S(Y,Xu.BLACK),S(Y,Xu.RED))}return w}(new pQ(n.length));return new ko(r||e,l)};let PF;const nv={};class Hd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,o.hu)(nv&&yr,"ChildrenNode.ts has not been loaded"),PF=PF||new Hd({".priority":nv},{".priority":yr}),PF}get(e){const t=(0,o.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ko?t:null}hasIndex(e){return(0,o.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,o.hu)(e!==gl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(En.Wrap);let l,u=s.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=s.getNext();l=i?HA(r,e.getCompare()):nv;const p=e.toString(),_=Object.assign({},this.indexSet_);_[p]=e;const w=Object.assign({},this.indexes_);return w[p]=l,new Hd(w,_)}addToIndexes(e,t){const r=(0,o.UI)(this.indexes_,(i,s)=>{const u=(0,o.DV)(this.indexSet_,s);if((0,o.hu)(u,"Missing index implementation for "+s),i===nv){if(u.isDefinedOn(e.node)){const l=[],p=t.getIterator(En.Wrap);let _=p.getNext();for(;_;)_.name!==e.name&&l.push(_),_=p.getNext();return l.push(e),HA(l,u.getCompare())}return nv}{const l=t.get(e.name);let p=i;return l&&(p=p.remove(new En(e.name,l))),p.insert(e,e.node)}});return new Hd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,o.UI)(this.indexes_,i=>{if(i===nv)return i;{const s=t.get(e.name);return s?i.remove(new En(e.name,s)):i}});return new Hd(r,this.indexSet_)}}let Fb,en=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&EG(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Fb||(Fb=new n(new ko(OF),null,Hd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Fb:r}}getChild(t){const r=yn(t);return null===r?this:this.getImmediateChild(r).getChild(cr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,o.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new En(t,r);let s,u;r.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const l=s.isEmpty()?Fb:this.priorityNode_;return new n(s,l,u)}}updateChild(t,r){const i=yn(t);if(null===i)return r;{(0,o.hu)(".priority"!==yn(t)||1===$f(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(cr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,u=!0;if(this.forEachChild(yr,(l,p)=>{r[l]=p.val(t),i++,u&&n.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):u=!1}),!t&&u&&s<2*i){const l=[];for(const p in r)l[p]=r[p];return l}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+vG(this.getPriority().val())+":"),this.forEachChild(yr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":NH(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const u=s.getPredecessorKey(new En(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new En(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new En(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,En.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,En.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Lb?-1:0}withIndex(t){if(t===gl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===gl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(yr),s=r.getIterator(yr);let u=i.getNext(),l=s.getNext();for(;u&&l;){if(u.name!==l.name||!u.node.equals(l.node))return!1;u=i.getNext(),l=s.getNext()}return null===u&&null===l}return!1}return!1}}resolveIndex_(t){return t===gl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Lb=new class gQ extends en{constructor(){super(new ko(OF),en.EMPTY_NODE,Hd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return en.EMPTY_NODE}isEmpty(){return!1}};function Jr(n,e=null){if(null===n)return en.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new tv(n,Jr(e));if(n instanceof Array){let t=en.EMPTY_NODE;return as(n,(r,i)=>{if((0,o.r3)(n,r)&&"."!==r.substring(0,1)){const s=Jr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Jr(e))}{const t=[];let r=!1;if(as(n,(u,l)=>{if("."!==u.substring(0,1)){const p=Jr(l);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new En(u,p)))}}),0===t.length)return en.EMPTY_NODE;const s=HA(t,uQ,u=>u.name,OF);if(r){const u=HA(t,yr.getCompare());return new en(s,Jr(e),new Hd({".priority":u},{".priority":yr}))}return new en(s,Jr(e),Hd.Default)}}Object.defineProperties(En,{MIN:{value:new En(Bf,en.EMPTY_NODE)},MAX:{value:new En($d,Lb)}}),_G.__EMPTY_NODE=en.EMPTY_NODE,tv.__childrenNodeConstructor=en,function cQ(n){MF=n}(Lb),function dQ(n){IG=n}(Lb),function lQ(n){bG=n}(Jr);class NF extends BA{constructor(e){super(),this.indexPath_=e,(0,o.hu)(!_n(e)&&".priority"!==yn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?im(e.name,t.name):s}makePost(e,t){const r=Jr(e),i=en.EMPTY_NODE.updateChild(this.indexPath_,r);return new En(t,i)}maxPost(){const e=en.EMPTY_NODE.updateChild(this.indexPath_,Lb);return new En($d,e)}toString(){return Nb(this.indexPath_,0).join("/")}}const kF=new class yQ extends BA{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?im(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return En.MIN}maxPost(){return En.MAX}makePost(e,t){const r=Jr(e);return new En(t,r)}toString(){return".value"}};function CG(n){return{type:"value",snapshotNode:n}}function rv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Vb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ub(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class FF{constructor(e){this.index_=e}updateChild(e,t,r,i,s,u){(0,o.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(t);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(Vb(t,l)):(0,o.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?u.trackChildChange(rv(t,r)):u.trackChildChange(Ub(t,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(yr,(i,s)=>{t.hasChild(i)||r.trackChildChange(Vb(i,s))}),t.isLeafNode()||t.forEachChild(yr,(i,s)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(s)||r.trackChildChange(Ub(i,s,u))}else r.trackChildChange(rv(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?en.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Bb{constructor(e){this.indexedFilter_=new FF(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Bb.getStartPost_(e),this.endPost_=Bb.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,u){return this.matches(new En(t,r))||(r=en.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=en.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(en.EMPTY_NODE);const s=this;return t.forEachChild(yr,(u,l)=>{s.matches(new En(u,l))||(i=i.updateImmediateChild(u,en.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class vQ{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Bb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,u){return this.rangedFilter_.matches(new En(t,r))||(r=en.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,u):this.fullLimitUpdateChild_(e,t,r,s,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=en.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=en.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l)){if(!this.withinDirectionalEnd(l))break;i=i.updateImmediateChild(l.name,l.node),u++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(en.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let u=0;for(;s.hasNext();){const l=s.getNext();u<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?u++:i=i.updateImmediateChild(l.name,en.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let u;if(this.reverse_){const I=this.index_.getCompare();u=(S,M)=>I(M,S)}else u=this.index_.getCompare();const l=e;(0,o.hu)(l.numChildren()===this.limit_,"");const p=new En(t,r),_=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(l.hasChild(t)){const I=l.getImmediateChild(t);let S=i.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=S&&(S.name===t||l.hasChild(S.name));)S=i.getChildAfterChild(this.index_,S,this.reverse_);const M=null==S?1:u(S,p);if(w&&!r.isEmpty()&&M>=0)return s?.trackChildChange(Ub(t,r,I)),l.updateImmediateChild(t,r);{s?.trackChildChange(Vb(t,I));const U=l.updateImmediateChild(t,en.EMPTY_NODE);return null!=S&&this.rangedFilter_.matches(S)?(s?.trackChildChange(rv(S.name,S.node)),U.updateImmediateChild(S.name,S.node)):U}}return r.isEmpty()?e:w&&u(_,p)>=0?(null!=s&&(s.trackChildChange(Vb(_.name,_.node)),s.trackChildChange(rv(t,r))),l.updateImmediateChild(t,r).updateImmediateChild(_.name,en.EMPTY_NODE)):e}}class GA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bf}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$d}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yr}copy(){const e=new GA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function LF(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function VF(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function qA(n,e){const t=n.copy();return t.index_=e,t}function DG(n){const e={};if(n.isDefault())return e;let t;if(n.index_===yr?t="$priority":n.index_===kF?t="$value":n.index_===gl?t="$key":((0,o.hu)(n.index_ instanceof NF,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,o.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,o.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,o.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,o.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,o.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function TG(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==yr&&(e.i=n.index_.toString()),e}class WA extends lG{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Rb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,o.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=WA.getListenId_(e,r),l={};this.listens_[u]=l;const p=DG(e._queryParams);this.restRequest_(s+".json",p,(_,w)=>{let I=w;if(404===_&&(I=null,_=null),null===_&&this.onDataUpdate_(s,I,!1,r),(0,o.DV)(this.listens_,u)===l){let S;S=_?401===_?"permission_denied":"rest_error:"+_:"ok",i(S,null)}})}unlisten(e,t){const r=WA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=DG(e._queryParams),r=e._path.toString(),i=new o.BH;return this.restRequest_(r+".json",t,(s,u)=>{let l=u;404===s&&(l=null,s=null),null===s?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,o.xO)(t);this.log_("Sending REST request for "+u);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&4===l.readyState){this.log_("REST Response for "+u+" received. status:",l.status,"response:",l.responseText);let p=null;if(l.status>=200&&l.status<300){try{p=(0,o.cI)(l.responseText)}catch{$s("Failed to parse JSON response for "+u+": "+l.responseText)}r(null,p)}else 401!==l.status&&404!==l.status&&$s("Got unsuccessful REST response for "+u+" Status: "+l.status),r(l.status);r=null}},l.open("GET",u,!0),l.send()})}}class DQ{constructor(){this.rootNode_=en.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function zA(){return{value:null,children:new Map}}function iv(n,e,t){if(_n(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=yn(e);n.children.has(r)||n.children.set(r,zA()),iv(n.children.get(r),e=cr(e),t)}}function UF(n,e){if(_n(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(yr,(r,i)=>{iv(n,new Wn(r),i)}),UF(n,e)}}if(n.children.size>0){const t=yn(e);return e=cr(e),n.children.has(t)&&UF(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function BF(n,e,t){null!==n.value?t(e,n.value):function TQ(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{BF(i,new Wn(e.toString()+"/"+r),t)})}class SQ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&as(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class RQ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new SQ(e);const r=1e4+2e4*Math.random();Mb(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;as(e,(i,s)=>{s>0&&(0,o.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Mb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var su=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(su||(su={})),su))();function HF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class KA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=su.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(_n(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Wn(e));return new KA(Vn(),t,this.revert)}}return(0,o.hu)(yn(this.path)===e,"operationForChild called for unrelated child."),new KA(cr(this.path),this.affectedTree,this.revert)}}class jb{constructor(e,t){this.source=e,this.path=t,this.type=su.LISTEN_COMPLETE}operationForChild(e){return _n(this.path)?new jb(this.source,Vn()):new jb(this.source,cr(this.path))}}class am{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=su.OVERWRITE}operationForChild(e){return _n(this.path)?new am(this.source,Vn(),this.snap.getImmediateChild(e)):new am(this.source,cr(this.path),this.snap)}}class sv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=su.MERGE}operationForChild(e){if(_n(this.path)){const t=this.children.subtree(new Wn(e));return t.isEmpty()?null:t.value?new am(this.source,Vn(),t.value):new sv(this.source,Vn(),t)}return(0,o.hu)(yn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new sv(this.source,cr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Hf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_n(e))return this.isFullyInitialized()&&!this.filtered_;const t=yn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class OQ{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $b(n,e,t,r,i,s){const u=r.filter(l=>l.type===t);u.sort((l,p)=>function NQ(n,e,t){if(null==e.childName||null==t.childName)throw(0,o.g5)("Should only compare child_ events.");const r=new En(e.childName,e.snapshotNode),i=new En(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,l,p)),u.forEach(l=>{const p=function PQ(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,l,s);i.forEach(_=>{_.respondsTo(l.type)&&e.push(_.createEvent(p,n.query_))})})}function ZA(n,e){return{eventCache:n,serverCache:e}}function Hb(n,e,t,r){return ZA(new Hf(e,t,r),n.serverCache)}function AG(n,e,t,r){return ZA(n.eventCache,new Hf(e,t,r))}function QA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function um(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let GF;class _r{constructor(e,t=(()=>(GF||(GF=new ko(_7)),GF))()){this.value=e,this.children=t}static fromObject(e){let t=new _r(null);return as(e,(r,i)=>{t=t.set(new Wn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Vn(),value:this.value};if(_n(e))return null;{const r=yn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(cr(e),t);return null!=s?{path:Fr(new Wn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_n(e))return this;{const t=yn(e),r=this.children.get(t);return null!==r?r.subtree(cr(e)):new _r(null)}}set(e,t){if(_n(e))return new _r(t,this.children);{const r=yn(e),s=(this.children.get(r)||new _r(null)).set(cr(e),t),u=this.children.insert(r,s);return new _r(this.value,u)}}remove(e){if(_n(e))return this.children.isEmpty()?new _r(null):new _r(null,this.children);{const t=yn(e),r=this.children.get(t);if(r){const i=r.remove(cr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new _r(null):new _r(this.value,s)}return this}}get(e){if(_n(e))return this.value;{const t=yn(e),r=this.children.get(t);return r?r.get(cr(e)):null}}setTree(e,t){if(_n(e))return t;{const r=yn(e),s=(this.children.get(r)||new _r(null)).setTree(cr(e),t);let u;return u=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new _r(this.value,u)}}fold(e){return this.fold_(Vn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Fr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Vn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(_n(e))return null;{const s=yn(e),u=this.children.get(s);return u?u.findOnPath_(cr(e),Fr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Vn(),t)}foreachOnPath_(e,t,r){if(_n(e))return this;{this.value&&r(t,this.value);const i=yn(e),s=this.children.get(i);return s?s.foreachOnPath_(cr(e),Fr(t,i),r):new _r(null)}}foreach(e){this.foreach_(Vn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Fr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ec{constructor(e){this.writeTree_=e}static empty(){return new ec(new _r(null))}}function Gb(n,e,t){if(_n(e))return new ec(new _r(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const u=fo(i,e);return s=s.updateChild(u,t),new ec(n.writeTree_.set(i,s))}{const i=new _r(t),s=n.writeTree_.setTree(e,i);return new ec(s)}}}function qF(n,e,t){let r=n;return as(t,(i,s)=>{r=Gb(r,Fr(e,i),s)}),r}function xG(n,e){if(_n(e))return ec.empty();{const t=n.writeTree_.setTree(e,new _r(null));return new ec(t)}}function WF(n,e){return null!=cm(n,e)}function cm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(fo(t.path,e)):null}function RG(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(yr,(r,i)=>{e.push(new En(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new En(r,i.value))}),e}function Gf(n,e){if(_n(e))return n;{const t=cm(n,e);return new ec(null!=t?new _r(t):n.writeTree_.subtree(e))}}function zF(n){return n.writeTree_.isEmpty()}function ov(n,e){return OG(Vn(),n.writeTree_,e)}function OG(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,o.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=OG(Fr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Fr(n,".priority"),r)),t}}function YA(n,e){return FG(e,n)}function BQ(n,e){if(n.snap)return iu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&iu(Fr(n.path,t),e))return!0;return!1}function $Q(n){return n.visible}function MG(n,e,t){let r=ec.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const u=s.path;let l;if(s.snap)iu(t,u)?(l=fo(t,u),r=Gb(r,l,s.snap)):iu(u,t)&&(l=fo(u,t),r=Gb(r,Vn(),s.snap.getChild(l)));else{if(!s.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(iu(t,u))l=fo(t,u),r=qF(r,l,s.children);else if(iu(u,t))if(l=fo(u,t),_n(l))r=qF(r,Vn(),s.children);else{const p=(0,o.DV)(s.children,yn(l));if(p){const _=p.getChild(cr(l));r=Gb(r,Vn(),_)}}}}}return r}function PG(n,e,t,r,i){if(r||i){const s=Gf(n.visibleWrites,e);return!i&&zF(s)?t:i||null!=t||WF(s,Vn())?ov(MG(n.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(iu(_.path,e)||iu(e,_.path))},e),t||en.EMPTY_NODE):null}{const s=cm(n.visibleWrites,e);if(null!=s)return s;{const u=Gf(n.visibleWrites,e);return zF(u)?t:null!=t||WF(u,Vn())?ov(u,t||en.EMPTY_NODE):null}}}function JA(n,e,t,r){return PG(n.writeTree,n.treePath,e,t,r)}function KF(n,e){return function HQ(n,e,t){let r=en.EMPTY_NODE;const i=cm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(yr,(s,u)=>{r=r.updateImmediateChild(s,u)}),r;if(t){const s=Gf(n.visibleWrites,e);return t.forEachChild(yr,(u,l)=>{const p=ov(Gf(s,new Wn(u)),l);r=r.updateImmediateChild(u,p)}),RG(s).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return RG(Gf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function NG(n,e,t,r){return function GQ(n,e,t,r,i){(0,o.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Fr(e,t);if(WF(n.visibleWrites,s))return null;{const u=Gf(n.visibleWrites,s);return zF(u)?i.getChild(t):ov(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function XA(n,e){return function WQ(n,e){return cm(n.visibleWrites,e)}(n.writeTree,Fr(n.treePath,e))}function ZF(n,e,t){return function qQ(n,e,t,r){const i=Fr(e,t),s=cm(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?ov(Gf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function kG(n,e){return FG(Fr(n.treePath,e),n.writeTree)}function FG(n,e){return{treePath:n,writeTree:e}}class QQ{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,o.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Ub(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Vb(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,rv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,o.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Ub(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const LG=new class YQ{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class QF{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Hf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ZF(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:um(this.viewCache_),s=function ZQ(n,e,t,r,i,s){return function zQ(n,e,t,r,i,s,u){let l;const p=Gf(n.visibleWrites,e),_=cm(p,Vn());if(null!=_)l=_;else{if(null==t)return[];l=ov(p,t)}if(l=l.withIndex(u),l.isEmpty()||l.isLeafNode())return[];{const w=[],I=u.getCompare(),S=s?l.getReverseIteratorFrom(r,u):l.getIteratorFrom(r,u);let M=S.getNext();for(;M&&w.length<i;)0!==I(M,r)&&w.push(M),M=S.getNext();return w}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function VG(n,e,t,r,i,s){const u=e.eventCache;if(null!=XA(r,t))return e;{let l,p;if(_n(t))if((0,o.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=um(e),I=KF(r,_ instanceof en?_:en.EMPTY_NODE);l=n.filter.updateFullNode(e.eventCache.getNode(),I,s)}else{const _=JA(r,um(e));l=n.filter.updateFullNode(e.eventCache.getNode(),_,s)}else{const _=yn(t);if(".priority"===_){(0,o.hu)(1===$f(t),"Can't have a priority with additional path components");const w=u.getNode();p=e.serverCache.getNode();const I=NG(r,t,w,p);l=null!=I?n.filter.updatePriority(w,I):u.getNode()}else{const w=cr(t);let I;if(u.isCompleteForChild(_)){p=e.serverCache.getNode();const S=NG(r,t,u.getNode(),p);I=null!=S?u.getNode().getImmediateChild(_).updateChild(w,S):u.getNode().getImmediateChild(_)}else I=ZF(r,_,e.serverCache);l=null!=I?n.filter.updateChild(u.getNode(),_,I,w,i,s):u.getNode()}}return Hb(e,l,u.isFullyInitialized()||_n(t),n.filter.filtersNodes())}}function ex(n,e,t,r,i,s,u,l){const p=e.serverCache;let _;const w=u?n.filter:n.filter.getIndexedFilter();if(_n(t))_=w.updateFullNode(p.getNode(),r,null);else if(w.filtersNodes()&&!p.isFiltered()){const M=p.getNode().updateChild(t,r);_=w.updateFullNode(p.getNode(),M,null)}else{const M=yn(t);if(!p.isCompleteForPath(t)&&$f(t)>1)return e;const P=cr(t),Y=p.getNode().getImmediateChild(M).updateChild(P,r);_=".priority"===M?w.updatePriority(p.getNode(),Y):w.updateChild(p.getNode(),M,Y,P,LG,null)}const I=AG(e,_,p.isFullyInitialized()||_n(t),w.filtersNodes());return VG(n,I,t,i,new QF(i,I,s),l)}function YF(n,e,t,r,i,s,u){const l=e.eventCache;let p,_;const w=new QF(i,e,s);if(_n(t))_=n.filter.updateFullNode(e.eventCache.getNode(),r,u),p=Hb(e,_,!0,n.filter.filtersNodes());else{const I=yn(t);if(".priority"===I)_=n.filter.updatePriority(e.eventCache.getNode(),r),p=Hb(e,_,l.isFullyInitialized(),l.isFiltered());else{const S=cr(t),M=l.getNode().getImmediateChild(I);let P;if(_n(S))P=r;else{const U=w.getCompleteChild(I);P=null!=U?".priority"===AF(S)&&U.getChild(pG(S)).isEmpty()?U:U.updateChild(S,r):en.EMPTY_NODE}p=M.equals(P)?e:Hb(e,n.filter.updateChild(l.getNode(),I,P,S,w,u),l.isFullyInitialized(),n.filter.filtersNodes())}}return p}function UG(n,e){return n.eventCache.isCompleteForChild(e)}function BG(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function JF(n,e,t,r,i,s,u,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _,p=e;_=_n(t)?r:new _r(null).setTree(t,r);const w=e.serverCache.getNode();return _.children.inorderTraversal((I,S)=>{if(w.hasChild(I)){const P=BG(0,e.serverCache.getNode().getImmediateChild(I),S);p=ex(n,p,new Wn(I),P,i,s,u,l)}}),_.children.inorderTraversal((I,S)=>{const M=!e.serverCache.isCompleteForChild(I)&&null===S.value;if(!w.hasChild(I)&&!M){const U=BG(0,e.serverCache.getNode().getImmediateChild(I),S);p=ex(n,p,new Wn(I),U,i,s,u,l)}}),p}class o9{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new FF(r.getIndex()),s=function EQ(n){return n.loadsAllData()?new FF(n.getIndex()):n.hasLimit()?new vQ(n):new Bb(n)}(r);this.processor_=function JQ(n){return{filter:n}}(s);const u=t.serverCache,l=t.eventCache,p=i.updateFullNode(en.EMPTY_NODE,u.getNode(),null),_=s.updateFullNode(en.EMPTY_NODE,l.getNode(),null),w=new Hf(p,u.isFullyInitialized(),i.filtersNodes()),I=new Hf(_,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=ZA(I,w),this.eventGenerator_=new OQ(this.query_)}get query(){return this.query_}}function c9(n,e){const t=um(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!_n(e)&&!t.getImmediateChild(yn(e)).isEmpty())?t.getChild(e):null}function jG(n){return 0===n.eventRegistrations_.length}function $G(n,e,t){const r=[];if(t){(0,o.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function HG(n,e,t,r){e.type===su.MERGE&&null!==e.source.queryId&&((0,o.hu)(um(n.viewCache_),"We should always have a full cache before handling merges"),(0,o.hu)(QA(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function e9(n,e,t,r,i){const s=new QQ;let u,l;if(t.type===su.OVERWRITE){const _=t;_.source.fromUser?u=YF(n,e,_.path,_.snap,r,i,s):((0,o.hu)(_.source.fromServer,"Unknown source."),l=_.source.tagged||e.serverCache.isFiltered()&&!_n(_.path),u=ex(n,e,_.path,_.snap,r,i,l,s))}else if(t.type===su.MERGE){const _=t;_.source.fromUser?u=function n9(n,e,t,r,i,s,u){let l=e;return r.foreach((p,_)=>{const w=Fr(t,p);UG(e,yn(w))&&(l=YF(n,l,w,_,i,s,u))}),r.foreach((p,_)=>{const w=Fr(t,p);UG(e,yn(w))||(l=YF(n,l,w,_,i,s,u))}),l}(n,e,_.path,_.children,r,i,s):((0,o.hu)(_.source.fromServer,"Unknown source."),l=_.source.tagged||e.serverCache.isFiltered(),u=JF(n,e,_.path,_.children,r,i,l,s))}else if(t.type===su.ACK_USER_WRITE){const _=t;u=_.revert?function s9(n,e,t,r,i,s){let u;if(null!=XA(r,t))return e;{const l=new QF(r,e,i),p=e.eventCache.getNode();let _;if(_n(t)||".priority"===yn(t)){let w;if(e.serverCache.isFullyInitialized())w=JA(r,um(e));else{const I=e.serverCache.getNode();(0,o.hu)(I instanceof en,"serverChildren would be complete if leaf node"),w=KF(r,I)}_=n.filter.updateFullNode(p,w,s)}else{const w=yn(t);let I=ZF(r,w,e.serverCache);null==I&&e.serverCache.isCompleteForChild(w)&&(I=p.getImmediateChild(w)),_=null!=I?n.filter.updateChild(p,w,I,cr(t),l,s):e.eventCache.getNode().hasChild(w)?n.filter.updateChild(p,w,en.EMPTY_NODE,cr(t),l,s):p,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=JA(r,um(e)),u.isLeafNode()&&(_=n.filter.updateFullNode(_,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=XA(r,Vn()),Hb(e,_,u,n.filter.filtersNodes())}}(n,e,_.path,r,i,s):function r9(n,e,t,r,i,s,u){if(null!=XA(i,t))return e;const l=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(_n(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return ex(n,e,t,p.getNode().getChild(t),i,s,l,u);if(_n(t)){let _=new _r(null);return p.getNode().forEachChild(gl,(w,I)=>{_=_.set(new Wn(w),I)}),JF(n,e,t,_,i,s,l,u)}return e}{let _=new _r(null);return r.foreach((w,I)=>{const S=Fr(t,w);p.isCompleteForPath(S)&&(_=_.set(w,p.getNode().getChild(S)))}),JF(n,e,t,_,i,s,l,u)}}(n,e,_.path,_.affectedTree,r,i,s)}else{if(t.type!==su.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+t.type);u=function i9(n,e,t,r,i){const s=e.serverCache;return VG(n,AG(e,s.getNode(),s.isFullyInitialized()||_n(t),s.isFiltered()),t,r,LG,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function t9(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=QA(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(CG(QA(e)))}}(e,u,p),{viewCache:u,changes:p}}(n.processor_,i,e,t,r);return function XQ(n,e){(0,o.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,o.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,o.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,GG(n,s.changes,s.viewCache.eventCache.getNode(),null)}function GG(n,e,t,r){return function MQ(n,e,t,r){const i=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function _Q(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),$b(n,i,"child_removed",e,r,t),$b(n,i,"child_added",e,r,t),$b(n,i,"child_moved",s,r,t),$b(n,i,"child_changed",e,r,t),$b(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let tx,rx;class qG{constructor(){this.views=new Map}}function XF(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,o.hu)(null!=s,"SyncTree gave us an op for an invalid query."),HG(s,e,t,r)}{let s=[];for(const u of n.views.values())s=s.concat(HG(u,e,t,r));return s}}function WG(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let l=JA(t,i?r:null),p=!1;l?p=!0:r instanceof en?(l=KF(t,r),p=!1):(l=en.EMPTY_NODE,p=!1);const _=ZA(new Hf(l,p,!1),new Hf(r,i,!1));return new o9(e,_)}return u}function zG(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function qf(n,e){let t=null;for(const r of n.views.values())t=t||c9(r,e);return t}function KG(n,e){return e._queryParams.loadsAllData()?nx(n):n.views.get(e._queryIdentifier)}function ZG(n,e){return null!=KG(n,e)}function Wf(n){return null!=nx(n)}function nx(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let v9=1;class QG{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _r(null),this.pendingWriteTree_=function KQ(){return{visibleWrites:ec.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function e1(n,e,t,r,i){return function FQ(n,e,t,r,i){(0,o.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Gb(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?av(n,new am({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function zf(n,e,t=!1){const r=function VQ(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function UQ(n,e){const t=n.allWrites.findIndex(l=>l.writeId===e);(0,o.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const l=n.allWrites[u];l.visible&&(u>=t&&BQ(l,r.path)?i=!1:iu(r.path,l.path)&&(s=!0)),u--}return!!i&&(s?(function jQ(n){n.visibleWrites=MG(n.allWrites,$Q,Vn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=xG(n.visibleWrites,r.path):as(r.children,p=>{n.visibleWrites=xG(n.visibleWrites,Fr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new _r(null);return null!=r.snap?s=s.set(Vn(),!0):as(r.children,u=>{s=s.set(new Wn(u),!0)}),av(n,new KA(r.path,s,t))}return[]}function qb(n,e,t){return av(n,new am({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function ix(n,e,t,r,i=!1){const s=e._path,u=n.syncPointTree_.get(s);let l=[];if(u&&("default"===e._queryIdentifier||ZG(u,e))){const p=function m9(n,e,t,r){const i=e._queryIdentifier,s=[];let u=[];const l=Wf(n);if("default"===i)for(const[p,_]of n.views.entries())u=u.concat($G(_,t,r)),jG(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||s.push(_.query));else{const p=n.views.get(i);p&&(u=u.concat($G(p,t,r)),jG(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return l&&!Wf(n)&&s.push(new(function f9(){return(0,o.hu)(tx,"Reference.ts has not been loaded"),tx}())(e._repo,e._path)),{removed:s,events:u}}(u,e,t,r);(function p9(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const _=p.removed;if(l=p.events,!i){const w=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(s,(S,M)=>Wf(M));if(w&&!I){const S=n.syncPointTree_.subtree(s);if(!S.isEmpty()){const M=function T9(n){return n.fold((e,t,r)=>{if(t&&Wf(t))return[nx(t)];{let i=[];return t&&(i=zG(t)),as(r,(s,u)=>{i=i.concat(u)}),i}})}(S);for(let P=0;P<M.length;++P){const U=M[P],Y=U.query,ge=e3(n,U);n.listenProvider_.startListening(zb(Y),Wb(n,Y),ge.hashFn,ge.onComplete)}}}!I&&_.length>0&&!r&&(w?n.listenProvider_.stopListening(zb(e),null):_.forEach(S=>{const M=n.queryToTagMap.get(ox(S));n.listenProvider_.stopListening(zb(S),M)}))}!function S9(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ox(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,_)}return l}function YG(n,e,t,r){const i=n1(n,r);if(null!=i){const s=r1(i),u=s.path,l=s.queryId,p=fo(u,e);return s1(n,u,new am(HF(l),p,t))}return[]}function t1(n,e,t,r=!1){const i=e._path;let s=null,u=!1;n.syncPointTree_.foreachOnPath(i,(S,M)=>{const P=fo(S,i);s=s||qf(M,P),u=u||Wf(M)});let p,l=n.syncPointTree_.get(i);l?(u=u||Wf(l),s=s||qf(l,Vn())):(l=new qG,n.syncPointTree_=n.syncPointTree_.set(i,l)),null!=s?p=!0:(p=!1,s=en.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((M,P)=>{const U=qf(P,Vn());U&&(s=s.updateImmediateChild(M,U))}));const _=ZG(l,e);if(!_&&!e._queryParams.loadsAllData()){const S=ox(e);(0,o.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const M=function A9(){return v9++}();n.queryToTagMap.set(S,M),n.tagToQueryMap.set(M,S)}let I=function g9(n,e,t,r,i,s){const u=WG(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function l9(n,e){n.eventRegistrations_.push(e)}(u,t),function d9(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(yr,(s,u)=>{r.push(rv(s,u))}),t.isFullyInitialized()&&r.push(CG(t.getNode())),GG(n,r,t.getNode(),e)}(u,t)}(l,e,t,YA(n.pendingWriteTree_,i),s,p);if(!_&&!u&&!r){const S=KG(l,e);I=I.concat(function x9(n,e,t){const r=e._path,i=Wb(n,e),s=e3(n,t),u=n.listenProvider_.startListening(zb(e),i,s.hashFn,s.onComplete),l=n.syncPointTree_.subtree(r);if(i)(0,o.hu)(!Wf(l.value),"If we're adding a query, it shouldn't be shadowed");else{const p=l.fold((_,w,I)=>{if(!_n(_)&&w&&Wf(w))return[nx(w).query];{let S=[];return w&&(S=S.concat(zG(w).map(M=>M.query))),as(I,(M,P)=>{S=S.concat(P)}),S}});for(let _=0;_<p.length;++_){const w=p[_];n.listenProvider_.stopListening(zb(w),Wb(n,w))}}return u}(n,e,S))}return I}function sx(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,l)=>{const _=qf(l,fo(u,e));if(_)return _});return PG(i,e,s,t,!0)}function av(n,e){return JG(e,n.syncPointTree_,null,YA(n.pendingWriteTree_,Vn()))}function JG(n,e,t,r){if(_n(n.path))return XG(n,e,t,r);{const i=e.get(Vn());null==t&&null!=i&&(t=qf(i,Vn()));let s=[];const u=yn(n.path),l=n.operationForChild(u),p=e.children.get(u);if(p&&l){const _=t?t.getImmediateChild(u):null,w=kG(r,u);s=s.concat(JG(l,p,_,w))}return i&&(s=s.concat(XF(i,n,r,t))),s}}function XG(n,e,t,r){const i=e.get(Vn());null==t&&null!=i&&(t=qf(i,Vn()));let s=[];return e.children.inorderTraversal((u,l)=>{const p=t?t.getImmediateChild(u):null,_=kG(r,u),w=n.operationForChild(u);w&&(s=s.concat(XG(w,l,p,_)))}),i&&(s=s.concat(XF(i,n,r,t))),s}function e3(n,e){const t=e.query,r=Wb(n,t);return{hashFn:()=>(function a9(n){return n.viewCache_.serverCache.getNode()}(e)||en.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function I9(n,e,t){const r=n1(n,t);if(r){const i=r1(r),s=i.path,u=i.queryId,l=fo(s,e);return s1(n,s,new jb(HF(u),l))}return[]}(n,t._path,r):function b9(n,e){return av(n,new jb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function w7(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return ix(n,t,null,s)}}}}function Wb(n,e){const t=ox(e);return n.queryToTagMap.get(t)}function ox(n){return n._path.toString()+"$"+n._queryIdentifier}function n1(n,e){return n.tagToQueryMap.get(e)}function r1(n){const e=n.indexOf("$");return(0,o.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Wn(n.substr(0,e))}}function s1(n,e,t){const r=n.syncPointTree_.get(e);return(0,o.hu)(r,"Missing sync point for query tag that we're tracking"),XF(r,t,YA(n.pendingWriteTree_,e),null)}function zb(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function _9(){return(0,o.hu)(rx,"Reference.ts has not been loaded"),rx}())(n._repo,n._path):n}class o1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new o1(t)}node(){return this.node_}}class a1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Fr(this.path_,e);return new a1(this.syncTree_,t)}node(){return sx(this.syncTree_,this.path_)}}const t3=function(n,e,t){return n&&"object"==typeof n?((0,o.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?O9(n[".sv"],e,t):"object"==typeof n[".sv"]?M9(n[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},O9=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,o.hu)(!1,"Unexpected server value: "+n)},M9=function(n,e,t){n.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,o.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},n3=function(n,e,t,r){return c1(e,new a1(t,n),r)},u1=function(n,e,t){return c1(n,new o1(e),t)};function c1(n,e,t){const r=n.getPriority().val(),i=t3(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,l=t3(u.getValue(),e,t);return l!==u.getValue()||i!==u.getPriority().val()?new tv(l,Jr(i)):n}{const u=n;return s=u,i!==u.getPriority().val()&&(s=s.updatePriority(new tv(i))),u.forEachChild(yr,(l,p)=>{const _=c1(p,e.getImmediateChild(l),t);_!==p&&(s=s.updateImmediateChild(l,_))}),s}}class l1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ax(n,e){let t=e instanceof Wn?e:new Wn(e),r=n,i=yn(t);for(;null!==i;){const s=(0,o.DV)(r.node.children,i)||{children:{},childCount:0};r=new l1(i,r,s),t=cr(t),i=yn(t)}return r}function lm(n){return n.node.value}function d1(n,e){n.node.value=e,h1(n)}function r3(n){return n.node.childCount>0}function ux(n,e){as(n.node.children,(t,r)=>{e(new l1(t,n,r))})}function i3(n,e,t,r){t&&!r&&e(n),ux(n,i=>{i3(i,e,!0,r)}),t&&r&&e(n)}function Kb(n){return new Wn(null===n.parent?n.name:Kb(n.parent)+"/"+n.name)}function h1(n){null!==n.parent&&function k9(n,e,t){const r=function P9(n){return void 0===lm(n)&&!r3(n)}(t),i=(0,o.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,h1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,h1(n))}(n.parent,n.name,n)}const F9=/[\[\].#$\/\u0000-\u001F\u007F]/,L9=/[\[\].#$\u0000-\u001F\u007F]/,f1=10485760,cx=function(n){return"string"==typeof n&&0!==n.length&&!F9.test(n)},s3=function(n){return"string"==typeof n&&0!==n.length&&!L9.test(n)},Zb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!FA(n)||n&&"object"==typeof n&&(0,o.r3)(n,".sv")},ml=function(n,e,t,r){r&&void 0===e||Qb((0,o.gK)(n,"value"),e,t)},Qb=function(n,e,t){const r=t instanceof Wn?new eQ(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+sm(r));if("function"==typeof e)throw new Error(n+"contains a function "+sm(r)+" with contents = "+e.toString());if(FA(e))throw new Error(n+"contains "+e.toString()+" "+sm(r));if("string"==typeof e&&e.length>f1/3&&(0,o.ug)(e)>f1)throw new Error(n+"contains a string greater than "+f1+" utf8 bytes "+sm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(as(e,(u,l)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!cx(u)))throw new Error(n+" contains an invalid key ("+u+") "+sm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function tQ(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,o.ug)(e),gG(n)})(r,u),Qb(n,l,r),function nQ(n){const e=n.parts_.pop();n.byteLength_-=(0,o.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+sm(r)+" in addition to actual children.")}},o3=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,o.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];as(e,(u,l)=>{const p=new Wn(u);if(Qb(i,l,Fr(t,p)),".priority"===AF(p)&&!Zb(l))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Nb(r);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!cx(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(X7);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&iu(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},p1=function(n,e,t){if(!t||void 0!==e){if(FA(e))throw new Error((0,o.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Zb(e))throw new Error((0,o.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Yb=function(n,e,t,r){if(!(r&&void 0===t||cx(t)))throw new Error((0,o.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Jb=function(n,e,t,r){if(!(r&&void 0===t||s3(t)))throw new Error((0,o.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ou=function(n,e){if(".info"===yn(e))throw new Error(n+" failed = Can't modify data under /.info/")},a3=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!cx(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),s3(n)}(t))throw new Error((0,o.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class j9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lx(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!xF(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function u3(n,e,t){lx(n,t),c3(n,r=>xF(r,e))}function wa(n,e,t){lx(n,t),c3(n,r=>iu(r,e)||iu(e,r))}function c3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?($9(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function $9(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();rm&&os("event: "+t.toString()),X_(r)}}}const l3="repo_interrupt";class G9{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new j9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zA(),this.transactionQueueTree_=new l1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function d3(n){const t=n.infoData_.getNode(new Wn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Xb(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:d3(n)})}function h3(n,e,t,r,i){n.dataUpdateCount++;const s=new Wn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const p=(0,o.UI)(t,_=>Jr(_));u=function C9(n,e,t,r){const i=n1(n,r);if(i){const s=r1(i),u=s.path,l=s.queryId,p=fo(u,e),_=_r.fromObject(t);return s1(n,u,new sv(HF(l),p,_))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Jr(t);u=YG(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,o.UI)(t,_=>Jr(_));u=function w9(n,e,t){const r=_r.fromObject(t);return av(n,new sv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Jr(t);u=qb(n.serverSyncTree_,s,p)}let l=s;u.length>0&&(l=cv(n,s)),wa(n.eventQueue_,l,u)}function f3(n,e){g1(n,"connected",e),!1===e&&function Z9(n){uv(n,"onDisconnectEvents");const e=Xb(n),t=zA();BF(n.onDisconnect_,Vn(),(i,s)=>{const u=n3(i,s,n.serverSyncTree_,e);iv(t,i,u)});let r=[];BF(t,Vn(),(i,s)=>{r=r.concat(qb(n.serverSyncTree_,i,s));const u=v1(n,i);cv(n,u)}),n.onDisconnect_=zA(),wa(n.eventQueue_,Vn(),r)}(n)}function g1(n,e,t){const r=new Wn("/.info/"+e),i=Jr(t);n.infoData_.updateSnapshot(r,i);const s=qb(n.infoSyncTree_,r,i);wa(n.eventQueue_,r,s)}function dx(n){return n.nextWriteId_++}function m1(n,e,t,r,i){uv(n,"set",{path:e.toString(),value:t,priority:r});const s=Xb(n),u=Jr(t,r),l=sx(n.serverSyncTree_,e),p=u1(u,l,s),_=dx(n),w=e1(n.serverSyncTree_,e,p,_,!0);lx(n.eventQueue_,w),n.server_.put(e.toString(),u.val(!0),(S,M)=>{const P="ok"===S;P||$s("set at "+e+" failed: "+S);const U=zf(n.serverSyncTree_,_,!P);wa(n.eventQueue_,e,U),Kf(0,i,S,M)});const I=v1(n,e);cv(n,I),wa(n.eventQueue_,I,[])}function Q9(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&UF(n.onDisconnect_,e),Kf(0,t,r,i)})}function p3(n,e,t,r){const i=Jr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,u)=>{"ok"===s&&iv(n.onDisconnect_,e,i),Kf(0,r,s,u)})}function y1(n,e,t){let r;r=".info"===yn(e._path)?ix(n.infoSyncTree_,e,t):ix(n.serverSyncTree_,e,t),u3(n.eventQueue_,e._path,r)}function g3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(l3)}function uv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),os(t,...e)}function Kf(n,e,t,r){e&&X_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const u=new Error(s);u.code=i,e(u)}})}function _1(n,e,t){return sx(n.serverSyncTree_,e,t)||en.EMPTY_NODE}function hx(n,e=n.transactionQueueTree_){if(e||fx(n,e),lm(e)){const t=y3(n,e);(0,o.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function nY(n,e,t){const r=t.map(_=>_.currentWriteId),i=_1(n,e,r);let s=i;const u=i.hash();for(let _=0;_<t.length;_++){const w=t[_];(0,o.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const I=fo(e,w.path);s=s.updateChild(I,w.currentOutputSnapshotRaw)}const l=s.val(!0),p=e;n.server_.put(p.toString(),l,_=>{uv(n,"transaction put response",{path:p.toString(),status:_});let w=[];if("ok"===_){const I=[];for(let S=0;S<t.length;S++)t[S].status=2,w=w.concat(zf(n.serverSyncTree_,t[S].currentWriteId)),t[S].onComplete&&I.push(()=>t[S].onComplete(null,!0,t[S].currentOutputSnapshotResolved)),t[S].unwatcher();fx(n,ax(n.transactionQueueTree_,e)),hx(n,n.transactionQueueTree_),wa(n.eventQueue_,e,w);for(let S=0;S<I.length;S++)X_(I[S])}else{if("datastale"===_)for(let I=0;I<t.length;I++)t[I].status=3===t[I].status?4:0;else{$s("transaction at "+p.toString()+" failed: "+_);for(let I=0;I<t.length;I++)t[I].status=4,t[I].abortReason=_}cv(n,e)}},u)}(n,Kb(e),t)}else r3(e)&&ux(e,t=>{hx(n,t)})}function cv(n,e){const t=m3(n,e),r=Kb(t);return function rY(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(l=>0===l.status).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const p=e[l],_=fo(t,p.path);let I,w=!1;if((0,o.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,I=p.abortReason,i=i.concat(zf(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)w=!0,I="maxretry",i=i.concat(zf(n.serverSyncTree_,p.currentWriteId,!0));else{const S=_1(n,p.path,u);p.currentInputSnapshot=S;const M=e[l].update(S.val());if(void 0!==M){Qb("transaction failed: Data returned ",M,p.path);let P=Jr(M);"object"==typeof M&&null!=M&&(0,o.r3)(M,".priority")||(P=P.updatePriority(S.getPriority()));const Y=p.currentWriteId,ge=Xb(n),Re=u1(P,S,ge);p.currentOutputSnapshotRaw=P,p.currentOutputSnapshotResolved=Re,p.currentWriteId=dx(n),u.splice(u.indexOf(Y),1),i=i.concat(e1(n.serverSyncTree_,p.path,Re,p.currentWriteId,p.applyLocally)),i=i.concat(zf(n.serverSyncTree_,Y,!0))}else w=!0,I="nodata",i=i.concat(zf(n.serverSyncTree_,p.currentWriteId,!0))}wa(n.eventQueue_,t,i),i=[],w&&(e[l].status=2,setTimeout(e[l].unwatcher,Math.floor(0)),e[l].onComplete&&r.push("nodata"===I?()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot):()=>e[l].onComplete(new Error(I),!1,null)))}fx(n,n.transactionQueueTree_);for(let l=0;l<r.length;l++)X_(r[l]);hx(n,n.transactionQueueTree_)}(n,y3(n,t),r),r}function m3(n,e){let t,r=n.transactionQueueTree_;for(t=yn(e);null!==t&&void 0===lm(r);)r=ax(r,t),t=yn(e=cr(e));return r}function y3(n,e){const t=[];return _3(n,e,t),t.sort((r,i)=>r.order-i.order),t}function _3(n,e,t){const r=lm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);ux(e,i=>{_3(n,i,t)})}function fx(n,e){const t=lm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,d1(e,t.length>0?t:void 0)}ux(e,r=>{fx(n,r)})}function v1(n,e){const t=Kb(m3(n,e)),r=ax(n.transactionQueueTree_,e);return function N9(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{E1(n,i)}),E1(n,r),i3(r,i=>{E1(n,i)}),t}function E1(n,e){const t=lm(e);if(t){const r=[];let i=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,o.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,o.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(zf(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?d1(e,void 0):t.length=s+1,wa(n.eventQueue_,Kb(e),i);for(let u=0;u<r.length;u++)X_(r[u])}}const w1=function(n,e){const t=oY(n),r=t.namespace;return"firebase.com"===t.domain&&pl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&pl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new bF(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Wn(t.pathString)}},oY=function(n){let e="",t="",r="",i="",s="",u=!0,l="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(l=n.substring(0,_-1),n=n.substring(_+2));let w=n.indexOf("/");-1===w&&(w=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),e=n.substring(0,Math.min(w,I)),w<I&&(i=function iY(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(w,I)));const S=function sY(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$s(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,I)));_=e.indexOf(":"),_>=0?(u="https"===l||"wss"===l,p=parseInt(e.substring(_+1),10)):_=e.length;const M=e.slice(0,_);if("localhost"===M.toLowerCase())t="localhost";else if(M.split(".").length<=2)t=M;else{const P=e.indexOf(".");r=e.substring(0,P).toLowerCase(),t=e.substring(P+1),s=r}"ns"in S&&(s=S.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:u,scheme:l,pathString:i,namespace:s}},v3="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aY=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=v3.charAt(t%64),t=Math.floor(t/64);(0,o.hu)(0===t,"Cannot push at time == 0");let u=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=v3.charAt(e[i]);return(0,o.hu)(20===u.length,"nextPushId: Length should be 20."),u}}();class E3{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Wl)(this.snapshot.exportVal())}}class w3{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class b1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,o.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class b3{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new o.BH;return Q9(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ou("OnDisconnect.remove",this._path);const e=new o.BH;return p3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ou("OnDisconnect.set",this._path),ml("OnDisconnect.set",e,this._path,!1);const t=new o.BH;return p3(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ou("OnDisconnect.setWithPriority",this._path),ml("OnDisconnect.setWithPriority",e,this._path,!1),p1("OnDisconnect.setWithPriority",t,!1);const r=new o.BH;return function Y9(n,e,t,r,i){const s=Jr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,l)=>{"ok"===u&&iv(n.onDisconnect_,e,s),Kf(0,i,u,l)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ou("OnDisconnect.update",this._path),o3("OnDisconnect.update",e,this._path,!1);const t=new o.BH;return function J9(n,e,t,r){if((0,o.xb)(t))return os("onDisconnect().update() called with empty data.  Don't do anything."),void Kf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&as(t,(u,l)=>{const p=Jr(l);iv(n.onDisconnect_,Fr(e,u),p)}),Kf(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Fo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return _n(this._path)?null:AF(this._path)}get ref(){return new au(this._repo,this._path)}get _queryIdentifier(){const e=TG(this._queryParams),t=EF(e);return"{}"===t?"default":t}get _queryObject(){return TG(this._queryParams)}isEqual(e){if(!((e=(0,o.m9)(e))instanceof Fo))return!1;const t=this._repo===e._repo,r=xF(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function J7(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function px(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Zf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===gl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Bf)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==$d)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===yr){if(null!=e&&!Zb(e)||null!=t&&!Zb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(n.getIndex()instanceof NF||n.getIndex()===kF,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function gx(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class au extends Fo{constructor(e,t){super(e,t,new GA,!1)}get parent(){const e=pG(this._path);return null===e?null:new au(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class dm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Wn(e),r=hm(this.ref,e);return new dm(this._node.getChild(t),r,yr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new dm(i,hm(this.ref,r),yr)))}hasChild(e){const t=new Wn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function I3(n,e){return(n=(0,o.m9)(n))._checkNotDeleted("ref"),void 0!==e?hm(n._root,e):n._root}function C3(n,e){(n=(0,o.m9)(n))._checkNotDeleted("refFromURL");const t=w1(e,n._repo.repoInfo_.nodeAdmin);a3("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&pl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),I3(n,t.path.toString())}function hm(n,e){return null===yn((n=(0,o.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Jb("child","path",t,!1)):Jb("child","path",e,!1),new au(n._repo,Fr(n._path,e));var t}function I1(n,e){n=(0,o.m9)(n),ou("set",n._path),ml("set",e,n._path,!1);const t=new o.BH;return m1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function hY(n,e){o3("update",e,n._path,!1);const t=new o.BH;return function K9(n,e,t,r){uv(n,"update",{path:e.toString(),value:t});let i=!0;const s=Xb(n),u={};if(as(t,(l,p)=>{i=!1,u[l]=n3(Fr(e,l),Jr(p),n.serverSyncTree_,s)}),i)os("update() called with empty data.  Don't do anything."),Kf(0,r,"ok",void 0);else{const l=dx(n),p=function E9(n,e,t,r){!function LQ(n,e,t,r){(0,o.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=qF(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=_r.fromObject(t);return av(n,new sv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,l);lx(n.eventQueue_,p),n.server_.merge(e.toString(),t,(_,w)=>{const I="ok"===_;I||$s("update at "+e+" failed: "+_);const S=zf(n.serverSyncTree_,l,!I),M=S.length>0?cv(n,e):e;wa(n.eventQueue_,M,S),Kf(0,r,_,w)}),as(t,_=>{const w=v1(n,Fr(e,_));cv(n,w)}),wa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function fY(n){n=(0,o.m9)(n);const e=new b1(()=>{}),t=new eI(e);return function z9(n,e,t){const r=function D9(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(_,w)=>{const I=fo(_,t);r=r||qf(w,I)});let i=n.syncPointTree_.get(t);i?r=r||qf(i,Vn()):(i=new qG,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,u=s?new Hf(r,!0,!1):null;return function u9(n){return QA(n.viewCache_)}(WG(i,e,YA(n.pendingWriteTree_,e._path),s?u.getNode():en.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Jr(i).withIndex(e._queryParams.getIndex());let u;if(t1(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=qb(n.serverSyncTree_,e._path,s);else{const l=Wb(n.serverSyncTree_,e);u=YG(n.serverSyncTree_,e._path,s,l)}return wa(n.eventQueue_,e._path,u),ix(n.serverSyncTree_,e,t,null,!0),s},i=>(uv(n,"get for query "+(0,o.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new dm(r,new au(n._repo,n._path),n._queryParams.getIndex()))}class eI{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new E3("value",this,new dm(e.snapshotNode,new au(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new w3(this,e,t):null}matches(e){return e instanceof eI&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class mx{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new w3(this,e,t):null}createEvent(e,t){(0,o.hu)(null!=e.childName,"Child events should have a childName.");const r=hm(new au(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new E3(e.type,this,new dm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof mx&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function tI(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,_=(w,I)=>{y1(n._repo,n,l),p(w,I)};_.userCallback=t.userCallback,_.context=t.context,t=_}const u=new b1(t,s||void 0),l="value"===e?new eI(u):new mx(e,u);return function X9(n,e,t){let r;r=".info"===yn(e._path)?t1(n.infoSyncTree_,e,t):t1(n.serverSyncTree_,e,t),u3(n.eventQueue_,e._path,r)}(n._repo,n,l),()=>y1(n._repo,n,l)}function C1(n,e,t,r){return tI(n,"value",e,t,r)}function D3(n,e,t,r){return tI(n,"child_added",e,t,r)}function T3(n,e,t,r){return tI(n,"child_changed",e,t,r)}function S3(n,e,t,r){return tI(n,"child_moved",e,t,r)}function A3(n,e,t,r){return tI(n,"child_removed",e,t,r)}function x3(n,e,t){let r=null;const i=t?new b1(t):null;"value"===e?r=new eI(i):e&&(r=new mx(e,i)),y1(n._repo,n,r)}class tc{}class R3 extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ml("endAt",this._value,e._path,!0);const t=VF(e._queryParams,this._value,this._key);if(gx(t),Zf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class gY extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ml("endBefore",this._value,e._path,!1);const t=function CQ(n,e,t){let r;return r=VF(n,e,n.index_===gl||t?t:Bf),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(gx(t),Zf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class O3 extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ml("startAt",this._value,e._path,!0);const t=LF(e._queryParams,this._value,this._key);if(gx(t),Zf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class _Y extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ml("startAfter",this._value,e._path,!1);const t=function IQ(n,e,t){let r;return r=LF(n,e,n.index_===gl||t?t:$d),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(gx(t),Zf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class EY extends tc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fo(e._repo,e._path,function wQ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class bY extends tc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fo(e._repo,e._path,function bQ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class CY extends tc{constructor(e){super(),this._path=e}_apply(e){px(e,"orderByChild");const t=new Wn(this._path);if(_n(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new NF(t),i=qA(e._queryParams,r);return Zf(i),new Fo(e._repo,e._path,i,!0)}}class TY extends tc{_apply(e){px(e,"orderByKey");const t=qA(e._queryParams,gl);return Zf(t),new Fo(e._repo,e._path,t,!0)}}class AY extends tc{_apply(e){px(e,"orderByPriority");const t=qA(e._queryParams,yr);return Zf(t),new Fo(e._repo,e._path,t,!0)}}class RY extends tc{_apply(e){px(e,"orderByValue");const t=qA(e._queryParams,kF);return Zf(t),new Fo(e._repo,e._path,t,!0)}}class MY extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ml("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new R3(this._value,this._key)._apply(new O3(this._value,this._key)._apply(e))}}function nc(n,...e){let t=(0,o.m9)(n);for(const r of e)t=r._apply(t);return t}(function h9(n){(0,o.hu)(!tx,"__referenceConstructor has already been defined"),tx=n})(au),function y9(n){(0,o.hu)(!rx,"__referenceConstructor has already been defined"),rx=n}(au);const D1={};function P3(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||pl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),os("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,u=w1(s,i),l=u.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,s=`http://${_}?ns=${l.namespace}`,u=w1(s,i),l=u.repoInfo):p=!u.repoInfo.secure;const w=i&&p?new Pb(Pb.OWNER):new S7(n.name,n.options,e);a3("Invalid Firebase Database URL",u),_n(u.path)||pl("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function LY(n,e,t,r){let i=D1[e.name];i||(i={},D1[e.name]=i);let s=i[n.toURLString()];return s&&pl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new G9(n,false,t,r),i[n.toURLString()]=s,s}(l,n,w,new T7(n.name,t));return new UY(I,n)}class UY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function q9(n,e,t){if(n.stats_=DF(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new WA(n.repoInfo_,(r,i,s,u)=>{h3(n,r,i,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>f3(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new om(n.repoInfo_,e,(r,i,s,u)=>{h3(n,r,i,s,u)},r=>{f3(n,r)},r=>{!function W9(n,e){as(e,(t,r)=>{g1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function R7(n,e){const t=n.toString();return CF[t]||(CF[t]=e()),CF[t]}(n.repoInfo_,()=>new RQ(n.stats_,n.server_)),n.infoData_=new DQ,n.infoSyncTree_=new QG({startListening:(r,i,s,u)=>{let l=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(l=qb(n.infoSyncTree_,r._path,p),setTimeout(()=>{u("ok")},0)),l},stopListening:()=>{}}),g1(n,"connected",!1),n.serverSyncTree_=new QG({startListening:(r,i,s,u)=>(n.server_.listen(r,s,i,(l,p)=>{const _=u(l,p);wa(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new au(this._repo,Vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function FY(n,e){const t=D1[e];(!t||t[n.key]!==n)&&pl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),g3(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&pl("Cannot call "+e+" on a deleted database.")}}function N3(){nG.IS_TRANSPORT_INITIALIZED&&$s("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function BY(){N3(),jf.forceDisallow()}function jY(){N3(),ev.forceDisallow(),jf.forceAllow()}function GY(n,e){FH(n,e)}const WY={".sv":"timestamp"};class ZY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}om.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},om.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function qY(n){OH(Bs.SDK_VERSION),(0,Bs._registerComponent)(new nu.wA("database",(e,{instanceIdentifier:t})=>P3(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Bs.registerVersion)(xH,"0.14.0",n),(0,Bs.registerVersion)(xH,"0.14.0","esm2017")}();const XY=new a.Yd("@firebase/database-compat"),F3=function(n){XY.warn("FIREBASE WARNING: "+n)};class nJ{constructor(e){this._delegate=e}cancel(e){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,o.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),(0,o.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,F3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class rJ{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Qf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Jb("DataSnapshot.child","path",e,!1),new Qf(this._database,this._delegate.child(e))}hasChild(e){return(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Jb("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Qf(this._database,t)))}hasChildren(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),new ba(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ws{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,o.Dv)("Query.on",2,4,arguments.length),(0,o.Wj)("Query.on","callback",t,!1);const u=ws.getCancelAndContextArgs_("Query.on",r,i),l=(_,w)=>{t.call(u.context,new Qf(this.database,_),w)};l.userCallback=t,l.context=u.context;const p=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return C1(this._delegate,l,p),t;case"child_added":return D3(this._delegate,l,p),t;case"child_removed":return A3(this._delegate,l,p),t;case"child_changed":return T3(this._delegate,l,p),t;case"child_moved":return S3(this._delegate,l,p),t;default:throw new Error((0,o.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,o.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,o.Wj)("Query.off","callback",t,!0),(0,o.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,x3(this._delegate,e,i)}else x3(this._delegate,e)}get(){return fY(this._delegate).then(e=>new Qf(this.database,e))}once(e,t,r,i){(0,o.Dv)("Query.once",1,4,arguments.length),(0,o.Wj)("Query.once","callback",t,!0);const s=ws.getCancelAndContextArgs_("Query.once",r,i),u=new o.BH,l=(_,w)=>{const I=new Qf(this.database,_);t&&t.call(s.context,I,w),u.resolve(I)};l.userCallback=t,l.context=s.context;const p=_=>{s.cancel&&s.cancel.call(s.context,_),u.reject(_)};switch(e){case"value":C1(this._delegate,l,p,{onlyOnce:!0});break;case"child_added":D3(this._delegate,l,p,{onlyOnce:!0});break;case"child_removed":A3(this._delegate,l,p,{onlyOnce:!0});break;case"child_changed":T3(this._delegate,l,p,{onlyOnce:!0});break;case"child_moved":S3(this._delegate,l,p,{onlyOnce:!0});break;default:throw new Error((0,o.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,o.Dv)("Query.limitToFirst",1,1,arguments.length),new ws(this.database,nc(this._delegate,function wY(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new EY(n)}(e)))}limitToLast(e){return(0,o.Dv)("Query.limitToLast",1,1,arguments.length),new ws(this.database,nc(this._delegate,function IY(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new bY(n)}(e)))}orderByChild(e){return(0,o.Dv)("Query.orderByChild",1,1,arguments.length),new ws(this.database,nc(this._delegate,function DY(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Jb("orderByChild","path",n,!1),new CY(n)}(e)))}orderByKey(){return(0,o.Dv)("Query.orderByKey",0,0,arguments.length),new ws(this.database,nc(this._delegate,function SY(){return new TY}()))}orderByPriority(){return(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),new ws(this.database,nc(this._delegate,function xY(){return new AY}()))}orderByValue(){return(0,o.Dv)("Query.orderByValue",0,0,arguments.length),new ws(this.database,nc(this._delegate,function OY(){return new RY}()))}startAt(e=null,t){return(0,o.Dv)("Query.startAt",0,2,arguments.length),new ws(this.database,nc(this._delegate,function yY(n=null,e){return Yb("startAt","key",e,!0),new O3(n,e)}(e,t)))}startAfter(e=null,t){return(0,o.Dv)("Query.startAfter",0,2,arguments.length),new ws(this.database,nc(this._delegate,function vY(n,e){return Yb("startAfter","key",e,!0),new _Y(n,e)}(e,t)))}endAt(e=null,t){return(0,o.Dv)("Query.endAt",0,2,arguments.length),new ws(this.database,nc(this._delegate,function pY(n,e){return Yb("endAt","key",e,!0),new R3(n,e)}(e,t)))}endBefore(e=null,t){return(0,o.Dv)("Query.endBefore",0,2,arguments.length),new ws(this.database,nc(this._delegate,function mY(n,e){return Yb("endBefore","key",e,!0),new gY(n,e)}(e,t)))}equalTo(e,t){return(0,o.Dv)("Query.equalTo",1,2,arguments.length),new ws(this.database,nc(this._delegate,function PY(n,e){return Yb("equalTo","key",e,!0),new MY(n,e)}(e,t)))}toString(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ws))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,o.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,o.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,o.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ba(this.database,new au(this._delegate._repo,this._delegate._path))}}class ba extends ws{constructor(e,t){super(e,new Fo(t._repo,t._path,new GA,!1)),this.database=e,this._delegate=t}getKey(){return(0,o.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ba(this.database,hm(this._delegate,e))}getParent(){(0,o.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ba(this.database,e):null}getRoot(){return(0,o.Dv)("Reference.root",0,0,arguments.length),new ba(this.database,this._delegate.root)}set(e,t){(0,o.Dv)("Reference.set",1,2,arguments.length),(0,o.Wj)("Reference.set","onComplete",t,!0);const r=I1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,o.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,F3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ou("Reference.update",this._delegate._path),(0,o.Wj)("Reference.update","onComplete",t,!0);const r=hY(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,o.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function dY(n,e,t){if(ou("setWithPriority",n._path),ml("setWithPriority",e,n._path,!1),p1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new o.BH;return m1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,o.Dv)("Reference.remove",0,1,arguments.length),(0,o.Wj)("Reference.remove","onComplete",e,!0);const t=function cY(n){return ou("remove",n._path),I1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,o.Dv)("Reference.transaction",1,3,arguments.length),(0,o.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,o.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,o.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function QY(n,e,t){var r;if(n=(0,o.m9)(n),ou("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new o.BH,l=C1(n,()=>{});return function tY(n,e,t,r,i,s){uv(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:PH(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=_1(n,e,void 0);u.currentInputSnapshot=l;const p=u.update(l.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Qb("transaction failed: Data returned ",p,u.path),u.status=0;const _=ax(n.transactionQueueTree_,e),w=lm(_)||[];let I;w.push(u),d1(_,w),"object"==typeof p&&null!==p&&(0,o.r3)(p,".priority")?(I=(0,o.DV)(p,".priority"),(0,o.hu)(Zb(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(sx(n.serverSyncTree_,e)||en.EMPTY_NODE).getPriority().val();const S=Xb(n),M=Jr(p,I),P=u1(M,l,S);u.currentOutputSnapshotRaw=M,u.currentOutputSnapshotResolved=P,u.currentWriteId=dx(n);const U=e1(n.serverSyncTree_,e,P,u.currentWriteId,u.applyLocally);wa(n.eventQueue_,e,U),hx(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,_,w)=>{let I=null;p?s.reject(p):(I=new dm(w,new au(n._repo,n._path),yr),s.resolve(new ZY(_,I)))},l,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new rJ(s.committed,new Qf(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),(0,o.Wj)("Reference.setPriority","onComplete",t,!0);const r=function lY(n,e){n=(0,o.m9)(n),ou("setPriority",n._path),p1("setPriority",e,!1);const t=new o.BH;return m1(n._repo,Fr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,o.Dv)("Reference.push",0,2,arguments.length),(0,o.Wj)("Reference.push","onComplete",t,!0);const r=function uY(n,e){n=(0,o.m9)(n),ou("push",n._path),ml("push",e,n._path,!0);const t=d3(n._repo),r=aY(t),i=hm(n,r),s=hm(n,r);let u;return u=null!=e?I1(s,e).then(()=>s):Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new ba(this.database,u));t&&i.then(()=>t(null),u=>t(u));const s=new ba(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return ou("Reference.onDisconnect",this._delegate._path),new nJ(new b3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class nI{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:BY,forceLongPolling:jY}}useEmulator(e,t,r={}){!function k3(n,e,t,r={}){(n=(0,o.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&pl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Pb(Pb.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,o.Sg)(r.mockUserToken,n.app.options.projectId);s=new Pb(u)}!function kY(n,e,t,r){n.repoInfo_=new bF(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,o.Dv)("database.ref",0,1,arguments.length),e instanceof ba){const t=C3(this._delegate,e.toString());return new ba(this,t)}{const t=I3(this._delegate,e);return new ba(this,t)}}refFromURL(e){(0,o.Dv)("database.refFromURL",1,1,arguments.length);const r=C3(this._delegate,e);return new ba(this,r)}goOffline(){return(0,o.Dv)("database.goOffline",0,0,arguments.length),function $Y(n){(n=(0,o.m9)(n))._checkNotDeleted("goOffline"),g3(n._repo)}(this._delegate)}goOnline(){return(0,o.Dv)("database.goOnline",0,0,arguments.length),function HY(n){(n=(0,o.m9)(n))._checkNotDeleted("goOnline"),function eY(n){n.persistentConnection_&&n.persistentConnection_.resume(l3)}(n._repo)}(this._delegate)}}nI.ServerValue={TIMESTAMP:function zY(){return WY}(),increment:n=>function KY(n){return{".sv":{increment:n}}}(n)};var sJ=Object.freeze({__proto__:null,initStandalone:function iJ({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){OH(t);const u=new nu.zt("auth-internal",new nu.H0("database-standalone"));return u.setComponent(new nu.wA("auth-internal",()=>r,"PRIVATE")),{instance:new nI(P3(n,u,void 0,e,s),n),namespace:i}}});const oJ=nI.ServerValue;function L3(n){return null==n}function V3(n){return"function"==typeof n.set}function U3(n,e){return V3(e)?e:n.ref(e)}function B3(n,e){if(function uJ(n){return"string"==typeof n}(n))return e.stringCase();if(V3(n))return e.firebaseCase();if(function cJ(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function rI(n,e,t="on",r=vM.z){return new pn.y(i=>{let s=null;return s=n[t](e,(u,l)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:l})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,st.U)(i=>{const{snapshot:s,prevKey:u}=i;let l=null;return s.exists()&&(l=s.key),{type:e,payload:s,prevKey:u,key:l}}),(0,Ij.B)())}function j3(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function hJ(n,e){const{payload:t,prevKey:r,key:i}=e,s=j3(n,i),u=function dJ(n,e){if(L3(e))return 0;{const t=j3(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let l=null;e.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:l,key:p.key};return l=p.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const l=n[s-1];(l&&l.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(l=>l.payload.key!==t.key);case"child_changed":return n.map(l=>l.payload.key===i?e:l);case"child_moved":if(s>-1){const l=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,l),n}return n;default:return n}}function $3(n){return(L3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function H3(n,e,t){return function lJ(n,e,t){return rI(n,"value","once",t).pipe((0,ft.w)(r=>{const i=[(0,gt.of)(r)];return e.forEach(s=>i.push(rI(n,s,"on",t))),(0,_b.T)(...i).pipe((0,Ps.R)(hJ,[]))}),(0,QT.x)())}(n,e=$3(e),t)}function G3(n,e,t){const r=(e=$3(e)).map(i=>rI(n,i,"on",t));return(0,_b.T)(...r)}function q3(n,e){return function(r,i){return B3(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function mJ(n){return function(t){return t?B3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function W3(n,e){return function(){return rI(n,"value","on",e)}}!function aJ(n){n.INTERNAL.registerComponent(new nu.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new nI(i,r)},"PUBLIC").setServiceProps({Reference:ba,Query:ws,Database:nI,DataSnapshot:Qf,enableLogging:GY,INTERNAL:sJ,ServerValue:oJ}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.0")}(YT.Z);const vJ=new h.OlP("angularfire2.realtimeDatabaseURL"),EJ=new h.OlP("angularfire2.database.use-emulator");let wJ=(()=>{class n{constructor(t,r,i,s,u,l,p,_,w,I,S,M,P,U,Y){this.schedulers=l;const ge=p,Re=(0,Ri.on)(t,u,r);_&&Bk(Re,u,w,S,M,P,I,U),this.database=(0,Ri.cc)(`${Re.name}.database.${i}`,"AngularFireDatabase",Re.name,()=>{const _e=u.runOutsideAngular(()=>Re.database(i||void 0));return ge&&_e.useEmulator(...ge),_e},[ge])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>U3(this.database,t));let s=i;return r&&(s=r(i)),function yJ(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:q3(r,"update"),set:q3(r,"set"),push:i=>r.push(i),remove:mJ(r),snapshotChanges:i=>H3(n,i,t).pipe(kn.iC),stateChanges:i=>G3(n,i,t).pipe(kn.iC),auditTrail:i=>function fJ(n,e,t){return function gJ(n,e,t){return function pJ(n,e){return rI(n,"value","on",e).pipe((0,st.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe((0,iF.M)(e),(0,st.U)(([i,s])=>{const u=i.lastKeyToLoad,l=s.map(p=>p.key);return{actions:s,lastKeyToLoad:u,loadedKeys:l}}),function f7(n){return(0,ot.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,ni.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,st.U)(i=>i.actions))}(n,G3(n,e).pipe((0,Ps.R)((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(kn.iC),valueChanges:(i,s)=>H3(n,i,t).pipe((0,st.U)(l=>l.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),kn.iC)}}(s,this)}object(t){return function _J(n,e){return{query:n,snapshotChanges:()=>W3(n,e.schedulers.outsideAngular)().pipe(kn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>W3(n,e.schedulers.outsideAngular)().pipe(kn.iC,(0,st.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>U3(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ri.Dh),h.LFG(Ri.xv,8),h.LFG(vJ,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(kn.HU),h.LFG(EJ,8),h.LFG(bb,8),h.LFG(Nk,8),h.LFG(kk,8),h.LFG(Fk,8),h.LFG(Lk,8),h.LFG(Vk,8),h.LFG(Uk,8),h.LFG(wb,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bJ=(()=>{class n{constructor(){wA.Z.registerVersion("angularfire",kn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[wJ]}),n})(),IJ=(()=>{class n{constructor(t,r,i,s){this.actions$=t,this.authService=r,this.store=i,this.router=s,this.signUp$=z_(()=>this.actions$.pipe(K_(Qu),(0,ft.w)(u=>this.authService.signUp(u.email,u.password).pipe((0,st.U)(l=>{if(!l)throw Error();return this.router.navigate(["login"]),TT({email:u.email})}),(0,yi.K)(l=>(window.alert(l.message),(0,gt.of)(fa()))))))),this.signupWithBackend$=z_(()=>this.actions$.pipe(K_(TT),(0,ft.w)(u=>this.authService.signUpWithBack(u.email).pipe((0,st.U)(l=>(window.localStorage.setItem("id",l),fa())),(0,yi.K)(l=>(window.alert(l.message),(0,gt.of)(fa()))))))),this.login$=z_(()=>this.actions$.pipe(K_(s_),(0,ft.w)(u=>this.authService.login({email:u.email,password:u.password}).pipe((0,mr.z)(l=>(0,rn.D)(l.user?l.user.getIdToken(!0):new Promise((p,_)=>_(!1)))),(0,st.U)(l=>l?tu({token:JSON.stringify(l)}):fa()),(0,yi.K)(l=>(window.alert(l.message),(0,gt.of)(fa()))))))),this.verifyTokenEffect$=z_(()=>this.actions$.pipe(K_(tu),(0,ft.w)(u=>{const l=window.localStorage.getItem("id");return l?this.authService.verifyToken(u.token,l).pipe((0,st.U)(p=>{const _=JSON.parse(JSON.stringify(p));return this.router.navigate(["catalog"]),AT({email:_.email,basket:_.products})}),(0,yi.K)(p=>(window.alert(p.message),(0,gt.of)(fa())))):(0,gt.of)(fa())})))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xk),h.LFG(i$),h.LFG(tt.yh),h.LFG(Rr))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),CJ=(()=>{class n{constructor(t,r,i){this.actions$=t,this.store$=r,this.router=i,this.checkStatus$=z_(()=>this.actions$.pipe(K_(xT),(0,iF.M)(this.store$.pipe((0,tt.Ys)(na))),(0,ft.w)(([s,u])=>u?(0,gt.of)(RT({id:s.id})):(this.router.navigate(["signup"]),(0,gt.of)(fa())))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xk),h.LFG(tt.yh),h.LFG(Rr))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),DJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[a0]}),n.\u0275inj=h.cJS({providers:[{provide:Oo,useFactory:e=>({cache:new U8({addTypename:!1}),link:e.create({uri:bg_URL_API_url+"graphql"})}),deps:[D8]}],imports:[Nl,yd,I8,KT,rw,KT,Ri.hO.initializeApp(bg_firebase),a8,g8,h7,bJ,Ho,tt.Aw.forRoot(E5),d5.forRoot([b5,IJ,CJ]),w5.FT.instrument({maxAge:25,logOnly:true})]}),n})();(0,h.G48)(),Ac().bootstrapModule(DJ).catch(n=>console.error(n))},1135:(ae,Z,R)=>{R.d(Z,{X:()=>z});var h=R(7579);class z extends h.x{constructor(ne){super(),this._value=ne}get value(){return this.getValue()}_subscribe(ne){const q=super._subscribe(ne);return!q.closed&&ne.next(this._value),q}getValue(){const{hasError:ne,thrownError:q,_value:re}=this;if(ne)throw q;return this._throwIfClosed(),re}next(ne){super.next(this._value=ne)}}},9751:(ae,Z,R)=>{R.d(Z,{y:()=>ee});var h=R(930),z=R(727),F=R(8822),ne=R(9635),q=R(2416),re=R(576),X=R(2806);let ee=(()=>{class G{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const Ee=new G;return Ee.source=this,Ee.operator=Te,Ee}subscribe(Te,Ee,Qe){const Ie=function j(G){return G&&G instanceof h.Lv||function B(G){return G&&(0,re.m)(G.next)&&(0,re.m)(G.error)&&(0,re.m)(G.complete)}(G)&&(0,z.Nn)(G)}(Te)?Te:new h.Hp(Te,Ee,Qe);return(0,X.x)(()=>{const{operator:he,source:Ze}=this;Ie.add(he?he.call(Ie,Ze):Ze?this._subscribe(Ie):this._trySubscribe(Ie))}),Ie}_trySubscribe(Te){try{return this._subscribe(Te)}catch(Ee){Te.error(Ee)}}forEach(Te,Ee){return new(Ee=K(Ee))((Qe,Ie)=>{const he=new h.Hp({next:Ze=>{try{Te(Ze)}catch(Ye){Ie(Ye),he.unsubscribe()}},error:Ie,complete:Qe});this.subscribe(he)})}_subscribe(Te){var Ee;return null===(Ee=this.source)||void 0===Ee?void 0:Ee.subscribe(Te)}[F.L](){return this}pipe(...Te){return(0,ne.U)(Te)(this)}toPromise(Te){return new(Te=K(Te))((Ee,Qe)=>{let Ie;this.subscribe(he=>Ie=he,he=>Qe(he),()=>Ee(Ie))})}}return G.create=we=>new G(we),G})();function K(G){var we;return null!==(we=G??q.v.Promise)&&void 0!==we?we:Promise}},4707:(ae,Z,R)=>{R.d(Z,{t:()=>F});var h=R(7579),z=R(6063);class F extends h.x{constructor(q=1/0,re=1/0,X=z.l){super(),this._bufferSize=q,this._windowTime=re,this._timestampProvider=X,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=re===1/0,this._bufferSize=Math.max(1,q),this._windowTime=Math.max(1,re)}next(q){const{isStopped:re,_buffer:X,_infiniteTimeWindow:ee,_timestampProvider:K,_windowTime:B}=this;re||(X.push(q),!ee&&X.push(K.now()+B)),this._trimBuffer(),super.next(q)}_subscribe(q){this._throwIfClosed(),this._trimBuffer();const re=this._innerSubscribe(q),{_infiniteTimeWindow:X,_buffer:ee}=this,K=ee.slice();for(let B=0;B<K.length&&!q.closed;B+=X?1:2)q.next(K[B]);return this._checkFinalizedStatuses(q),re}_trimBuffer(){const{_bufferSize:q,_timestampProvider:re,_buffer:X,_infiniteTimeWindow:ee}=this,K=(ee?1:2)*q;if(q<1/0&&K<X.length&&X.splice(0,X.length-K),!ee){const B=re.now();let j=0;for(let G=1;G<X.length&&X[G]<=B;G+=2)j=G;j&&X.splice(0,j+1)}}}},7579:(ae,Z,R)=>{R.d(Z,{x:()=>X});var h=R(9751),z=R(727);const ne=(0,R(3888).d)(K=>function(){K(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var q=R(8737),re=R(2806);let X=(()=>{class K extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const G=new ee(this,this);return G.operator=j,G}_throwIfClosed(){if(this.closed)throw new ne}next(j){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const G of this.currentObservers)G.next(j)}})}error(j){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:G}=this;for(;G.length;)G.shift().error(j)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:G,isStopped:we,observers:Te}=this;return G||we?z.Lc:(this.currentObservers=null,Te.push(j),new z.w0(()=>{this.currentObservers=null,(0,q.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:G,thrownError:we,isStopped:Te}=this;G?j.error(we):Te&&j.complete()}asObservable(){const j=new h.y;return j.source=this,j}}return K.create=(B,j)=>new ee(B,j),K})();class ee extends X{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,G;null===(G=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===G||G.call(j,B)}error(B){var j,G;null===(G=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===G||G.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,G;return null!==(G=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==G?G:z.Lc}}},930:(ae,Z,R)=>{R.d(Z,{Hp:()=>Qe,Lv:()=>G});var h=R(576),z=R(727),F=R(2416),ne=R(7849),q=R(5032);const re=K("C",void 0,void 0);function K(Me,De,Pe){return{kind:Me,value:De,error:Pe}}var B=R(3410),j=R(2806);class G extends z.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,z.Nn)(De)&&De.add(this)):this.destination=Ye}static create(De,Pe,We){return new Qe(De,Pe,We)}next(De){this.isStopped?Ze(function ee(Me){return K("N",Me,void 0)}(De),this):this._next(De)}error(De){this.isStopped?Ze(function X(Me){return K("E",void 0,Me)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?Ze(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const we=Function.prototype.bind;function Te(Me,De){return we.call(Me,De)}class Ee{constructor(De){this.partialObserver=De}next(De){const{partialObserver:Pe}=this;if(Pe.next)try{Pe.next(De)}catch(We){Ie(We)}}error(De){const{partialObserver:Pe}=this;if(Pe.error)try{Pe.error(De)}catch(We){Ie(We)}else Ie(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(Pe){Ie(Pe)}}}class Qe extends G{constructor(De,Pe,We){let nt;if(super(),(0,h.m)(De)||!De)nt={next:De??void 0,error:Pe??void 0,complete:We??void 0};else{let Q;this&&F.v.useDeprecatedNextContext?(Q=Object.create(De),Q.unsubscribe=()=>this.unsubscribe(),nt={next:De.next&&Te(De.next,Q),error:De.error&&Te(De.error,Q),complete:De.complete&&Te(De.complete,Q)}):nt=De}this.destination=new Ee(nt)}}function Ie(Me){F.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Me):(0,ne.h)(Me)}function Ze(Me,De){const{onStoppedNotification:Pe}=F.v;Pe&&B.z.setTimeout(()=>Pe(Me,De))}const Ye={closed:!0,next:q.Z,error:function he(Me){throw Me},complete:q.Z}},727:(ae,Z,R)=>{R.d(Z,{Lc:()=>re,w0:()=>q,Nn:()=>X});var h=R(576);const F=(0,R(3888).d)(K=>function(j){K(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((G,we)=>`${we+1}) ${G.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ne=R(8737);class q{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:G}=this;if((0,h.m)(G))try{G()}catch(Te){B=Te instanceof F?Te.errors:[Te]}const{_finalizers:we}=this;if(we){this._finalizers=null;for(const Te of we)try{ee(Te)}catch(Ee){B=B??[],Ee instanceof F?B=[...B,...Ee.errors]:B.push(Ee)}}if(B)throw new F(B)}}add(B){var j;if(B&&B!==this)if(this.closed)ee(B);else{if(B instanceof q){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,ne.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,ne.P)(j,B),B instanceof q&&B._removeParent(this)}}q.EMPTY=(()=>{const K=new q;return K.closed=!0,K})();const re=q.EMPTY;function X(K){return K instanceof q||K&&"closed"in K&&(0,h.m)(K.remove)&&(0,h.m)(K.add)&&(0,h.m)(K.unsubscribe)}function ee(K){(0,h.m)(K)?K():K.unsubscribe()}},2416:(ae,Z,R)=>{R.d(Z,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ae,Z,R)=>{R.d(Z,{E:()=>z});const z=new(R(9751).y)(q=>q.complete())},8996:(ae,Z,R)=>{R.d(Z,{D:()=>De});var h=R(8421),z=R(5363),F=R(9468),re=R(9751),ee=R(2202),K=R(576),B=R(9672);function G(Pe,We){if(!Pe)throw new Error("Iterable cannot be null");return new re.y(nt=>{(0,B.f)(nt,We,()=>{const Q=Pe[Symbol.asyncIterator]();(0,B.f)(nt,We,()=>{Q.next().then(Oe=>{Oe.done?nt.complete():nt.next(Oe.value)})},0,!0)})})}var we=R(3670),Te=R(8239),Ee=R(1144),Qe=R(6495),Ie=R(2206),he=R(4532),Ze=R(3260);function De(Pe,We){return We?function Me(Pe,We){if(null!=Pe){if((0,we.c)(Pe))return function ne(Pe,We){return(0,h.Xf)(Pe).pipe((0,F.R)(We),(0,z.Q)(We))}(Pe,We);if((0,Ee.z)(Pe))return function X(Pe,We){return new re.y(nt=>{let Q=0;return We.schedule(function(){Q===Pe.length?nt.complete():(nt.next(Pe[Q++]),nt.closed||this.schedule())})})}(Pe,We);if((0,Te.t)(Pe))return function q(Pe,We){return(0,h.Xf)(Pe).pipe((0,F.R)(We),(0,z.Q)(We))}(Pe,We);if((0,Ie.D)(Pe))return G(Pe,We);if((0,Qe.T)(Pe))return function j(Pe,We){return new re.y(nt=>{let Q;return(0,B.f)(nt,We,()=>{Q=Pe[ee.h](),(0,B.f)(nt,We,()=>{let Oe,se;try{({value:Oe,done:se}=Q.next())}catch(de){return void nt.error(de)}se?nt.complete():nt.next(Oe)},0,!0)}),()=>(0,K.m)(Q?.return)&&Q.return()})}(Pe,We);if((0,Ze.L)(Pe))return function Ye(Pe,We){return G((0,Ze.Q)(Pe),We)}(Pe,We)}throw(0,he.z)(Pe)}(Pe,We):(0,h.Xf)(Pe)}},8421:(ae,Z,R)=>{R.d(Z,{Xf:()=>we});var h=R(655),z=R(1144),F=R(8239),ne=R(9751),q=R(3670),re=R(2206),X=R(4532),ee=R(6495),K=R(3260),B=R(576),j=R(7849),G=R(8822);function we(Me){if(Me instanceof ne.y)return Me;if(null!=Me){if((0,q.c)(Me))return function Te(Me){return new ne.y(De=>{const Pe=Me[G.L]();if((0,B.m)(Pe.subscribe))return Pe.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,z.z)(Me))return function Ee(Me){return new ne.y(De=>{for(let Pe=0;Pe<Me.length&&!De.closed;Pe++)De.next(Me[Pe]);De.complete()})}(Me);if((0,F.t)(Me))return function Qe(Me){return new ne.y(De=>{Me.then(Pe=>{De.closed||(De.next(Pe),De.complete())},Pe=>De.error(Pe)).then(null,j.h)})}(Me);if((0,re.D)(Me))return he(Me);if((0,ee.T)(Me))return function Ie(Me){return new ne.y(De=>{for(const Pe of Me)if(De.next(Pe),De.closed)return;De.complete()})}(Me);if((0,K.L)(Me))return function Ze(Me){return he((0,K.Q)(Me))}(Me)}throw(0,X.z)(Me)}function he(Me){return new ne.y(De=>{(function Ye(Me,De){var Pe,We,nt,Q;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Pe=(0,h.KL)(Me);!(We=yield Pe.next()).done;)if(De.next(We.value),De.closed)return}catch(Oe){nt={error:Oe}}finally{try{We&&!We.done&&(Q=Pe.return)&&(yield Q.call(Pe))}finally{if(nt)throw nt.error}}De.complete()})})(Me,De).catch(Pe=>De.error(Pe))})}},6451:(ae,Z,R)=>{R.d(Z,{T:()=>re});var h=R(8189),z=R(8421),F=R(515),ne=R(7669),q=R(8996);function re(...X){const ee=(0,ne.yG)(X),K=(0,ne._6)(X,1/0),B=X;return B.length?1===B.length?(0,z.Xf)(B[0]):(0,h.J)(K)((0,q.D)(B,ee)):F.E}},9646:(ae,Z,R)=>{R.d(Z,{of:()=>F});var h=R(7669),z=R(8996);function F(...ne){const q=(0,h.yG)(ne);return(0,z.D)(ne,q)}},5403:(ae,Z,R)=>{R.d(Z,{Q:()=>F,x:()=>z});var h=R(930);function z(ne,q,re,X,ee){return new F(ne,q,re,X,ee)}class F extends h.Lv{constructor(q,re,X,ee,K,B){super(q),this.onFinalize=K,this.shouldUnsubscribe=B,this._next=re?function(j){try{re(j)}catch(G){q.error(G)}}:super._next,this._error=ee?function(j){try{ee(j)}catch(G){q.error(G)}finally{this.unsubscribe()}}:super._error,this._complete=X?function(){try{X()}catch(j){q.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var q;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(q=this.onFinalize)||void 0===q||q.call(this))}}}},262:(ae,Z,R)=>{R.d(Z,{K:()=>ne});var h=R(8421),z=R(5403),F=R(4482);function ne(q){return(0,F.e)((re,X)=>{let B,ee=null,K=!1;ee=re.subscribe((0,z.x)(X,void 0,void 0,j=>{B=(0,h.Xf)(q(j,ne(q)(re))),ee?(ee.unsubscribe(),ee=null,B.subscribe(X)):K=!0})),K&&(ee.unsubscribe(),ee=null,B.subscribe(X))})}},4351:(ae,Z,R)=>{R.d(Z,{b:()=>F});var h=R(5577),z=R(576);function F(ne,q){return(0,z.m)(q)?(0,h.z)(ne,q,1):(0,h.z)(ne,1)}},8372:(ae,Z,R)=>{R.d(Z,{b:()=>ne});var h=R(4986),z=R(4482),F=R(5403);function ne(q,re=h.z){return(0,z.e)((X,ee)=>{let K=null,B=null,j=null;const G=()=>{if(K){K.unsubscribe(),K=null;const Te=B;B=null,ee.next(Te)}};function we(){const Te=j+q,Ee=re.now();if(Ee<Te)return K=this.schedule(void 0,Te-Ee),void ee.add(K);G()}X.subscribe((0,F.x)(ee,Te=>{B=Te,j=re.now(),K||(K=re.schedule(we,q),ee.add(K))},()=>{G(),ee.complete()},void 0,()=>{B=K=null}))})}},1884:(ae,Z,R)=>{R.d(Z,{x:()=>ne});var h=R(4671),z=R(4482),F=R(5403);function ne(re,X=h.y){return re=re??q,(0,z.e)((ee,K)=>{let B,j=!0;ee.subscribe((0,F.x)(K,G=>{const we=X(G);(j||!re(B,we))&&(j=!1,B=we,K.next(G))}))})}function q(re,X){return re===X}},9300:(ae,Z,R)=>{R.d(Z,{h:()=>F});var h=R(4482),z=R(5403);function F(ne,q){return(0,h.e)((re,X)=>{let ee=0;re.subscribe((0,z.x)(X,K=>ne.call(q,K,ee++)&&X.next(K)))})}},4004:(ae,Z,R)=>{R.d(Z,{U:()=>F});var h=R(4482),z=R(5403);function F(ne,q){return(0,h.e)((re,X)=>{let ee=0;re.subscribe((0,z.x)(X,K=>{X.next(ne.call(q,K,ee++))}))})}},8189:(ae,Z,R)=>{R.d(Z,{J:()=>F});var h=R(5577),z=R(4671);function F(ne=1/0){return(0,h.z)(z.y,ne)}},5577:(ae,Z,R)=>{R.d(Z,{z:()=>ee});var h=R(4004),z=R(8421),F=R(4482),ne=R(9672),q=R(5403),X=R(576);function ee(K,B,j=1/0){return(0,X.m)(B)?ee((G,we)=>(0,h.U)((Te,Ee)=>B(G,Te,we,Ee))((0,z.Xf)(K(G,we))),j):("number"==typeof B&&(j=B),(0,F.e)((G,we)=>function re(K,B,j,G,we,Te,Ee,Qe){const Ie=[];let he=0,Ze=0,Ye=!1;const Me=()=>{Ye&&!Ie.length&&!he&&B.complete()},De=We=>he<G?Pe(We):Ie.push(We),Pe=We=>{Te&&B.next(We),he++;let nt=!1;(0,z.Xf)(j(We,Ze++)).subscribe((0,q.x)(B,Q=>{we?.(Q),Te?De(Q):B.next(Q)},()=>{nt=!0},void 0,()=>{if(nt)try{for(he--;Ie.length&&he<G;){const Q=Ie.shift();Ee?(0,ne.f)(B,Ee,()=>Pe(Q)):Pe(Q)}Me()}catch(Q){B.error(Q)}}))};return K.subscribe((0,q.x)(B,De,()=>{Ye=!0,Me()})),()=>{Qe?.()}}(G,we,K,j)))}},5363:(ae,Z,R)=>{R.d(Z,{Q:()=>ne});var h=R(9672),z=R(4482),F=R(5403);function ne(q,re=0){return(0,z.e)((X,ee)=>{X.subscribe((0,F.x)(ee,K=>(0,h.f)(ee,q,()=>ee.next(K),re),()=>(0,h.f)(ee,q,()=>ee.complete(),re),K=>(0,h.f)(ee,q,()=>ee.error(K),re)))})}},5026:(ae,Z,R)=>{R.d(Z,{R:()=>ne});var h=R(4482),z=R(5403);function F(q,re,X,ee,K){return(B,j)=>{let G=X,we=re,Te=0;B.subscribe((0,z.x)(j,Ee=>{const Qe=Te++;we=G?q(we,Ee,Qe):(G=!0,Ee),ee&&j.next(we)},K&&(()=>{G&&j.next(we),j.complete()})))}}function ne(q,re){return(0,h.e)(F(q,re,arguments.length>=2,!0))}},3099:(ae,Z,R)=>{R.d(Z,{B:()=>q});var h=R(8421),z=R(7579),F=R(930),ne=R(4482);function q(X={}){const{connector:ee=(()=>new z.x),resetOnError:K=!0,resetOnComplete:B=!0,resetOnRefCountZero:j=!0}=X;return G=>{let we,Te,Ee,Qe=0,Ie=!1,he=!1;const Ze=()=>{Te?.unsubscribe(),Te=void 0},Ye=()=>{Ze(),we=Ee=void 0,Ie=he=!1},Me=()=>{const De=we;Ye(),De?.unsubscribe()};return(0,ne.e)((De,Pe)=>{Qe++,!he&&!Ie&&Ze();const We=Ee=Ee??ee();Pe.add(()=>{Qe--,0===Qe&&!he&&!Ie&&(Te=re(Me,j))}),We.subscribe(Pe),!we&&Qe>0&&(we=new F.Hp({next:nt=>We.next(nt),error:nt=>{he=!0,Ze(),Te=re(Ye,K,nt),We.error(nt)},complete:()=>{Ie=!0,Ze(),Te=re(Ye,B),We.complete()}}),(0,h.Xf)(De).subscribe(we))})(G)}}function re(X,ee,...K){if(!0===ee)return void X();if(!1===ee)return;const B=new F.Hp({next:()=>{B.unsubscribe(),X()}});return ee(...K).subscribe(B)}},5684:(ae,Z,R)=>{R.d(Z,{T:()=>z});var h=R(9300);function z(F){return(0,h.h)((ne,q)=>F<=q)}},9468:(ae,Z,R)=>{R.d(Z,{R:()=>z});var h=R(4482);function z(F,ne=0){return(0,h.e)((q,re)=>{re.add(F.schedule(()=>q.subscribe(re),ne))})}},3900:(ae,Z,R)=>{R.d(Z,{w:()=>ne});var h=R(8421),z=R(4482),F=R(5403);function ne(q,re){return(0,z.e)((X,ee)=>{let K=null,B=0,j=!1;const G=()=>j&&!K&&ee.complete();X.subscribe((0,F.x)(ee,we=>{K?.unsubscribe();let Te=0;const Ee=B++;(0,h.Xf)(q(we,Ee)).subscribe(K=(0,F.x)(ee,Qe=>ee.next(re?re(we,Qe,Ee,Te++):Qe),()=>{K=null,G()}))},()=>{j=!0,G()}))})}},5698:(ae,Z,R)=>{R.d(Z,{q:()=>ne});var h=R(515),z=R(4482),F=R(5403);function ne(q){return q<=0?()=>h.E:(0,z.e)((re,X)=>{let ee=0;re.subscribe((0,F.x)(X,K=>{++ee<=q&&(X.next(K),q<=ee&&X.complete())}))})}},2722:(ae,Z,R)=>{R.d(Z,{R:()=>q});var h=R(4482),z=R(5403),F=R(8421),ne=R(5032);function q(re){return(0,h.e)((X,ee)=>{(0,F.Xf)(re).subscribe((0,z.x)(ee,()=>ee.complete(),ne.Z)),!ee.closed&&X.subscribe(ee)})}},8505:(ae,Z,R)=>{R.d(Z,{b:()=>q});var h=R(576),z=R(4482),F=R(5403),ne=R(4671);function q(re,X,ee){const K=(0,h.m)(re)||X||ee?{next:re,error:X,complete:ee}:re;return K?(0,z.e)((B,j)=>{var G;null===(G=K.subscribe)||void 0===G||G.call(K);let we=!0;B.subscribe((0,F.x)(j,Te=>{var Ee;null===(Ee=K.next)||void 0===Ee||Ee.call(K,Te),j.next(Te)},()=>{var Te;we=!1,null===(Te=K.complete)||void 0===Te||Te.call(K),j.complete()},Te=>{var Ee;we=!1,null===(Ee=K.error)||void 0===Ee||Ee.call(K,Te),j.error(Te)},()=>{var Te,Ee;we&&(null===(Te=K.unsubscribe)||void 0===Te||Te.call(K)),null===(Ee=K.finalize)||void 0===Ee||Ee.call(K)}))}):ne.y}},1749:(ae,Z,R)=>{R.d(Z,{V:()=>K});var h=R(4986),F=R(4482),ne=R(8421),q=R(3888),re=R(5403),X=R(9672);const ee=(0,q.d)(j=>function(we=null){j(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=we});function K(j,G){const{first:we,each:Te,with:Ee=B,scheduler:Qe=G??h.z,meta:Ie=null}=function z(j){return j instanceof Date&&!isNaN(j)}(j)?{first:j}:"number"==typeof j?{each:j}:j;if(null==we&&null==Te)throw new TypeError("No timeout provided.");return(0,F.e)((he,Ze)=>{let Ye,Me,De=null,Pe=0;const We=nt=>{Me=(0,X.f)(Ze,Qe,()=>{try{Ye.unsubscribe(),(0,ne.Xf)(Ee({meta:Ie,lastValue:De,seen:Pe})).subscribe(Ze)}catch(Q){Ze.error(Q)}},nt)};Ye=he.subscribe((0,re.x)(Ze,nt=>{Me?.unsubscribe(),Pe++,Ze.next(De=nt),Te>0&&We(Te)},void 0,void 0,()=>{Me?.closed||Me?.unsubscribe(),De=null})),!Pe&&We(null!=we?"number"==typeof we?we:+we-Qe.now():Te)})}function B(j){throw new ee(j)}},1365:(ae,Z,R)=>{R.d(Z,{M:()=>X});var h=R(4482),z=R(5403),F=R(8421),ne=R(4671),q=R(5032),re=R(7669);function X(...ee){const K=(0,re.jO)(ee);return(0,h.e)((B,j)=>{const G=ee.length,we=new Array(G);let Te=ee.map(()=>!1),Ee=!1;for(let Qe=0;Qe<G;Qe++)(0,F.Xf)(ee[Qe]).subscribe((0,z.x)(j,Ie=>{we[Qe]=Ie,!Ee&&!Te[Qe]&&(Te[Qe]=!0,(Ee=Te.every(ne.y))&&(Te=null))},q.Z));B.subscribe((0,z.x)(j,Qe=>{if(Ee){const Ie=[Qe,...we];j.next(K?K(...Ie):Ie)}}))})}},4408:(ae,Z,R)=>{R.d(Z,{o:()=>q});var h=R(727);class z extends h.w0{constructor(X,ee){super()}schedule(X,ee=0){return this}}const F={setInterval(re,X,...ee){const{delegate:K}=F;return K?.setInterval?K.setInterval(re,X,...ee):setInterval(re,X,...ee)},clearInterval(re){const{delegate:X}=F;return(X?.clearInterval||clearInterval)(re)},delegate:void 0};var ne=R(8737);class q extends z{constructor(X,ee){super(X,ee),this.scheduler=X,this.work=ee,this.pending=!1}schedule(X,ee=0){var K;if(this.closed)return this;this.state=X;const B=this.id,j=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(j,B,ee)),this.pending=!0,this.delay=ee,this.id=null!==(K=this.id)&&void 0!==K?K:this.requestAsyncId(j,this.id,ee),this}requestAsyncId(X,ee,K=0){return F.setInterval(X.flush.bind(X,this),K)}recycleAsyncId(X,ee,K=0){if(null!=K&&this.delay===K&&!1===this.pending)return ee;null!=ee&&F.clearInterval(ee)}execute(X,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const K=this._execute(X,ee);if(K)return K;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(X,ee){let B,K=!1;try{this.work(X)}catch(j){K=!0,B=j||new Error("Scheduled action threw falsy error")}if(K)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:X,scheduler:ee}=this,{actions:K}=ee;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(K,this),null!=X&&(this.id=this.recycleAsyncId(ee,X,null)),this.delay=null,super.unsubscribe()}}}},7565:(ae,Z,R)=>{R.d(Z,{v:()=>F});var h=R(6063);class z{constructor(q,re=z.now){this.schedulerActionCtor=q,this.now=re}schedule(q,re=0,X){return new this.schedulerActionCtor(this,q).schedule(X,re)}}z.now=h.l.now;class F extends z{constructor(q,re=z.now){super(q,re),this.actions=[],this._active=!1}flush(q){const{actions:re}=this;if(this._active)return void re.push(q);let X;this._active=!0;do{if(X=q.execute(q.state,q.delay))break}while(q=re.shift());if(this._active=!1,X){for(;q=re.shift();)q.unsubscribe();throw X}}}},4986:(ae,Z,R)=>{R.d(Z,{z:()=>F});var h=R(4408);const F=new(R(7565).v)(h.o)},6063:(ae,Z,R)=>{R.d(Z,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},233:(ae,Z,R)=>{R.d(Z,{N:()=>q});var h=R(4408),F=R(7565);const q=new class ne extends F.v{}(class z extends h.o{constructor(ee,K){super(ee,K),this.scheduler=ee,this.work=K}schedule(ee,K=0){return K>0?super.schedule(ee,K):(this.delay=K,this.state=ee,this.scheduler.flush(this),this)}execute(ee,K){return K>0||this.closed?super.execute(ee,K):this._execute(ee,K)}requestAsyncId(ee,K,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(ee,K,B):(ee.flush(this),0)}})},3410:(ae,Z,R)=>{R.d(Z,{z:()=>h});const h={setTimeout(z,F,...ne){const{delegate:q}=h;return q?.setTimeout?q.setTimeout(z,F,...ne):setTimeout(z,F,...ne)},clearTimeout(z){const{delegate:F}=h;return(F?.clearTimeout||clearTimeout)(z)},delegate:void 0}},2202:(ae,Z,R)=>{R.d(Z,{h:()=>z});const z=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ae,Z,R)=>{R.d(Z,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ae,Z,R)=>{R.d(Z,{_6:()=>re,jO:()=>ne,yG:()=>q});var h=R(576);function F(X){return X[X.length-1]}function ne(X){return(0,h.m)(F(X))?X.pop():void 0}function q(X){return function z(X){return X&&(0,h.m)(X.schedule)}(F(X))?X.pop():void 0}function re(X,ee){return"number"==typeof F(X)?X.pop():ee}},8737:(ae,Z,R)=>{function h(z,F){if(z){const ne=z.indexOf(F);0<=ne&&z.splice(ne,1)}}R.d(Z,{P:()=>h})},3888:(ae,Z,R)=>{function h(z){const ne=z(q=>{Error.call(q),q.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}R.d(Z,{d:()=>h})},2806:(ae,Z,R)=>{R.d(Z,{O:()=>ne,x:()=>F});var h=R(2416);let z=null;function F(q){if(h.v.useDeprecatedSynchronousErrorHandling){const re=!z;if(re&&(z={errorThrown:!1,error:null}),q(),re){const{errorThrown:X,error:ee}=z;if(z=null,X)throw ee}}else q()}function ne(q){h.v.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=q)}},9672:(ae,Z,R)=>{function h(z,F,ne,q=0,re=!1){const X=F.schedule(function(){ne(),re?z.add(this.schedule(null,q)):this.unsubscribe()},q);if(z.add(X),!re)return X}R.d(Z,{f:()=>h})},4671:(ae,Z,R)=>{function h(z){return z}R.d(Z,{y:()=>h})},1144:(ae,Z,R)=>{R.d(Z,{z:()=>h});const h=z=>z&&"number"==typeof z.length&&"function"!=typeof z},2206:(ae,Z,R)=>{R.d(Z,{D:()=>z});var h=R(576);function z(F){return Symbol.asyncIterator&&(0,h.m)(F?.[Symbol.asyncIterator])}},576:(ae,Z,R)=>{function h(z){return"function"==typeof z}R.d(Z,{m:()=>h})},3670:(ae,Z,R)=>{R.d(Z,{c:()=>F});var h=R(8822),z=R(576);function F(ne){return(0,z.m)(ne[h.L])}},6495:(ae,Z,R)=>{R.d(Z,{T:()=>F});var h=R(2202),z=R(576);function F(ne){return(0,z.m)(ne?.[h.h])}},8239:(ae,Z,R)=>{R.d(Z,{t:()=>z});var h=R(576);function z(F){return(0,h.m)(F?.then)}},3260:(ae,Z,R)=>{R.d(Z,{L:()=>ne,Q:()=>F});var h=R(655),z=R(576);function F(q){return(0,h.FC)(this,arguments,function*(){const X=q.getReader();try{for(;;){const{value:ee,done:K}=yield(0,h.qq)(X.read());if(K)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ee)}}finally{X.releaseLock()}})}function ne(q){return(0,z.m)(q?.getReader)}},4482:(ae,Z,R)=>{R.d(Z,{A:()=>z,e:()=>F});var h=R(576);function z(ne){return(0,h.m)(ne?.lift)}function F(ne){return q=>{if(z(q))return q.lift(function(re){try{return ne(re,this)}catch(X){this.error(X)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ae,Z,R)=>{function h(){}R.d(Z,{Z:()=>h})},9635:(ae,Z,R)=>{R.d(Z,{U:()=>F,z:()=>z});var h=R(4671);function z(...ne){return F(ne)}function F(ne){return 0===ne.length?h.y:1===ne.length?ne[0]:function(re){return ne.reduce((X,ee)=>ee(X),re)}}},7849:(ae,Z,R)=>{R.d(Z,{h:()=>F});var h=R(2416),z=R(3410);function F(ne){z.z.setTimeout(()=>{const{onUnhandledError:q}=h.v;if(!q)throw ne;q(ne)})}},4532:(ae,Z,R)=>{function h(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(Z,{z:()=>h})},655:(ae,Z,R)=>{R.d(Z,{FC:()=>he,Jh:()=>K,KL:()=>Ye,ZT:()=>z,_T:()=>ne,ev:()=>Qe,mG:()=>ee,pi:()=>F,qq:()=>Ie});var h=function(se,de){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,ye){ve.__proto__=ye}||function(ve,ye){for(var Ke in ye)Object.prototype.hasOwnProperty.call(ye,Ke)&&(ve[Ke]=ye[Ke])})(se,de)};function z(se,de){if("function"!=typeof de&&null!==de)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");function ve(){this.constructor=se}h(se,de),se.prototype=null===de?Object.create(de):(ve.prototype=de.prototype,new ve)}var F=function(){return F=Object.assign||function(de){for(var ve,ye=1,Ke=arguments.length;ye<Ke;ye++)for(var ze in ve=arguments[ye])Object.prototype.hasOwnProperty.call(ve,ze)&&(de[ze]=ve[ze]);return de},F.apply(this,arguments)};function ne(se,de){var ve={};for(var ye in se)Object.prototype.hasOwnProperty.call(se,ye)&&de.indexOf(ye)<0&&(ve[ye]=se[ye]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var Ke=0;for(ye=Object.getOwnPropertySymbols(se);Ke<ye.length;Ke++)de.indexOf(ye[Ke])<0&&Object.prototype.propertyIsEnumerable.call(se,ye[Ke])&&(ve[ye[Ke]]=se[ye[Ke]])}return ve}function ee(se,de,ve,ye){return new(ve||(ve=Promise))(function(ze,St){function on(wn){try{dt(ye.next(wn))}catch(xn){St(xn)}}function Kt(wn){try{dt(ye.throw(wn))}catch(xn){St(xn)}}function dt(wn){wn.done?ze(wn.value):function Ke(ze){return ze instanceof ve?ze:new ve(function(St){St(ze)})}(wn.value).then(on,Kt)}dt((ye=ye.apply(se,de||[])).next())})}function K(se,de){var ye,Ke,ze,St,ve={label:0,sent:function(){if(1&ze[0])throw ze[1];return ze[1]},trys:[],ops:[]};return St={next:on(0),throw:on(1),return:on(2)},"function"==typeof Symbol&&(St[Symbol.iterator]=function(){return this}),St;function on(dt){return function(wn){return function Kt(dt){if(ye)throw new TypeError("Generator is already executing.");for(;St&&(St=0,dt[0]&&(ve=0)),ve;)try{if(ye=1,Ke&&(ze=2&dt[0]?Ke.return:dt[0]?Ke.throw||((ze=Ke.return)&&ze.call(Ke),0):Ke.next)&&!(ze=ze.call(Ke,dt[1])).done)return ze;switch(Ke=0,ze&&(dt=[2&dt[0],ze.value]),dt[0]){case 0:case 1:ze=dt;break;case 4:return ve.label++,{value:dt[1],done:!1};case 5:ve.label++,Ke=dt[1],dt=[0];continue;case 7:dt=ve.ops.pop(),ve.trys.pop();continue;default:if(!(ze=(ze=ve.trys).length>0&&ze[ze.length-1])&&(6===dt[0]||2===dt[0])){ve=0;continue}if(3===dt[0]&&(!ze||dt[1]>ze[0]&&dt[1]<ze[3])){ve.label=dt[1];break}if(6===dt[0]&&ve.label<ze[1]){ve.label=ze[1],ze=dt;break}if(ze&&ve.label<ze[2]){ve.label=ze[2],ve.ops.push(dt);break}ze[2]&&ve.ops.pop(),ve.trys.pop();continue}dt=de.call(se,ve)}catch(wn){dt=[6,wn],Ke=0}finally{ye=ze=0}if(5&dt[0])throw dt[1];return{value:dt[0]?dt[1]:void 0,done:!0}}([dt,wn])}}}function Qe(se,de,ve){if(ve||2===arguments.length)for(var ze,ye=0,Ke=de.length;ye<Ke;ye++)(ze||!(ye in de))&&(ze||(ze=Array.prototype.slice.call(de,0,ye)),ze[ye]=de[ye]);return se.concat(ze||Array.prototype.slice.call(de))}function Ie(se){return this instanceof Ie?(this.v=se,this):new Ie(se)}function he(se,de,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,ye=ve.apply(se,de||[]),ze=[];return Ke={},St("next"),St("throw"),St("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke;function St(an){ye[an]&&(Ke[an]=function(tn){return new Promise(function(Lr,Gt){ze.push([an,tn,Lr,Gt])>1||on(an,tn)})})}function on(an,tn){try{!function Kt(an){an.value instanceof Ie?Promise.resolve(an.value.v).then(dt,wn):xn(ze[0][2],an)}(ye[an](tn))}catch(Lr){xn(ze[0][3],Lr)}}function dt(an){on("next",an)}function wn(an){on("throw",an)}function xn(an,tn){an(tn),ze.shift(),ze.length&&on(ze[0][0],ze[0][1])}}function Ye(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,de=se[Symbol.asyncIterator];return de?de.call(se):(se=function G(se){var de="function"==typeof Symbol&&Symbol.iterator,ve=de&&se[de],ye=0;if(ve)return ve.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&ye>=se.length&&(se=void 0),{value:se&&se[ye++],done:!se}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),ve={},ye("next"),ye("throw"),ye("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function ye(ze){ve[ze]=se[ze]&&function(St){return new Promise(function(on,Kt){!function Ke(ze,St,on,Kt){Promise.resolve(Kt).then(function(dt){ze({value:dt,done:on})},St)}(on,Kt,(St=se[ze](St)).done,St.value)})}}}},4650:(ae,Z,R)=>{R.d(Z,{$8M:()=>Oc,$Z:()=>h0,AFp:()=>ew,ALo:()=>Ai,AaK:()=>ee,BQk:()=>gs,CHM:()=>fc,CRH:()=>JD,CZH:()=>xd,CqO:()=>my,D6c:()=>UL,EJc:()=>zO,EpF:()=>U0,F$t:()=>$0,F4k:()=>BC,FYo:()=>MI,FiY:()=>or,G48:()=>$T,GfV:()=>qm,Gpc:()=>j,Hsn:()=>Yp,JOm:()=>Ao,KtG:()=>pc,LFG:()=>$,LSH:()=>jv,Lbi:()=>gf,Lck:()=>Id,MMx:()=>cf,NdJ:()=>Za,O4$:()=>Rl,OlP:()=>jn,Oqu:()=>wd,PXZ:()=>AT,PiD:()=>$n,Q6J:()=>F0,QGY:()=>gy,QP$:()=>dn,Qsj:()=>Mx,R0b:()=>Us,RDi:()=>E,Rgc:()=>df,SBq:()=>Hm,Sil:()=>QO,Suo:()=>LE,TTD:()=>Gs,TgZ:()=>vd,VKq:()=>bE,X6Q:()=>jT,XFs:()=>ht,Xpm:()=>Ve,Xts:()=>Gv,Y36:()=>dd,YKP:()=>By,YNc:()=>fe,Yjl:()=>ke,Yz7:()=>tn,Z0I:()=>li,ZZ4:()=>wg,_Bn:()=>pE,_UZ:()=>qh,_Vd:()=>ud,_c5:()=>_M,_uU:()=>Cy,aQg:()=>lw,c2e:()=>WO,cJS:()=>Gt,cg1:()=>sg,dDg:()=>eM,dqk:()=>un,eFA:()=>MT,ekj:()=>Z0,eoX:()=>DT,f3M:()=>me,g9A:()=>gT,h0i:()=>uf,hGG:()=>KT,hij:()=>Dy,iGM:()=>FE,ifc:()=>Ct,ip1:()=>XE,jDz:()=>yE,kL8:()=>el,kcU:()=>Yd,lG2:()=>oe,lcZ:()=>GD,lqb:()=>od,lri:()=>iw,n5z:()=>Qs,oAB:()=>zt,oxw:()=>$C,q4F:()=>Wm,qLn:()=>Sp,qOj:()=>O0,qZA:()=>Gh,rWj:()=>sw,sBO:()=>iM,sIi:()=>Hp,s_b:()=>hf,soG:()=>nw,tBr:()=>ft,tb:()=>mT,tp0:()=>Ln,uIk:()=>PC,vHH:()=>Ee,vpe:()=>Zu,wAp:()=>Nt,xp6:()=>s0,ynx:()=>L0,z2F:()=>a_,zSh:()=>Wv,zs3:()=>ld});var h=R(7579),z=R(727),F=R(9751),ne=R(6451),q=R(3099);function re(a){for(let o in a)if(a[o]===re)return o;throw Error("Could not find renamed property on target object.")}function X(a,o){for(const c in o)o.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=o[c])}function ee(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ee).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const o=a.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function K(a,o){return null==a||""===a?null===o?"":o:null==o||""===o?a:a+" "+o}const B=re({__forward_ref__:re});function j(a){return a.__forward_ref__=j,a.toString=function(){return ee(this())},a}function G(a){return we(a)?a():a}function we(a){return"function"==typeof a&&a.hasOwnProperty(B)&&a.__forward_ref__===j}class Ee extends Error{constructor(o,c){super(function Qe(a,o){return`NG0${Math.abs(a)}${o?": "+o.trim():""}`}(o,c)),this.code=o}}function Ie(a){return"string"==typeof a?a:null==a?"":String(a)}function De(a,o){throw new Ee(-201,!1)}function Kt(a,o){null==a&&function dt(a,o,c,d){throw new Error(`ASSERTION ERROR: ${a}`+(null==d?"":` [Expected=> ${c} ${d} ${o} <=Actual]`))}(o,a,null,"!=")}function tn(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Gt(a){return{providers:a.providers||[],imports:a.imports||[]}}function bn(a){return Vr(a,Pi)||Vr(a,di)}function li(a){return null!==bn(a)}function Vr(a,o){return a.hasOwnProperty(o)?a[o]:null}function Wi(a){return a&&(a.hasOwnProperty(Br)||a.hasOwnProperty(po))?a[Br]:null}const Pi=re({\u0275prov:re}),Br=re({\u0275inj:re}),di=re({ngInjectableDef:re}),po=re({ngInjectorDef:re});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let vr;function qn(a){const o=vr;return vr=a,o}function Ci(a,o,c){const d=bn(a);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&ht.Optional?null:void 0!==o?o:void De(ee(a))}function zn(a){return{toString:a}.toString()}var Kn=(()=>((Kn=Kn||{})[Kn.OnPush=0]="OnPush",Kn[Kn.Default=1]="Default",Kn))(),Ct=(()=>{return(a=Ct||(Ct={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Ct;var a})();const un=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jr={},Lt=[],zi=re({\u0275cmp:re}),ln=re({\u0275dir:re}),Ni=re({\u0275pipe:re}),vn=re({\u0275mod:re}),lr=re({\u0275fac:re}),$r=re({__NG_ELEMENT_ID__:re});let bt=0;function Ve(a){return zn(()=>{const c=!0===a.standalone,d={},f={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Kn.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||Lt,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Ct.Emulated,id:"c"+bt++,styles:a.styles||Lt,_:null,setInput:null,schemas:a.schemas||null,tView:null},m=a.dependencies,v=a.features;return f.inputs=W(a.inputs,d),f.outputs=W(a.outputs),v&&v.forEach(C=>C(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(Ut).filter(jt):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(Dt).filter(jt):null,f})}function Ut(a){return ce(a)||at(a)}function jt(a){return null!==a}function zt(a){return zn(()=>({type:a.type,bootstrap:a.bootstrap||Lt,declarations:a.declarations||Lt,imports:a.imports||Lt,exports:a.exports||Lt,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function W(a,o){if(null==a)return jr;const c={};for(const d in a)if(a.hasOwnProperty(d)){let f=a[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=d,o&&(o[f]=m)}return c}const oe=Ve;function ke(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function ce(a){return a[zi]||null}function at(a){return a[ln]||null}function Dt(a){return a[Ni]||null}function dn(a){const o=ce(a)||at(a)||Dt(a);return null!==o&&o.standalone}function On(a,o){const c=a[vn]||null;if(!c&&!0===o)throw new Error(`Type ${ee(a)} does not have '\u0275mod' property.`);return c}function fr(a){return Array.isArray(a)&&"object"==typeof a[1]}function Sr(a){return Array.isArray(a)&&!0===a[1]}function Bo(a){return 0!=(8&a.flags)}function jo(a){return 2==(2&a.flags)}function hu(a){return 1==(1&a.flags)}function Hr(a){return null!==a.template}function H(a){return 0!=(256&a[2])}function Ss(a,o){return a.hasOwnProperty(lr)?a[lr]:null}class Hs{constructor(o,c,d){this.previousValue=o,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function Gs(){return $o}function $o(a){return a.type.prototype.ngOnChanges&&(a.setInput=ic),pu}function pu(){const a=Jf(this),o=a?.current;if(o){const c=a.previous;if(c===jr)a.previous=o;else for(let d in o)c[d]=o[d];a.current=null,this.ngOnChanges(o)}}function ic(a,o,c,d){const f=Jf(a)||function Ho(a,o){return a[_l]=o}(a,{previous:jr,current:null}),m=f.current||(f.current={}),v=f.previous,C=this.declaredInputs[c],D=v[C];m[C]=new Hs(D&&D.currentValue,o,v===jr),a[d]=o}Gs.ngInherit=!0;const _l="__ngSimpleChanges__";function Jf(a){return a[_l]||null}function nr(a){for(;Array.isArray(a);)a=a[0];return a}function Ji(a,o){return nr(o[a])}function pi(a,o){return nr(o[a.index])}function Go(a,o){return a.data[o]}function mn(a,o){const c=o[a];return fr(c)?c:c[0]}function qo(a){return 64==(64&a[2])}function ds(a,o){return null==o?null:a[o]}function cc(a){a[18]=0}function Jn(a,o){a[5]+=o;let c=a,d=a[3];for(;null!==d&&(1===o&&1===c[5]||-1===o&&0===c[5]);)d[5]+=o,c=d,d=d[3]}const Ht={lFrame:Al(null),bindingsEnabled:!0};function zs(){return Ht.bindingsEnabled}function Ue(){return Ht.lFrame.lView}function nn(){return Ht.lFrame.tView}function fc(a){return Ht.lFrame.contextLView=a,a[8]}function pc(a){return Ht.lFrame.contextLView=null,a}function rr(){let a=gc();for(;null!==a&&64===a.type;)a=a.parent;return a}function gc(){return Ht.lFrame.currentTNode}function Xi(a,o){const c=Ht.lFrame;c.currentTNode=a,c.isParent=o}function mu(){return Ht.lFrame.isParent}function yu(){Ht.lFrame.isParent=!1}function ir(){const a=Ht.lFrame;let o=a.bindingRootIndex;return-1===o&&(o=a.bindingRootIndex=a.tView.bindingStartIndex),o}function Wo(){return Ht.lFrame.bindingIndex++}function ym(a,o){const c=Ht.lFrame;c.bindingIndex=c.bindingRootIndex=a,mc(o)}function mc(a){Ht.lFrame.currentDirectiveIndex=a}function Dl(){return Ht.lFrame.currentQueryIndex}function wu(a){Ht.lFrame.currentQueryIndex=a}function Tl(a){const o=a[1];return 2===o.type?o.declTNode:1===o.type?a[6]:null}function yc(a,o,c){if(c&ht.SkipSelf){let f=o,m=a;for(;!(f=f.parent,null!==f||c&ht.Host||(f=Tl(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;o=f,a=m}const d=Ht.lFrame=Sl();return d.currentTNode=o,d.lView=a,!0}function _c(a){const o=Sl(),c=a[1];Ht.lFrame=o,o.currentTNode=c.firstChild,o.lView=a,o.tView=c,o.contextLView=a,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function Sl(){const a=Ht.lFrame,o=null===a?null:a.child;return null===o?Al(a):o}function Al(a){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=o),o}function xl(){const a=Ht.lFrame;return Ht.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Qd=xl;function zo(){const a=xl();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Ar(){return Ht.lFrame.selectedIndex}function Li(a){Ht.lFrame.selectedIndex=a}function Bn(){const a=Ht.lFrame;return Go(a.tView,a.selectedIndex)}function Rl(){Ht.lFrame.currentNamespace="svg"}function Yd(){!function Ml(){Ht.lFrame.currentNamespace=null}()}function wc(a,o){for(let c=o.directiveStart,d=o.directiveEnd;c<d;c++){const m=a.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:x,ngOnDestroy:N}=m;v&&(a.contentHooks||(a.contentHooks=[])).push(-c,v),C&&((a.contentHooks||(a.contentHooks=[])).push(c,C),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(c,C)),D&&(a.viewHooks||(a.viewHooks=[])).push(-c,D),x&&((a.viewHooks||(a.viewHooks=[])).push(c,x),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(c,x)),null!=N&&(a.destroyHooks||(a.destroyHooks=[])).push(c,N)}}function Zo(a,o,c){Ta(a,o,3,c)}function Da(a,o,c,d){(3&a[2])===c&&Ta(a,o,c,d)}function Xd(a,o){let c=a[2];(3&c)===o&&(c&=2047,c+=1,a[2]=c)}function Ta(a,o,c,d){const m=d??-1,v=o.length-1;let C=0;for(let D=void 0!==d?65535&a[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(C=o[D],null!=d&&C>=d)break}else o[D]<0&&(a[18]+=65536),(C<m||-1==m)&&(eh(a,c,o,D),a[18]=(4294901760&a[18])+D+2),D++}function eh(a,o,c,d){const f=c[d]<0,m=c[d+1],C=a[f?-c[d]:c[d]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===o){a[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class Eo{constructor(o,c,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Aa(a,o,c){let d=0;for(;d<c.length;){const f=c[d];if("number"==typeof f){if(0!==f)break;d++;const m=c[d++],v=c[d++],C=c[d++];a.setAttribute(o,v,C,m)}else{const m=f,v=c[++d];Dc(m)?a.setProperty(o,m,v):a.setAttribute(o,m,v),d++}}return d}function Yo(a){return 3===a||4===a||6===a}function Dc(a){return 64===a.charCodeAt(0)}function bu(a,o){if(null!==o&&0!==o.length)if(null===a||0===a.length)a=o.slice();else{let c=-1;for(let d=0;d<o.length;d++){const f=o[d];"number"==typeof f?c=f:0===c||nh(a,c,f,null,-1===c||2===c?o[++d]:null)}}return a}function nh(a,o,c,d,f){let m=0,v=a.length;if(-1===o)v=-1;else for(;m<a.length;){const C=a[m++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=m-1;break}}}for(;m<a.length;){const C=a[m];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==f&&(a[m+1]=f));if(d===a[m+1])return void(a[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==v&&(a.splice(v,0,o),m=v+1),a.splice(m++,0,c),null!==d&&a.splice(m++,0,d),null!==f&&a.splice(m++,0,f)}function rh(a){return-1!==a}function Gr(a){return 32767&a}function Cu(a,o){let c=function Iu(a){return a>>16}(a),d=o;for(;c>0;)d=d[15],c--;return d}let xs=!0;function Du(a){const o=xs;return xs=a,o}let gr=0;const hs={};function Jo(a,o){const c=Sc(a,o);if(-1!==c)return c;const d=o[1];d.firstCreatePass&&(a.injectorIndex=o.length,Su(d.data,a),Su(o,null),Su(d.blueprint,null));const f=Ac(a,o),m=a.injectorIndex;if(rh(f)){const v=Gr(f),C=Cu(f,o),D=C[1].data;for(let x=0;x<8;x++)o[m+x]=C[v+x]|D[v+x]}return o[m+8]=f,m}function Su(a,o){a.push(0,0,0,0,0,0,0,0,o)}function Sc(a,o){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===o[a.injectorIndex+8]?-1:a.injectorIndex}function Ac(a,o){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let c=0,d=null,f=o;for(;null!==f;){if(d=Oa(f),null===d)return-1;if(c++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function wo(a,o,c){!function Tc(a,o,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty($r)&&(d=c[$r]),null==d&&(d=c[$r]=gr++);const f=255&d;o.data[a+(f>>5)]|=1<<f}(a,o,c)}function bo(a,o,c){if(c&ht.Optional||void 0!==a)return a;De()}function Nl(a,o,c,d){if(c&ht.Optional&&void 0===d&&(d=null),0==(c&(ht.Self|ht.Host))){const f=a[9],m=qn(void 0);try{return f?f.get(o,d,c&ht.Optional):Ci(o,d,c&ht.Optional)}finally{qn(m)}}return bo(d,0,c)}function Xo(a,o,c,d=ht.Default,f){if(null!==a){if(1024&o[2]){const v=function Ra(a,o,c,d,f){let m=a,v=o;for(;null!==m&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=Au(m,v,c,d|ht.Self,hs);if(C!==hs)return C;let D=m.parent;if(!D){const x=v[21];if(x){const N=x.get(c,hs,d);if(N!==hs)return N}D=Oa(v),v=v[15]}m=D}return f}(a,o,c,d,hs);if(v!==hs)return v}const m=Au(a,o,c,d,hs);if(m!==hs)return m}return Nl(o,c,d,f)}function Au(a,o,c,d,f){const m=function kl(a){if("string"==typeof a)return a.charCodeAt(0)||0;const o=a.hasOwnProperty($r)?a[$r]:void 0;return"number"==typeof o?o>=0?255&o:Fl:o}(c);if("function"==typeof m){if(!yc(o,a,d))return d&ht.Host?bo(f,0,d):Nl(o,c,d,f);try{const v=m(d);if(null!=v||d&ht.Optional)return v;De()}finally{Qd()}}else if("number"==typeof m){let v=null,C=Sc(a,o),D=-1,x=d&ht.Host?o[16][6]:null;for((-1===C||d&ht.SkipSelf)&&(D=-1===C?Ac(a,o):o[C+8],-1!==D&&xu(d,!1)?(v=o[1],C=Gr(D),o=Cu(D,o)):C=-1);-1!==C;){const N=o[1];if(xc(m,C,N.data)){const V=oh(C,o,c,v,d,x);if(V!==hs)return V}D=o[C+8],-1!==D&&xu(d,o[1].data[C+8]===x)&&xc(m,C,o)?(v=N,C=Gr(D),o=Cu(D,o)):C=-1}}return f}function oh(a,o,c,d,f,m){const v=o[1],C=v.data[a+8],N=xa(C,v,c,null==d?jo(C)&&xs:d!=v&&0!=(3&C.type),f&ht.Host&&m===C);return null!==N?Zs(o,v,N,C):hs}function xa(a,o,c,d,f){const m=a.providerIndexes,v=o.data,C=1048575&m,D=a.directiveStart,N=m>>20,te=f?C+N:a.directiveEnd;for(let pe=d?C:C+N;pe<te;pe++){const Fe=v[pe];if(pe<D&&c===Fe||pe>=D&&Fe.type===c)return pe}if(f){const pe=v[D];if(pe&&Hr(pe)&&pe.type===c)return D}return null}function Zs(a,o,c,d){let f=a[c];const m=o.data;if(function Qo(a){return a instanceof Eo}(f)){const v=f;v.resolving&&function Ze(a,o){const c=o?`. Dependency path: ${o.join(" > ")} > ${a}`:"";throw new Ee(-200,`Circular dependency in DI detected for ${a}${c}`)}(function he(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():Ie(a)}(m[c]));const C=Du(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?qn(v.injectImpl):null;yc(a,d,ht.Default);try{f=a[c]=v.factory(void 0,m,a,d),o.firstCreatePass&&c>=d.directiveStart&&function Jd(a,o,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=o.type.prototype;if(d){const v=$o(o);(c.preOrderHooks||(c.preOrderHooks=[])).push(a,v),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,v)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-a,f),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(a,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,m))}(c,m[c],o)}finally{null!==D&&qn(D),Du(C),v.resolving=!1,Qd()}}return f}function xc(a,o,c){return!!(c[o+(a>>5)]&1<<a)}function xu(a,o){return!(a&ht.Self||a&ht.Host&&o)}class ea{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,d){return Xo(this._tNode,this._lView,o,d,c)}}function Fl(){return new ea(rr(),Ue())}function Qs(a){return zn(()=>{const o=a.prototype.constructor,c=o[lr]||Rc(o),d=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==d;){const m=f[lr]||Rc(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Rc(a){return we(a)?()=>{const o=Rc(G(a));return o&&o()}:Ss(a)}function Oa(a){const o=a[1],c=o.type;return 2===c?o.declTNode:1===c?a[6]:null}function Oc(a){return function sh(a,o){if("class"===o)return a.classes;if("style"===o)return a.styles;const c=a.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const m=c[f];if(Yo(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(m===o)return c[f+1];f+=2}}}return null}(rr(),a)}const Io="__parameters__";function Na(a,o,c){return zn(()=>{const d=function Mc(a){return function(...c){if(a){const d=a(...c);for(const f in d)this[f]=d[f]}}}(o);function f(...m){if(this instanceof f)return d.apply(this,m),this;const v=new f(...m);return C.annotation=v,C;function C(D,x,N){const V=D.hasOwnProperty(Io)?D[Io]:Object.defineProperty(D,Io,{value:[]})[Io];for(;V.length<=N;)V.push(null);return(V[N]=V[N]||[]).push(v),D}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}class jn{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=tn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function tt(a,o){void 0===o&&(o=a);for(let c=0;c<a.length;c++){let d=a[c];Array.isArray(d)?(o===a&&(o=a.slice(0,c)),tt(d,o)):o!==a&&o.push(d)}return o}function st(a,o){a.forEach(c=>Array.isArray(c)?st(c,o):o(c))}function Nc(a,o,c){o>=a.length?a.push(c):a.splice(o,0,c)}function na(a,o){return o>=a.length-1?a.pop():a.splice(o,1)[0]}function Os(a,o){const c=[];for(let d=0;d<a;d++)c.push(o);return c}function pn(a,o,c){let d=Do(a,o);return d>=0?a[1|d]=c:(d=~d,function gt(a,o,c,d){let f=a.length;if(f==o)a.push(c,d);else if(1===f)a.push(d,a[0]),a[0]=c;else{for(f--,a.push(a[f-1],a[f]);f>o;)a[f]=a[f-2],f--;a[o]=c,a[o+1]=d}}(a,d,o,c)),d}function Ou(a,o){const c=Do(a,o);if(c>=0)return a[1|c]}function Do(a,o){return function ah(a,o,c){let d=0,f=a.length>>c;for(;f!==d;){const m=d+(f-d>>1),v=a[m<<c];if(o===v)return m<<c;v>o?f=m:d=m+1}return~(f<<c)}(a,o,1)}const gi={},Lc="__NG_DI_FLAG__",Ul="ngTempTokenPath",ra=/\n/gm,jl="__source";let T;function A(a){const o=T;return T=a,o}function k(a,o=ht.Default){if(void 0===T)throw new Ee(-203,!1);return null===T?Ci(a,void 0,o):T.get(a,o&ht.Optional?null:void 0,o)}function $(a,o=ht.Default){return(function us(){return vr}()||k)(G(a),o)}function me(a,o=ht.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),$(a,o)}function je(a){const o=[];for(let c=0;c<a.length;c++){const d=G(a[c]);if(Array.isArray(d)){if(0===d.length)throw new Ee(900,!1);let f,m=ht.Default;for(let v=0;v<d.length;v++){const C=d[v],D=Tt(C);"number"==typeof D?-1===D?f=C.token:m|=D:f=C}o.push($(f,m))}else o.push($(d))}return o}function ot(a,o){return a[Lc]=o,a.prototype[Lc]=o,a}function Tt(a){return a[Lc]}const ft=ot(Na("Inject",a=>({token:a})),-1),or=ot(Na("Optional"),8),$n=ot(Na("Self"),2),Ln=ot(Na("SkipSelf"),4);var Ao=(()=>((Ao=Ao||{})[Ao.Important=1]="Important",Ao[Ao.DashCase=2]="DashCase",Ao))();const fh=new Map;let ql=0;const oa="__ngContext__";function Di(a,o){fr(o)?(a[oa]=o[20],function Cm(a){fh.set(a[20],a)}(o)):a[oa]=o}function Sm(a,o){return undefined(a,o)}function eo(a){const o=a[3];return Sr(o)?o[3]:o}function Bc(a){return gp(a[13])}function jc(a){return gp(a[4])}function gp(a){for(;null!==a&&!Sr(a);)a=a[4];return a}function aa(a,o,c,d,f){if(null!=d){let m,v=!1;Sr(d)?m=d:fr(d)&&(v=!0,d=d[0]);const C=nr(d);0===a&&null!==c?null==f?Pm(o,c,C):Ba(o,c,C,f||null,!0):1===a&&null!==c?Ba(o,c,C,f||null,!0):2===a?function bh(a,o,c){const d=ja(a,o);d&&function Mv(a,o,c,d){a.removeChild(o,c,d)}(a,d,o,c)}(o,C,v):3===a&&o.destroyNode(C),null!=m&&function Wc(a,o,c,d,f){const m=c[7];m!==nr(c)&&aa(o,a,d,m,f);for(let C=10;C<c.length;C++){const D=c[C];ks(D[1],D,a,o,d,m)}}(o,a,m,c,f)}}function $c(a,o,c){return a.createElement(o,c)}function to(a,o){const c=a[9],d=c.indexOf(o),f=o[3];512&o[2]&&(o[2]&=-513,Jn(f,-1)),c.splice(d,1)}function ed(a,o){if(a.length<=10)return;const c=10+o,d=a[c];if(d){const f=d[17];null!==f&&f!==a&&to(f,d),o>0&&(a[c-1][4]=d[4]);const m=na(a,10+o);!function Xl(a,o){ks(a,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const v=m[19];null!==v&&v.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function Ua(a,o){if(!(128&o[2])){const c=o[11];c.destroyNode&&ks(a,o,c,3,null,null),function Ov(a){let o=a[13];if(!o)return Gc(a[1],a);for(;o;){let c=null;if(fr(o))c=o[13];else{const d=o[10];d&&(c=d)}if(!c){for(;o&&!o[4]&&o!==a;)fr(o)&&Gc(o[1],o),o=o[3];null===o&&(o=a),fr(o)&&Gc(o[1],o),c=o&&o[4]}o=c}}(o)}}function Gc(a,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Mm(a,o){let c;if(null!=a&&null!=(c=a.destroyHooks))for(let d=0;d<c.length;d+=2){const f=o[c[d]];if(!(f instanceof Eo)){const m=c[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const C=f[m[v]],D=m[v+1];try{D.call(C)}finally{}}else try{m.call(f)}finally{}}}}(a,o),function Om(a,o){const c=a.cleanup,d=o[7];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const v=c[m+1],C="function"==typeof v?v(o):nr(o[v]),D=d[f=c[m+2]],x=c[m+3];"boolean"==typeof x?C.removeEventListener(c[m],D,x):x>=0?d[f=x]():d[f=-x].unsubscribe(),m+=2}else{const v=d[f=c[m+1]];c[m].call(v)}if(null!==d){for(let m=f+1;m<d.length;m++)(0,d[m])();o[7]=null}}(a,o),1===o[1].type&&o[11].destroy();const c=o[17];if(null!==c&&Sr(o[3])){c!==o[3]&&to(c,o);const d=o[19];null!==d&&d.detachView(a)}!function Dv(a){fh.delete(a[20])}(o)}}function mh(a,o,c){return function yh(a,o,c){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return c[0];if(2&d.flags){const f=a.data[d.directiveStart].encapsulation;if(f===Ct.None||f===Ct.Emulated)return null}return pi(d,c)}(a,o.parent,c)}function Ba(a,o,c,d,f){a.insertBefore(o,c,d,f)}function Pm(a,o,c){a.appendChild(o,c)}function _h(a,o,c,d,f){null!==d?Ba(a,o,c,d,f):Pm(a,o,c)}function ja(a,o){return a.parentNode(o)}function km(a,o,c){return vh(a,o,c)}let Ch,vh=function td(a,o,c){return 40&a.type?pi(a,c):null};function qc(a,o,c,d){const f=mh(a,d,o),m=o[11],C=km(d.parent||o[6],d,o);if(null!=f)if(Array.isArray(c))for(let D=0;D<c.length;D++)_h(m,f,c[D],C,!1);else _h(m,f,c,C,!1)}function zr(a,o){if(null!==o){const c=o.type;if(3&c)return pi(o,a);if(4&c)return wh(-1,a[o.index]);if(8&c){const d=o.child;if(null!==d)return zr(a,d);{const f=a[o.index];return Sr(f)?wh(-1,f):nr(f)}}if(32&c)return Sm(o,a)()||nr(a[o.index]);{const d=$a(a,o);return null!==d?Array.isArray(d)?d[0]:zr(eo(a[16]),d):zr(a,o.next)}}return null}function $a(a,o){return null!==o?a[16][6].projection[o.projection]:null}function wh(a,o){const c=10+a+1;if(c<o.length){const d=o[c],f=d[1].firstChild;if(null!==f)return zr(d,f)}return o[7]}function vp(a,o,c,d,f,m,v){for(;null!=c;){const C=d[c.index],D=c.type;if(v&&0===o&&(C&&Di(nr(C),d),c.flags|=4),64!=(64&c.flags))if(8&D)vp(a,o,c.child,d,f,m,!1),aa(o,a,f,C,m);else if(32&D){const x=Sm(c,d);let N;for(;N=x();)aa(o,a,f,N,m);aa(o,a,f,C,m)}else 16&D?Ih(a,o,d,c,f,m):aa(o,a,f,C,m);c=v?c.projectionNext:c.next}}function ks(a,o,c,d,f,m){vp(c,d,a.firstChild,o,f,m,!1)}function Ih(a,o,c,d,f,m){const v=c[16],D=v[6].projection[d.projection];if(Array.isArray(D))for(let x=0;x<D.length;x++)aa(o,a,f,D[x],m);else vp(a,o,D,v[3],f,m,!0)}function Fs(a,o,c){a.setAttribute(o,"style",c)}function Ha(a,o,c){""===c?a.removeAttribute(o,"class"):a.setAttribute(o,"class",c)}function E(a){Ch=a}class xe{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function vi(a){return a instanceof xe?a.changingThisBreaksApplicationSecurity:a}const Ah=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ii=(()=>((ii=ii||{})[ii.NONE=0]="NONE",ii[ii.HTML=1]="HTML",ii[ii.STYLE=2]="STYLE",ii[ii.SCRIPT=3]="SCRIPT",ii[ii.URL=4]="URL",ii[ii.RESOURCE_URL=5]="RESOURCE_URL",ii))();function jv(a){const o=function Ip(){const a=Ue();return a&&a[12]}();return o?o.sanitize(ii.URL,a)||"":function Vu(a,o){const c=function Dh(a){return a instanceof xe&&a.getTypeName()||null}(a);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===o}(a,"URL")?vi(a):function Kc(a){return(a=String(a)).match(Ah)?a:"unsafe:"+a}(Ie(a))}const Gv=new jn("ENVIRONMENT_INITIALIZER"),mI=new jn("INJECTOR",-1),yI=new jn("INJECTOR_DEF_TYPES");class Cp{get(o,c=gi){if(c===gi){const d=new Error(`NullInjectorError: No provider for ${ee(o)}!`);throw d.name="NullInjectorError",d}return c}}function _I(...a){return{\u0275providers:qv(0,a)}}function qv(a,...o){const c=[],d=new Set;let f;return st(o,m=>{const v=m;Rh(v,c,[],d)&&(f||(f=[]),f.push(v))}),void 0!==f&&Dp(f,c),c}function Dp(a,o){for(let c=0;c<a.length;c++){const{providers:f}=a[c];st(f,m=>{o.push(m)})}}function Rh(a,o,c,d){if(!(a=G(a)))return!1;let f=null,m=Wi(a);const v=!m&&ce(a);if(m||v){if(v&&!v.standalone)return!1;f=a}else{const D=a.ngModule;if(m=Wi(D),!m)return!1;f=D}const C=d.has(f);if(v){if(C)return!1;if(d.add(f),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of D)Rh(x,o,c,d)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let x;d.add(f);try{st(m.imports,N=>{Rh(N,o,c,d)&&(x||(x=[]),x.push(N))})}finally{}void 0!==x&&Dp(x,o)}if(!C){const x=Ss(f)||(()=>new f);o.push({provide:f,useFactory:x,deps:Lt},{provide:yI,useValue:f,multi:!0},{provide:Gv,useValue:()=>$(f),multi:!0})}const D=m.providers;null==D||C||st(D,N=>{o.push(N)})}}return f!==a&&void 0!==a.providers}const Tp=re({provide:String,useValue:re});function jm(a){return null!==a&&"object"==typeof a&&Tp in a}function id(a){return"function"==typeof a}const Wv=new jn("Set Injector scope."),sd={},Sx={};let zv;function $m(){return void 0===zv&&(zv=new Cp),zv}class od{}class wI extends od{constructor(o,c,d,f){super(),this.parent=c,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zv(o,v=>this.processProvider(v)),this.records.set(mI,ad(void 0,this)),f.has("environment")&&this.records.set(od,ad(void 0,this));const m=this.records.get(Wv);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(yI.multi,Lt,ht.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const c=A(this),d=qn(void 0);try{return o()}finally{A(c),qn(d)}}get(o,c=gi,d=ht.Default){this.assertNotDestroyed();const f=A(this),m=qn(void 0);try{if(!(d&ht.SkipSelf)){let C=this.records.get(o);if(void 0===C){const D=function TI(a){return"function"==typeof a||"object"==typeof a&&a instanceof jn}(o)&&bn(o);C=D&&this.injectableDefInScope(D)?ad(Kv(o),sd):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(d&ht.Self?$m():this.parent).get(o,c=d&ht.Optional&&c===gi?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[Ul]=v[Ul]||[]).unshift(ee(o)),f)throw v;return function Mt(a,o,c,d){const f=a[Ul];throw o[jl]&&f.unshift(o[jl]),a.message=function Wt(a,o,c,d=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let f=ee(o);if(Array.isArray(o))f=o.map(ee).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];m.push(v+":"+("string"==typeof C?JSON.stringify(C):ee(C)))}f=`{${m.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${a.replace(ra,"\n  ")}`}("\n"+a.message,f,c,d),a.ngTokenPath=f,a[Ul]=null,a}(v,o,"R3InjectorError",this.source)}throw v}finally{qn(m),A(f)}}resolveInjectorInitializers(){const o=A(this),c=qn(void 0);try{const d=this.get(Gv.multi,Lt,ht.Self);for(const f of d)f()}finally{A(o),qn(c)}}toString(){const o=[],c=this.records;for(const d of c.keys())o.push(ee(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ee(205,!1)}processProvider(o){let c=id(o=G(o))?o:G(o&&o.provide);const d=function bI(a){return jm(a)?ad(void 0,a.useValue):ad(II(a),sd)}(o);if(id(o)||!0!==o.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=ad(void 0,sd,!0),f.factory=()=>je(f.multi),this.records.set(c,f)),c=o,f.multi.push(o)}this.records.set(c,d)}hydrate(o,c){return c.value===sd&&(c.value=Sx,c.value=c.factory()),"object"==typeof c.value&&c.value&&function DI(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(o){if(!o.providedIn)return!1;const c=G(o.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function Kv(a){const o=bn(a),c=null!==o?o.factory:Ss(a);if(null!==c)return c;if(a instanceof jn)throw new Ee(204,!1);if(a instanceof Function)return function Ax(a){const o=a.length;if(o>0)throw Os(o,"?"),new Ee(204,!1);const c=function Tr(a){const o=a&&(a[Pi]||a[di]);if(o){const c=function Ur(a){if(a.hasOwnProperty("name"))return a.name;const o=(""+a).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),o}return null}(a);return null!==c?()=>c.factory(a):()=>new a}(a);throw new Ee(204,!1)}function II(a,o,c){let d;if(id(a)){const f=G(a);return Ss(f)||Kv(f)}if(jm(a))d=()=>G(a.useValue);else if(function EI(a){return!(!a||!a.useFactory)}(a))d=()=>a.useFactory(...je(a.deps||[]));else if(function vI(a){return!(!a||!a.useExisting)}(a))d=()=>$(G(a.useExisting));else{const f=G(a&&(a.useClass||a.provide));if(!function CI(a){return!!a.deps}(a))return Ss(f)||Kv(f);d=()=>new f(...je(a.deps))}return d}function ad(a,o,c=!1){return{factory:a,value:o,multi:c?[]:void 0}}function SI(a){return!!a.\u0275providers}function Zv(a,o){for(const c of a)Array.isArray(c)?Zv(c,o):SI(c)?Zv(c.\u0275providers,o):o(c)}class AI{}class RI{resolveComponentFactory(o){throw function Rx(a){const o=Error(`No component factory found for ${ee(a)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=a,o}(o)}}let ud=(()=>{class a{}return a.NULL=new RI,a})();function OI(){return cd(rr(),Ue())}function cd(a,o){return new Hm(pi(a,o))}let Hm=(()=>{class a{constructor(c){this.nativeElement=c}}return a.__NG_ELEMENT_ID__=OI,a})();function Ox(a){return a instanceof Hm?a.nativeElement:a}class MI{}let Mx=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function Gm(){const a=Ue(),c=mn(rr().index,a);return(fr(c)?c:a)[11]}(),a})(),PI=(()=>{class a{}return a.\u0275prov=tn({token:a,providedIn:"root",factory:()=>null}),a})();class qm{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Wm=new qm("14.2.12"),Qv={};function Jv(a){return a.ngOriginalError}class Sp{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o);this._console.error("ERROR",o),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&Jv(o);for(;c&&Jv(c);)c=Jv(c);return c||null}}function Vs(a){return a instanceof Function?a():a}function Km(a,o,c){let d=a.length;for(;;){const f=a.indexOf(o,c);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const m=o.length;if(f+m===d||a.charCodeAt(f+m)<=32)return f}c=f+1}}const Ap="ng-template";function N1(a,o,c){let d=0;for(;d<a.length;){let f=a[d++];if(c&&"class"===f){if(f=a[d],-1!==Km(f.toLowerCase(),o,0))return!0}else if(1===f){for(;d<a.length&&"string"==typeof(f=a[d++]);)if(f.toLowerCase()===o)return!0;return!1}}return!1}function Xv(a){return 4===a.type&&a.value!==Ap}function Oh(a,o,c){return o===(4!==a.type||c?a.value:Ap)}function e0(a,o,c){let d=4;const f=a.attrs||[],m=function jx(a){for(let o=0;o<a.length;o++)if(Yo(a[o]))return o;return a.length}(f);let v=!1;for(let C=0;C<o.length;C++){const D=o[C];if("number"!=typeof D){if(!v)if(4&d){if(d=2|1&d,""!==D&&!Oh(a,D,c)||""===D&&1===o.length){if(Ga(d))return!1;v=!0}}else{const x=8&d?D:o[++C];if(8&d&&null!==a.attrs){if(!N1(a.attrs,x,c)){if(Ga(d))return!1;v=!0}continue}const V=LI(8&d?"class":D,f,Xv(a),c);if(-1===V){if(Ga(d))return!1;v=!0;continue}if(""!==x){let te;te=V>m?"":f[V+1].toLowerCase();const pe=8&d?te:null;if(pe&&-1!==Km(pe,x,0)||2&d&&x!==te){if(Ga(d))return!1;v=!0}}}}else{if(!v&&!Ga(d)&&!Ga(D))return!1;if(v&&Ga(D))continue;v=!1,d=D|1&d}}return Ga(d)||v}function Ga(a){return 0==(1&a)}function LI(a,o,c,d){if(null===o)return-1;let f=0;if(d||!c){let m=!1;for(;f<o.length;){const v=o[f];if(v===a)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let C=o[++f];for(;"string"==typeof C;)C=o[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function $x(a,o){let c=a.indexOf(4);if(c>-1)for(c++;c<a.length;){const d=a[c];if("number"==typeof d)return-1;if(d===o)return c;c++}return-1}(o,a)}function t0(a,o,c=!1){for(let d=0;d<o.length;d++)if(e0(a,o[d],c))return!0;return!1}function Hx(a,o){e:for(let c=0;c<o.length;c++){const d=o[c];if(a.length===d.length){for(let f=0;f<a.length;f++)if(a[f]!==d[f])continue e;return!0}}return!1}function r0(a,o){return a?":not("+o.trim()+")":o}function Gx(a){let o=a[0],c=1,d=2,f="",m=!1;for(;c<a.length;){let v=a[c];if("string"==typeof v)if(2&d){const C=a[++c];f+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!Ga(v)&&(o+=r0(m,f),f=""),d=v,m=m||!Ga(d);c++}return""!==f&&(o+=r0(m,f)),o}const Qt={};function s0(a){VI(nn(),Ue(),Ar()+a,!1)}function VI(a,o,c,d){if(!d)if(3==(3&o[2])){const m=a.preOrderCheckHooks;null!==m&&Zo(o,m,c)}else{const m=a.preOrderHooks;null!==m&&Da(o,m,0,c)}Li(c)}function Kx(a,o=null,c=null,d){const f=GI(a,o,c,d);return f.resolveInjectorInitializers(),f}function GI(a,o=null,c=null,d,f=new Set){const m=[c||Lt,_I(a)];return d=d||("object"==typeof a?void 0:ee(a)),new wI(m,o||$m(),d||null,f)}let ld=(()=>{class a{static create(c,d){if(Array.isArray(c))return Kx({name:""},d,c,"");{const f=c.name??"";return Kx({name:f},c.parent,c.providers,f)}}}return a.THROW_IF_NOT_FOUND=gi,a.NULL=new Cp,a.\u0275prov=tn({token:a,providedIn:"any",factory:()=>$(mI)}),a.__NG_ELEMENT_ID__=-1,a})();function dd(a,o=ht.Default){const c=Ue();return null===c?$(a,o):Xo(rr(),c,G(a),o)}function h0(){throw new Error("invalid")}function xp(a,o){return a<<17|o<<2}function xo(a){return a>>17&32767}function Rp(a){return 2|a}function qa(a){return(131068&a)>>2}function Xm(a,o){return-131069&a|o<<2}function Op(a){return 1|a}function uR(a,o){const c=a.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const f=c[d],m=c[d+1];if(-1!==m){const v=a.data[m];wu(f),v.contentQueries(2,o[m],m)}}}function fd(a,o,c,d,f,m,v,C,D,x,N){const V=o.blueprint.slice();return V[0]=f,V[2]=76|d,(null!==N||a&&1024&a[2])&&(V[2]|=1024),cc(V),V[3]=V[15]=a,V[8]=c,V[10]=v||a&&a[10],V[11]=C||a&&a[11],V[12]=D||a&&a[12]||null,V[9]=x||a&&a[9]||null,V[6]=m,V[20]=function Wl(){return ql++}(),V[21]=N,V[16]=2==o.type?a[16]:V,V}function za(a,o,c,d,f){let m=a.data[o];if(null===m)m=function Fh(a,o,c,d,f){const m=gc(),v=mu(),D=a.data[o]=function q1(a,o,c,d,f,m){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,c,o,d,f);return null===a.firstChild&&(a.firstChild=D),null!==m&&(v?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D)),D}(a,o,c,d,f),function mm(){return Ht.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=c,m.value=d,m.attrs=f;const v=function Ca(){const a=Ht.lFrame,o=a.currentTNode;return a.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Xi(m,!0),m}function Gu(a,o,c,d){if(0===c)return-1;const f=o.length;for(let m=0;m<c;m++)o.push(d),a.blueprint.push(d),a.data.push(null);return f}function b0(a,o,c){_c(o);try{const d=a.viewQuery;null!==d&&A0(1,d,c);const f=a.template;null!==f&&kp(a,o,f,1,c),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&uR(a,o),a.staticViewQueries&&A0(2,a.viewQuery,c);const m=a.components;null!==m&&function G1(a,o){for(let c=0;c<o.length;c++)wC(a,o[c])}(o,m)}catch(d){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),d}finally{o[2]&=-5,zo()}}function Lh(a,o,c,d){const f=o[2];if(128!=(128&f)){_c(o);try{cc(o),function Il(a){return Ht.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==c&&kp(a,o,c,2,d);const v=3==(3&f);if(v){const x=a.preOrderCheckHooks;null!==x&&Zo(o,x,null)}else{const x=a.preOrderHooks;null!==x&&Da(o,x,0,null),Xd(o,0)}if(function J1(a){for(let o=Bc(a);null!==o;o=jc(o)){if(!o[2])continue;const c=o[9];for(let d=0;d<c.length;d++){const f=c[d],m=f[3];0==(512&f[2])&&Jn(m,1),f[2]|=512}}}(o),function pR(a){for(let o=Bc(a);null!==o;o=jc(o))for(let c=10;c<o.length;c++){const d=o[c],f=d[1];qo(d)&&Lh(f,d,f.template,d[8])}}(o),null!==a.contentQueries&&uR(a,o),v){const x=a.contentCheckHooks;null!==x&&Zo(o,x)}else{const x=a.contentHooks;null!==x&&Da(o,x,1),Xd(o,1)}!function H1(a,o){const c=a.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)Li(~f);else{const m=f,v=c[++d],C=c[++d];ym(v,m),C(2,o[m])}}}finally{Li(-1)}}(a,o);const C=a.components;null!==C&&function cR(a,o){for(let c=0;c<o.length;c++)EC(a,o[c])}(o,C);const D=a.viewQuery;if(null!==D&&A0(2,D,d),v){const x=a.viewCheckHooks;null!==x&&Zo(o,x)}else{const x=a.viewHooks;null!==x&&Da(o,x,2),Xd(o,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Jn(o[3],-1))}finally{zo()}}}function kp(a,o,c,d,f){const m=Ar(),v=2&d;try{Li(-1),v&&o.length>22&&VI(a,o,22,!1),c(d,f)}finally{Li(m)}}function uC(a,o,c){if(Bo(o)){const f=o.directiveEnd;for(let m=o.directiveStart;m<f;m++){const v=a.data[m];v.contentQueries&&v.contentQueries(1,c[m],m)}}}function I0(a,o,c){!zs()||(function oy(a,o,c,d){const f=c.directiveStart,m=c.directiveEnd;a.firstCreatePass||Jo(c,o),Di(d,o);const v=c.initialInputs;for(let C=f;C<m;C++){const D=a.data[C],x=Hr(D);x&&yC(o,c,D);const N=Zs(o,a,C,c);Di(N,o),null!==v&&_C(0,C-f,N,D,0,v),x&&(mn(c.index,o)[8]=N)}}(a,o,c,pi(c,o)),128==(128&c.flags)&&function K1(a,o,c){const d=c.directiveStart,f=c.directiveEnd,m=c.index,v=function Cl(){return Ht.lFrame.currentDirectiveIndex}();try{Li(m);for(let C=d;C<f;C++){const D=a.data[C],x=o[C];mc(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&pC(D,x)}}finally{Li(-1),mc(v)}}(a,o,c))}function ry(a,o,c=pi){const d=o.localNames;if(null!==d){let f=o.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],C=-1===v?c(o,a):a[v];a[f++]=C}}}function cC(a){const o=a.tView;return null===o||o.incompleteFirstPass?a.tView=iy(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):o}function iy(a,o,c,d,f,m,v,C,D,x){const N=22+d,V=N+f,te=function lR(a,o){const c=[];for(let d=0;d<o;d++)c.push(d<a?null:Qt);return c}(N,V),pe="function"==typeof x?x():x;return te[1]={type:a,blueprint:te,template:c,queries:null,viewQuery:C,declTNode:o,data:te.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:pe,incompleteFirstPass:!1}}function C0(a,o,c,d){const f=bC(o);null===c?f.push(d):(f.push(c),a.firstCreatePass&&cy(a).push(d,f.length-1))}function sy(a,o,c){for(let d in a)if(a.hasOwnProperty(d)){const f=a[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(o,f):c[d]=[o,f]}return c}function lC(a,o){const d=o.directiveEnd,f=a.data,m=o.attrs,v=[];let C=null,D=null;for(let x=o.directiveStart;x<d;x++){const N=f[x],V=N.inputs,te=null===m||Xv(o)?null:vC(V,m);v.push(te),C=sy(V,x,C),D=sy(N.outputs,x,D)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=C,o.outputs=D}function hC(a,o){const c=mn(o,a);16&c[2]||(c[2]|=32)}function Lp(a,o,c,d){let f=!1;if(zs()){const m=function gC(a,o,c){const d=a.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const v=d[m];t0(c,v.selectors,!1)&&(f||(f=[]),wo(Jo(c,o),a,v.type),Hr(v)?(hR(a,c),f.unshift(v)):f.push(v))}return f}(a,o,c),v=null===d?null:{"":-1};if(null!==m){f=!0,fR(c,a.data.length,m.length);for(let N=0;N<m.length;N++){const V=m[N];V.providersResolver&&V.providersResolver(V)}let C=!1,D=!1,x=Gu(a,o,m.length,null);for(let N=0;N<m.length;N++){const V=m[N];c.mergedAttrs=bu(c.mergedAttrs,V.hostAttrs),mC(a,c,o,x,V),Q1(x,V,v),null!==V.contentQueries&&(c.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(c.flags|=128);const te=V.type.prototype;!C&&(te.ngOnChanges||te.ngOnInit||te.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(c.index),C=!0),!D&&(te.ngOnChanges||te.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(c.index),D=!0),x++}lC(a,c)}v&&function Z1(a,o,c){if(o){const d=a.localNames=[];for(let f=0;f<o.length;f+=2){const m=c[o[f+1]];if(null==m)throw new Ee(-301,!1);d.push(o[f],m)}}}(c,d,v)}return c.mergedAttrs=bu(c.mergedAttrs,c.attrs),f}function D0(a,o,c,d,f,m){const v=m.hostBindings;if(v){let C=a.hostBindingOpCodes;null===C&&(C=a.hostBindingOpCodes=[]);const D=~o.index;(function fC(a){let o=a.length;for(;o>0;){const c=a[--o];if("number"==typeof c&&c<0)return c}return 0})(C)!=D&&C.push(D),C.push(d,f,v)}}function pC(a,o){null!==a.hostBindings&&a.hostBindings(1,o)}function hR(a,o){o.flags|=2,(a.components||(a.components=[])).push(o.index)}function Q1(a,o,c){if(c){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)c[o.exportAs[d]]=a;Hr(o)&&(c[""]=a)}}function fR(a,o,c){a.flags|=1,a.directiveStart=o,a.directiveEnd=o+c,a.providerIndexes=o}function mC(a,o,c,d,f){a.data[d]=f;const m=f.factory||(f.factory=Ss(f.type)),v=new Eo(m,Hr(f),dd);a.blueprint[d]=v,c[d]=v,D0(a,o,0,d,Gu(a,c,f.hostVars,Qt),f)}function yC(a,o,c){const d=pi(o,a),f=cC(c),m=a[10],v=Vp(a,fd(a,f,null,c.onPush?32:16,d,o,m,m.createRenderer(d,c),null,null,null));a[o.index]=v}function Ka(a,o,c,d,f,m){const v=pi(a,o);!function ay(a,o,c,d,f,m,v){if(null==m)a.removeAttribute(o,f,c);else{const C=null==v?Ie(m):v(m,d||"",f);a.setAttribute(o,f,C,c)}}(o[11],v,m,a.value,c,d,f)}function _C(a,o,c,d,f,m){const v=m[o];if(null!==v){const C=d.setInput;for(let D=0;D<v.length;){const x=v[D++],N=v[D++],V=v[D++];null!==C?d.setInput(c,V,x,N):c[N]=V}}}function vC(a,o){let c=null,d=0;for(;d<o.length;){const f=o[d];if(0!==f)if(5!==f){if("number"==typeof f)break;a.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,a[f],o[d+1])),d+=2}else d+=2;else d+=4}return c}function T0(a,o,c,d){return new Array(a,!0,!1,o,null,0,d,c,null,null)}function EC(a,o){const c=mn(o,a);if(qo(c)){const d=c[1];48&c[2]?Lh(d,c,d.template,c[8]):c[5]>0&&S0(c)}}function S0(a){for(let d=Bc(a);null!==d;d=jc(d))for(let f=10;f<d.length;f++){const m=d[f];if(qo(m))if(512&m[2]){const v=m[1];Lh(v,m,v.template,m[8])}else m[5]>0&&S0(m)}const c=a[1].components;if(null!==c)for(let d=0;d<c.length;d++){const f=mn(c[d],a);qo(f)&&f[5]>0&&S0(f)}}function wC(a,o){const c=mn(o,a),d=c[1];(function gR(a,o){for(let c=o.length;c<a.blueprint.length;c++)o.push(a.blueprint[c])})(d,c),b0(d,c,c[8])}function Vp(a,o){return a[13]?a[14][4]=o:a[13]=o,a[14]=o,o}function Up(a){for(;a;){a[2]|=32;const o=eo(a);if(H(a)&&!o)return a;a=o}return null}function uy(a,o,c,d=!0){const f=o[10];f.begin&&f.begin();try{Lh(a,o,a.template,c)}catch(v){throw d&&ly(o,v),v}finally{f.end&&f.end()}}function A0(a,o,c){wu(0),o(a,c)}function bC(a){return a[7]||(a[7]=[])}function cy(a){return a.cleanup||(a.cleanup=[])}function ly(a,o){const c=a[9],d=c?c.get(Sp,null):null;d&&d.handleError(o)}function dy(a,o,c,d,f){for(let m=0;m<c.length;){const v=c[m++],C=c[m++],D=o[v],x=a.data[v];null!==x.setInput?x.setInput(D,f,d,C):D[C]=f}}function Vh(a,o,c){let d=c?a.styles:null,f=c?a.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?m=C:1==m?f=K(f,C):2==m&&(d=K(d,C+": "+o[++v]+";"))}c?a.styles=d:a.stylesWithoutHost=d,c?a.classes=f:a.classesWithoutHost=f}function hy(a,o,c,d,f=!1){for(;null!==c;){const m=o[c.index];if(null!==m&&d.push(nr(m)),Sr(m))for(let C=10;C<m.length;C++){const D=m[C],x=D[1].firstChild;null!==x&&hy(D[1],D,x,d)}const v=c.type;if(8&v)hy(a,o,c.child,d);else if(32&v){const C=Sm(c,o);let D;for(;D=C();)d.push(D)}else if(16&v){const C=$a(o,c);if(Array.isArray(C))d.push(...C);else{const D=eo(o[16]);hy(D[1],D,C,d,!0)}}c=f?c.projectionNext:c.next}return d}class Uh{constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,c=o[1];return hy(c,o,c.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Sr(o)){const c=o[8],d=c?c.indexOf(this):-1;d>-1&&(ed(o,d),na(c,d))}this._attachedToViewContainer=!1}Ua(this._lView[1],this._lView)}onDestroy(o){C0(this._lView[1],this._lView,null,o)}markForCheck(){Up(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){uy(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _p(a,o){ks(a,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=o}}class yR extends Uh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;uy(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Bp extends ud{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=ce(o);return new jp(c,this.ngModule)}}function CC(a){const o=[];for(let c in a)a.hasOwnProperty(c)&&o.push({propName:a[c],templateName:c});return o}class DC{constructor(o,c){this.injector=o,this.parentInjector=c}get(o,c,d){const f=this.injector.get(o,Qv,d);return f!==Qv||c===Qv?f:this.parentInjector.get(o,c,d)}}class jp extends AI{constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function k1(a){return a.map(Gx).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return CC(this.componentDef.inputs)}get outputs(){return CC(this.componentDef.outputs)}create(o,c,d,f){let m=(f=f||this.ngModule)instanceof od?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new DC(o,m):o,C=v.get(MI,null);if(null===C)throw new Ee(407,!1);const D=v.get(PI,null),x=C.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",V=d?function dR(a,o,c){return a.selectRootElement(o,c===Ct.ShadowDom)}(x,d,this.componentDef.encapsulation):$c(x,N,function _R(a){const o=a.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),te=this.componentDef.onPush?288:272,pe=iy(0,null,null,1,0,null,null,null,null,null),Fe=fd(null,pe,null,te,null,null,C,x,D,v,null);let He,lt;_c(Fe);try{const pt=function SC(a,o,c,d,f,m){const v=c[1];c[22]=a;const D=za(v,22,2,"#host",null),x=D.mergedAttrs=o.hostAttrs;null!==x&&(Vh(D,x,!0),null!==a&&(Aa(f,a,x),null!==D.classes&&Ha(f,a,D.classes),null!==D.styles&&Fs(f,a,D.styles)));const N=d.createRenderer(a,o),V=fd(c,cC(o),null,o.onPush?32:16,c[22],D,d,N,m||null,null,null);return v.firstCreatePass&&(wo(Jo(D,c),v,o.type),hR(v,D),fR(D,c.length,1)),Vp(c,V),c[22]=V}(V,this.componentDef,Fe,C,x);if(V)if(d)Aa(x,V,["ng-version",Wm.full]);else{const{attrs:xt,classes:$e}=function Zm(a){const o=[],c=[];let d=1,f=2;for(;d<a.length;){let m=a[d];if("string"==typeof m)2===f?""!==m&&o.push(m,a[++d]):8===f&&c.push(m);else{if(!Ga(f))break;f=m}d++}return{attrs:o,classes:c}}(this.componentDef.selectors[0]);xt&&Aa(x,V,xt),$e&&$e.length>0&&Ha(x,V,$e.join(" "))}if(lt=Go(pe,22),void 0!==c){const xt=lt.projection=[];for(let $e=0;$e<this.ngContentSelectors.length;$e++){const $t=c[$e];xt.push(null!=$t?Array.from($t):null)}}He=function pd(a,o,c,d){const f=c[1],m=function Fp(a,o,c){const d=rr();a.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),mC(a,d,o,Gu(a,o,1,null),c),lC(a,d));const f=Zs(o,a,d.directiveStart,d);Di(f,o);const m=pi(d,o);return m&&Di(m,o),f}(f,c,o);if(a[8]=c[8]=m,null!==d)for(const C of d)C(m,o);if(o.contentQueries){const C=rr();o.contentQueries(1,m,C.directiveStart)}const v=rr();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Li(v.index),D0(c[1],v,0,v.directiveStart,v.directiveEnd,o),pC(o,m)),m}(pt,this.componentDef,Fe,[wR]),b0(pe,Fe,null)}finally{zo()}return new vR(this.componentType,He,cd(lt,Fe),Fe,lt)}}class vR extends class xx{}{constructor(o,c,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new yR(f),this.componentType=o}setInput(o,c){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[o])){const m=this._rootLView;dy(m[1],m,f,o,c),hC(m,this._tNode.index)}}get injector(){return new ea(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function wR(){const a=rr();wc(Ue()[1],a)}function O0(a){let o=function R0(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),c=!0;const d=[a];for(;o;){let f;if(Hr(a))f=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ee(903,!1);f=o.\u0275dir}if(f){if(c){d.push(f);const v=a;v.inputs=M0(a.inputs),v.declaredInputs=M0(a.declaredInputs),v.outputs=M0(a.outputs);const C=f.hostBindings;C&&xC(a,C);const D=f.viewQuery,x=f.contentQueries;if(D&&bR(a,D),x&&fy(a,x),X(a.inputs,f.inputs),X(a.declaredInputs,f.declaredInputs),X(a.outputs,f.outputs),Hr(f)&&f.data.animation){const N=a.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const C=m[v];C&&C.ngInherit&&C(a),C===O0&&(c=!1)}}o=Object.getPrototypeOf(o)}!function AC(a){let o=0,c=null;for(let d=a.length-1;d>=0;d--){const f=a[d];f.hostVars=o+=f.hostVars,f.hostAttrs=bu(f.hostAttrs,c=bu(c,f.hostAttrs))}}(d)}function M0(a){return a===jr?{}:a===Lt?[]:a}function bR(a,o){const c=a.viewQuery;a.viewQuery=c?(d,f)=>{o(d,f),c(d,f)}:o}function fy(a,o){const c=a.contentQueries;a.contentQueries=c?(d,f,m)=>{o(d,f,m),c(d,f,m)}:o}function xC(a,o){const c=a.hostBindings;a.hostBindings=c?(d,f)=>{o(d,f),c(d,f)}:o}let $p=null;function gd(){if(!$p){const a=un.Symbol;if(a&&a.iterator)$p=a.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<o.length;++c){const d=o[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&($p=d)}}}return $p}function Hp(a){return!!MC(a)&&(Array.isArray(a)||!(a instanceof Map)&&gd()in a)}function MC(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function $i(a,o,c){return!Object.is(a[o],c)&&(a[o]=c,!0)}function PC(a,o,c,d){const f=Ue();return $i(f,Wo(),o)&&(nn(),Ka(Bn(),f,a,o,c,d)),PC}function fe(a,o,c,d,f,m,v,C){const D=Ue(),x=nn(),N=a+22,V=x.firstCreatePass?function Zp(a,o,c,d,f,m,v,C,D){const x=o.consts,N=za(o,a,4,v||null,ds(x,C));Lp(o,c,N,ds(x,D)),wc(o,N);const V=N.tViews=iy(2,N,d,f,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,N),V.queries=o.queries.embeddedTView(N)),N}(N,x,D,o,c,d,f,m,v):x.data[N];Xi(V,!1);const te=D[11].createComment("");qc(x,D,te,V),Di(te,D),Vp(D,D[N]=T0(te,D,te,V)),hu(V)&&I0(x,D,V),null!=v&&ry(D,V,C)}function F0(a,o,c){const d=Ue();return $i(d,Wo(),o)&&function ps(a,o,c,d,f,m,v,C){const D=pi(o,c);let N,x=o.inputs;!C&&null!=x&&(N=x[d])?(dy(a,c,N,d,f),jo(o)&&hC(c,o.index)):3&o.type&&(d=function dC(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(d),f=null!=v?v(f,o.value||"",d):f,m.setProperty(D,d,f))}(nn(),Bn(),d,a,o,d[11],c,!1),F0}function Sn(a,o,c,d,f){const v=f?"class":"style";dy(a,c,o.inputs[v],v,d)}function vd(a,o,c,d){const f=Ue(),m=nn(),v=22+a,C=f[11],D=f[v]=$c(C,o,function Ec(){return Ht.lFrame.currentNamespace}()),x=m.firstCreatePass?function wt(a,o,c,d,f,m,v){const C=o.consts,x=za(o,a,2,f,ds(C,m));return Lp(o,c,x,ds(C,v)),null!==x.attrs&&Vh(x,x.attrs,!1),null!==x.mergedAttrs&&Vh(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,m,f,0,o,c,d):m.data[v];Xi(x,!0);const N=x.mergedAttrs;null!==N&&Aa(C,D,N);const V=x.classes;null!==V&&Ha(C,D,V);const te=x.styles;return null!==te&&Fs(C,D,te),64!=(64&x.flags)&&qc(m,f,D,x),0===function dc(){return Ht.lFrame.elementDepthCount}()&&Di(D,f),function hc(){Ht.lFrame.elementDepthCount++}(),hu(x)&&(I0(m,f,x),uC(m,x,f)),null!==d&&ry(f,x),vd}function Gh(){let a=rr();mu()?yu():(a=a.parent,Xi(a,!1));const o=a;!function vl(){Ht.lFrame.elementDepthCount--}();const c=nn();return c.firstCreatePass&&(wc(c,a),Bo(a)&&c.queries.elementEnd(a)),null!=o.classesWithoutHost&&function Cc(a){return 0!=(16&a.flags)}(o)&&Sn(c,o,Ue(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function th(a){return 0!=(32&a.flags)}(o)&&Sn(c,o,Ue(),o.stylesWithoutHost,!1),Gh}function qh(a,o,c,d){return vd(a,o,c,d),Gh(),qh}function L0(a,o,c){const d=Ue(),f=nn(),m=a+22,v=f.firstCreatePass?function nL(a,o,c,d,f){const m=o.consts,v=ds(m,d),C=za(o,a,8,"ng-container",v);return null!==v&&Vh(C,v,!0),Lp(o,c,C,ds(m,f)),null!==o.queries&&o.queries.elementStart(o,C),C}(m,f,d,o,c):f.data[m];Xi(v,!0);const C=d[m]=d[11].createComment("");return qc(f,d,C,v),Di(C,d),hu(v)&&(I0(f,d,v),uC(f,v,d)),null!=c&&ry(d,v),L0}function gs(){let a=rr();const o=nn();return mu()?yu():(a=a.parent,Xi(a,!1)),o.firstCreatePass&&(wc(o,a),Bo(a)&&o.queries.elementEnd(a)),gs}function U0(){return Ue()}function gy(a){return!!a&&"function"==typeof a.then}function BC(a){return!!a&&"function"==typeof a.subscribe}const my=BC;function Za(a,o,c,d){const f=Ue(),m=nn(),v=rr();return function jC(a,o,c,d,f,m,v,C){const D=hu(d),N=a.firstCreatePass&&cy(a),V=o[8],te=bC(o);let pe=!0;if(3&d.type||C){const lt=pi(d,o),pt=C?C(lt):lt,xt=te.length,$e=C?An=>C(nr(An[d.index])):d.index;let $t=null;if(!C&&D&&($t=function B0(a,o,c,d){const f=a.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===c&&f[m+1]===d){const C=o[7],D=f[m+2];return C.length>D?C[D]:null}"string"==typeof v&&(m+=2)}return null}(a,o,f,d.index)),null!==$t)($t.__ngLastListenerFn__||$t).__ngNextListenerFn__=m,$t.__ngLastListenerFn__=m,pe=!1;else{m=Qp(d,o,V,m,!1);const An=c.listen(pt,f,m);te.push(m,An),N&&N.push(f,$e,xt,xt+1)}}else m=Qp(d,o,V,m,!1);const Fe=d.outputs;let He;if(pe&&null!==Fe&&(He=Fe[f])){const lt=He.length;if(lt)for(let pt=0;pt<lt;pt+=2){const ur=o[He[pt]][He[pt+1]].subscribe(m),Mr=te.length;te.push(m,ur),N&&N.push(f,d.index,Mr,-(Mr+1))}}}(m,f,f[11],v,a,o,0,d),Za}function j0(a,o,c,d){try{return!1!==c(d)}catch(f){return ly(a,f),!1}}function Qp(a,o,c,d,f){return function m(v){if(v===Function)return d;Up(2&a.flags?mn(a.index,o):o);let D=j0(o,0,d,v),x=m.__ngNextListenerFn__;for(;x;)D=j0(o,0,x,v)&&D,x=x.__ngNextListenerFn__;return f&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function $C(a=1){return function Ko(a){return(Ht.lFrame.contextLView=function vc(a,o){for(;a>0;)o=o[15],a--;return o}(a,Ht.lFrame.contextLView))[8]}(a)}function HC(a,o){let c=null;const d=function n0(a){const o=a.attrs;if(null!=o){const c=o.indexOf(5);if(0==(1&c))return o[c+1]}return null}(a);for(let f=0;f<o.length;f++){const m=o[f];if("*"!==m){if(null===d?t0(a,m,!0):Hx(d,m))return f}else c=f}return c}function $0(a){const o=Ue()[16][6];if(!o.projection){const d=o.projection=Os(a?a.length:1,null),f=d.slice();let m=o.child;for(;null!==m;){const v=a?HC(m,a):0;null!==v&&(f[v]?f[v].projectionNext=m:d[v]=m,f[v]=m),m=m.next}}}function Yp(a,o=0,c){const d=Ue(),f=nn(),m=za(f,22+a,16,null,c||null);null===m.projection&&(m.projection=o),yu(),64!=(64&m.flags)&&function Bi(a,o,c){Ih(o[11],0,o,c,mh(a,c,o),km(c.parent||o[6],c,o))}(f,d,m)}function G0(a,o,c,d,f){const m=a[c+1],v=null===o;let C=d?xo(m):qa(m),D=!1;for(;0!==C&&(!1===D||v);){const N=a[C+1];q0(a[C],o)&&(D=!0,a[C+1]=d?Op(N):Rp(N)),C=d?xo(N):qa(N)}D&&(a[c+1]=d?Rp(m):Op(m))}function q0(a,o){return null===a||null==o||(Array.isArray(a)?a[1]:a)===o||!(!Array.isArray(a)||"string"!=typeof o)&&Do(a,o)>=0}function Z0(a,o){return function da(a,o,c,d){const f=Ue(),m=nn(),v=function Ks(a){const o=Ht.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+a,c}(2);m.firstUpdatePass&&function Ed(a,o,c,d){const f=a.data;if(null===f[c+1]){const m=f[Ar()],v=function Iy(a,o){return o>=a.expandoStartIndex}(a,c);(function iD(a,o){return 0!=(a.flags&(o?16:32))})(m,d)&&null===o&&!v&&(o=!1),o=function Gn(a,o,c,d){const f=function Eu(a){const o=Ht.lFrame.currentDirectiveIndex;return-1===o?null:a[o]}(a);let m=d?o.residualClasses:o.residualStyles;if(null===f)0===(d?o.classBindings:o.styleBindings)&&(c=Xp(c=Q0(null,a,o,c,d),o.attrs,d),m=null);else{const v=o.directiveStylingLast;if(-1===v||a[v]!==f)if(c=Q0(f,a,o,c,d),null===m){let D=function RR(a,o,c){const d=c?o.classBindings:o.styleBindings;if(0!==qa(d))return a[xo(d)]}(a,o,d);void 0!==D&&Array.isArray(D)&&(D=Q0(null,a,o,D[1],d),D=Xp(D,o.attrs,d),function OR(a,o,c,d){a[xo(c?o.classBindings:o.styleBindings)]=d}(a,o,d,D))}else m=function MR(a,o,c){let d;const f=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<f;m++)d=Xp(d,a[m].hostAttrs,c);return Xp(d,o.attrs,c)}(a,o,d)}return void 0!==m&&(d?o.residualClasses=m:o.residualStyles=m),c}(f,m,o,d),function TR(a,o,c,d,f,m){let v=m?o.classBindings:o.styleBindings,C=xo(v),D=qa(v);a[d]=c;let N,x=!1;if(Array.isArray(c)){const V=c;N=V[1],(null===N||Do(V,N)>0)&&(x=!0)}else N=c;if(f)if(0!==D){const te=xo(a[C+1]);a[d+1]=xp(te,C),0!==te&&(a[te+1]=Xm(a[te+1],d)),a[C+1]=function XI(a,o){return 131071&a|o<<17}(a[C+1],d)}else a[d+1]=xp(C,0),0!==C&&(a[C+1]=Xm(a[C+1],d)),C=d;else a[d+1]=xp(D,0),0===C?C=d:a[D+1]=Xm(a[D+1],d),D=d;x&&(a[d+1]=Rp(a[d+1])),G0(a,N,d,!0),G0(a,N,d,!1),function JC(a,o,c,d,f){const m=f?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof o&&Do(m,o)>=0&&(c[d+1]=Op(c[d+1]))}(o,N,a,d,m),v=xp(C,D),m?o.classBindings=v:o.styleBindings=v}(f,m,o,c,v,d)}}(m,a,v,d),o!==Qt&&$i(f,v,o)&&function nD(a,o,c,d,f,m,v,C){if(!(3&o.type))return;const D=a.data,x=D[C+1];zu(function f0(a){return 1==(1&a)}(x)?rD(D,o,c,f,qa(x),v):void 0)||(zu(m)||function Jm(a){return 2==(2&a)}(x)&&(m=rD(D,null,c,f,C,v)),function Fm(a,o,c,d,f){if(o)f?a.addClass(c,d):a.removeClass(c,d);else{let m=-1===d.indexOf("-")?void 0:Ao.DashCase;null==f?a.removeStyle(c,d,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Ao.Important),a.setStyle(c,d,f,m))}}(d,v,Ji(Ar(),c),f,m))}(m,m.data[Ar()],f,f[11],a,f[v+1]=function kR(a,o){return null==a||("string"==typeof o?a+=o:"object"==typeof a&&(a=ee(vi(a)))),a}(o,c),d,v)}(a,o,null,!0),Z0}function Q0(a,o,c,d,f){let m=null;const v=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<v&&(m=o[C],d=Xp(d,m.hostAttrs,f),m!==a);)C++;return null!==a&&(c.directiveStylingLast=C),d}function Xp(a,o,c){const d=c?1:2;let f=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?f=v:f===d&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),pn(a,v,!!c||o[++m]))}return void 0===a?null:a}function rD(a,o,c,d,f,m){const v=null===o;let C;for(;f>0;){const D=a[f],x=Array.isArray(D),N=x?D[1]:D,V=null===N;let te=c[f+1];te===Qt&&(te=V?Lt:void 0);let pe=V?Ou(te,d):N===d?te:void 0;if(x&&!zu(pe)&&(pe=Ou(D,d)),zu(pe)&&(C=pe,v))return C;const Fe=a[f+1];f=v?xo(Fe):qa(Fe)}if(null!==o){let D=m?o.residualClasses:o.residualStyles;null!=D&&(C=Ou(D,d))}return C}function zu(a){return void 0!==a}function Cy(a,o=""){const c=Ue(),d=nn(),f=a+22,m=d.firstCreatePass?za(d,f,1,o,null):d.data[f],v=c[f]=function mp(a,o){return a.createText(o)}(c[11],o);qc(d,c,v,m),Xi(m,!1)}function wd(a){return Dy("",a,""),wd}function Dy(a,o,c){const d=Ue(),f=function Wp(a,o,c,d){return $i(a,Wo(),c)?o+Ie(c)+d:Qt}(d,a,o,c);return f!==Qt&&function qu(a,o,c){const d=Ji(o,a);!function yp(a,o,c){a.setValue(o,c)}(a[11],d,c)}(d,Ar(),f),Dy}const Yh=void 0;var zR=["en",[["a","p"],["AM","PM"],Yh],[["AM","PM"],Yh,Yh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yh,"{1} 'at' {0}",Yh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ig(a){const c=Math.floor(Math.abs(a)),d=a.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Jh={};function sg(a){const o=function ZR(a){return a.toLowerCase().replace(/_/g,"-")}(a);let c=cD(o);if(c)return c;const d=o.split("-")[0];if(c=cD(d),c)return c;if("en"===d)return zR;throw new Ee(701,!1)}function el(a){return sg(a)[Nt.PluralCase]}function cD(a){return a in Jh||(Jh[a]=un.ng&&un.ng.common&&un.ng.common.locales&&un.ng.common.locales[a]),Jh[a]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const Xh="en-US";let lD=Xh;function hE(a,o,c,d,f){if(a=G(a),Array.isArray(a))for(let m=0;m<a.length;m++)hE(a[m],o,c,d,f);else{const m=nn(),v=Ue();let C=id(a)?a:G(a.provide),D=II(a);const x=rr(),N=1048575&x.providerIndexes,V=x.directiveStart,te=x.providerIndexes>>20;if(id(a)||!a.multi){const pe=new Eo(D,f,dd),Fe=Uy(C,o,f?N:N+te,V);-1===Fe?(wo(Jo(x,v),m,C),Vy(m,a,o.length),o.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),c.push(pe),v.push(pe)):(c[Fe]=pe,v[Fe]=pe)}else{const pe=Uy(C,o,N+te,V),Fe=Uy(C,o,N,N+te),He=pe>=0&&c[pe],lt=Fe>=0&&c[Fe];if(f&&!lt||!f&&!He){wo(Jo(x,v),m,C);const pt=function CO(a,o,c,d,f){const m=new Eo(a,c,dd);return m.multi=[],m.index=o,m.componentProviders=0,PD(m,f,d&&!c),m}(f?fE:tl,c.length,f,d,D);!f&&lt&&(c[Fe].providerFactory=pt),Vy(m,a,o.length,0),o.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),c.push(pt),v.push(pt)}else Vy(m,a,pe>-1?pe:Fe,PD(c[f?Fe:pe],D,!f&&d));!f&&d&&lt&&c[Fe].componentProviders++}}}function Vy(a,o,c,d){const f=id(o),m=function Tx(a){return!!a.useClass}(o);if(f||m){const D=(m?G(o.useClass):o).prototype.ngOnDestroy;if(D){const x=a.destroyHooks||(a.destroyHooks=[]);if(!f&&o.multi){const N=x.indexOf(c);-1===N?x.push(c,[d,D]):x[N+1].push(d,D)}else x.push(c,D)}}}function PD(a,o,c){return c&&a.componentProviders++,a.multi.push(o)-1}function Uy(a,o,c,d){for(let f=c;f<d;f++)if(o[f]===a)return f;return-1}function tl(a,o,c,d){return nl(this.multi,[])}function fE(a,o,c,d){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=Zs(c,c[1],this.providerFactory.index,d);m=C.slice(0,v),nl(f,m);for(let D=v;D<C.length;D++)m.push(C[D])}else m=[],nl(f,m);return m}function nl(a,o){for(let c=0;c<a.length;c++)o.push((0,a[c])());return o}function pE(a,o=[]){return c=>{c.providersResolver=(d,f)=>function MD(a,o,c){const d=nn();if(d.firstCreatePass){const f=Hr(a);hE(c,d.data,d.blueprint,f,!0),hE(o,d.data,d.blueprint,f,!1)}}(d,f?f(a):a,o)}}class uf{}class By{}function Id(a,o){return new jy(a,o??null)}class jy extends uf{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Bp(this);const d=On(o);this._bootstrapComponents=Vs(d.bootstrap),this._r3Injector=GI(o,c,[{provide:uf,useValue:this},{provide:ud,useValue:this.componentFactoryResolver}],ee(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class $y extends By{constructor(o){super(),this.moduleType=o}create(o){return new jy(this.moduleType,o)}}class gE extends uf{constructor(o,c,d){super(),this.componentFactoryResolver=new Bp(this),this.instance=null;const f=new wI([...o,{provide:uf,useValue:this},{provide:ud,useValue:this.componentFactoryResolver}],c||$m(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function cf(a,o,c=null){return new gE(a,o,c).injector}let mE=(()=>{class a{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const d=qv(0,c.type),f=d.length>0?cf([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,f)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=tn({token:a,providedIn:"environment",factory:()=>new a($(od))}),a})();function yE(a){a.getStandaloneInjector=o=>o.get(mE).getOrCreateStandaloneInjector(a)}function bE(a,o,c,d){return jD(Ue(),ir(),a,o,c,d)}function jD(a,o,c,d,f,m){const v=o+c;return $i(a,v,f)?function ca(a,o,c){return a[o]=c}(a,v+1,m?d.call(m,f):d(f)):function dg(a,o){const c=a[o];return c===Qt?void 0:c}(a,v+1)}function Ai(a,o){const c=nn();let d;const f=a+22;c.firstCreatePass?(d=function HD(a,o){if(o)for(let c=o.length-1;c>=0;c--){const d=o[c];if(a===d.name)return d}}(o,c.pipeRegistry),c.data[f]=d,d.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(f,d.onDestroy)):d=c.data[f];const m=d.factory||(d.factory=Ss(d.type)),v=qn(dd);try{const C=Du(!1),D=m();return Du(C),function k0(a,o,c,d){c>=a.data.length&&(a.data[c]=null,a.blueprint[c]=null),o[c]=d}(c,Ue(),f,D),D}finally{qn(v)}}function GD(a,o,c){const d=a+22,f=Ue(),m=function Ws(a,o){return a[o]}(f,d);return function rl(a,o){return a[1].data[o].pure}(f,d)?jD(f,ir(),o,m.transform,c,m):m.transform(c)}function AE(a){return o=>{setTimeout(a,void 0,o)}}const Zu=class SE extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,d){let f=o,m=c||(()=>null),v=d;if(o&&"object"==typeof o){const D=o;f=D.next?.bind(D),m=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(m=AE(m),f&&(f=AE(f)),v&&(v=AE(v)));const C=super.subscribe({next:f,error:m,complete:v});return o instanceof z.w0&&o.add(C),C}};function fL(){return this._results[gd()]()}class xE{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=gd(),d=xE.prototype;d[c]||(d[c]=fL)}get changes(){return this._changes||(this._changes=new Zu)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const d=this;d.dirty=!1;const f=tt(o);(this._changesDetected=!function Pc(a,o,c){if(a.length!==o.length)return!1;for(let d=0;d<a.length;d++){let f=a[d],m=o[d];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let df=(()=>{class a{}return a.__NG_ELEMENT_ID__=NO,a})();const pL=df,PO=class extends pL{constructor(o,c,d){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(o,c){const d=this._declarationTContainer.tViews,f=fd(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,null,c||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(d)),b0(d,f,o),new Uh(f)}};function NO(){return Cd(rr(),Ue())}function Cd(a,o){return 4&a.type?new PO(o,a,cd(a,o)):null}let hf=(()=>{class a{}return a.__NG_ELEMENT_ID__=kO,a})();function kO(){return Dd(rr(),Ue())}const RE=hf,hg=class extends RE{constructor(o,c,d){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=d}get element(){return cd(this._hostTNode,this._hostLView)}get injector(){return new ea(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ac(this._hostTNode,this._hostLView);if(rh(o)){const c=Cu(o,this._hostLView),d=Gr(o);return new ea(c[1].data[d+8],c)}return new ea(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=ff(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,c,d){let f,m;"number"==typeof d?f=d:null!=d&&(f=d.index,m=d.injector);const v=o.createEmbeddedView(c||{},m);return this.insert(v,f),v}createComponent(o,c,d,f,m){const v=o&&!function Rs(a){return"function"==typeof a}(o);let C;if(v)C=c;else{const V=c||{};C=V.index,d=V.injector,f=V.projectableNodes,m=V.environmentInjector||V.ngModuleRef}const D=v?o:new jp(ce(o)),x=d||this.parentInjector;if(!m&&null==D.ngModule){const te=(v?x:this.parentInjector).get(od,null);te&&(m=te)}const N=D.create(x,f,void 0,m);return this.insert(N.hostView,C),N}insert(o,c){const d=o._lView,f=d[1];if(function uc(a){return Sr(a[3])}(d)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const V=d[3],te=new hg(V,V[6],V[3]);te.detach(te.indexOf(o))}}const m=this._adjustIndex(c),v=this._lContainer;!function Hc(a,o,c,d){const f=10+d,m=c.length;d>0&&(c[f-1][4]=o),d<m-10?(o[4]=c[f],Nc(c,10+d,o)):(c.push(o),o[4]=null),o[3]=c;const v=o[17];null!==v&&c!==v&&function Rm(a,o){const c=a[9];o[16]!==o[3][3][16]&&(a[2]=!0),null===c?a[9]=[o]:c.push(o)}(v,o);const C=o[19];null!==C&&C.insertView(a),o[2]|=64}(f,d,v,m);const C=wh(m,v),D=d[11],x=ja(D,v[7]);return null!==x&&function Rv(a,o,c,d,f,m){d[0]=f,d[6]=o,ks(a,d,c,1,f,m)}(f,v[6],D,d,x,C),o.attachToViewContainerRef(),Nc(OE(v),m,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=ff(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),d=ed(this._lContainer,c);d&&(na(OE(this._lContainer),c),Ua(d[1],d))}detach(o){const c=this._adjustIndex(o,-1),d=ed(this._lContainer,c);return d&&null!=na(OE(this._lContainer),c)?new Uh(d):null}_adjustIndex(o,c=0){return o??this.length+c}};function ff(a){return a[8]}function OE(a){return a[8]||(a[8]=[])}function Dd(a,o){let c;const d=o[a.index];if(Sr(d))c=d;else{let f;if(8&a.type)f=nr(d);else{const m=o[11];f=m.createComment("");const v=pi(a,o);Ba(m,ja(m,v),f,function Nm(a,o){return a.nextSibling(o)}(m,v),!1)}o[a.index]=c=T0(d,o,f,a),Vp(o,c)}return new hg(c,a,o)}class ME{constructor(o){this.queryList=o,this.matches=null}clone(){return new ME(this.queryList)}setDirty(){this.queryList.setDirty()}}class zy{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const d=null!==o.contentQueries?o.contentQueries[0]:c.length,f=[];for(let m=0;m<d;m++){const v=c.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new zy(f)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==Zy(o,c).matches&&this.queries[c].setDirty()}}class KD{constructor(o,c,d=null){this.predicate=o,this.flags=c,this.read=d}}class PE{constructor(o=[]){this.queries=o}elementStart(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,m=this.getByIndex(d).embeddedTView(o,f);m&&(m.indexInDeclarationView=d,null!==c?c.push(m):c=[m])}return null!==c?new PE(c):null}template(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Xa{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new Xa(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(o,c,LO(c,m)),this.matchTNodeWithReadOption(o,c,xa(c,o,m,!1,!1))}else d===df?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,xa(c,o,d,!1,!1))}matchTNodeWithReadOption(o,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Hm||f===hf||f===df&&4&c.type)this.addMatch(c.index,-2);else{const m=xa(c,o,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,d)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function LO(a,o){const c=a.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===o)return c[d+1];return null}function QD(a,o,c,d){return-1===c?function ZD(a,o){return 11&a.type?cd(a,o):4&a.type?Cd(a,o):null}(o,a):-2===c?function NE(a,o,c){return c===Hm?cd(o,a):c===df?Cd(o,a):c===hf?Dd(o,a):void 0}(a,o,d):Zs(a,a[1],c,o)}function kE(a,o,c,d){const f=o[19].queries[d];if(null===f.matches){const m=a.data,v=c.matches,C=[];for(let D=0;D<v.length;D+=2){const x=v[D];C.push(x<0?null:QD(o,m[x],v[D+1],c.metadata.read))}f.matches=C}return f.matches}function Ky(a,o,c,d){const f=a.queries.getByIndex(c),m=f.matches;if(null!==m){const v=kE(a,o,f,c);for(let C=0;C<m.length;C+=2){const D=m[C];if(D>0)d.push(v[C/2]);else{const x=m[C+1],N=o[-D];for(let V=10;V<N.length;V++){const te=N[V];te[17]===te[3]&&Ky(te[1],te,x,d)}if(null!==N[9]){const V=N[9];for(let te=0;te<V.length;te++){const pe=V[te];Ky(pe[1],pe,x,d)}}}}}return d}function FE(a){const o=Ue(),c=nn(),d=Dl();wu(d+1);const f=Zy(c,d);if(a.dirty&&function ac(a){return 4==(4&a[2])}(o)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const m=f.crossesNgTemplate?Ky(c,o,d,[]):kE(c,o,f,d);a.reset(m,Ox),a.notifyOnChanges()}return!0}return!1}function LE(a,o,c,d){const f=nn();if(f.firstCreatePass){const m=rr();(function UE(a,o,c){null===a.queries&&(a.queries=new PE),a.queries.track(new Xa(o,c))})(f,new KD(o,c,d),m.index),function mL(a,o){const c=a.contentQueries||(a.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(a.queries.length-1,o)}(f,a),2==(2&c)&&(f.staticContentQueries=!0)}!function VE(a,o,c){const d=new xE(4==(4&c));C0(a,o,d,d.destroy),null===o[19]&&(o[19]=new zy),o[19].queries.push(new ME(d))}(f,Ue(),c)}function JD(){return function VO(a,o){return a[19].queries[o].queryList}(Ue(),Dl())}function Zy(a,o){return a.queries.getByIndex(o)}function Ad(...a){}const XE=new jn("Application Initializer");let xd=(()=>{class a{constructor(c){this.appInits=c,this.resolve=Ad,this.reject=Ad,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(gy(m))c.push(m);else if(my(m)){const v=new Promise((C,D)=>{m.subscribe({complete:C,error:D})});c.push(v)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return a.\u0275fac=function(c){return new(c||a)($(XE,8))},a.\u0275prov=tn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const ew=new jn("AppId",{providedIn:"root",factory:function pT(){return`${tw()}${tw()}${tw()}`}});function tw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gT=new jn("Platform Initializer"),gf=new jn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),mT=new jn("appBootstrapListener");let WO=(()=>{class a{log(c){console.log(c)}warn(c){console.warn(c)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=tn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const nw=new jn("LocaleId",{providedIn:"root",factory:()=>me(nw,ht.Optional|ht.SkipSelf)||function mg(){return typeof $localize<"u"&&$localize.locale||Xh}()}),zO=new jn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ZO{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let QO=(()=>{class a{compileModuleSync(c){return new $y(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=Vs(On(c).declarations).reduce((v,C)=>{const D=ce(C);return D&&v.push(new jp(D)),v},[]);return new ZO(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=tn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const JO=(()=>Promise.resolve(0))();function r_(a){typeof Zone>"u"?JO.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Us{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zu(!1),this.onMicrotaskEmpty=new Zu(!1),this.onStable=new Zu(!1),this.onError=new Zu(!1),typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function wT(){let a=un.requestAnimationFrame,o=un.cancelAnimationFrame;if(typeof Zone<"u"&&a&&o){const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function AL(a){const o=()=>{!function SL(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(un,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,bT(a),a.isCheckStableRunning=!0,rw(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),bT(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,m,v,C)=>{try{return IT(a),c.invokeTask(f,m,v,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&o(),CT(a)}},onInvoke:(c,d,f,m,v,C,D)=>{try{return IT(a),c.invoke(f,m,v,C,D)}finally{a.shouldCoalesceRunChangeDetection&&o(),CT(a)}},onHasTask:(c,d,f,m)=>{c.hasTask(f,m),d===f&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,bT(a),rw(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,d,f,m)=>(c.handleError(f,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Us.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(Us.isInAngularZone())throw new Ee(909,!1)}run(o,c,d){return this._inner.run(o,c,d)}runTask(o,c,d,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,o,XO,Ad,Ad);try{return m.runTask(v,c,d)}finally{m.cancelTask(v)}}runGuarded(o,c,d){return this._inner.runGuarded(o,c,d)}runOutsideAngular(o){return this._outer.run(o)}}const XO={};function rw(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function bT(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function IT(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function CT(a){a._nesting--,rw(a)}class xL{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zu,this.onMicrotaskEmpty=new Zu,this.onStable=new Zu,this.onError=new Zu}run(o,c,d){return o.apply(c,d)}runGuarded(o,c,d){return o.apply(c,d)}runOutsideAngular(o){return o()}runTask(o,c,d,f){return o.apply(c,d)}}const iw=new jn(""),sw=new jn("");let i_,eM=(()=>{class a{constructor(c,d,f){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,i_||(function tM(a){i_=a}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Us.assertNotInAngularZone(),r_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())r_(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}}return a.\u0275fac=function(c){return new(c||a)($(Us),$(DT),$(sw))},a.\u0275prov=tn({token:a,factory:a.\u0275fac}),a})(),DT=(()=>{class a{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return i_?.findTestabilityInTree(this,c,d)??null}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=tn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),Qu=null;const fa=new jn("AllowMultipleToken"),s_=new jn("PlatformDestroyListeners");class AT{constructor(o,c){this.name=o,this.token=c}}function MT(a,o,c=[]){const d=`Platform: ${o}`,f=new jn(d);return(m=[])=>{let v=ow();if(!v||v.injector.get(fa,!1)){const C=[...c,...m,{provide:f,useValue:!0}];a?a(C):function xT(a){if(Qu&&!Qu.get(fa,!1))throw new Ee(400,!1);Qu=a;const o=a.get(PT);(function OT(a){const o=a.get(gT,null);o&&o.forEach(c=>c())})(a)}(function o_(a=[],o){return ld.create({name:o,providers:[{provide:Wv,useValue:"platform"},{provide:s_,useValue:new Set([()=>Qu=null])},...a]})}(C,d))}return function nM(a){const o=ow();if(!o)throw new Ee(401,!1);return o}()}}function ow(){return Qu?.get(PT)??null}let PT=(()=>{class a{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function kT(a,o){let c;return c="noop"===a?new xL:("zone.js"===a?void 0:a)||new Us(o),c}(d?.ngZone,function NT(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(d)),m=[{provide:Us,useValue:f}];return f.run(()=>{const v=ld.create({providers:m,parent:this.injector,name:c.moduleType.name}),C=c.create(v),D=C.injector.get(Sp,null);if(!D)throw new Ee(402,!1);return f.runOutsideAngular(()=>{const x=f.onError.subscribe({next:N=>{D.handleError(N)}});C.onDestroy(()=>{u_(this._modules,C),x.unsubscribe()})}),function FT(a,o,c){try{const d=c();return gy(d)?d.catch(f=>{throw o.runOutsideAngular(()=>a.handleError(f)),f}):d}catch(d){throw o.runOutsideAngular(()=>a.handleError(d)),d}}(D,f,()=>{const x=C.injector.get(xd);return x.runInitializers(),x.donePromise.then(()=>(function dD(a){Kt(a,"Expected localeId to be defined"),"string"==typeof a&&(lD=a.toLowerCase().replace(/_/g,"-"))}(C.injector.get(nw,Xh)||Xh),this._moduleDoBootstrap(C),C))})})}bootstrapModule(c,d=[]){const f=LT({},d);return function TT(a,o,c){const d=new $y(c);return Promise.resolve(d)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(a_);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new Ee(403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ee(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(s_,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(c){return new(c||a)($(ld))},a.\u0275prov=tn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function LT(a,o){return Array.isArray(o)?o.reduce(LT,a):{...a,...o}}let a_=(()=>{class a{constructor(c,d,f){this._zone=c,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new F.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new F.y(C=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Us.assertNotInAngularZone(),r_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Us.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{D.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ne.T)(m,v.pipe((0,q.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const f=c instanceof AI;if(!this._injector.get(xd).done)throw!f&&dn(c),new Ee(405,false);let v;v=f?c:this._injector.get(ud).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const C=function RL(a){return a.isBoundToModule}(v)?void 0:this._injector.get(uf),x=v.create(ld.NULL,[],d||v.selector,C),N=x.location.nativeElement,V=x.injector.get(iw,null);return V?.registerApplication(N),x.onDestroy(()=>{this.detachView(x.hostView),u_(this.components,x),V?.unregisterApplication(N)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Ee(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;u_(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(mT,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>u_(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Ee(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(c){return new(c||a)($(Us),$(od),$(Sp))},a.\u0275prov=tn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function u_(a,o){const c=a.indexOf(o);c>-1&&a.splice(c,1)}let UT=!0,BT=!1;function jT(){return BT=!0,UT}function $T(){if(BT)throw new Error("Cannot enable prod mode after platform setup.");UT=!1}let iM=(()=>{class a{}return a.__NG_ELEMENT_ID__=sM,a})();function sM(a){return function oM(a,o,c){if(jo(a)&&!c){const d=mn(a.index,o);return new Uh(d,d)}return 47&a.type?new Uh(o[16],o):null}(rr(),Ue(),16==(16&a))}class dM{constructor(){}supports(o){return Hp(o)}create(o){return new FL(o)}}const kL=(a,o)=>o;class FL{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||kL}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,d=this._removalsHead,f=0,m=null;for(;c||d;){const v=!d||c&&c.currentIndex<fM(d,f,m)?c:d,C=fM(v,f,m),D=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(c=c._next,null==v.previousIndex)f++;else{m||(m=[]);const x=C-f,N=D-f;if(x!=N){for(let te=0;te<x;te++){const pe=te<m.length?m[te]:m[te]=0,Fe=pe+te;N<=Fe&&Fe<x&&(m[te]=pe+1)}m[v.previousIndex]=N-x}}C!==D&&o(v,C,D)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!Hp(o))throw new Ee(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let f,m,v,c=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)m=o[C],v=this._trackByFn(C,m),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,m,v,C)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,v,C),d=!0),c=c._next}else f=0,function eL(a,o){if(Array.isArray(a))for(let c=0;c<a.length;c++)o(a[c]);else{const c=a[gd()]();let d;for(;!(d=c.next()).done;)o(d.value)}}(o,C=>{v=this._trackByFn(f,C),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,C,v,f)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,v,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,d,f){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,m,f)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,m,f)):o=this._addAfter(new LL(c,d),m,f),o}_verifyReinsertion(o,c,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?o=this._reinsertAfter(m,o._prev,f):o.currentIndex!=f&&(o.currentIndex=f,this._addToMoves(o,f)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const f=o._prevRemoved,m=o._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(o,c,d),this._addToMoves(o,d),o}_moveAfter(o,c,d){return this._unlink(o),this._insertAfter(o,c,d),this._addToMoves(o,d),o}_addAfter(o,c,d){return this._insertAfter(o,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,d){const f=null===c?this._itHead:c._next;return o._next=f,o._prev=c,null===f?this._itTail=o:f._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new hM),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,d=o._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hM),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class LL{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VL{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const c=o._prevDup,d=o._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class hM{constructor(){this.map=new Map}put(o){const c=o.trackById;let d=this.map.get(c);d||(d=new VL,this.map.set(c,d)),d.add(o)}get(o,c){const f=this.map.get(o);return f?f.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fM(a,o,c){const d=a.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+o+f}class pM{constructor(){}supports(o){return o instanceof Map||MC(o)}create(){return new gM}}class gM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||MC(o)))throw new Ee(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const d=o._prev;return c._next=o,c._prev=d,o._prev=c,d&&(d._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const f=this._records.get(o);this._maybeAddToChanges(f,c);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const d=new mM(o);return this._records.set(o,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(d=>c(o[d],d))}}class mM{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uw(){return new wg([new dM])}let wg=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||uw()),deps:[[a,new Ln,new or]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new Ee(901,!1)}}return a.\u0275prov=tn({token:a,providedIn:"root",factory:uw}),a})();function cw(){return new lw([new pM])}let lw=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||cw()),deps:[[a,new Ln,new or]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new Ee(901,!1)}}return a.\u0275prov=tn({token:a,providedIn:"root",factory:cw}),a})();const _M=MT(null,"core",[]);let KT=(()=>{class a{constructor(c){}}return a.\u0275fac=function(c){return new(c||a)($(a_))},a.\u0275mod=zt({type:a}),a.\u0275inj=Gt({}),a})();function UL(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}},3942:(ae,Z,R)=>{R.d(Z,{Z:()=>Ee});var h=R(2090),z=R(4859),F=R(9681),ne=R(1877);class q{constructor(Ie,he){this._delegate=Ie,this.firebase=he,(0,F._addComponent)(Ie,new z.wA("app-compat",()=>this,"PUBLIC")),this.container=Ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this._delegate.automaticDataCollectionEnabled=Ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ie=>{this._delegate.checkDestroyed(),Ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Ie,he=F._DEFAULT_ENTRY_NAME){var Ze;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(Ie);return!Ye.isInitialized()&&"EXPLICIT"===(null===(Ze=Ye.getComponent())||void 0===Ze?void 0:Ze.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:he})}_removeServiceInstance(Ie,he=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ie).clearInstance(he)}_addComponent(Ie){(0,F._addComponent)(this._delegate,Ie)}_addOrOverwriteComponent(Ie){(0,F._addOrOverwriteComponent)(this._delegate,Ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const X=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function K(){const Qe=function ee(Qe){const Ie={},he={__esModule:!0,initializeApp:function Me(nt,Q={}){const Oe=F.initializeApp(nt,Q);if((0,h.r3)(Ie,Oe.name))return Ie[Oe.name];const se=new Qe(Oe,he);return Ie[Oe.name]=se,se},app:Ye,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Pe(nt){const Q=nt.name,Oe=Q.replace("-compat","");if(F._registerComponent(nt)&&"PUBLIC"===nt.type){const se=(de=Ye())=>{if("function"!=typeof de[Oe])throw X.create("invalid-app-argument",{appName:Q});return de[Oe]()};void 0!==nt.serviceProps&&(0,h.ZB)(se,nt.serviceProps),he[Oe]=se,Qe.prototype[Oe]=function(...de){return this._getService.bind(this,Q).apply(this,nt.multipleInstances?de:[])}}return"PUBLIC"===nt.type?he[Oe]:null},removeApp:function Ze(nt){delete Ie[nt]},useAsService:function We(nt,Q){return"serverAuth"===Q?null:Q},modularAPIs:F}};function Ye(nt){if(!(0,h.r3)(Ie,nt=nt||F._DEFAULT_ENTRY_NAME))throw X.create("no-app",{appName:nt});return Ie[nt]}return he.default=he,Object.defineProperty(he,"apps",{get:function De(){return Object.keys(Ie).map(nt=>Ie[nt])}}),Ye.App=Qe,he}(q);return Qe.INTERNAL=Object.assign(Object.assign({},Qe.INTERNAL),{createFirebaseNamespace:K,extendNamespace:function Ie(he){(0,h.ZB)(Qe,he)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Qe}(),j=new ne.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qe=self.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ee=B;!function Te(Qe){(0,F.registerVersion)("@firebase/app-compat","0.2.0",Qe)}()},9681:(ae,Z,R)=>{R.r(Z),R.d(Z,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Wi,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>an,_addOrOverwriteComponent:()=>tn,_apps:()=>wn,_clearComponents:()=>li,_components:()=>xn,_getProvider:()=>Gt,_registerComponent:()=>Lr,_removeServiceInstance:()=>bn,deleteApp:()=>po,getApp:()=>Br,getApps:()=>di,initializeApp:()=>Pi,onLog:()=>us,registerVersion:()=>vr,setLogLevel:()=>qn});var h=R(5861),z=R(4859),F=R(1877),ne=R(2090),q=R(8766);class re{constructor(Ve){this.container=Ve}getPlatformInfoString(){return this.container.getProviders().map(_t=>{if(function X(bt){return"VERSION"===bt.getComponent()?.type}(_t)){const Ut=_t.getImmediate();return`${Ut.library}/${Ut.version}`}return null}).filter(_t=>_t).join(" ")}}const ee="@firebase/app",K="0.9.0",B=new F.Yd("@firebase/app"),Kt="[DEFAULT]",dt={[ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wn=new Map,xn=new Map;function an(bt,Ve){try{bt.container.addComponent(Ve)}catch(_t){B.debug(`Component ${Ve.name} failed to register with FirebaseApp ${bt.name}`,_t)}}function tn(bt,Ve){bt.container.addOrOverwriteComponent(Ve)}function Lr(bt){const Ve=bt.name;if(xn.has(Ve))return B.debug(`There were multiple attempts to register component ${Ve}.`),!1;xn.set(Ve,bt);for(const _t of wn.values())an(_t,bt);return!0}function Gt(bt,Ve){const _t=bt.container.getProvider("heartbeat").getImmediate({optional:!0});return _t&&_t.triggerHeartbeat(),bt.container.getProvider(Ve)}function bn(bt,Ve,_t=Kt){Gt(bt,Ve).clearInstance(_t)}function li(){xn.clear()}const Tr=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ur{constructor(Ve,_t,Ut){this._isDeleted=!1,this._options=Object.assign({},Ve),this._config=Object.assign({},_t),this._name=_t.name,this._automaticDataCollectionEnabled=_t.automaticDataCollectionEnabled,this._container=Ut,this.container.addComponent(new z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ve){this._isDeleted=Ve}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const Wi="9.15.0";function Pi(bt,Ve={}){let _t=bt;"object"!=typeof Ve&&(Ve={name:Ve});const Ut=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},Ve),jt=Ut.name;if("string"!=typeof jt||!jt)throw Tr.create("bad-app-name",{appName:String(jt)});if(_t||(_t=(0,ne.aH)()),!_t)throw Tr.create("no-options");const zt=wn.get(jt);if(zt){if((0,ne.vZ)(_t,zt.options)&&(0,ne.vZ)(Ut,zt.config))return zt;throw Tr.create("duplicate-app",{appName:jt})}const J=new z.H0(jt);for(const oe of xn.values())J.addComponent(oe);const W=new Ur(_t,Ut,J);return wn.set(jt,W),W}function Br(bt=Kt){const Ve=wn.get(bt);if(!Ve&&bt===Kt)return Pi();if(!Ve)throw Tr.create("no-app",{appName:bt});return Ve}function di(){return Array.from(wn.values())}function po(bt){return ht.apply(this,arguments)}function ht(){return(ht=(0,h.Z)(function*(bt){const Ve=bt.name;wn.has(Ve)&&(wn.delete(Ve),yield Promise.all(bt.container.getProviders().map(_t=>_t.delete())),bt.isDeleted=!0)})).apply(this,arguments)}function vr(bt,Ve,_t){var Ut;let jt=null!==(Ut=dt[bt])&&void 0!==Ut?Ut:bt;_t&&(jt+=`-${_t}`);const zt=jt.match(/\s|\//),J=Ve.match(/\s|\//);if(zt||J){const W=[`Unable to register library "${jt}" with version "${Ve}":`];return zt&&W.push(`library name "${jt}" contains illegal characters (whitespace or "/")`),zt&&J&&W.push("and"),J&&W.push(`version name "${Ve}" contains illegal characters (whitespace or "/")`),void B.warn(W.join(" "))}Lr(new z.wA(`${jt}-version`,()=>({library:jt,version:Ve}),"VERSION"))}function us(bt,Ve){if(null!==bt&&"function"!=typeof bt)throw Tr.create("invalid-log-argument");(0,F.Am)(bt,Ve)}function qn(bt){(0,F.Ub)(bt)}const zn="firebase-heartbeat-store";let Kn=null;function Rn(){return Kn||(Kn=(0,q.X3)("firebase-heartbeat-database",1,{upgrade:(bt,Ve)=>{0===Ve&&bt.createObjectStore(zn)}}).catch(bt=>{throw Tr.create("idb-open",{originalErrorMessage:bt.message})})),Kn}function Ct(){return(Ct=(0,h.Z)(function*(bt){try{return(yield Rn()).transaction(zn).objectStore(zn).get(Zn(bt))}catch(Ve){if(Ve instanceof ne.ZR)B.warn(Ve.message);else{const _t=Tr.create("idb-get",{originalErrorMessage:Ve?.message});B.warn(_t.message)}}})).apply(this,arguments)}function un(bt,Ve){return Er.apply(this,arguments)}function Er(){return(Er=(0,h.Z)(function*(bt,Ve){try{const Ut=(yield Rn()).transaction(zn,"readwrite");return yield Ut.objectStore(zn).put(Ve,Zn(bt)),Ut.done}catch(_t){if(_t instanceof ne.ZR)B.warn(_t.message);else{const Ut=Tr.create("idb-set",{originalErrorMessage:_t?.message});B.warn(Ut.message)}}})).apply(this,arguments)}function Zn(bt){return`${bt.name}!${bt.options.appId}`}class zi{constructor(Ve){this.container=Ve,this._heartbeatsCache=null;const _t=this.container.getProvider("app").getImmediate();this._storage=new vn(_t),this._heartbeatsCachePromise=this._storage.read().then(Ut=>(this._heartbeatsCache=Ut,Ut))}triggerHeartbeat(){var Ve=this;return(0,h.Z)(function*(){const Ut=Ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jt=ln();if(null===Ve._heartbeatsCache&&(Ve._heartbeatsCache=yield Ve._heartbeatsCachePromise),Ve._heartbeatsCache.lastSentHeartbeatDate!==jt&&!Ve._heartbeatsCache.heartbeats.some(zt=>zt.date===jt))return Ve._heartbeatsCache.heartbeats.push({date:jt,agent:Ut}),Ve._heartbeatsCache.heartbeats=Ve._heartbeatsCache.heartbeats.filter(zt=>{const J=new Date(zt.date).valueOf();return Date.now()-J<=2592e6}),Ve._storage.overwrite(Ve._heartbeatsCache)})()}getHeartbeatsHeader(){var Ve=this;return(0,h.Z)(function*(){if(null===Ve._heartbeatsCache&&(yield Ve._heartbeatsCachePromise),null===Ve._heartbeatsCache||0===Ve._heartbeatsCache.heartbeats.length)return"";const _t=ln(),{heartbeatsToSend:Ut,unsentEntries:jt}=function Ni(bt,Ve=1024){const _t=[];let Ut=bt.slice();for(const jt of bt){const zt=_t.find(J=>J.agent===jt.agent);if(zt){if(zt.dates.push(jt.date),lr(_t)>Ve){zt.dates.pop();break}}else if(_t.push({agent:jt.agent,dates:[jt.date]}),lr(_t)>Ve){_t.pop();break}Ut=Ut.slice(1)}return{heartbeatsToSend:_t,unsentEntries:Ut}}(Ve._heartbeatsCache.heartbeats),zt=(0,ne.L)(JSON.stringify({version:2,heartbeats:Ut}));return Ve._heartbeatsCache.lastSentHeartbeatDate=_t,jt.length>0?(Ve._heartbeatsCache.heartbeats=jt,yield Ve._storage.overwrite(Ve._heartbeatsCache)):(Ve._heartbeatsCache.heartbeats=[],Ve._storage.overwrite(Ve._heartbeatsCache)),zt})()}}function ln(){return(new Date).toISOString().substring(0,10)}class vn{constructor(Ve){this.app=Ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ve=this;return(0,h.Z)(function*(){return(yield Ve._canUseIndexedDBPromise)&&(yield function Rt(bt){return Ct.apply(this,arguments)}(Ve.app))||{heartbeats:[]}})()}overwrite(Ve){var _t=this;return(0,h.Z)(function*(){var Ut;if(yield _t._canUseIndexedDBPromise){const zt=yield _t.read();return un(_t.app,{lastSentHeartbeatDate:null!==(Ut=Ve.lastSentHeartbeatDate)&&void 0!==Ut?Ut:zt.lastSentHeartbeatDate,heartbeats:Ve.heartbeats})}})()}add(Ve){var _t=this;return(0,h.Z)(function*(){var Ut;if(yield _t._canUseIndexedDBPromise){const zt=yield _t.read();return un(_t.app,{lastSentHeartbeatDate:null!==(Ut=Ve.lastSentHeartbeatDate)&&void 0!==Ut?Ut:zt.lastSentHeartbeatDate,heartbeats:[...zt.heartbeats,...Ve.heartbeats]})}})()}}function lr(bt){return(0,ne.L)(JSON.stringify({version:2,heartbeats:bt})).length}!function $r(bt){Lr(new z.wA("platform-logger",Ve=>new re(Ve),"PRIVATE")),Lr(new z.wA("heartbeat",Ve=>new zi(Ve),"PRIVATE")),vr(ee,K,bt),vr(ee,K,"esm2017"),vr("fire-js","")}("")},4859:(ae,Z,R)=>{R.d(Z,{H0:()=>ee,wA:()=>F,zt:()=>q});var h=R(5861),z=R(2090);class F{constructor(B,j,G){this.name=B,this.instanceFactory=j,this.type=G,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ne="[DEFAULT]";class q{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const G=new z.BH;if(this.instancesDeferred.set(j,G),this.isInitialized(j)||this.shouldAutoInitialize())try{const we=this.getOrInitializeService({instanceIdentifier:j});we&&G.resolve(we)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const G=this.normalizeInstanceIdentifier(B?.identifier),we=null!==(j=B?.optional)&&void 0!==j&&j;if(!this.isInitialized(G)&&!this.shouldAutoInitialize()){if(we)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:G})}catch(Te){if(we)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function X(K){return"EAGER"===K.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[j,G]of this.instancesDeferred.entries()){const we=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:we});G.resolve(Te)}catch{}}}}clearInstance(B=ne){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,h.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(G=>"INTERNAL"in G).map(G=>G.INTERNAL.delete()),...j.filter(G=>"_delete"in G).map(G=>G._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ne){return this.instances.has(B)}getOptions(B=ne){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,G=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(G))throw Error(`${this.name}(${G}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const we=this.getOrInitializeService({instanceIdentifier:G,options:j});for(const[Te,Ee]of this.instancesDeferred.entries())G===this.normalizeInstanceIdentifier(Te)&&Ee.resolve(we);return we}onInit(B,j){var G;const we=this.normalizeInstanceIdentifier(j),Te=null!==(G=this.onInitCallbacks.get(we))&&void 0!==G?G:new Set;Te.add(B),this.onInitCallbacks.set(we,Te);const Ee=this.instances.get(we);return Ee&&B(Ee,we),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,j){const G=this.onInitCallbacks.get(j);if(G)for(const we of G)try{we(B,j)}catch{}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let G=this.instances.get(B);if(!G&&this.component&&(G=this.component.instanceFactory(this.container,{instanceIdentifier:(K=B,K===ne?void 0:K),options:j}),this.instances.set(B,G),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(G,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,G)}catch{}var K;return G||null}normalizeInstanceIdentifier(B=ne){return this.component?this.component.multipleInstances?B:ne:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new q(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(ae,Z,R)=>{R.d(Z,{Am:()=>K,Ub:()=>ee,Yd:()=>X,in:()=>z});const h=[];var z=(()=>{return(B=z||(z={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",z;var B})();const F={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},ne=z.INFO,q={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},re=(B,j,...G)=>{if(j<B.logLevel)return;const we=(new Date).toISOString(),Te=q[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${we}]  ${B.name}:`,...G)};class X{constructor(j){this.name=j,this._logLevel=ne,this._logHandler=re,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in z))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?F[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...j),this._logHandler(this,z.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...j),this._logHandler(this,z.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,z.INFO,...j),this._logHandler(this,z.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,z.WARN,...j),this._logHandler(this,z.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...j),this._logHandler(this,z.ERROR,...j)}}function ee(B){h.forEach(j=>{j.setLogLevel(B)})}function K(B,j){for(const G of h){let we=null;j&&j.level&&(we=F[j.level]),G.userLogHandler=null===B?null:(Te,Ee,...Qe)=>{const Ie=Qe.map(he=>{if(null==he)return null;if("string"==typeof he)return he;if("number"==typeof he||"boolean"==typeof he)return he.toString();if(he instanceof Error)return he.message;try{return JSON.stringify(he)}catch{return null}}).filter(he=>he).join(" ");Ee>=(we??Te.logLevel)&&B({level:z[Ee].toLowerCase(),message:Ie,args:Qe,type:Te.name})}}}},825:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4650),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9653),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(515),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9751),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6451),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(233),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4707),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1749),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2722),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5684),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5363),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1365),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5026);const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(Z,R){if(this.action=Z,this.timestamp=R,this.type=PERFORM_ACTION,typeof Z.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(Z){this.timestamp=Z,this.type=RESET}}class Rollback{constructor(Z){this.timestamp=Z,this.type=ROLLBACK}}class Commit{constructor(Z){this.timestamp=Z,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(Z){this.id=Z,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(Z,R,h=!0){this.start=Z,this.end=R,this.active=h,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(Z){this.index=Z,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(Z){this.actionId=Z,this.type=JUMP_TO_ACTION}}class ImportState{constructor(Z){this.nextLiftedState=Z,this.type=IMPORT_STATE}}class LockChanges{constructor(Z){this.status=Z,this.type=LOCK_CHANGES}}class PauseRecording{constructor(Z){this.status=Z,this.type=PAUSE_RECORDING}}class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(ae){const Z={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},R="function"==typeof ae?ae():ae,F=Object.assign({},Z,{features:R.features||!!R.logOnly&&{pause:!0,export:!0,test:!0}||Z.features},R);if(F.maxAge&&F.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${F.maxAge}`);return F}function difference(ae,Z){return ae.filter(R=>Z.indexOf(R)<0)}function unliftState(ae){const{computedStates:Z,currentStateIndex:R}=ae;if(R>=Z.length){const{state:z}=Z[Z.length-1];return z}const{state:h}=Z[R];return h}function unliftAction(ae){return ae.actionsById[ae.nextActionId-1]}function liftAction(ae){return new PerformAction(ae,+Date.now())}function sanitizeActions(ae,Z){return Object.keys(Z).reduce((R,h)=>{const z=Number(h);return R[z]=sanitizeAction(ae,Z[z],z),R},{})}function sanitizeAction(ae,Z,R){return{...Z,action:ae(Z.action,R)}}function sanitizeStates(ae,Z){return Z.map((R,h)=>({state:sanitizeState(ae,R.state,h),error:R.error}))}function sanitizeState(ae,Z,R){return ae(Z,R)}function shouldFilterActions(ae){return ae.predicate||ae.actionsSafelist||ae.actionsBlocklist}function filterLiftedState(ae,Z,R,h){const z=[],F={},ne=[];return ae.stagedActionIds.forEach((q,re)=>{const X=ae.actionsById[q];!X||re&&isActionFiltered(ae.computedStates[re],X,Z,R,h)||(F[q]=X,z.push(q),ne.push(ae.computedStates[re]))}),{...ae,stagedActionIds:z,actionsById:F,computedStates:ne}}function isActionFiltered(ae,Z,R,h,z){const F=R&&!R(ae,Z.action),ne=h&&!Z.action.type.match(h.map(re=>escapeRegExp(re)).join("|")),q=z&&Z.action.type.match(z.map(re=>escapeRegExp(re)).join("|"));return F||ne||q}function escapeRegExp(ae){return ae.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}let DevtoolsDispatcher=(()=>{class ae extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return ae.\u0275fac=function(){let Z;return function(h){return(Z||(Z=_angular_core__WEBPACK_IMPORTED_MODULE_0__.n5z(ae)))(h||ae)}}(),ae.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(ae,Z,R){this.config=Z,this.dispatcher=R,this.devtoolsExtension=ae,this.createActionStreams()}notify(ae,Z){if(this.devtoolsExtension)if(ae.type===PERFORM_ACTION){if(Z.isLocked||Z.isPaused)return;const R=unliftState(Z);if(shouldFilterActions(this.config)&&isActionFiltered(R,ae,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const h=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,R,Z.currentStateIndex):R,z=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,ae,Z.nextActionId):ae;this.sendToReduxDevtools(()=>this.extensionConnection.send(z,h))}else{const R={...Z,stagedActionIds:Z.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,Z.actionsById):Z.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,Z.computedStates):Z.computedStates};this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,R,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(ae=>{const Z=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=Z,Z.init(),Z.subscribe(R=>ae.next(R)),Z.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const ae=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),Z=ae.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.START)),R=ae.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.STOP)),h=ae.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(q=>this.unwrapAction(q.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(q=>q.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(re=>re.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>q),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(q)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(q))),F=ae.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(q=>this.unwrapAction(q.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(R)),ne=h.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(R));this.start$=Z.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(R)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>F)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>ne))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(ae){const Z={name:ae.name,features:ae.features,serialize:ae.serialize,autoPause:ae.autoPause??!1};return!1!==ae.maxAge&&(Z.maxAge=ae.maxAge),Z}sendToReduxDevtools(ae){try{ae()}catch(Z){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",Z)}}}return DevtoolsExtension.\u0275fac=function ae(Z){return new(Z||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})();const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(ae,Z,R,h,z){if(h)return{state:R,error:"Interrupted by an error up the chain"};let ne,F=R;try{F=ae(R,Z)}catch(q){ne=q.toString(),z.handleError(q)}return{state:F,error:ne}}function recomputeStates(ae,Z,R,h,z,F,ne,q,re){if(Z>=ae.length&&ae.length===F.length)return ae;const X=ae.slice(0,Z),ee=F.length-(re?1:0);for(let K=Z;K<ee;K++){const B=F[K],j=z[B].action,G=X[K-1],we=G?G.state:h,Te=G?G.error:void 0,Qe=ne.indexOf(B)>-1?G:computeNextEntry(R,j,we,Te,q);X.push(Qe)}return re&&X.push(ae[ae.length-1]),X}function liftInitialState(ae,Z){return{monitorState:Z(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:ae,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(ae,Z,R,h,z={}){return F=>(ne,q)=>{let{monitorState:re,actionsById:X,nextActionId:ee,stagedActionIds:K,skippedActionIds:B,committedState:j,currentStateIndex:G,computedStates:we,isLocked:Te,isPaused:Ee}=ne||Z;function Qe(Ze){let Ye=Ze,Me=K.slice(1,Ye+1);for(let De=0;De<Me.length;De++){if(we[De+1].error){Ye=De,Me=K.slice(1,Ye+1);break}delete X[Me[De]]}B=B.filter(De=>-1===Me.indexOf(De)),K=[0,...K.slice(Ye+1)],j=we[Ye].state,we=we.slice(Ye),G=G>Ye?G-Ye:0}function Ie(){X={0:liftAction(INIT_ACTION)},ee=1,K=[0],B=[],j=we[G].state,G=0,we=[]}ne||(X=Object.create(X));let he=0;switch(q.type){case LOCK_CHANGES:Te=q.status,he=1/0;break;case PAUSE_RECORDING:Ee=q.status,Ee?(K=[...K,ee],X[ee]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),ee++,he=K.length-1,we=we.concat(we[we.length-1]),G===K.length-2&&G++,he=1/0):Ie();break;case RESET:X={0:liftAction(INIT_ACTION)},ee=1,K=[0],B=[],j=ae,G=0,we=[];break;case COMMIT:Ie();break;case ROLLBACK:X={0:liftAction(INIT_ACTION)},ee=1,K=[0],B=[],G=0,we=[];break;case TOGGLE_ACTION:{const{id:Ze}=q;B=-1===B.indexOf(Ze)?[Ze,...B]:B.filter(Me=>Me!==Ze),he=K.indexOf(Ze);break}case SET_ACTIONS_ACTIVE:{const{start:Ze,end:Ye,active:Me}=q,De=[];for(let Pe=Ze;Pe<Ye;Pe++)De.push(Pe);B=Me?difference(B,De):[...B,...De],he=K.indexOf(Ze);break}case JUMP_TO_STATE:G=q.index,he=1/0;break;case JUMP_TO_ACTION:{const Ze=K.indexOf(q.actionId);-1!==Ze&&(G=Ze),he=1/0;break}case SWEEP:K=difference(K,B),B=[],G=Math.min(G,K.length-1);break;case PERFORM_ACTION:{if(Te)return ne||Z;if(Ee||ne&&isActionFiltered(ne.computedStates[G],q,z.predicate,z.actionsSafelist,z.actionsBlocklist)){const Ye=we[we.length-1];we=[...we.slice(0,-1),computeNextEntry(F,q.action,Ye.state,Ye.error,R)],he=1/0;break}z.maxAge&&K.length===z.maxAge&&Qe(1),G===K.length-1&&G++;const Ze=ee++;X[Ze]=q,K=[...K,Ze],he=K.length-1;break}case IMPORT_STATE:({monitorState:re,actionsById:X,nextActionId:ee,stagedActionIds:K,skippedActionIds:B,committedState:j,currentStateIndex:G,computedStates:we,isLocked:Te,isPaused:Ee}=q.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:he=0,z.maxAge&&K.length>z.maxAge&&(we=recomputeStates(we,he,F,j,X,K,B,R,Ee),Qe(K.length-z.maxAge),he=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(we.filter(Ye=>Ye.error).length>0)he=0,z.maxAge&&K.length>z.maxAge&&(we=recomputeStates(we,he,F,j,X,K,B,R,Ee),Qe(K.length-z.maxAge),he=1/0);else{if(!Ee&&!Te){G===K.length-1&&G++;const Ye=ee++;X[Ye]=new PerformAction(q,+Date.now()),K=[...K,Ye],he=K.length-1,we=recomputeStates(we,he,F,j,X,K,B,R,Ee)}we=we.map(Ye=>({...Ye,state:F(Ye.state,RECOMPUTE_ACTION)})),G=K.length-1,z.maxAge&&K.length>z.maxAge&&Qe(K.length-z.maxAge),he=1/0}break;default:he=1/0}return we=recomputeStates(we,he,F,j,X,K,B,R,Ee),re=h(re,q),{monitorState:re,actionsById:X,nextActionId:ee,stagedActionIds:K,skippedActionIds:B,committedState:j,currentStateIndex:G,computedStates:we,isLocked:Te,isPaused:Ee}}}let StoreDevtools=(()=>{class ae{constructor(R,h,z,F,ne,q,re,X){const ee=liftInitialState(re,X.monitor),K=liftReducerWith(re,ee,q,X.monitor,X),B=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(h.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),F.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),R,F.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),j=z.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(K)),G=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),we=B.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(j),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:Ie},[he,Ze])=>{let Ye=Ze(Ie,he);return he.type!==PERFORM_ACTION&&shouldFilterActions(X)&&(Ye=filterLiftedState(Ye,X.predicate,X.actionsSafelist,X.actionsBlocklist)),F.notify(he,Ye),{state:Ye,action:he}},{state:ee,action:null})).subscribe(({state:Ie,action:he})=>{G.next(Ie),he.type===PERFORM_ACTION&&ne.next(he.action)}),Te=F.start$.subscribe(()=>{this.refresh()}),Ee=G.asObservable(),Qe=Ee.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=Te,this.stateSubscription=we,this.dispatcher=R,this.liftedState=Ee,this.state=Qe}dispatch(R){this.dispatcher.next(R)}next(R){this.dispatcher.next(R)}error(R){}complete(){}performAction(R){this.dispatch(new PerformAction(R,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(R){this.dispatch(new ToggleAction(R))}jumpToAction(R){this.dispatch(new JumpToAction(R))}jumpToState(R){this.dispatch(new JumpToState(R))}importState(R){this.dispatch(new ImportState(R))}lockChanges(R){this.dispatch(new LockChanges(R))}pauseRecording(R){this.dispatch(new PauseRecording(R))}}return ae.\u0275fac=function(R){return new(R||ae)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_0__.qLn),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG))},ae.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(ae,Z){return Boolean(ae)||Z.monitor!==noMonitor}function createReduxDevtoolsExtension(){const ae="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&typeof window[ae]<"u"?window[ae]:null}function provideStoreDevtools(ae={}){return{\u0275providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:ae},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}function createStateObservable(ae){return ae.state}let StoreDevtoolsModule=(()=>{class ae{static instrument(R={}){return{ngModule:ae,providers:[...provideStoreDevtools(R).\u0275providers]}}}return ae.\u0275fac=function(R){return new(R||ae)},ae.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:ae}),ae.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),ae})()},9653:(ae,Z,R)=>{R.d(Z,{UO:()=>We,qg:()=>Pe,Y6:()=>se,mK:()=>vr,n$:()=>ht,Y$:()=>Xr,FR:()=>Kn,yh:()=>un,CK:()=>Bo,Aw:()=>jo,cr:()=>Sr,wb:()=>us,qC:()=>Br,PH:()=>Te,Lq:()=>Hr,P1:()=>Dt,on:()=>hu,Ky:()=>Ee,Ys:()=>Zn});var h=R(4650),z=R(1135),F=R(9751),ne=R(7579),q=R(233),re=R(5363),X=R(1365),ee=R(5026),K=R(4004),j=R(1884);const G={};function Te(H,be){if(G[H]=(G[H]||0)+1,"function"==typeof be)return Ie(H,(...Ae)=>({...be(...Ae),type:H}));switch(be?be._as:"empty"){case"empty":return Ie(H,()=>({type:H}));case"props":return Ie(H,Ae=>({...Ae,type:H}));default:throw new Error("Unexpected config.")}}function Ee(){return{_as:"props",_p:void 0}}function Ie(H,be){return Object.defineProperty(be,"type",{value:H,writable:!1})}const Pe="@ngrx/store/init";let We=(()=>{class H extends z.X{constructor(){super({type:Pe})}next(le){if("function"==typeof le)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof le>"u")throw new TypeError("Actions must be objects");if(typeof le.type>"u")throw new TypeError("Actions must have a type property");super.next(le)}complete(){}ngOnDestroy(){super.complete()}}return H.\u0275fac=function(le){return new(le||H)},H.\u0275prov=h.Yz7({token:H,factory:H.\u0275fac}),H})();const nt=[We],Q=new h.OlP("@ngrx/store Internal Root Guard"),Oe=new h.OlP("@ngrx/store Internal Initial State"),se=new h.OlP("@ngrx/store Initial State"),de=new h.OlP("@ngrx/store Reducer Factory"),ve=new h.OlP("@ngrx/store Internal Reducer Factory Provider"),ye=new h.OlP("@ngrx/store Initial Reducers"),Ke=new h.OlP("@ngrx/store Internal Initial Reducers"),ze=new h.OlP("@ngrx/store Store Features"),St=new h.OlP("@ngrx/store Internal Store Reducers"),on=new h.OlP("@ngrx/store Internal Feature Reducers"),Kt=new h.OlP("@ngrx/store Internal Feature Configs"),dt=new h.OlP("@ngrx/store Internal Store Features"),wn=new h.OlP("@ngrx/store Internal Feature Reducers Token"),xn=new h.OlP("@ngrx/store Feature Reducers"),an=new h.OlP("@ngrx/store User Provided Meta Reducers"),tn=new h.OlP("@ngrx/store Meta Reducers"),Lr=new h.OlP("@ngrx/store Internal Resolved Meta Reducers"),Gt=new h.OlP("@ngrx/store User Runtime Checks Config"),bn=new h.OlP("@ngrx/store Internal User Runtime Checks Config"),li=new h.OlP("@ngrx/store Internal Runtime Checks"),Vr=new h.OlP("@ngrx/store Check if Action types are unique");function Wi(H,be={}){const le=Object.keys(H),Ae={};for(let qe=0;qe<le.length;qe++){const hn=le[qe];"function"==typeof H[hn]&&(Ae[hn]=H[hn])}const ut=Object.keys(Ae);return function(hn,pr){hn=void 0===hn?be:hn;let In=!1;const ki={};for(let fn=0;fn<ut.length;fn++){const fi=ut[fn],yl=hn[fi],fu=(0,Ae[fi])(yl,pr);ki[fi]=fu,In=In||fu!==yl}return In?ki:hn}}function Br(...H){return function(be){if(0===H.length)return be;const le=H[H.length-1];return H.slice(0,-1).reduceRight((ut,qe)=>qe(ut),le(be))}}function di(H,be){return Array.isArray(be)&&be.length>0&&(H=Br.apply(null,[...be,H])),(le,Ae)=>{const ut=H(le);return(qe,hn)=>ut(qe=void 0===qe?Ae:qe,hn)}}new h.OlP("@ngrx/store Root Store Provider"),new h.OlP("@ngrx/store Feature State Provider");class ht extends F.y{}class vr extends We{}const us="@ngrx/store/update-reducers";let qn=(()=>{class H extends z.X{constructor(le,Ae,ut,qe){super(qe(ut,Ae)),this.dispatcher=le,this.initialState=Ae,this.reducers=ut,this.reducerFactory=qe}get currentReducers(){return this.reducers}addFeature(le){this.addFeatures([le])}addFeatures(le){const Ae=le.reduce((ut,{reducers:qe,reducerFactory:hn,metaReducers:pr,initialState:In,key:ki})=>{const fn="function"==typeof qe?function po(H){const be=Array.isArray(H)&&H.length>0?Br(...H):le=>le;return(le,Ae)=>(le=be(le),(ut,qe)=>le(ut=void 0===ut?Ae:ut,qe))}(pr)(qe,In):di(hn,pr)(qe,In);return ut[ki]=fn,ut},{});this.addReducers(Ae)}removeFeature(le){this.removeFeatures([le])}removeFeatures(le){this.removeReducers(le.map(Ae=>Ae.key))}addReducer(le,Ae){this.addReducers({[le]:Ae})}addReducers(le){this.reducers={...this.reducers,...le},this.updateReducers(Object.keys(le))}removeReducer(le){this.removeReducers([le])}removeReducers(le){le.forEach(Ae=>{this.reducers=function Pi(H,be){return Object.keys(H).filter(le=>le!==be).reduce((le,Ae)=>Object.assign(le,{[Ae]:H[Ae]}),{})}(this.reducers,Ae)}),this.updateReducers(le)}updateReducers(le){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:us,features:le})}ngOnDestroy(){this.complete()}}return H.\u0275fac=function(le){return new(le||H)(h.LFG(vr),h.LFG(se),h.LFG(ye),h.LFG(de))},H.\u0275prov=h.Yz7({token:H,factory:H.\u0275fac}),H})();const Ci=[qn,{provide:ht,useExisting:qn},{provide:vr,useExisting:We}];let Xr=(()=>{class H extends ne.x{ngOnDestroy(){this.complete()}}return H.\u0275fac=function(){let be;return function(Ae){return(be||(be=h.n5z(H)))(Ae||H)}}(),H.\u0275prov=h.Yz7({token:H,factory:H.\u0275fac}),H})();const zn=[Xr];class Kn extends F.y{}let Rn=(()=>{class H extends z.X{constructor(le,Ae,ut,qe){super(qe);const ki=le.pipe((0,re.Q)(q.N)).pipe((0,X.M)(Ae)).pipe((0,ee.R)(Rt,{state:qe}));this.stateSubscription=ki.subscribe(({state:fn,action:fi})=>{this.next(fn),ut.next(fi)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return H.INIT=Pe,H.\u0275fac=function(le){return new(le||H)(h.LFG(We),h.LFG(ht),h.LFG(Xr),h.LFG(se))},H.\u0275prov=h.Yz7({token:H,factory:H.\u0275fac}),H})();function Rt(H={state:void 0},[be,le]){const{state:Ae}=H;return{state:le(Ae,be),action:be}}const Ct=[Rn,{provide:Kn,useExisting:Rn}];let un=(()=>{class H extends F.y{constructor(le,Ae,ut){super(),this.actionsObserver=Ae,this.reducerManager=ut,this.source=le}select(le,...Ae){return Zn.call(null,le,...Ae)(this)}lift(le){const Ae=new H(this,this.actionsObserver,this.reducerManager);return Ae.operator=le,Ae}dispatch(le){this.actionsObserver.next(le)}next(le){this.actionsObserver.next(le)}error(le){this.actionsObserver.error(le)}complete(){this.actionsObserver.complete()}addReducer(le,Ae){this.reducerManager.addReducer(le,Ae)}removeReducer(le){this.reducerManager.removeReducer(le)}}return H.\u0275fac=function(le){return new(le||H)(h.LFG(Kn),h.LFG(We),h.LFG(qn))},H.\u0275prov=h.Yz7({token:H,factory:H.\u0275fac}),H})();const Er=[un];function Zn(H,be,...le){return function(ut){let qe;if("string"==typeof H){const hn=[be,...le].filter(Boolean);qe=ut.pipe(function B(...H){const be=H.length;if(0===be)throw new Error("list of properties cannot be empty.");return(0,K.U)(le=>{let Ae=le;for(let ut=0;ut<be;ut++){const qe=Ae?.[H[ut]];if(!(typeof qe<"u"))return;Ae=qe}return Ae})}(H,...hn))}else{if("function"!=typeof H)throw new TypeError(`Unexpected type '${typeof H}' in select operator, expected 'string' or 'function'`);qe=ut.pipe((0,K.U)(hn=>H(hn,be)))}return qe.pipe((0,j.x)())}}const jr="https://ngrx.io/guide/store/configuration/runtime-checks";function Lt(H){return void 0===H}function zi(H){return null===H}function ln(H){return Array.isArray(H)}function $r(H){return"object"==typeof H&&null!==H}function _t(H){return"function"==typeof H}function oe(H,be){return H===be}function ke(H,be,le){for(let Ae=0;Ae<H.length;Ae++)if(!le(H[Ae],be[Ae]))return!0;return!1}function at(H,be=oe,le=oe){let qe,Ae=null,ut=null;return{memoized:function ki(){if(void 0!==qe)return qe.result;if(!Ae)return ut=H.apply(null,arguments),Ae=arguments,ut;if(!ke(arguments,Ae,be))return ut;const fn=H.apply(null,arguments);return Ae=arguments,le(ut,fn)?ut:(ut=fn,fn)},reset:function hn(){Ae=null,ut=null},setResult:function pr(fn){qe={result:fn}},clearResult:function In(){qe=void 0}}}function Dt(...H){return function On(H,be={stateFn:dn}){return function(...le){let Ae=le;if(Array.isArray(Ae[0])){const[fn,...fi]=Ae;Ae=[...fn,...fi]}const ut=Ae.slice(0,Ae.length-1),qe=Ae[Ae.length-1],hn=ut.filter(fn=>fn.release&&"function"==typeof fn.release),pr=H(function(...fn){return qe.apply(null,fn)}),In=at(function(fn,fi){return be.stateFn.apply(null,[fn,ut,fi,pr])});return Object.assign(In.memoized,{release:function ki(){In.reset(),pr.reset(),hn.forEach(fn=>fn.release())},projector:pr.memoized,setResult:In.setResult,clearResult:In.clearResult})}}(at)(...H)}function dn(H,be,le,Ae){if(void 0===le){const qe=be.map(hn=>hn(H));return Ae.memoized.apply(null,qe)}const ut=be.map(qe=>qe(H,le));return Ae.memoized.apply(null,[...ut,le])}function wr(H,be){return be instanceof h.OlP?H.get(be):be}function hi(H,be,le){return le.map((Ae,ut)=>{if(be[ut]instanceof h.OlP){const qe=H.get(be[ut]);return{key:Ae.key,reducerFactory:qe.reducerFactory?qe.reducerFactory:Wi,metaReducers:qe.metaReducers?qe.metaReducers:[],initialState:qe.initialState}}return Ae})}function dr(H,be){return be.map(Ae=>Ae instanceof h.OlP?H.get(Ae):Ae)}function cs(H){return"function"==typeof H?H():H}function Fn(H,be){return H.concat(be)}function bs(H){if(H)throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function qt(H){Object.freeze(H);const be=_t(H);return Object.getOwnPropertyNames(H).forEach(le=>{if(!le.startsWith("\u0275")&&function jt(H,be){return Object.prototype.hasOwnProperty.call(H,be)}(H,le)&&(!be||"caller"!==le&&"callee"!==le&&"arguments"!==le)){const Ae=H[le];($r(Ae)||_t(Ae))&&!Object.isFrozen(Ae)&&qt(Ae)}}),H}function ls(H,be=[]){return(Lt(H)||zi(H))&&0===be.length?{path:["root"],value:H}:Object.keys(H).reduce((Ae,ut)=>{if(Ae)return Ae;const qe=H[ut];return function Ut(H){return _t(H)&&H.hasOwnProperty("\u0275cmp")}(qe)?Ae:!(Lt(qe)||zi(qe)||function lr(H){return"number"==typeof H}(qe)||function vn(H){return"boolean"==typeof H}(qe)||function Ni(H){return"string"==typeof H}(qe)||ln(qe))&&(function Ve(H){if(!function bt(H){return $r(H)&&!ln(H)}(H))return!1;const be=Object.getPrototypeOf(H);return be===Object.prototype||null===be}(qe)?ls(qe,[...be,ut]):{path:[...be,ut],value:qe})},!1)}function Vo(H,be){if(!1===H)return;const le=H.path.join("."),Ae=new Error(`Detected unserializable ${be} at "${le}". ${jr}#strict${be}serializability`);throw Ae.value=H.value,Ae.unserializablePath=le,Ae}function er(H){return(0,h.X6Q)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...H}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Is({strictActionSerializability:H,strictStateSerializability:be}){return le=>H||be?function Un(H,be){return function(le,Ae){be.action(Ae)&&Vo(ls(Ae),"action");const ut=H(le,Ae);return be.state()&&Vo(ls(ut),"state"),ut}}(le,{action:Ae=>H&&!hr(Ae),state:()=>be}):le}function Cs({strictActionImmutability:H,strictStateImmutability:be}){return le=>H||be?function go(H,be){return function(le,Ae){const ut=be.action(Ae)?qt(Ae):Ae,qe=H(le,ut);return be.state()?qt(qe):qe}}(le,{action:Ae=>H&&!hr(Ae),state:()=>be}):le}function hr(H){return H.type.startsWith("@ngrx")}function tr({strictActionWithinNgZone:H}){return be=>H?function Ki(H,be){return function(le,Ae){if(be.action(Ae)&&!h.R0b.isInAngularZone())throw new Error(`Action '${Ae.type}' running outside NgZone. ${jr}#strictactionwithinngzone`);return H(le,Ae)}}(be,{action:le=>H&&!hr(le)}):be}function Uo(H){return[{provide:bn,useValue:H},{provide:Gt,useFactory:cu,deps:[bn]},{provide:li,deps:[Gt],useFactory:er},{provide:tn,multi:!0,deps:[li],useFactory:Cs},{provide:tn,multi:!0,deps:[li],useFactory:Is},{provide:tn,multi:!0,deps:[li],useFactory:tr}]}function gn(){return[{provide:Vr,multi:!0,deps:[li],useFactory:lu}]}function cu(H){return H}function lu(H){if(!H.strictActionTypeUniqueness)return;const be=Object.entries(G).filter(([,le])=>le>1).map(([le])=>le);if(be.length)throw new Error(`Action types are registered more than once, ${be.map(le=>`"${le}"`).join(", ")}. ${jr}#strictactiontypeuniqueness`)}function yo(H,be){return[{provide:Q,useFactory:bs,deps:[[un,new h.FiY,new h.tp0]]},{provide:Oe,useValue:be.initialState},{provide:se,useFactory:cs,deps:[Oe]},{provide:Ke,useValue:H},{provide:St,useExisting:H instanceof h.OlP?H:Ke},{provide:ye,deps:[h.zs3,Ke,[new h.tBr(St)]],useFactory:wr},{provide:an,useValue:be.metaReducers?be.metaReducers:[]},{provide:Lr,deps:[tn,an],useFactory:Fn},{provide:ve,useValue:be.reducerFactory?be.reducerFactory:Wi},{provide:de,deps:[ve,Lr],useFactory:di},nt,Ci,zn,Ct,Er,Uo(be.runtimeChecks),gn()]}function fr(H,be,le={}){return[{provide:Kt,multi:!0,useValue:H instanceof Object?{}:le},{provide:ze,multi:!0,useValue:{key:H instanceof Object?H.name:H,reducerFactory:le instanceof h.OlP||!le.reducerFactory?Wi:le.reducerFactory,metaReducers:le instanceof h.OlP||!le.metaReducers?[]:le.metaReducers,initialState:le instanceof h.OlP||!le.initialState?void 0:le.initialState}},{provide:dt,deps:[h.zs3,Kt,ze],useFactory:hi},{provide:on,multi:!0,useValue:H instanceof Object?H.reducer:be},{provide:wn,multi:!0,useExisting:be instanceof h.OlP?be:on},{provide:xn,multi:!0,deps:[h.zs3,on,[new h.tBr(wn)]],useFactory:dr},gn()]}let Sr=(()=>{class H{constructor(le,Ae,ut,qe,hn,pr){}}return H.\u0275fac=function(le){return new(le||H)(h.LFG(We),h.LFG(ht),h.LFG(Xr),h.LFG(un),h.LFG(Q,8),h.LFG(Vr,8))},H.\u0275mod=h.oAB({type:H}),H.\u0275inj=h.cJS({}),H})(),Bo=(()=>{class H{constructor(le,Ae,ut,qe,hn){this.features=le,this.featureReducers=Ae,this.reducerManager=ut;const pr=le.map((In,ki)=>{const fi=Ae.shift()[ki];return{...In,reducers:fi,initialState:cs(In.initialState)}});ut.addFeatures(pr)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return H.\u0275fac=function(le){return new(le||H)(h.LFG(dt),h.LFG(xn),h.LFG(qn),h.LFG(Sr),h.LFG(Vr,8))},H.\u0275mod=h.oAB({type:H}),H.\u0275inj=h.cJS({}),H})(),jo=(()=>{class H{static forRoot(le,Ae={}){return{ngModule:Sr,providers:[...yo(le,Ae)]}}static forFeature(le,Ae,ut={}){return{ngModule:Bo,providers:[...fr(le,Ae,ut)]}}}return H.\u0275fac=function(le){return new(le||H)},H.\u0275mod=h.oAB({type:H}),H.\u0275inj=h.cJS({}),H})();function hu(...H){return{reducer:H.pop(),types:H.map(Ae=>Ae.type)}}function Hr(H,...be){const le=new Map;for(const Ae of be)for(const ut of Ae.types){const qe=le.get(ut);le.set(ut,qe?(pr,In)=>Ae.reducer(qe(pr,In),In):Ae.reducer)}return function(Ae=H,ut){const qe=le.get(ut.type);return qe?qe(Ae,ut):Ae}}},259:(ae,Z,R)=>{R.d(Z,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=R(9681);(0,h.registerVersion)("firebase","9.15.0","app")},9260:(ae,Z,R)=>{R.d(Z,{Z:()=>h.Z});var h=R(3942);h.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(ae,Z,R)=>{R.r(Z);var h=R(5861),z=R(3942),F=R(2090),ne=R(9681),q=R(1877),re=R(655),X=R(4859);const Ee=function we(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Qe=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ie=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ze=new q.Yd("@firebase/auth");function Ye(E,...g){Ze.logLevel<=q.in.ERROR&&Ze.error(`Auth (${ne.SDK_VERSION}): ${E}`,...g)}function Me(E,...g){throw nt(E,...g)}function De(E,...g){return nt(E,...g)}function Pe(E,g,y){const b=Object.assign(Object.assign({},Qe()),{[g]:y});return new F.LL("auth","Firebase",b).create(g,{appName:E.name})}function We(E,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Me(E,"argument-error"),Pe(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(E,...g){if("string"!=typeof E){const y=g[0],b=[...g.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(y,...b)}return Ie.create(E,...g)}function Q(E,g,...y){if(!E)throw nt(g,...y)}function Oe(E){const g="INTERNAL ASSERTION FAILED: "+E;throw Ye(g),new Error(g)}function se(E,g){E||Oe(g)}const de=new Map;function ve(E){se(E instanceof Function,"Expected a class definition");let g=de.get(E);return g?(se(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,de.set(E,g),g)}function ze(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function St(){return"http:"===on()||"https:"===on()}function on(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class wn{constructor(g,y){this.shortDelay=g,this.longDelay=y,se(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Kt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(St()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xn(E,g){se(E.emulator,"Emulator should always be set here");const{url:y}=E.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class an{static initialize(g,y,b){this.fetchImpl=g,y&&(this.headersImpl=y),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Oe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Oe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Oe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Lr=new wn(3e4,6e4);function Gt(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function bn(E,g,y,b){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(E,g,y,b,O={}){return Vr(E,O,(0,h.Z)(function*(){let L={},ie={};b&&("GET"===g?ie=b:L={body:JSON.stringify(b)});const xe=(0,F.xO)(Object.assign({key:E.config.apiKey},ie)).slice(1),it=yield E._getAdditionalHeaders();return it["Content-Type"]="application/json",E.languageCode&&(it["X-Firebase-Locale"]=E.languageCode),an.fetch()(Pi(E,E.config.apiHost,y,xe),Object.assign({method:g,headers:it,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function Vr(E,g,y){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,h.Z)(function*(E,g,y){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},tn),g);try{const O=new Br(E),L=yield Promise.race([y(),O.promise]);O.clearNetworkTimeout();const ie=yield L.json();if("needConfirmation"in ie)throw di(E,"account-exists-with-different-credential",ie);if(L.ok&&!("errorMessage"in ie))return ie;{const xe=L.ok?ie.errorMessage:ie.error.message,[it,vt]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===it)throw di(E,"credential-already-in-use",ie);if("EMAIL_EXISTS"===it)throw di(E,"email-already-in-use",ie);if("USER_DISABLED"===it)throw di(E,"user-disabled",ie);const Ft=b[it]||it.toLowerCase().replace(/[_\s]+/g,"-");if(vt)throw Pe(E,Ft,vt);Me(E,Ft)}}catch(O){if(O instanceof F.ZR)throw O;Me(E,"network-request-failed")}})).apply(this,arguments)}function Ur(E,g,y,b){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(E,g,y,b,O={}){const L=yield bn(E,g,y,b,O);return"mfaPendingCredential"in L&&Me(E,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Pi(E,g,y,b){const O=`${g}${y}?${b}`;return E.config.emulator?xn(E.config,O):`${E.config.apiScheme}://${O}`}class Br{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,b)=>{this.timer=setTimeout(()=>b(De(this.auth,"network-request-failed")),Lr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function di(E,g,y){const b={appName:E.name};y.email&&(b.email=y.email),y.phoneNumber&&(b.phoneNumber=y.phoneNumber);const O=De(E,g,b);return O.customData._tokenResponse=y,O}function ht(){return(ht=(0,h.Z)(function*(E,g){return bn(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function vr(E,g){return us.apply(this,arguments)}function us(){return(us=(0,h.Z)(function*(E,g){return bn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function qn(E,g){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,h.Z)(function*(E,g){return bn(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Xr(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Rn(){return(Rn=(0,h.Z)(function*(E,g=!1){const y=(0,F.m9)(E),b=yield y.getIdToken(g),O=Ct(b);Q(O&&O.exp&&O.auth_time&&O.iat,y.auth,"internal-error");const L="object"==typeof O.firebase?O.firebase:void 0,ie=L?.sign_in_provider;return{claims:O,token:b,authTime:Xr(Rt(O.auth_time)),issuedAtTime:Xr(Rt(O.iat)),expirationTime:Xr(Rt(O.exp)),signInProvider:ie||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function Rt(E){return 1e3*Number(E)}function Ct(E){const[g,y,b]=E.split(".");if(void 0===g||void 0===y||void 0===b)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,F.tV)(y);return O?JSON.parse(O):(Ye("Failed to decode base64 JWT payload"),null)}catch(O){return Ye("Caught error parsing JWT payload as JSON",O?.toString()),null}}function Er(E,g){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,h.Z)(function*(E,g,y=!1){if(y)return g;try{return yield g}catch(b){throw b instanceof F.ZR&&jr(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}function jr({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Lt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const O=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,O)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const b=this.getInterval(g);this.timerId=setTimeout((0,h.Z)(function*(){yield y.iteration()}),b)}iteration(){var g=this;return(0,h.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&g.schedule(!0))}g.schedule()})()}}class zi{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ln(E){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,h.Z)(function*(E){var g;const y=E.auth,b=yield E.getIdToken(),O=yield Er(E,qn(y,{idToken:b}));Q(O?.users.length,y,"internal-error");const L=O.users[0];E._notifyReloadListener(L);const ie=null!==(g=L.providerUserInfo)&&void 0!==g&&g.length?bt(L.providerUserInfo):[],xe=$r(E.providerData,ie),Ft=!!E.isAnonymous&&!(E.email&&L.passwordHash||xe?.length),Pt={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:xe,metadata:new zi(L.createdAt,L.lastLoginAt),isAnonymous:Ft};Object.assign(E,Pt)})).apply(this,arguments)}function lr(){return(lr=(0,h.Z)(function*(E){const g=(0,F.m9)(E);yield ln(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function $r(E,g){return[...E.filter(b=>!g.some(O=>O.providerId===b.providerId)),...g]}function bt(E){return E.map(g=>{var{providerId:y}=g,b=(0,re._T)(g,["providerId"]);return{providerId:y,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function _t(){return(_t=(0,h.Z)(function*(E,g){const y=yield Vr(E,{},(0,h.Z)(function*(){const b=(0,F.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:O,apiKey:L}=E.config,ie=Pi(E,O,"/v1/token",`key=${L}`),xe=yield E._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",an.fetch()(ie,{method:"POST",headers:xe,body:b})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Q(g.idToken,"internal-error"),Q(typeof g.idToken<"u","internal-error"),Q(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function un(E){const g=Ct(E);return Q(g,"internal-error"),Q(typeof g.exp<"u","internal-error"),Q(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var b=this;return(0,h.Z)(function*(){return Q(!b.accessToken||b.refreshToken,g,"user-token-expired"),y||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(g,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var b=this;return(0,h.Z)(function*(){const{accessToken:O,refreshToken:L,expiresIn:ie}=yield function Ve(E,g){return _t.apply(this,arguments)}(g,y);b.updateTokensAndExpiration(O,L,Number(ie))})()}updateTokensAndExpiration(g,y,b){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(g,y){const{refreshToken:b,accessToken:O,expirationTime:L}=y,ie=new Ut;return b&&(Q("string"==typeof b,"internal-error",{appName:g}),ie.refreshToken=b),O&&(Q("string"==typeof O,"internal-error",{appName:g}),ie.accessToken=O),L&&(Q("number"==typeof L,"internal-error",{appName:g}),ie.expirationTime=L),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ut,this.toJSON())}_performRefresh(){return Oe("not implemented")}}function jt(E,g){Q("string"==typeof E||typeof E>"u","internal-error",{appName:g})}class zt{constructor(g){var{uid:y,auth:b,stsTokenManager:O}=g,L=(0,re._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=b,this.stsTokenManager=O,this.accessToken=O.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new zi(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,h.Z)(function*(){const b=yield Er(y,y.stsTokenManager.getToken(y.auth,g));return Q(b,y.auth,"internal-error"),y.accessToken!==b&&(y.accessToken=b,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),b})()}getIdTokenResult(g){return function Kn(E){return Rn.apply(this,arguments)}(this,g)}reload(){return function vn(E){return lr.apply(this,arguments)}(this)}_assign(g){this!==g&&(Q(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new zt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var b=this;return(0,h.Z)(function*(){let O=!1;g.idToken&&g.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(g),O=!0),y&&(yield ln(b)),yield b.auth._persistUserIfCurrent(b),O&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var g=this;return(0,h.Z)(function*(){const y=yield g.getIdToken();return yield Er(g,function po(E,g){return ht.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var b,O,L,ie,xe,it,vt,Ft;const Pt=null!==(b=y.displayName)&&void 0!==b?b:void 0,ri=null!==(O=y.email)&&void 0!==O?O:void 0,vi=null!==(L=y.phoneNumber)&&void 0!==L?L:void 0,Vu=null!==(ie=y.photoURL)&&void 0!==ie?ie:void 0,Dh=null!==(xe=y.tenantId)&&void 0!==xe?xe:void 0,Lm=null!==(it=y._redirectEventId)&&void 0!==it?it:void 0,Nv=null!==(vt=y.createdAt)&&void 0!==vt?vt:void 0,kv=null!==(Ft=y.lastLoginAt)&&void 0!==Ft?Ft:void 0,{uid:Th,emailVerified:Ls,isAnonymous:Sh,providerData:Uu,stsTokenManager:Vm}=y;Q(Th&&Vm,g,"internal-error");const Fv=Ut.fromJSON(this.name,Vm);Q("string"==typeof Th,g,"internal-error"),jt(Pt,g.name),jt(ri,g.name),Q("boolean"==typeof Ls,g,"internal-error"),Q("boolean"==typeof Sh,g,"internal-error"),jt(vi,g.name),jt(Vu,g.name),jt(Dh,g.name),jt(Lm,g.name),jt(Nv,g.name),jt(kv,g.name);const Ah=new zt({uid:Th,auth:g,email:ri,emailVerified:Ls,displayName:Pt,isAnonymous:Sh,photoURL:Vu,phoneNumber:vi,tenantId:Dh,stsTokenManager:Fv,createdAt:Nv,lastLoginAt:kv});return Uu&&Array.isArray(Uu)&&(Ah.providerData=Uu.map(Kc=>Object.assign({},Kc))),Lm&&(Ah._redirectEventId=Lm),Ah}static _fromIdTokenResponse(g,y,b=!1){return(0,h.Z)(function*(){const O=new Ut;O.updateFromServerResponse(y);const L=new zt({uid:y.localId,auth:g,stsTokenManager:O,isAnonymous:b});return yield ln(L),L})()}}const W=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(y,b){var O=this;return(0,h.Z)(function*(){O.storage[y]=b})()}_get(y){var b=this;return(0,h.Z)(function*(){const O=b.storage[y];return void 0===O?null:O})()}_remove(y){var b=this;return(0,h.Z)(function*(){delete b.storage[y]})()}_addListener(y,b){}_removeListener(y,b){}}return E.type="NONE",E})();function oe(E,g,y){return`firebase:${E}:${g}:${y}`}class ke{constructor(g,y,b){this.persistence=g,this.auth=y,this.userKey=b;const{config:O,name:L}=this.auth;this.fullUserKey=oe(this.userKey,O.apiKey,L),this.fullPersistenceKey=oe("persistence",O.apiKey,L),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,h.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?zt._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,h.Z)(function*(){if(y.persistence===g)return;const b=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,b?y.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,b="authUser"){return(0,h.Z)(function*(){if(!y.length)return new ke(ve(W),g,b);const O=(yield Promise.all(y.map(function(){var vt=(0,h.Z)(function*(Ft){if(yield Ft._isAvailable())return Ft});return function(Ft){return vt.apply(this,arguments)}}()))).filter(vt=>vt);let L=O[0]||ve(W);const ie=oe(b,g.config.apiKey,g.name);let xe=null;for(const vt of y)try{const Ft=yield vt._get(ie);if(Ft){const Pt=zt._fromJSON(g,Ft);vt!==L&&(xe=Pt),L=vt;break}}catch{}const it=O.filter(vt=>vt._shouldAllowMigration);return L._shouldAllowMigration&&it.length?(L=it[0],xe&&(yield L._set(ie,xe.toJSON())),yield Promise.all(y.map(function(){var vt=(0,h.Z)(function*(Ft){if(Ft!==L)try{yield Ft._remove(ie)}catch{}});return function(Ft){return vt.apply(this,arguments)}}())),new ke(L,g,b)):new ke(L,g,b)})()}}function ce(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(On(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(at(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(et(g))return"Blackberry";if(ct(g))return"Webos";if(Dt(g))return"Safari";if((g.includes("chrome/")||dn(g))&&!g.includes("edge/"))return"Chrome";if(cn(g))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function at(E=(0,F.z$)()){return/firefox\//i.test(E)}function Dt(E=(0,F.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function dn(E=(0,F.z$)()){return/crios\//i.test(E)}function On(E=(0,F.z$)()){return/iemobile/i.test(E)}function cn(E=(0,F.z$)()){return/android/i.test(E)}function et(E=(0,F.z$)()){return/blackberry/i.test(E)}function ct(E=(0,F.z$)()){return/webos/i.test(E)}function Zt(E=(0,F.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function cs(E=(0,F.z$)()){return Zt(E)||cn(E)||ct(E)||et(E)||/windows phone/i.test(E)||On(E)}function bs(E,g=[]){let y;switch(E){case"Browser":y=ce((0,F.z$)());break;case"Worker":y=`${ce((0,F.z$)())}-${E}`;break;default:y=E}const b=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${ne.SDK_VERSION}/${b}`}class go{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const b=L=>new Promise((ie,xe)=>{try{ie(g(L))}catch(it){xe(it)}});b.onAbort=y,this.queue.push(b);const O=this.queue.length-1;return()=>{this.queue[O]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,h.Z)(function*(){if(y.auth.currentUser===g)return;const b=[];try{for(const O of y.queue)yield O(g),O.onAbort&&b.push(O.onAbort)}catch(O){b.reverse();for(const L of b)try{L()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:O?.message})}})()}}class qt{constructor(g,y,b){this.app=g,this.heartbeatServiceProvider=y,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ls(this),this.idTokenSubscription=new ls(this),this.beforeStateQueue=new go(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ie,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(g,y){var b=this;return y&&(this._popupRedirectResolver=ve(y)),this._initializationPromise=this.queue((0,h.Z)(function*(){var O,L;if(!b._deleted&&(b.persistenceManager=yield ke.create(b,g),!b._deleted)){if(null!==(O=b._popupRedirectResolver)&&void 0!==O&&O._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(y),b.lastNotifiedUid=(null===(L=b.currentUser)||void 0===L?void 0:L.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,h.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,h.Z)(function*(){var b;const O=yield y.assertedPersistence.getCurrentUser();let L=O,ie=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const xe=null===(b=y.redirectUser)||void 0===b?void 0:b._redirectEventId,it=L?._redirectEventId,vt=yield y.tryRedirectSignIn(g);(!xe||xe===it)&&vt?.user&&(L=vt.user,ie=!0)}if(!L)return y.directlySetCurrentUser(null);if(!L._redirectEventId){if(ie)try{yield y.beforeStateQueue.runMiddleware(L)}catch(xe){L=O,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(xe))}return L?y.reloadAndSetCurrentUserOrClear(L):y.directlySetCurrentUser(null)}return Q(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===L._redirectEventId?y.directlySetCurrentUser(L):y.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(g){var y=this;return(0,h.Z)(function*(){let b=null;try{b=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,h.Z)(function*(){try{yield ln(g)}catch(b){if("auth/network-request-failed"!==b?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function dt(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,h.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,h.Z)(function*(){const b=g?(0,F.m9)(g):null;return b&&Q(b.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(b&&b._clone(y))})()}_updateCurrentUser(g,y=!1){var b=this;return(0,h.Z)(function*(){if(!b._deleted)return g&&Q(b.tenantId===g.tenantId,b,"tenant-id-mismatch"),y||(yield b.beforeStateQueue.runMiddleware(g)),b.queue((0,h.Z)(function*(){yield b.directlySetCurrentUser(g),b.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,h.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,h.Z)(function*(){yield y.assertedPersistence.setPersistence(ve(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new F.LL("auth","Firebase",g())}onAuthStateChanged(g,y,b){return this.registerStateListener(this.authStateSubscription,g,y,b)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,b){return this.registerStateListener(this.idTokenSubscription,g,y,b)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var b=this;return(0,h.Z)(function*(){const O=yield b.getOrInitRedirectPersistenceManager(y);return null===g?O.removeCurrentUser():O.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,h.Z)(function*(){if(!y.redirectPersistenceManager){const b=g&&ve(g)||y._popupRedirectResolver;Q(b,y,"argument-error"),y.redirectPersistenceManager=yield ke.create(y,[ve(b._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,h.Z)(function*(){var b,O;return y._isInitialized&&(yield y.queue((0,h.Z)(function*(){}))),(null===(b=y._currentUser)||void 0===b?void 0:b._redirectEventId)===g?y._currentUser:(null===(O=y.redirectUser)||void 0===O?void 0:O._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,h.Z)(function*(){if(g===y.currentUser)return y.queue((0,h.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,b,O){if(this._deleted)return()=>{};const L="function"==typeof y?y:y.next.bind(y),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return Q(ie,this,"internal-error"),ie.then(()=>L(this.currentUser)),"function"==typeof y?g.addObserver(y,b,O):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,h.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=bs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,h.Z)(function*(){var y;const b={"X-Client-Version":g.clientVersion};g.app.options.appId&&(b["X-Firebase-gmpid"]=g.app.options.appId);const O=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return O&&(b["X-Firebase-Client"]=O),b})()}}function Un(E){return(0,F.m9)(E)}class ls{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,F.ne)(y=>this.observer=y)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ki(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function Is(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class hr{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return Oe("not implemented")}_getIdTokenResponse(g){return Oe("not implemented")}_linkToIdToken(g,y){return Oe("not implemented")}_getReauthenticationResolver(g){return Oe("not implemented")}}function tr(E,g){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,h.Z)(function*(E,g){return bn(E,"POST","/v1/accounts:resetPassword",Gt(E,g))})).apply(this,arguments)}function gn(E,g){return cu.apply(this,arguments)}function cu(){return(cu=(0,h.Z)(function*(E,g){return bn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function lu(E,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,h.Z)(function*(E,g){return bn(E,"POST","/v1/accounts:update",Gt(E,g))})).apply(this,arguments)}function Zi(){return(Zi=(0,h.Z)(function*(E,g){return Ur(E,"POST","/v1/accounts:signInWithPassword",Gt(E,g))})).apply(this,arguments)}function Ds(E,g){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,h.Z)(function*(E,g){return bn(E,"POST","/v1/accounts:sendOobCode",Gt(E,g))})).apply(this,arguments)}function Qn(E,g){return du.apply(this,arguments)}function du(){return(du=(0,h.Z)(function*(E,g){return Ds(E,g)})).apply(this,arguments)}function fr(E,g){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,h.Z)(function*(E,g){return Ds(E,g)})).apply(this,arguments)}function Bo(E,g){return jo.apply(this,arguments)}function jo(){return(jo=(0,h.Z)(function*(E,g){return Ds(E,g)})).apply(this,arguments)}function hu(E,g){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,h.Z)(function*(E,g){return Ds(E,g)})).apply(this,arguments)}function be(){return(be=(0,h.Z)(function*(E,g){return Ur(E,"POST","/v1/accounts:signInWithEmailLink",Gt(E,g))})).apply(this,arguments)}function Ae(){return(Ae=(0,h.Z)(function*(E,g){return Ur(E,"POST","/v1/accounts:signInWithEmailLink",Gt(E,g))})).apply(this,arguments)}class ut extends hr{constructor(g,y,b,O=null){super("password",b),this._email=g,this._password=y,this._tenantId=O}static _fromEmailAndPassword(g,y){return new ut(g,y,"password")}static _fromEmailAndCode(g,y,b=null){return new ut(g,y,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,h.Z)(function*(){switch(y.signInMethod){case"password":return function yo(E,g){return Zi.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function H(E,g){return be.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Me(g,"internal-error")}})()}_linkToIdToken(g,y){var b=this;return(0,h.Z)(function*(){switch(b.signInMethod){case"password":return gn(g,{idToken:y,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function le(E,g){return Ae.apply(this,arguments)}(g,{idToken:y,email:b._email,oobCode:b._password});default:Me(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function qe(E,g){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(E,g){return Ur(E,"POST","/v1/accounts:signInWithIdp",Gt(E,g))})).apply(this,arguments)}class In extends hr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new In(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Me("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:O}=y,L=(0,re._T)(y,["providerId","signInMethod"]);if(!b||!O)return null;const ie=new In(b,O);return ie.idToken=L.idToken||void 0,ie.accessToken=L.accessToken||void 0,ie.secret=L.secret,ie.nonce=L.nonce,ie.pendingToken=L.pendingToken||null,ie}_getIdTokenResponse(g){return qe(g,this.buildRequest())}_linkToIdToken(g,y){const b=this.buildRequest();return b.idToken=y,qe(g,b)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,qe(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,F.xO)(y)}return g}}function ki(E,g){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(E,g){return bn(E,"POST","/v1/accounts:sendVerificationCode",Gt(E,g))})).apply(this,arguments)}function Ts(){return(Ts=(0,h.Z)(function*(E,g){return Ur(E,"POST","/v1/accounts:signInWithPhoneNumber",Gt(E,g))})).apply(this,arguments)}function fu(){return(fu=(0,h.Z)(function*(E,g){const y=yield Ur(E,"POST","/v1/accounts:signInWithPhoneNumber",Gt(E,g));if(y.temporaryProof)throw di(E,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const pm={USER_NOT_FOUND:"user-not-found"};function qd(){return(qd=(0,h.Z)(function*(E,g){return Ur(E,"POST","/v1/accounts:signInWithPhoneNumber",Gt(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),pm)})).apply(this,arguments)}class _o extends hr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new _o({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new _o({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function fi(E,g){return Ts.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function yl(E,g){return fu.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function gm(E,g){return qd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:b,verificationCode:O}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:b,code:O}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:b,phoneNumber:O,temporaryProof:L}=g;return b||y||O||L?new _o({verificationId:y,verificationCode:b,phoneNumber:O,temporaryProof:L}):null}}class rc{constructor(g){var y,b,O,L,ie,xe;const it=(0,F.zd)((0,F.pd)(g)),vt=null!==(y=it.apiKey)&&void 0!==y?y:null,Ft=null!==(b=it.oobCode)&&void 0!==b?b:null,Pt=function Wd(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(O=it.mode)&&void 0!==O?O:null);Q(vt&&Ft&&Pt,"argument-error"),this.apiKey=vt,this.operation=Pt,this.code=Ft,this.continueUrl=null!==(L=it.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(ie=it.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(xe=it.tenantId)&&void 0!==xe?xe:null}static parseLink(g){const y=function zd(E){const g=(0,F.zd)((0,F.pd)(E)).link,y=g?(0,F.zd)((0,F.pd)(g)).deep_link_id:null,b=(0,F.zd)((0,F.pd)(E)).deep_link_id;return(b?(0,F.zd)((0,F.pd)(b)).link:null)||b||y||g||E}(g);try{return new rc(y)}catch{return null}}}let Ss=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(y,b){return ut._fromEmailAndPassword(y,b)}static credentialWithLink(y,b){const O=rc.parseLink(b);return Q(O,"argument-error"),ut._fromEmailAndCode(y,O.code,O.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Hs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Gs extends Hs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class $o extends Gs{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return Q("providerId"in y&&"signInMethod"in y,"argument-error"),In._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Q(g.idToken||g.accessToken,"argument-error"),In._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return $o.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return $o.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:b,oauthTokenSecret:O,pendingToken:L,nonce:ie,providerId:xe}=g;if(!b&&!O&&!y&&!L||!xe)return null;try{return new $o(xe)._credential({idToken:y,accessToken:b,nonce:ie,pendingToken:L})}catch{return null}}}let pu=(()=>{class E extends Gs{constructor(){super("facebook.com")}static credential(y){return In._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),ic=(()=>{class E extends Gs{constructor(){super("google.com"),this.addScope("profile")}static credential(y,b){return In._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:b})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:b,oauthAccessToken:O}=y;if(!b&&!O)return null;try{return E.credential(b,O)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),_l=(()=>{class E extends Gs{constructor(){super("github.com")}static credential(y){return In._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ho extends hr{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return qe(g,this.buildRequest())}_linkToIdToken(g,y){const b=this.buildRequest();return b.idToken=y,qe(g,b)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,qe(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:O,pendingToken:L}=y;return b&&O&&L&&b===O?new Ho(b,L):null}static _create(g,y){return new Ho(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Yi extends Hs{constructor(g){Q(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Yi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Yi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Ho.fromJSON(g);return Q(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:b}=g;if(!y||!b)return null;try{return Ho._create(b,y)}catch{return null}}}let Fi=(()=>{class E extends Gs{constructor(){super("twitter.com")}static credential(y,b){return In._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:b})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:b,oauthTokenSecret:O}=y;if(!b||!O)return null;try{return E.credential(b,O)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Ia(E,g){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,h.Z)(function*(E,g){return Ur(E,"POST","/v1/accounts:signUp",Gt(E,g))})).apply(this,arguments)}class ei{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,b,O=!1){return(0,h.Z)(function*(){const L=yield zt._fromIdTokenResponse(g,b,O),ie=Xf(b);return new ei({user:L,providerId:ie,_tokenResponse:b,operationType:y})})()}static _forOperation(g,y,b){return(0,h.Z)(function*(){yield g._updateTokensIfNecessary(b,!0);const O=Xf(b);return new ei({user:g,providerId:O,_tokenResponse:b,operationType:y})})()}}function Xf(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function nr(){return(nr=(0,h.Z)(function*(E){var g;const y=Un(E);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new ei({user:y.currentUser,providerId:null,operationType:"signIn"});const b=yield Ia(y,{returnSecureToken:!0}),O=yield ei._fromIdTokenResponse(y,"signIn",b,!0);return yield y._updateCurrentUser(O.user),O})).apply(this,arguments)}class sc extends F.ZR{constructor(g,y,b,O){var L;super(y.code,y.message),this.operationType=b,this.user=O,Object.setPrototypeOf(this,sc.prototype),this.customData={appName:g.name,tenantId:null!==(L=g.tenantId)&&void 0!==L?L:void 0,_serverResponse:y.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(g,y,b,O){return new sc(g,y,b,O)}}function tp(E,g,y,b){return("reauthenticate"===g?y._getReauthenticationResolver(E):y._getIdTokenResponse(E)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?sc._fromErrorAndOperation(E,L,g,b):L})}function Ji(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function oc(){return(oc=(0,h.Z)(function*(E,g){const y=(0,F.m9)(E);yield mn(!0,y,g);const{providerUserInfo:b}=yield vr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),O=Ji(b||[]);return y.providerData=y.providerData.filter(L=>O.has(L.providerId)),O.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Go(E,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(E,g,y=!1){const b=yield Er(E,g._linkToIdToken(E.auth,yield E.getIdToken()),y);return ei._forOperation(E,"link",b)})).apply(this,arguments)}function mn(E,g,y){return ac.apply(this,arguments)}function ac(){return(ac=(0,h.Z)(function*(E,g,y){yield ln(g);const O=!1===E?"provider-already-linked":"no-such-provider";Q(Ji(g.providerData).has(y)===E,g.auth,O)})).apply(this,arguments)}function qo(E,g){return uc.apply(this,arguments)}function uc(){return(uc=(0,h.Z)(function*(E,g,y=!1){const{auth:b}=E,O="reauthenticate";try{const L=yield Er(E,tp(b,O,g,E),y);Q(L.idToken,b,"internal-error");const ie=Ct(L.idToken);Q(ie,b,"internal-error");const{sub:xe}=ie;return Q(E.uid===xe,b,"user-mismatch"),ei._forOperation(E,O,L)}catch(L){throw"auth/user-not-found"===L?.code&&Me(b,"user-mismatch"),L}})).apply(this,arguments)}function ds(E,g){return cc.apply(this,arguments)}function cc(){return(cc=(0,h.Z)(function*(E,g,y=!1){const b="signIn",O=yield tp(E,b,g),L=yield ei._fromIdTokenResponse(E,b,O);return y||(yield E._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Jn(E,g){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,h.Z)(function*(E,g){return ds(Un(E),g)})).apply(this,arguments)}function lc(E,g){return np.apply(this,arguments)}function np(){return(np=(0,h.Z)(function*(E,g){const y=(0,F.m9)(E);return yield mn(!1,y,g.providerId),Go(y,g)})).apply(this,arguments)}function dc(E,g){return hc.apply(this,arguments)}function hc(){return(hc=(0,h.Z)(function*(E,g){return qo((0,F.m9)(E),g)})).apply(this,arguments)}function vl(E,g){return zs.apply(this,arguments)}function zs(){return(zs=(0,h.Z)(function*(E,g){return Ur(E,"POST","/v1/accounts:signInWithCustomToken",Gt(E,g))})).apply(this,arguments)}function gu(){return(gu=(0,h.Z)(function*(E,g){const y=Un(E),b=yield vl(y,{token:g,returnSecureToken:!0}),O=yield ei._fromIdTokenResponse(y,"signIn",b);return yield y._updateCurrentUser(O.user),O})).apply(this,arguments)}class Ue{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?nn._fromServerResponse(g,y):Me(g,"internal-error")}}class nn extends Ue{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new nn(y)}}function fc(E,g,y){var b;Q((null===(b=y.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),Q(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Q(y.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(Q(y.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function rr(){return(rr=(0,h.Z)(function*(E,g,y){const b=(0,F.m9)(E),O={requestType:"PASSWORD_RESET",email:g};y&&fc(b,O,y),yield fr(b,O)})).apply(this,arguments)}function Ca(){return(Ca=(0,h.Z)(function*(E,g,y){yield tr((0,F.m9)(E),{oobCode:g,newPassword:y})})).apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(E,g){yield lu((0,F.m9)(E),{oobCode:g})})).apply(this,arguments)}function yu(E,g){return wl.apply(this,arguments)}function wl(){return(wl=(0,h.Z)(function*(E,g){const y=(0,F.m9)(E),b=yield tr(y,{oobCode:g}),O=b.requestType;switch(Q(O,y,"internal-error"),O){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(b.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(b.mfaInfo,y,"internal-error");default:Q(b.email,y,"internal-error")}let L=null;return b.mfaInfo&&(L=Ue._fromServerResponse(Un(y),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:L},operation:O}})).apply(this,arguments)}function Zd(){return(Zd=(0,h.Z)(function*(E,g){const{data:y}=yield yu((0,F.m9)(E),g);return y.email})).apply(this,arguments)}function ir(){return(ir=(0,h.Z)(function*(E,g,y){const b=Un(E),O=yield Ia(b,{returnSecureToken:!0,email:g,password:y}),L=yield ei._fromIdTokenResponse(b,"signIn",O);return yield b._updateCurrentUser(L.user),L})).apply(this,arguments)}function Wo(){return(Wo=(0,h.Z)(function*(E,g,y){const b=(0,F.m9)(E),O={requestType:"EMAIL_SIGNIN",email:g};Q(y.handleCodeInApp,b,"argument-error"),y&&fc(b,O,y),yield Bo(b,O)})).apply(this,arguments)}function vu(){return(vu=(0,h.Z)(function*(E,g,y){const b=(0,F.m9)(E),O=Ss.credentialWithLink(g,y||ze());return Q(O._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Jn(b,O)})).apply(this,arguments)}function ym(E,g){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,h.Z)(function*(E,g){return bn(E,"POST","/v1/accounts:createAuthUri",Gt(E,g))})).apply(this,arguments)}function Eu(){return(Eu=(0,h.Z)(function*(E,g){const b={identifier:g,continueUri:St()?ze():"http://localhost"},{signinMethods:O}=yield ym((0,F.m9)(E),b);return O||[]})).apply(this,arguments)}function wu(){return(wu=(0,h.Z)(function*(E,g){const y=(0,F.m9)(E),O={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&fc(y.auth,O,g);const{email:L}=yield Qn(y.auth,O);L!==E.email&&(yield E.reload())})).apply(this,arguments)}function yc(){return(yc=(0,h.Z)(function*(E,g,y){const b=(0,F.m9)(E),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};y&&fc(b.auth,L,y);const{email:ie}=yield hu(b.auth,L);ie!==E.email&&(yield E.reload())})).apply(this,arguments)}function _c(E,g){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,h.Z)(function*(E,g){return bn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function xl(){return(xl=(0,h.Z)(function*(E,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const b=(0,F.m9)(E),L={idToken:yield b.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},ie=yield Er(b,_c(b.auth,L));b.displayName=ie.displayName||null,b.photoURL=ie.photoUrl||null;const xe=b.providerData.find(({providerId:it})=>"password"===it);xe&&(xe.displayName=b.displayName,xe.photoURL=b.photoURL),yield b._updateTokensIfNecessary(ie)})).apply(this,arguments)}function Ko(E,g,y){return vc.apply(this,arguments)}function vc(){return(vc=(0,h.Z)(function*(E,g,y){const{auth:b}=E,L={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(L.email=g),y&&(L.password=y);const ie=yield Er(E,gn(b,L));yield E._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class Li{constructor(g,y,b={}){this.isNewUser=g,this.providerId=y,this.profile=b}}class Bn extends Li{constructor(g,y,b,O){super(g,y,b),this.username=O}}class Rl extends Li{constructor(g,y){super(g,"facebook.com",y)}}class Ol extends Bn{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Yd extends Li{constructor(g,y){super(g,"google.com",y)}}class Ml extends Bn{constructor(g,y,b){super(g,"twitter.com",y,b)}}function Ec(E){const{user:g,_tokenResponse:y}=E;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Ar(E){var g,y;if(!E)return null;const{providerId:b}=E,O=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},L=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&E?.idToken){const ie=null===(y=null===(g=Ct(E.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(ie)return new Li(L,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!b)return null;switch(b){case"facebook.com":return new Rl(L,O);case"github.com":return new Ol(L,O);case"google.com":return new Yd(L,O);case"twitter.com":return new Ml(L,O,E.screenName||null);case"custom":case"anonymous":return new Li(L,null);default:return new Li(L,b,O)}}(y)}class Qo{constructor(g,y,b){this.type=g,this.credential=y,this.auth=b}static _fromIdtoken(g,y){return new Qo("enroll",g,y)}static _fromMfaPendingCredential(g){return new Qo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,b;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Qo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(b=g.multiFactorSession)&&void 0!==b&&b.idToken)return Qo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class bc{constructor(g,y,b){this.session=g,this.hints=y,this.signInResolver=b}static _fromError(g,y){const b=Un(g),O=y.customData._serverResponse,L=(O.mfaInfo||[]).map(xe=>Ue._fromServerResponse(b,xe));Q(O.mfaPendingCredential,b,"internal-error");const ie=Qo._fromMfaPendingCredential(O.mfaPendingCredential);return new bc(ie,L,function(){var xe=(0,h.Z)(function*(it){const vt=yield it._process(b,ie);delete O.mfaInfo,delete O.mfaPendingCredential;const Ft=Object.assign(Object.assign({},O),{idToken:vt.idToken,refreshToken:vt.refreshToken});switch(y.operationType){case"signIn":const Pt=yield ei._fromIdTokenResponse(b,y.operationType,Ft);return yield b._updateCurrentUser(Pt.user),Pt;case"reauthenticate":return Q(y.user,b,"internal-error"),ei._forOperation(y.user,y.operationType,Ft);default:Me(b,"internal-error")}});return function(it){return xe.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,h.Z)(function*(){return y.signInResolver(g)})()}}function Ic(E,g){return bn(E,"POST","/v2/accounts/mfaEnrollment:start",Gt(E,g))}class rp{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(b=>Ue._fromServerResponse(g.auth,b)))})}static _fromUser(g){return new rp(g)}getSession(){var g=this;return(0,h.Z)(function*(){return Qo._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var b=this;return(0,h.Z)(function*(){const O=g,L=yield b.getSession(),ie=yield Er(b.user,O._process(b.user.auth,L,y));return yield b.user._updateTokensIfNecessary(ie),b.user.reload()})()}unenroll(g){var y=this;return(0,h.Z)(function*(){const b="string"==typeof g?g:g.uid,O=yield y.user.getIdToken(),L=yield Er(y.user,function th(E,g){return bn(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(E,g))}(y.user.auth,{idToken:O,mfaEnrollmentId:b}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ie})=>ie!==b),yield y.user._updateTokensIfNecessary(L);try{yield y.user.reload()}catch(ie){if("auth/user-token-expired"!==ie?.code)throw ie}})()}}const Sa=new WeakMap,Yo="__sak";class Dc{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Yo,"1"),this.storage.removeItem(Yo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Iu=(()=>{class E extends Dc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,b)=>this.onStorageEvent(y,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bu(){const E=(0,F.z$)();return Dt(E)||Zt(E)}()&&function Fn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=cs(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const b of Object.keys(this.listeners)){const O=this.storage.getItem(b),L=this.localCache[b];O!==L&&y(b,L,O)}}onStorageEvent(y,b=!1){if(!y.key)return void this.forAllChangedKeys((xe,it,vt)=>{this.notifyListeners(xe,vt)});const O=y.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(O);if(y.newValue!==xe)null!==y.newValue?this.storage.setItem(O,y.newValue):this.storage.removeItem(O);else if(this.localCache[O]===y.newValue&&!b)return}const L=()=>{const xe=this.storage.getItem(O);!b&&this.localCache[O]===xe||this.notifyListeners(O,xe)},ie=this.storage.getItem(O);!function dr(){return(0,F.w1)()&&10===document.documentMode}()||ie===y.newValue||y.newValue===y.oldValue?L():setTimeout(L,10)}notifyListeners(y,b){this.localCache[y]=b;const O=this.listeners[y];if(O)for(const L of Array.from(O))L(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,b,O)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:b,newValue:O}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(b)}_removeListener(y,b){this.listeners[y]&&(this.listeners[y].delete(b),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,b){var O=()=>super._set,L=this;return(0,h.Z)(function*(){yield O().call(L,y,b),L.localCache[y]=JSON.stringify(b)})()}_get(y){var b=()=>super._get,O=this;return(0,h.Z)(function*(){const L=yield b().call(O,y);return O.localCache[y]=JSON.stringify(L),L})()}_remove(y){var b=()=>super._remove,O=this;return(0,h.Z)(function*(){yield b().call(O,y),delete O.localCache[y]})()}}return E.type="LOCAL",E})(),xs=(()=>{class E extends Dc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,b){}_removeListener(y,b){}}return E.type="SESSION",E})();let ih=(()=>{class E{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const b=this.receivers.find(L=>L.isListeningto(y));if(b)return b;const O=new E(y);return this.receivers.push(O),O}isListeningto(y){return this.eventTarget===y}handleEvent(y){var b=this;return(0,h.Z)(function*(){const O=y,{eventId:L,eventType:ie,data:xe}=O.data,it=b.handlersMap[ie];if(!it?.size)return;O.ports[0].postMessage({status:"ack",eventId:L,eventType:ie});const vt=Array.from(it).map(function(){var Pt=(0,h.Z)(function*(ri){return ri(O.origin,xe)});return function(ri){return Pt.apply(this,arguments)}}()),Ft=yield function Du(E){return Promise.all(E.map(function(){var g=(0,h.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(b){return{fulfilled:!1,reason:b}}});return function(y){return g.apply(this,arguments)}}()))}(vt);O.ports[0].postMessage({status:"done",eventId:L,eventType:ie,response:Ft})})()}_subscribe(y,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(b)}_unsubscribe(y,b){this.handlersMap[y]&&b&&this.handlersMap[y].delete(b),(!b||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Tu(E="",g=10){let y="";for(let b=0;b<g;b++)y+=Math.floor(10*Math.random());return E+y}class Pl{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,b=50){var O=this;return(0,h.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let ie,xe;return new Promise((it,vt)=>{const Ft=Tu("",20);L.port1.start();const Pt=setTimeout(()=>{vt(new Error("unsupported_event"))},b);xe={messageChannel:L,onMessage(ri){const vi=ri;if(vi.data.eventId===Ft)switch(vi.data.status){case"ack":clearTimeout(Pt),ie=setTimeout(()=>{vt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),it(vi.data.response);break;default:clearTimeout(Pt),clearTimeout(ie),vt(new Error("invalid_response"))}}},O.handlers.add(xe),L.port1.addEventListener("message",xe.onMessage),O.target.postMessage({eventType:g,eventId:Ft,data:y},[L.port2])}).finally(()=>{xe&&O.removeMessageHandler(xe)})})()}}function gr(){return window}function Tc(){return typeof gr().WorkerGlobalScope<"u"&&"function"==typeof gr().importScripts}function Su(){return(Su=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wo="firebaseLocalStorageDb",bo="firebaseLocalStorage",Nl="fbase_key";class Xo{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Au(E,g){return E.transaction([bo],g?"readwrite":"readonly").objectStore(bo)}function xa(){const E=indexedDB.open(wo,1);return new Promise((g,y)=>{E.addEventListener("error",()=>{y(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore(bo,{keyPath:Nl})}catch(O){y(O)}}),E.addEventListener("success",(0,h.Z)(function*(){const b=E.result;b.objectStoreNames.contains(bo)?g(b):(b.close(),yield function oh(){const E=indexedDB.deleteDatabase(wo);return new Xo(E).toPromise()}(),g(yield xa()))}))})}function Zs(E,g,y){return kl.apply(this,arguments)}function kl(){return(kl=(0,h.Z)(function*(E,g,y){const b=Au(E,!0).put({[Nl]:g,value:y});return new Xo(b).toPromise()})).apply(this,arguments)}function xu(){return(xu=(0,h.Z)(function*(E,g){const y=Au(E,!1).get(g),b=yield new Xo(y).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function ea(E,g){const y=Au(E,!0).delete(g);return new Xo(y).toPromise()}const Ra=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,h.Z)(function*(){return y.db||(y.db=yield xa()),y.db})()}_withRetries(y){var b=this;return(0,h.Z)(function*(){let O=0;for(;;)try{const L=yield b._openDb();return yield y(L)}catch(L){if(O++>3)throw L;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,h.Z)(function*(){return Tc()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,h.Z)(function*(){y.receiver=ih._getInstance(function Ac(){return Tc()?self:null}()),y.receiver._subscribe("keyChanged",function(){var b=(0,h.Z)(function*(O,L){return{keyProcessed:(yield y._poll()).includes(L.key)}});return function(O,L){return b.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var b=(0,h.Z)(function*(O,L){return["keyChanged"]});return function(O,L){return b.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,h.Z)(function*(){var b,O;if(y.activeServiceWorker=yield function Jo(){return Su.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Pl(y.activeServiceWorker);const L=yield y.sender._send("ping",{},800);!L||(null===(b=L[0])||void 0===b?void 0:b.fulfilled)&&(null===(O=L[0])||void 0===O?void 0:O.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var b=this;return(0,h.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Sc(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:y},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const y=yield xa();return yield Zs(y,Yo,"1"),yield ea(y,Yo),!0}catch{}return!1})()}_withPendingWrite(y){var b=this;return(0,h.Z)(function*(){b.pendingWrites++;try{yield y()}finally{b.pendingWrites--}})()}_set(y,b){var O=this;return(0,h.Z)(function*(){return O._withPendingWrite((0,h.Z)(function*(){return yield O._withRetries(L=>Zs(L,y,b)),O.localCache[y]=b,O.notifyServiceWorker(y)}))})()}_get(y){var b=this;return(0,h.Z)(function*(){const O=yield b._withRetries(L=>function xc(E,g){return xu.apply(this,arguments)}(L,y));return b.localCache[y]=O,O})()}_remove(y){var b=this;return(0,h.Z)(function*(){return b._withPendingWrite((0,h.Z)(function*(){return yield b._withRetries(O=>ea(O,y)),delete b.localCache[y],b.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,h.Z)(function*(){const b=yield y._withRetries(ie=>{const xe=Au(ie,!1).getAll();return new Xo(xe).toPromise()});if(!b)return[];if(0!==y.pendingWrites)return[];const O=[],L=new Set;for(const{fbase_key:ie,value:xe}of b)L.add(ie),JSON.stringify(y.localCache[ie])!==JSON.stringify(xe)&&(y.notifyListeners(ie,xe),O.push(ie));for(const ie of Object.keys(y.localCache))y.localCache[ie]&&!L.has(ie)&&(y.notifyListeners(ie,null),O.push(ie));return O})()}notifyListeners(y,b){this.localCache[y]=b;const O=this.listeners[y];if(O)for(const L of Array.from(O))L(b)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(b)}_removeListener(y,b){this.listeners[y]&&(this.listeners[y].delete(b),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Oa(E,g){return bn(E,"POST","/v2/accounts/mfaSignIn:start",Gt(E,g))}function Io(){return(Io=(0,h.Z)(function*(E){return(yield bn(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pa(E){return new Promise((g,y)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=g,b.onerror=O=>{const L=De("internal-error");L.customData=O,y(L)},b.type="text/javascript",b.charset="UTF-8",function Ma(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(b)})}function Mc(E){return`__${E}${Math.floor(1e6*Math.random())}`}const Ru=1e12;class jn{constructor(g){this.auth=g,this.counter=Ru,this._widgets=new Map}render(g,y){const b=this.counter;return this._widgets.set(b,new _m(g,this.auth.name,y||{})),this.counter++,b}reset(g){var y;const b=g||Ru;null===(y=this._widgets.get(b))||void 0===y||y.delete(),this._widgets.delete(b)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Ru))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,h.Z)(function*(){var b;return null===(b=y._widgets.get(g||Ru))||void 0===b||b.execute(),""})()}}class _m{constructor(g,y,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const O="string"==typeof g?document.getElementById(g):g;Q(O,"argument-error",{appName:y}),this.container=O,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function hv(E){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<E;b++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const vm=Mc("rcb"),fv=new wn(3e4,6e4);class ip{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=gr().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return Q(function iI(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(gr().grecaptcha):new Promise((b,O)=>{const L=gr().setTimeout(()=>{O(De(g,"network-request-failed"))},fv.get());gr()[vm]=()=>{gr().clearTimeout(L),delete gr()[vm];const xe=gr().grecaptcha;if(!xe)return void O(De(g,"internal-error"));const it=xe.render;xe.render=(vt,Ft)=>{const Pt=it(vt,Ft);return this.counter++,Pt},this.hostLanguage=y,b(xe)},Pa(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:vm,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(L),O(De(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=gr().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ll{load(g){return(0,h.Z)(function*(){return new jn(g)})()}clearedOneInstance(){}}const gv="recaptcha",mv={theme:"light",type:"image"};class qr{constructor(g,y=Object.assign({},mv),b){this.parameters=y,this.type=gv,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Un(b),this.isInvisible="invisible"===this.parameters.size,Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const O="string"==typeof g?document.getElementById(g):g;Q(O,this.auth,"argument-error"),this.container=O,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ll:new ip,this.validateStartingState()}verify(){var g=this;return(0,h.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),b=g.getAssertedRecaptcha();return b.getResponse(y)||new Promise(L=>{const ie=xe=>{!xe||(g.tokenChangeListeners.delete(ie),L(xe))};g.tokenChangeListeners.add(ie),g.isInvisible&&b.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(b=>b(y)),"function"==typeof g)g(y);else if("string"==typeof g){const b=gr()[g];"function"==typeof b&&b(y)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,h.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const b=document.createElement("div");y.appendChild(b),y=b}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,h.Z)(function*(){Q(St()&&!Tc(),g.auth,"internal-error"),yield function Vl(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function Vi(E){return Io.apply(this,arguments)}(g.auth);Q(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Rs{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=_o._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Pc(){return(Pc=(0,h.Z)(function*(E,g,y){const b=Un(E),O=yield Os(b,g,(0,F.m9)(y));return new Rs(O,L=>Jn(b,L))})).apply(this,arguments)}function st(){return(st=(0,h.Z)(function*(E,g,y){const b=(0,F.m9)(E);yield mn(!1,b,"phone");const O=yield Os(b.auth,g,(0,F.m9)(y));return new Rs(O,L=>lc(b,L))})).apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(E,g,y){const b=(0,F.m9)(E),O=yield Os(b.auth,g,(0,F.m9)(y));return new Rs(O,L=>dc(b,L))})).apply(this,arguments)}function Os(E,g,y){return kc.apply(this,arguments)}function kc(){return(kc=(0,h.Z)(function*(E,g,y){var b;const O=yield y.verify();try{let L;if(Q("string"==typeof O,E,"argument-error"),Q(y.type===gv,E,"argument-error"),L="string"==typeof g?{phoneNumber:g}:g,"session"in L){const ie=L.session;if("phoneNumber"in L)return Q("enroll"===ie.type,E,"internal-error"),(yield Ic(E,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:O}})).phoneSessionInfo.sessionInfo;{Q("signin"===ie.type,E,"internal-error");const xe=(null===(b=L.multiFactorHint)||void 0===b?void 0:b.uid)||L.multiFactorUid;return Q(xe,E,"missing-multi-factor-info"),(yield Oa(E,{mfaPendingCredential:ie.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:O}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield ki(E,{phoneNumber:L.phoneNumber,recaptchaToken:O});return ie}}finally{y._reset()}})).apply(this,arguments)}function gt(){return(gt=(0,h.Z)(function*(E,g){yield Go((0,F.m9)(E),g)})).apply(this,arguments)}let ti=(()=>{class E{constructor(y){this.providerId=E.PROVIDER_ID,this.auth=Un(y)}verifyPhoneNumber(y,b){return Os(this.auth,y,(0,F.m9)(b))}static credential(y,b){return _o._fromVerification(y,b)}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:b,temporaryProof:O}=y;return b&&O?_o._fromTokenResponse(b,O):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Co(E,g){return g?ve(g):(Q(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Ys extends hr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return qe(g,this._buildIdpRequest())}_linkToIdToken(g,y){return qe(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return qe(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function pn(E){return ds(E.auth,new Ys(E),E.bypassAuthState)}function Ou(E){const{auth:g,user:y}=E;return Q(y,g,"internal-error"),qo(y,new Ys(E),E.bypassAuthState)}function Do(E){return sp.apply(this,arguments)}function sp(){return(sp=(0,h.Z)(function*(E){const{auth:g,user:y}=E;return Q(y,g,"internal-error"),Go(y,new Ys(E),E.bypassAuthState)})).apply(this,arguments)}class ah{constructor(g,y,b,O,L=!1){this.auth=g,this.resolver=b,this.user=O,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,h.Z)(function*(b,O){g.pendingPromise={resolve:b,reject:O};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(L){g.reject(L)}});return function(b,O){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,h.Z)(function*(){const{urlResponse:b,sessionId:O,postBody:L,tenantId:ie,error:xe,type:it}=g;if(xe)return void y.reject(xe);const vt={auth:y.auth,requestUri:b,sessionId:O,tenantId:ie||void 0,postBody:L||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(it)(vt))}catch(Ft){y.reject(Ft)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return pn;case"linkViaPopup":case"linkViaRedirect":return Do;case"reauthViaPopup":case"reauthViaRedirect":return Ou;default:Me(this.auth,"internal-error")}}resolve(g){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const op=new wn(2e3,1e4);function ka(){return(ka=(0,h.Z)(function*(E,g,y){const b=Un(E);We(E,g,Hs);const O=Co(b,y);return new Ui(b,"signInViaPopup",g,O).executeNotNull()})).apply(this,arguments)}function Fc(){return(Fc=(0,h.Z)(function*(E,g,y){const b=(0,F.m9)(E);We(b.auth,g,Hs);const O=Co(b.auth,y);return new Ui(b.auth,"reauthViaPopup",g,O,b).executeNotNull()})).apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(E,g,y){const b=(0,F.m9)(E);We(b.auth,g,Hs);const O=Co(b.auth,y);return new Ui(b.auth,"linkViaPopup",g,O,b).executeNotNull()})).apply(this,arguments)}let Ui=(()=>{class E extends ah{constructor(y,b,O,L,ie){super(y,b,L,ie),this.provider=O,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var y=this;return(0,h.Z)(function*(){const b=yield y.execute();return Q(b,y.auth,"internal-error"),b})()}onExecution(){var y=this;return(0,h.Z)(function*(){se(1===y.filter.length,"Popup operations only handle one event");const b=Tu();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],b),y.authWindow.associatedEvent=b,y.resolver._originValidation(y.auth).catch(O=>{y.reject(O)}),y.resolver._isIframeWebStorageSupported(y.auth,O=>{O||y.reject(De(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const y=()=>{var b,O;this.pollId=null!==(O=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==O&&O.closed?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,op.get())};y()}}return E.currentPopupAction=null,E})();const gi=new Map;class Lc extends ah{constructor(g,y,b=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,b),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,h.Z)(function*(){let b=gi.get(y.auth._key());if(!b){try{const L=(yield function Ul(E,g){return Mu.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;b=()=>Promise.resolve(L)}catch(O){b=()=>Promise.reject(O)}gi.set(y.auth._key(),b)}return y.bypassAuthState||gi.set(y.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,b=this;return(0,h.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(b,g);if("unknown"!==g.type){if(g.eventId){const O=yield b.auth._redirectUserForId(g.eventId);if(O)return b.user=O,y().call(b,g);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Mu(){return(Mu=(0,h.Z)(function*(E,g){const y=k(g),b=A(E);if(!(yield b._isAvailable()))return!1;const O="true"===(yield b._get(y));return yield b._remove(y),O})).apply(this,arguments)}function ra(E,g){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,h.Z)(function*(E,g){return A(E)._set(k(g),"true")})).apply(this,arguments)}function T(E,g){gi.set(E._key(),g)}function A(E){return ve(E._redirectPersistence)}function k(E){return oe("pendingRedirect",E.config.apiKey,E.name)}function me(){return(me=(0,h.Z)(function*(E,g,y){const b=Un(E);We(E,g,Hs);const O=Co(b,y);return yield ra(O,b),O._openRedirect(b,g,"signInViaRedirect")})).apply(this,arguments)}function Tt(){return(Tt=(0,h.Z)(function*(E,g,y){const b=(0,F.m9)(E);We(b.auth,g,Hs);const O=Co(b.auth,y);yield ra(O,b.auth);const L=yield Ms(b);return O._openRedirect(b.auth,g,"reauthViaRedirect",L)})).apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(E,g,y){const b=(0,F.m9)(E);We(b.auth,g,Hs);const O=Co(b.auth,y);yield mn(!1,b,g.providerId),yield ra(O,b.auth);const L=yield Ms(b);return O._openRedirect(b.auth,g,"linkViaRedirect",L)})).apply(this,arguments)}function $n(){return($n=(0,h.Z)(function*(E,g){return yield Un(E)._initializationPromise,Ln(E,g,!1)})).apply(this,arguments)}function Ln(E,g){return mr.apply(this,arguments)}function mr(){return(mr=(0,h.Z)(function*(E,g,y=!1){const b=Un(E),O=Co(b,g),ie=yield new Lc(b,O,y).execute();return ie&&!y&&(delete ie.user._redirectEventId,yield b._persistUserIfCurrent(ie.user),yield b._setRedirectUser(null,g)),ie})).apply(this,arguments)}function Ms(E){return xr.apply(this,arguments)}function xr(){return(xr=(0,h.Z)(function*(E){const g=Tu(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class ts{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(g,b)&&(y=!0,this.sendToConsumer(g,b),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function yi(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mi(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var b;if(g.error&&!mi(g)){const O=(null===(b=g.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";y.onError(De(this.auth,O))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const b=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&b}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ia(g))}saveEventToCache(g){this.cachedEventUids.add(ia(g)),this.lastProcessedEventTime=Date.now()}}function ia(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function mi({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===g?.code}function Ps(E){return $l.apply(this,arguments)}function $l(){return($l=(0,h.Z)(function*(E,g={}){return bn(E,"GET","/v1/projects",g)})).apply(this,arguments)}const yv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Em=/^https?/;function ch(){return(ch=(0,h.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield Ps(E);for(const y of g)try{if(Jt(y))return}catch{}Me(E,"unauthorized-domain")})).apply(this,arguments)}function Jt(E){const g=ze(),{protocol:y,hostname:b}=new URL(g);if(E.startsWith("chrome-extension://")){const ie=new URL(E);return""===ie.hostname&&""===b?"chrome-extension:"===y&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&ie.hostname===b}if(!Em.test(y))return!1;if(yv.test(E))return b===E;const O=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+O+"|"+O+")$","i").test(b)}const Hl=new wn(3e4,6e4);function wm(){const E=gr().___jsl;if(E?.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let y=0;y<E.CP.length;y++)E.CP[y]=null}let Gl=null;function vv(E){return Gl=Gl||function sa(E){return new Promise((g,y)=>{var b,O,L;function ie(){wm(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{wm(),y(De(E,"network-request-failed"))},timeout:Hl.get()})}if(null!==(O=null===(b=gr().gapi)||void 0===b?void 0:b.iframes)&&void 0!==O&&O.Iframe)g(gapi.iframes.getContext());else{if(null===(L=gr().gapi)||void 0===L||!L.load){const xe=Mc("iframefcb");return gr()[xe]=()=>{gapi.load?ie():y(De(E,"network-request-failed"))},Pa(`https://apis.google.com/js/api.js?onload=${xe}`).catch(it=>y(it))}ie()}}).catch(g=>{throw Gl=null,g})}(E),Gl}const Xs=new wn(5e3,15e3),wv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _i(E){const g=E.config;Q(g.authDomain,E,"auth-domain-config-required");const y=g.emulator?xn(g,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,b={apiKey:g.apiKey,appName:E.name,v:ne.SDK_VERSION},O=sI.get(E.config.apiHost);O&&(b.eid=O);const L=E._getFrameworks();return L.length&&(b.fw=L.join(",")),`${y}?${(0,F.xO)(b).slice(1)}`}function lh(){return lh=(0,h.Z)(function*(E){const g=yield vv(E),y=gr().gapi;return Q(y,E,"internal-error"),g.open({where:document.body,url:_i(E),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wv,dontclear:!0},b=>new Promise(function(){var O=(0,h.Z)(function*(L,ie){yield b.restyle({setHideOnLeave:!1});const xe=De(E,"network-request-failed"),it=gr().setTimeout(()=>{ie(xe)},Xs.get());function vt(){gr().clearTimeout(it),L(b)}b.ping(vt).then(vt,()=>{ie(xe)})});return function(L,ie){return O.apply(this,arguments)}}()))}),lh.apply(this,arguments)}const oI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bm{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function So(E,g,y,b,O,L){Q(E.config.authDomain,E,"auth-domain-config-required"),Q(E.config.apiKey,E,"invalid-api-key");const ie={apiKey:E.config.apiKey,appName:E.name,authType:y,redirectUrl:b,v:ne.SDK_VERSION,eventId:O};if(g instanceof Hs){g.setDefaultLanguage(E.languageCode),ie.providerId=g.providerId||"",(0,F.xb)(g.getCustomParameters())||(ie.customParameters=JSON.stringify(g.getCustomParameters()));for(const[it,vt]of Object.entries(L||{}))ie[it]=vt}if(g instanceof Gs){const it=g.getScopes().filter(vt=>""!==vt);it.length>0&&(ie.scopes=it.join(","))}E.tenantId&&(ie.tid=E.tenantId);const xe=ie;for(const it of Object.keys(xe))void 0===xe[it]&&delete xe[it];return`${function Xt({config:E}){return E.emulator?xn(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,F.xO)(xe).slice(1)}`}const La="webStorageSupport";class dh extends class Cv{constructor(g){this.factorId=g}_process(g,y,b){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,b);case"signin":return this._finalizeSignIn(g,y.credential);default:return Oe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new dh(g)}_finalizeEnroll(g,y,b){return function Cc(E,g){return bn(E,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(E,g))}(g,{idToken:y,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function Oc(E,g){return bn(E,"POST","/v2/accounts/mfaSignIn:finalize",Gt(E,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hh=(()=>{class E{constructor(){}static assertion(y){return dh._fromCredential(y)}}return E.FACTOR_ID="phone",E})();var fh="@firebase/auth";class Wl{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,h.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(b=>{g(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oa(){return window}function Pu(){return(Pu=(0,h.Z)(function*(E,g,y){var b;const{BuildInfo:O}=oa();se(g.sessionId,"AuthEvent did not contain a session ID");const L=yield Zl(g.sessionId),ie={};return Zt()?ie.ibi=O.packageName:cn()?ie.apn=O.packageName:Me(E,"operation-not-supported-in-this-environment"),O.displayName&&(ie.appDisplayName=O.displayName),ie.sessionId=L,So(E,y,g.type,void 0,null!==(b=g.eventId)&&void 0!==b?b:void 0,ie)})).apply(this,arguments)}function hp(){return(hp=(0,h.Z)(function*(E){const{BuildInfo:g}=oa(),y={};Zt()?y.iosBundleId=g.packageName:cn()?y.androidPackageName=g.packageName:Me(E,"operation-not-supported-in-this-environment"),yield Ps(E,y)})).apply(this,arguments)}function gh(){return(gh=(0,h.Z)(function*(E,g,y){const{cordova:b}=oa();let O=()=>{};try{yield new Promise((L,ie)=>{let xe=null;function it(){var Pt;L();const ri=null===(Pt=b.plugins.browsertab)||void 0===Pt?void 0:Pt.close;"function"==typeof ri&&ri(),"function"==typeof y?.close&&y.close()}function vt(){xe||(xe=window.setTimeout(()=>{ie(De(E,"redirect-cancelled-by-user"))},2e3))}function Ft(){"visible"===document?.visibilityState&&vt()}g.addPassiveListener(it),document.addEventListener("resume",vt,!1),cn()&&document.addEventListener("visibilitychange",Ft,!1),O=()=>{g.removePassiveListener(it),document.removeEventListener("resume",vt,!1),document.removeEventListener("visibilitychange",Ft,!1),xe&&window.clearTimeout(xe)}})}finally{O()}})).apply(this,arguments)}function Zl(E){return pp.apply(this,arguments)}function pp(){return(pp=(0,h.Z)(function*(E){const g=Nu(E),y=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(y)).map(O=>O.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Nu(E){if(se(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(E);const g=new ArrayBuffer(E.length),y=new Uint8Array(g);for(let b=0;b<E.length;b++)y[b]=E.charCodeAt(b);return y}(0,F.Pz)("authIdTokenMaxAge"),function zl(E){(0,ne._registerComponent)(new X.wA("auth",(g,{options:y})=>{const b=g.getProvider("app").getImmediate(),O=g.getProvider("heartbeat"),{apiKey:L,authDomain:ie}=b.options;return((xe,it)=>{Q(L&&!L.includes(":"),"invalid-api-key",{appName:xe.name}),Q(!ie?.includes(":"),"argument-error",{appName:xe.name});const vt={apiKey:L,authDomain:ie,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bs(E)},Ft=new qt(xe,it,vt);return function Ke(E,g){const y=g?.persistence||[],b=(Array.isArray(y)?y:[y]).map(ve);g?.errorMap&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(b,g?.popupRedirectResolver)}(Ft,y),Ft})(b,O)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,b)=>{g.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new X.wA("auth-internal",g=>{const y=Un(g.getProvider("auth").getImmediate());return new Wl(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)(fh,"0.21.0",function Cm(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,ne.registerVersion)(fh,"0.21.0","esm2017")}("Browser");class Sm extends ts{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(g)),super.onEvent(g)}initialized(){var g=this;return(0,h.Z)(function*(){yield g.initPromise})()}}function xm(E){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(E){const g=yield Bc()._get(jc(E));return g&&(yield Bc()._remove(jc(E))),g})).apply(this,arguments)}function Uc(){const E=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const b=Math.floor(Math.random()*g.length);E.push(g.charAt(b))}return E.join("")}function Bc(){return ve(Iu)}function jc(E){return oe("authEvent",E.config.apiKey,E.name)}function aa(E){if(!E?.includes("?"))return{};const[g,...y]=E.split("?");return(0,F.zd)(y.join("?"))}function $c(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:De("no-auth-event")}}function Hc(){var E;return(null===(E=self?.location)||void 0===E?void 0:E.protocol)||null}function to(E=(0,F.z$)()){return!("file:"!==Hc()&&"ionic:"!==Hc()&&"capacitor:"!==Hc()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mm(){try{const E=self.localStorage,g=Tu();if(E)return E.setItem(g,"1"),E.removeItem(g),!function Om(E=(0,F.z$)()){return function Ua(){return(0,F.w1)()&&11===document?.documentMode}()||function Gc(E=(0,F.z$)()){return/Edge\/\d+/.test(E)}(E)}()||(0,F.hl)()}catch{return mh()&&(0,F.hl)()}return!1}function mh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function yh(){return(function Rm(){return"http:"===Hc()||"https:"===Hc()}()||(0,F.ru)()||to())&&!function ed(){return(0,F.b$)()||(0,F.UG)()}()&&Mm()&&!mh()}function Ba(){return to()&&typeof document<"u"}function _h(){return(_h=(0,h.Z)(function*(){return!!Ba()&&new Promise(E=>{const g=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),E(!0)})})})).apply(this,arguments)}const Ns={LOCAL:"local",NONE:"none",SESSION:"session"},ja=Q,Nm="persistence";function td(E){return vh.apply(this,arguments)}function vh(){return(vh=(0,h.Z)(function*(E){yield E._initializationPromise;const g=nd(),y=oe(Nm,E.config.apiKey,E.name);g&&g.setItem(y,E._getPersistence())})).apply(this,arguments)}function nd(){var E;try{return(null===(E=function Mv(){return typeof window<"u"?window:null}())||void 0===E?void 0:E.sessionStorage)||null}catch{return null}}const qc=Q;class zr{constructor(){this.browserResolver=ve(class Ao{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xs,this._completeRedirectFn=Ln,this._overrideRedirectResult=T}_openPopup(g,y,b,O){var L=this;return(0,h.Z)(function*(){var ie;se(null===(ie=L.eventManagers[g._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const xe=So(g,y,b,ze(),O);return function uI(E,g,y,b=500,O=600){const L=Math.max((window.screen.availHeight-O)/2,0).toString(),ie=Math.max((window.screen.availWidth-b)/2,0).toString();let xe="";const it=Object.assign(Object.assign({},oI),{width:b.toString(),height:O.toString(),top:L,left:ie}),vt=(0,F.z$)().toLowerCase();y&&(xe=dn(vt)?"_blank":y),at(vt)&&(g=g||"http://localhost",it.scrollbars="yes");const Ft=Object.entries(it).reduce((ri,[vi,Vu])=>`${ri}${vi}=${Vu},`,"");if(function hi(E=(0,F.z$)()){var g;return Zt(E)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(vt)&&"_self"!==xe)return function Im(E,g){const y=document.createElement("a");y.href=E,y.target=g;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(b)}(g||"",xe),new bm(null);const Pt=window.open(g||"",xe,Ft);Q(Pt,E,"popup-blocked");try{Pt.focus()}catch{}return new bm(Pt)}(g,xe,Tu())})()}_openRedirect(g,y,b,O){var L=this;return(0,h.Z)(function*(){return yield L._originValidation(g),function hs(E){gr().location.href=E}(So(g,y,b,ze(),O)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:O,promise:L}=this.eventManagers[y];return O?Promise.resolve(O):(se(L,"If manager is not set, promise should be"),L)}const b=this.initAndGetManager(g);return this.eventManagers[y]={promise:b},b.catch(()=>{delete this.eventManagers[y]}),b}initAndGetManager(g){var y=this;return(0,h.Z)(function*(){const b=yield function To(E){return lh.apply(this,arguments)}(g),O=new ts(g);return b.register("authEvent",L=>(Q(L?.authEvent,g,"invalid-auth-event"),{status:O.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:O},y.iframes[g._key()]=b,O})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(La,{type:La},O=>{var L;const ie=null===(L=O?.[0])||void 0===L?void 0:L[La];void 0!==ie&&y(!!ie),Me(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function _v(E){return ch.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return cs()||Dt()||Zt()}}),this.cordovaResolver=ve(class yp{constructor(){this._redirectPersistence=xs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ln,this._overrideRedirectResult=T}_initialize(g){var y=this;return(0,h.Z)(function*(){const b=g._key();let O=y.eventManagers.get(b);return O||(O=new Sm(g),y.eventManagers.set(b,O),y.attachCallbackListeners(g,O)),O})()}_openPopup(g){Me(g,"operation-not-supported-in-this-environment")}_openRedirect(g,y,b,O){var L=this;return(0,h.Z)(function*(){!function fp(E){var g,y,b,O,L,ie,xe,it,vt,Ft;const Pt=oa();Q("function"==typeof(null===(g=Pt?.universalLinks)||void 0===g?void 0:g.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Q(typeof(null===(y=Pt?.BuildInfo)||void 0===y?void 0:y.packageName)<"u",E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Q("function"==typeof(null===(L=null===(O=null===(b=Pt?.cordova)||void 0===b?void 0:b.plugins)||void 0===O?void 0:O.browsertab)||void 0===L?void 0:L.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(it=null===(xe=null===(ie=Pt?.cordova)||void 0===ie?void 0:ie.plugins)||void 0===xe?void 0:xe.browsertab)||void 0===it?void 0:it.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(Ft=null===(vt=Pt?.cordova)||void 0===vt?void 0:vt.InAppBrowser)||void 0===Ft?void 0:Ft.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const ie=yield L._initialize(g);yield ie.initialized(),ie.resetRedirect(),function jl(){gi.clear()}(),yield L._originValidation(g);const xe=function Av(E,g,y=null){return{type:g,eventId:y,urlResponse:null,sessionId:Uc(),postBody:null,tenantId:E.tenantId,error:De(E,"no-auth-event")}}(g,b,O);yield function Am(E,g){return Bc()._set(jc(E),g)}(g,xe);const it=yield function Kl(E,g,y){return Pu.apply(this,arguments)}(g,xe,y),vt=yield function Tm(E){const{cordova:g}=oa();return new Promise(y=>{g.plugins.browsertab.isAvailable(b=>{let O=null;b?g.plugins.browsertab.openUrl(E):O=g.InAppBrowser.open(E,function wr(E=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}()?"_blank":"_system","location=yes"),y(O)})})}(it);return function Sv(E,g,y){return gh.apply(this,arguments)}(g,ie,vt)})()}_isIframeWebStorageSupported(g,y){throw new Error("Method not implemented.")}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Tv(E){return hp.apply(this,arguments)}(g)),this.originValidationPromises[y]}attachCallbackListeners(g,y){const{universalLinks:b,handleOpenURL:O,BuildInfo:L}=oa(),ie=setTimeout((0,h.Z)(function*(){yield xm(g),y.onEvent($c())}),500),xe=function(){var Ft=(0,h.Z)(function*(Pt){clearTimeout(ie);const ri=yield xm(g);let vi=null;ri&&Pt?.url&&(vi=function Yl(E,g){var y,b;const O=function Jl(E){const g=aa(E),y=g.link?decodeURIComponent(g.link):void 0,b=aa(y).link,O=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return aa(O).link||O||b||y||E}(g);if(O.includes("/__/auth/callback")){const L=aa(O),ie=L.firebaseError?function gp(E){try{return JSON.parse(E)}catch{return null}}(decodeURIComponent(L.firebaseError)):null,xe=null===(b=null===(y=ie?.code)||void 0===y?void 0:y.split("auth/"))||void 0===b?void 0:b[1],it=xe?De(xe):null;return it?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:it,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:O,postBody:null}}return null}(ri,Pt.url)),y.onEvent(vi||$c())});return function(ri){return Ft.apply(this,arguments)}}();typeof b<"u"&&"function"==typeof b.subscribe&&b.subscribe(null,xe);const it=O,vt=`${L.packageName.toLowerCase()}://`;oa().handleOpenURL=function(){var Ft=(0,h.Z)(function*(Pt){if(Pt.toLowerCase().startsWith(vt)&&xe({url:Pt}),"function"==typeof it)try{it(Pt)}catch(ri){console.error(ri)}});return function(Pt){return Ft.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=xs,this._completeRedirectFn=Ln,this._overrideRedirectResult=T}_initialize(g){var y=this;return(0,h.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,y,b,O){var L=this;return(0,h.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openPopup(g,y,b,O)})()}_openRedirect(g,y,b,O){var L=this;return(0,h.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openRedirect(g,y,b,O)})()}_isIframeWebStorageSupported(g,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,y)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Ba()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,h.Z)(function*(){if(g.underlyingResolver)return;const y=yield function Pm(){return _h.apply(this,arguments)}();g.underlyingResolver=y?g.cordovaResolver:g.browserResolver})()}}function $a(E){return E.unwrap()}function bh(E){return ks(E)}function ks(E){const{_tokenResponse:g}=E instanceof F.ZR?E.customData:E;if(!g)return null;if(!(E instanceof F.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return ti.credentialFromResult(E);const y=g.providerId;if(!y||"password"===y)return null;let b;switch(y){case"google.com":b=ic;break;case"facebook.com":b=pu;break;case"github.com":b=_l;break;case"twitter.com":b=Fi;break;default:const{oauthIdToken:O,oauthAccessToken:L,oauthTokenSecret:ie,pendingToken:xe,nonce:it}=g;return L||ie||O||xe?xe?y.startsWith("saml.")?Ho._create(y,xe):In._fromParams({providerId:y,signInMethod:y,pendingToken:xe,idToken:O,accessToken:L}):new $o(y).credential({idToken:O,accessToken:L,rawNonce:it}):null}return E instanceof F.ZR?b.credentialFromError(E):b.credentialFromResult(E)}function Bi(E,g){return g.catch(y=>{throw y instanceof F.ZR&&function vp(E,g){var y;const b=null===(y=g.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new Fm(E,function sr(E,g){var y;const b=(0,F.m9)(E),O=g;return Q(g.customData.operationType,b,"argument-error"),Q(null===(y=O.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,b,"argument-error"),bc._fromError(b,O)}(E,g));else if(b){const O=ks(g),L=g;O&&(L.credential=O,L.tenantId=b.tenantId||void 0,L.email=b.email||void 0,L.phoneNumber=b.phoneNumber||void 0)}}(E,y),y}).then(y=>{const O=y.user;return{operationType:y.operationType,credential:bh(y),additionalUserInfo:Ec(y),user:Fs.getOrCreate(O)}})}function Ih(E,g){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,h.Z)(function*(E,g){const y=yield g;return{verificationId:y.verificationId,confirm:b=>Bi(E,y.confirm(b))}})).apply(this,arguments)}class Fm{constructor(g,y){this.resolver=y,this.auth=function wh(E){return E.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Bi($a(this.auth),this.resolver.resolveSignIn(g))}}class Fs{constructor(g){this._delegate=g,this.multiFactor=function Aa(E){const g=(0,F.m9)(E);return Sa.has(g)||Sa.set(g,rp._fromUser(g)),Sa.get(g)}(g)}static getOrCreate(g){return Fs.USER_MAP.has(g)||Fs.USER_MAP.set(g,new Fs(g)),Fs.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var y=this;return(0,h.Z)(function*(){return Bi(y.auth,lc(y._delegate,g))})()}linkWithPhoneNumber(g,y){var b=this;return(0,h.Z)(function*(){return Ih(b.auth,function tt(E,g,y){return st.apply(this,arguments)}(b._delegate,g,y))})()}linkWithPopup(g){var y=this;return(0,h.Z)(function*(){return Bi(y.auth,function uh(E,g,y){return Js.apply(this,arguments)}(y._delegate,g,zr))})()}linkWithRedirect(g){var y=this;return(0,h.Z)(function*(){return yield td(Un(y.auth)),function Mt(E,g,y){return function Wt(E,g,y){return ft.apply(this,arguments)}(E,g,y)}(y._delegate,g,zr)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var y=this;return(0,h.Z)(function*(){return Bi(y.auth,dc(y._delegate,g))})()}reauthenticateWithPhoneNumber(g,y){return Ih(this.auth,function Nc(E,g,y){return na.apply(this,arguments)}(this._delegate,g,y))}reauthenticateWithPopup(g){return Bi(this.auth,function Fa(E,g,y){return Fc.apply(this,arguments)}(this._delegate,g,zr))}reauthenticateWithRedirect(g){var y=this;return(0,h.Z)(function*(){return yield td(Un(y.auth)),function je(E,g,y){return function ot(E,g,y){return Tt.apply(this,arguments)}(E,g,y)}(y._delegate,g,zr)})()}sendEmailVerification(g){return function Dl(E,g){return wu.apply(this,arguments)}(this._delegate,g)}unlink(g){var y=this;return(0,h.Z)(function*(){return yield function pi(E,g){return oc.apply(this,arguments)}(y._delegate,g),y})()}updateEmail(g){return function Qd(E,g){return Ko((0,F.m9)(E),g,null)}(this._delegate,g)}updatePassword(g){return function zo(E,g){return Ko((0,F.m9)(E),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function rn(E,g){return gt.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Al(E,g){return xl.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,y){return function Tl(E,g,y){return yc.apply(this,arguments)}(this._delegate,g,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fs.USER_MAP=new WeakMap;const Ha=Q;let ku=(()=>{class E{constructor(y,b){if(this.app=y,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:O}=y.options;Ha(O,"invalid-api-key",{appName:y.name}),Ha(O,"invalid-api-key",{appName:y.name});const L=typeof window<"u"?zr:void 0;this._delegate=b.initialize({options:{persistence:Fu(O,y.name),popupRedirectResolver:L}}),this._delegate._updateErrorMap(Ee),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,b){!function Vo(E,g,y){const b=Un(E);Q(b._canInitEmulator,b,"emulator-config-failed"),Q(/^https?:\/\//.test(g),b,"invalid-emulator-scheme");const O=!!y?.disableWarnings,L=Ki(g),{host:ie,port:xe}=function er(E){const g=Ki(E),y=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!y)return{host:"",port:null};const b=y[2].split("@").pop()||"",O=/^(\[[^\]]+\])(:|$)/.exec(b);if(O){const L=O[1];return{host:L,port:Is(b.substr(L.length+1))}}{const[L,ie]=b.split(":");return{host:L,port:Is(ie)}}}(g);b.config.emulator={url:`${L}//${ie}${null===xe?"":`:${xe}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:ie,port:xe,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:O})}),O||function Cs(){function E(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}(this._delegate,y,b)}applyActionCode(y){return function Xi(E,g){return mu.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return yu(this._delegate,y)}confirmPasswordReset(y,b){return function gc(E,g,y){return Ca.apply(this,arguments)}(this._delegate,y,b)}createUserWithEmailAndPassword(y,b){var O=this;return(0,h.Z)(function*(){return Bi(O._delegate,function _u(E,g,y){return ir.apply(this,arguments)}(O._delegate,y,b))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function mc(E,g){return Eu.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function Ks(E,g){return"EMAIL_SIGNIN"===rc.parseLink(g)?.operation}(0,y)}getRedirectResult(){var y=this;return(0,h.Z)(function*(){Ha(yh(),y._delegate,"operation-not-supported-in-this-environment");const b=yield function or(E,g){return $n.apply(this,arguments)}(y._delegate,zr);return b?Bi(y._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function Xl(E,g){Un(E)._logFramework(g)}(this._delegate,y)}onAuthStateChanged(y,b,O){const{next:L,error:ie,complete:xe}=zc(y,b,O);return this._delegate.onAuthStateChanged(L,ie,xe)}onIdTokenChanged(y,b,O){const{next:L,error:ie,complete:xe}=zc(y,b,O);return this._delegate.onIdTokenChanged(L,ie,xe)}sendSignInLinkToEmail(y,b){return function Il(E,g,y){return Wo.apply(this,arguments)}(this._delegate,y,b)}sendPasswordResetEmail(y,b){return function pc(E,g,y){return rr.apply(this,arguments)}(this._delegate,y,b||void 0)}setPersistence(y){var b=this;return(0,h.Z)(function*(){let O;switch(function km(E,g){ja(Object.values(Ns).includes(g),E,"invalid-persistence-type"),(0,F.b$)()?ja(g!==Ns.SESSION,E,"unsupported-persistence-type"):(0,F.UG)()?ja(g===Ns.NONE,E,"unsupported-persistence-type"):mh()?ja(g===Ns.NONE||g===Ns.LOCAL&&(0,F.hl)(),E,"unsupported-persistence-type"):ja(g===Ns.NONE||Mm(),E,"unsupported-persistence-type")}(b._delegate,y),y){case Ns.SESSION:O=xs;break;case Ns.LOCAL:O=(yield ve(Ra)._isAvailable())?Ra:Iu;break;case Ns.NONE:O=W;break;default:return Me("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(O)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return Bi(this._delegate,function ep(E){return nr.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return Bi(this._delegate,Jn(this._delegate,y))}signInWithCustomToken(y){return Bi(this._delegate,function El(E,g){return gu.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,b){return Bi(this._delegate,function As(E,g,y){return Jn((0,F.m9)(E),Ss.credential(g,y))}(this._delegate,y,b))}signInWithEmailLink(y,b){return Bi(this._delegate,function mm(E,g,y){return vu.apply(this,arguments)}(this._delegate,y,b))}signInWithPhoneNumber(y,b){return Ih(this._delegate,function es(E,g,y){return Pc.apply(this,arguments)}(this._delegate,y,b))}signInWithPopup(y){var b=this;return(0,h.Z)(function*(){return Ha(yh(),b._delegate,"operation-not-supported-in-this-environment"),Bi(b._delegate,function ap(E,g,y){return ka.apply(this,arguments)}(b._delegate,y,zr))})()}signInWithRedirect(y){var b=this;return(0,h.Z)(function*(){return Ha(yh(),b._delegate,"operation-not-supported-in-this-environment"),yield td(b._delegate),function $(E,g,y){return function ue(E,g,y){return me.apply(this,arguments)}(E,g,y)}(b._delegate,y,zr)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function bl(E,g){return Zd.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=Ns,E})();function zc(E,g,y){let b=E;"function"!=typeof E&&({next:b,error:g,complete:y}=E);const O=b;return{next:ie=>O(ie&&Fs.getOrCreate(ie)),error:g,complete:y}}function Fu(E,g){const y=function Eh(E,g){const y=nd();if(!y)return[];const b=oe(Nm,E,g);switch(y.getItem(b)){case Ns.NONE:return[W];case Ns.LOCAL:return[Ra,xs];case Ns.SESSION:return[xs];default:return[]}}(E,g);if(typeof self<"u"&&!y.includes(Ra)&&y.push(Ra),typeof window<"u")for(const b of[Iu,xs])y.includes(b)||y.push(b);return y.includes(W)||y.push(W),y}class Lu{constructor(){this.providerId="phone",this._delegate=new ti($a(z.Z.auth()))}static credential(g,y){return ti.credential(g,y)}verifyPhoneNumber(g,y){return this._delegate.verifyPhoneNumber(g,y)}unwrap(){return this._delegate}}Lu.PHONE_SIGN_IN_METHOD=ti.PHONE_SIGN_IN_METHOD,Lu.PROVIDER_ID=ti.PROVIDER_ID;const Pv=Q;class cI{constructor(g,y,b=z.Z.app()){var O;Pv(null===(O=b.options)||void 0===O?void 0:O.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new qr(g,y,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ch(E){E.INTERNAL.registerComponent(new X.wA("auth-compat",g=>{const y=g.getProvider("app-compat").getImmediate(),b=g.getProvider("auth");return new ku(y,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ss,FacebookAuthProvider:pu,GithubAuthProvider:_l,GoogleAuthProvider:ic,OAuthProvider:$o,SAMLAuthProvider:Yi,PhoneAuthProvider:Lu,PhoneMultiFactorGenerator:hh,RecaptchaVerifier:cI,TwitterAuthProvider:Fi,Auth:ku,AuthCredential:hr,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.3.0")}(z.Z)},8766:(ae,Z,R)=>{R.d(Z,{Lj:()=>Me,X3:()=>Ye});var h=R(5861);let F,ne;const X=new WeakMap,ee=new WeakMap,K=new WeakMap,B=new WeakMap,j=new WeakMap;let Te={get(Q,Oe,se){if(Q instanceof IDBTransaction){if("done"===Oe)return ee.get(Q);if("objectStoreNames"===Oe)return Q.objectStoreNames||K.get(Q);if("store"===Oe)return se.objectStoreNames[1]?void 0:se.objectStore(se.objectStoreNames[0])}return he(Q[Oe])},set:(Q,Oe,se)=>(Q[Oe]=se,!0),has:(Q,Oe)=>Q instanceof IDBTransaction&&("done"===Oe||"store"===Oe)||Oe in Q};function Ie(Q){return"function"==typeof Q?function Qe(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function re(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...Oe){return Q.apply(Ze(this),Oe),he(X.get(this))}:function(...Oe){return he(Q.apply(Ze(this),Oe))}:function(Oe,...se){const de=Q.call(Ze(this),Oe,...se);return K.set(de,Oe.sort?Oe.sort():[Oe]),he(de)}}(Q):(Q instanceof IDBTransaction&&function we(Q){if(ee.has(Q))return;const Oe=new Promise((se,de)=>{const ve=()=>{Q.removeEventListener("complete",ye),Q.removeEventListener("error",Ke),Q.removeEventListener("abort",Ke)},ye=()=>{se(),ve()},Ke=()=>{de(Q.error||new DOMException("AbortError","AbortError")),ve()};Q.addEventListener("complete",ye),Q.addEventListener("error",Ke),Q.addEventListener("abort",Ke)});ee.set(Q,Oe)}(Q),((Q,Oe)=>Oe.some(se=>Q instanceof se))(Q,function q(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,Te):Q)}function he(Q){if(Q instanceof IDBRequest)return function G(Q){const Oe=new Promise((se,de)=>{const ve=()=>{Q.removeEventListener("success",ye),Q.removeEventListener("error",Ke)},ye=()=>{se(he(Q.result)),ve()},Ke=()=>{de(Q.error),ve()};Q.addEventListener("success",ye),Q.addEventListener("error",Ke)});return Oe.then(se=>{se instanceof IDBCursor&&X.set(se,Q)}).catch(()=>{}),j.set(Oe,Q),Oe}(Q);if(B.has(Q))return B.get(Q);const Oe=Ie(Q);return Oe!==Q&&(B.set(Q,Oe),j.set(Oe,Q)),Oe}const Ze=Q=>j.get(Q);function Ye(Q,Oe,{blocked:se,upgrade:de,blocking:ve,terminated:ye}={}){const Ke=indexedDB.open(Q,Oe),ze=he(Ke);return de&&Ke.addEventListener("upgradeneeded",St=>{de(he(Ke.result),St.oldVersion,St.newVersion,he(Ke.transaction))}),se&&Ke.addEventListener("blocked",()=>se()),ze.then(St=>{ye&&St.addEventListener("close",()=>ye()),ve&&St.addEventListener("versionchange",()=>ve())}).catch(()=>{}),ze}function Me(Q,{blocked:Oe}={}){const se=indexedDB.deleteDatabase(Q);return Oe&&se.addEventListener("blocked",()=>Oe()),he(se).then(()=>{})}const De=["get","getKey","getAll","getAllKeys","count"],Pe=["put","add","delete","clear"],We=new Map;function nt(Q,Oe){if(!(Q instanceof IDBDatabase)||Oe in Q||"string"!=typeof Oe)return;if(We.get(Oe))return We.get(Oe);const se=Oe.replace(/FromIndex$/,""),de=Oe!==se,ve=Pe.includes(se);if(!(se in(de?IDBIndex:IDBObjectStore).prototype)||!ve&&!De.includes(se))return;const ye=function(){var Ke=(0,h.Z)(function*(ze,...St){const on=this.transaction(ze,ve?"readwrite":"readonly");let Kt=on.store;return de&&(Kt=Kt.index(St.shift())),(yield Promise.all([Kt[se](...St),ve&&on.done]))[0]});return function(St){return Ke.apply(this,arguments)}}();return We.set(Oe,ye),ye}!function Ee(Q){Te=Q(Te)}(Q=>({...Q,get:(Oe,se,de)=>nt(Oe,se)||Q.get(Oe,se,de),has:(Oe,se)=>!!nt(Oe,se)||Q.has(Oe,se)}))},5861:(ae,Z,R)=>{function h(F,ne,q,re,X,ee,K){try{var B=F[ee](K),j=B.value}catch(G){return void q(G)}B.done?ne(j):Promise.resolve(j).then(re,X)}function z(F){return function(){var ne=this,q=arguments;return new Promise(function(re,X){var ee=F.apply(ne,q);function K(j){h(ee,re,X,K,B,"next",j)}function B(j){h(ee,re,X,K,B,"throw",j)}K(void 0)})}}R.d(Z,{Z:()=>z})}},ae=>{ae(ae.s=8778)}]);